"use strict";(self["webpackChunkFE_useful_code"]=self["webpackChunkFE_useful_code"]||[]).push([[920],{6920:function(t,e,s){s.r(e),s.d(e,{default:function(){return g}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"test-page"},[e("div",{staticClass:"video-part"},[e("video",{ref:"video",staticClass:"video",staticStyle:{width:"640px",height:"480px",background:"#000"},attrs:{autoplay:"",playsinline:""}}),e("div",{staticClass:"video-controls"},[e("el-button",{attrs:{type:"danger",size:"large"},on:{click:t.closeCamera}},[t._v("关闭摄像头")]),e("el-button",{attrs:{type:"primary",size:"large"},on:{click:t.openCamera}},[t._v("打开摄像头")])],1)]),e("div",{staticClass:"img-part"},[e("div",{staticClass:"title"},[t._v("截图列表")]),e("div",{staticClass:"img-list"},[t._l(t.imgSrcList,(function(s,i){return[e("div",{key:i,staticClass:"img-item"},[e("div",[t._v("第"+t._s(i+1)+"张图片")]),e("img",{key:i,staticClass:"img",attrs:{src:s}})])]}))],2)])])},a=[],r=(s(560),s(3925)),c=s.n(r),o={data(){return{stream:null,recognizeTimer:null,imgSrcList:[]}},methods:{async openCamera(){try{this.stream=await navigator.mediaDevices.getUserMedia({video:!0}),this.$refs.video.srcObject=this.stream,this.startRecognize()}catch(t){this.$message.error("无法打开摄像头")}},closeCamera(){this.stream&&(this.stream.getTracks().forEach((t=>t.stop())),this.stream=null,this.$refs.video.srcObject=null),clearInterval(this.recognizeTimer)},startRecognize(){this.recognizeTimer=setInterval(this.recognizeFrame,2e3)},async recognizeFrame(){const t=this.$refs.video,e=document.createElement("canvas");e.width=t.videoWidth||640,e.height=t.videoHeight||480;const s=e.getContext("2d");s.drawImage(t,0,0,e.width,e.height);const i=e.toDataURL("image/png");this.imgSrcList.push(i),console.log(this.imgSrcList);const{data:{text:a}}=await c().recognize(i,"eng");console.log("识别内容:",a)}},beforeDestroy(){this.closeCamera()}},n=o,l=s(1001),d=(0,l.Z)(n,i,a,!1,null,"f12b63f8",null),g=d.exports}}]);
//# sourceMappingURL=920.3224e41c.js.map