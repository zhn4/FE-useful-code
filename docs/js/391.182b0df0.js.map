{"version":3,"file":"js/391.182b0df0.js","mappings":"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,CACE5kC,KAAM,IACN4kC,KAAO,6kBAET,CACE5kC,KAAM,IACN4kC,KAAO,00DAET,CACE5kC,KAAM,IACN4kC,KAAO,m+CAET,CACE5kC,KAAM,KACN4kC,KAAO,qiDAIb,CACE5kC,KAAM,OACN9E,KAAM,WACNuoC,KAAM,CACJ,CACEzjC,KAAM,IACN4kC,KAAO,sXAET,CACE5kC,KAAM,IACN4kC,KAAO,8UAET,CACE5kC,KAAM,IACN4kC,KAAO,0VAET,CACE5kC,KAAM,IACN4kC,KAAO,8SAET,CACE5kC,KAAM,IACN4kC,KAAO,wUAET,CACE5kC,KAAM,IACN4kC,KAAO,+RAET,CACE5kC,KAAM,IACN4kC,KAAO,2SAET,CACE5kC,KAAM,IACN4kC,KAAO,uiBAIb,CACE5kC,KAAM,OACN9E,KAAM,aACNuoC,KAAM,CACJ,CACEzjC,KAAM,IACN4kC,KAAO,2mEAET,CACE5kC,KAAM,IACN4kC,KAAO,4pCAET,CACE5kC,KAAM,IACN4kC,KAAO,uwCAET,CACE5kC,KAAM,IACN4kC,KAAO,ghDAET,CACE5kC,KAAM,IACN4kC,KAAO,84CAET,CACE5kC,KAAM,IACN4kC,KAAO,swCAET,CACE5kC,KAAM,IACN4kC,KAAO,gnBAET,CACE5kC,KAAM,IACN4kC,KAAO,02EAET,CACE5kC,KAAM,IACN4kC,KAAO,khEAET,CACE5kC,KAAM,KACN4kC,KAAO,2oCAET,CACE5kC,KAAM,KACN4kC,KAAO,wvDAET,CACE5kC,KAAM,KACN4kC,KAAO,mvDAET,CACE5kC,KAAM,KACN4kC,KAAO,yyBAET,CACE5kC,KAAM,KACN4kC,KAAO,4vBAET,CACE5kC,KAAM,KACN4kC,KAAO,m6BAET,CACE5kC,KAAM,KACN4kC,KAAO,stDAET,CACE5kC,KAAM,KACN4kC,KAAO,0kEAET,CACE5kC,KAAM,KACN4kC,KAAO,q5DAET,CACE5kC,KAAM,KACN4kC,KAAO,yvCAET,CACE5kC,KAAM,KACN4kC,KAAO,kyDAIb,CACE5kC,KAAM,OACN9E,KAAM,OACNuoC,KAAM,CACJ,CACEzjC,KAAM,IACN4kC,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","sources":["webpack://fe-useful-code/./src/views/mindMap/index.vue","webpack://fe-useful-code/./node_modules/simple-mind-map/src/constants/constant.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/core/view/View.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/core/event/Event.js","webpack://fe-useful-code/./node_modules/simple-mind-map/node_modules/uuid/dist/esm-browser/native.js","webpack://fe-useful-code/./node_modules/simple-mind-map/node_modules/uuid/dist/esm-browser/rng.js","webpack://fe-useful-code/./node_modules/simple-mind-map/node_modules/uuid/dist/esm-browser/stringify.js","webpack://fe-useful-code/./node_modules/simple-mind-map/node_modules/uuid/dist/esm-browser/v4.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/utils/mersenneTwister.js","webpack://fe-useful-code/../src/utils/methods.js","webpack://fe-useful-code/../src/utils/utils.js","webpack://fe-useful-code/../src/modules/core/namespaces.js","webpack://fe-useful-code/../src/utils/window.js","webpack://fe-useful-code/../src/types/Base.js","webpack://fe-useful-code/../src/utils/adopter.js","webpack://fe-useful-code/../src/modules/optional/arrange.js","webpack://fe-useful-code/../src/modules/core/regex.js","webpack://fe-useful-code/../src/modules/optional/class.js","webpack://fe-useful-code/../src/modules/optional/css.js","webpack://fe-useful-code/../src/modules/optional/data.js","webpack://fe-useful-code/../src/modules/optional/memory.js","webpack://fe-useful-code/../src/types/Color.js","webpack://fe-useful-code/../src/types/Point.js","webpack://fe-useful-code/../src/types/Matrix.js","webpack://fe-useful-code/../src/modules/core/parser.js","webpack://fe-useful-code/../src/types/Box.js","webpack://fe-useful-code/../src/types/List.js","webpack://fe-useful-code/../src/modules/core/selector.js","webpack://fe-useful-code/../src/modules/core/event.js","webpack://fe-useful-code/../src/types/EventTarget.js","webpack://fe-useful-code/../src/modules/core/defaults.js","webpack://fe-useful-code/../src/types/SVGArray.js","webpack://fe-useful-code/../src/types/SVGNumber.js","webpack://fe-useful-code/../src/modules/core/attr.js","webpack://fe-useful-code/../src/elements/Dom.js","webpack://fe-useful-code/../src/elements/Element.js","webpack://fe-useful-code/../src/modules/optional/sugar.js","webpack://fe-useful-code/../src/modules/optional/transform.js","webpack://fe-useful-code/../src/elements/Container.js","webpack://fe-useful-code/../src/elements/Defs.js","webpack://fe-useful-code/../src/elements/Shape.js","webpack://fe-useful-code/../src/modules/core/circled.js","webpack://fe-useful-code/../src/elements/Ellipse.js","webpack://fe-useful-code/../src/elements/Fragment.js","webpack://fe-useful-code/../src/modules/core/gradiented.js","webpack://fe-useful-code/../src/elements/Gradient.js","webpack://fe-useful-code/../src/elements/Pattern.js","webpack://fe-useful-code/../src/elements/Image.js","webpack://fe-useful-code/../src/types/PointArray.js","webpack://fe-useful-code/../src/modules/core/pointed.js","webpack://fe-useful-code/../src/elements/Line.js","webpack://fe-useful-code/../src/elements/Marker.js","webpack://fe-useful-code/../src/animation/Controller.js","webpack://fe-useful-code/../src/utils/pathParser.js","webpack://fe-useful-code/../src/types/PathArray.js","webpack://fe-useful-code/../src/animation/Morphable.js","webpack://fe-useful-code/../src/elements/Path.js","webpack://fe-useful-code/../src/modules/core/poly.js","webpack://fe-useful-code/../src/elements/Polygon.js","webpack://fe-useful-code/../src/elements/Polyline.js","webpack://fe-useful-code/../src/elements/Rect.js","webpack://fe-useful-code/../src/animation/Queue.js","webpack://fe-useful-code/../src/animation/Animator.js","webpack://fe-useful-code/../src/animation/Timeline.js","webpack://fe-useful-code/../src/animation/Runner.js","webpack://fe-useful-code/../src/elements/Svg.js","webpack://fe-useful-code/../src/elements/Symbol.js","webpack://fe-useful-code/../src/modules/core/textable.js","webpack://fe-useful-code/../src/elements/Text.js","webpack://fe-useful-code/../src/elements/Tspan.js","webpack://fe-useful-code/../src/elements/Circle.js","webpack://fe-useful-code/../src/elements/ClipPath.js","webpack://fe-useful-code/../src/elements/ForeignObject.js","webpack://fe-useful-code/../src/modules/core/containerGeometry.js","webpack://fe-useful-code/../src/elements/G.js","webpack://fe-useful-code/../src/elements/A.js","webpack://fe-useful-code/../src/elements/Mask.js","webpack://fe-useful-code/../src/elements/Stop.js","webpack://fe-useful-code/../src/elements/Style.js","webpack://fe-useful-code/../src/elements/TextPath.js","webpack://fe-useful-code/../src/elements/Use.js","webpack://fe-useful-code/../src/main.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/theme/default.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/utils/index.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/core/render/node/Style.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/core/render/node/Shape.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/core/render/node/nodeGeneralization.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/svg/btns.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/core/render/node/nodeExpandBtn.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/core/render/node/nodeCommandWraps.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/svg/icons.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/core/render/node/nodeCreateContents.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/core/render/node/nodeExpandBtnPlaceholderRect.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/core/render/node/nodeModifyWidth.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/core/render/node/nodeCooperate.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/core/render/node/quickCreateChildBtn.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/core/render/node/nodeLayout.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/core/render/node/MindMapNode.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/utils/Lru.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/layouts/Base.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/layouts/LogicalStructure.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/layouts/MindMap.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/layouts/CatalogOrganization.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/layouts/OrganizationStructure.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/layouts/Timeline.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/layouts/VerticalTimeline.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/layouts/fishboneUtils.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/layouts/Fishbone.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/core/render/TextEdit.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/core/render/Render.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/theme/index.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/core/command/keyMap.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/core/command/KeyCommand.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/core/command/Command.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/utils/BatchExecution.js","webpack://fe-useful-code/./node_modules/simple-mind-map/src/constants/defaultOptions.js","webpack://fe-useful-code/./node_modules/simple-mind-map/index.js","webpack://fe-useful-code/src/views/mindMap/index.vue","webpack://fe-useful-code/./src/views/mindMap/index.vue?59e5","webpack://fe-useful-code/./src/views/mindMap/index.vue?5de4","webpack://fe-useful-code/./node_modules/eventemitter3/index.js","webpack://fe-useful-code/./node_modules/simple-mind-map/node_modules/deepmerge/dist/cjs.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _vm._m(0)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"}},[_c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"id\":\"mindMapContainer\"}})])\n}]\n\nexport { render, staticRenderFns }","// \r\nexport const CONSTANTS = {\r\n  CHANGE_THEME: 'changeTheme',\r\n  CHANGE_LAYOUT: 'changeLayout',\r\n  MODE: {\r\n    READONLY: 'readonly',\r\n    EDIT: 'edit'\r\n  },\r\n  LAYOUT: {\r\n    LOGICAL_STRUCTURE: 'logicalStructure',\r\n    LOGICAL_STRUCTURE_LEFT: 'logicalStructureLeft',\r\n    MIND_MAP: 'mindMap',\r\n    ORGANIZATION_STRUCTURE: 'organizationStructure',\r\n    CATALOG_ORGANIZATION: 'catalogOrganization',\r\n    TIMELINE: 'timeline',\r\n    TIMELINE2: 'timeline2',\r\n    FISHBONE: 'fishbone',\r\n    FISHBONE2: 'fishbone2',\r\n    RIGHT_FISHBONE: 'rightFishbone',\r\n    RIGHT_FISHBONE2: 'rightFishbone2',\r\n    VERTICAL_TIMELINE: 'verticalTimeline',\r\n    VERTICAL_TIMELINE2: 'verticalTimeline2',\r\n    VERTICAL_TIMELINE3: 'verticalTimeline3'\r\n  },\r\n  DIR: {\r\n    UP: 'up',\r\n    LEFT: 'left',\r\n    DOWN: 'down',\r\n    RIGHT: 'right'\r\n  },\r\n  KEY_DIR: {\r\n    LEFT: 'Left',\r\n    UP: 'Up',\r\n    RIGHT: 'Right',\r\n    DOWN: 'Down'\r\n  },\r\n  SHAPE: {\r\n    RECTANGLE: 'rectangle',\r\n    DIAMOND: 'diamond',\r\n    PARALLELOGRAM: 'parallelogram',\r\n    ROUNDED_RECTANGLE: 'roundedRectangle',\r\n    OCTAGONAL_RECTANGLE: 'octagonalRectangle',\r\n    OUTER_TRIANGULAR_RECTANGLE: 'outerTriangularRectangle',\r\n    INNER_TRIANGULAR_RECTANGLE: 'innerTriangularRectangle',\r\n    ELLIPSE: 'ellipse',\r\n    CIRCLE: 'circle'\r\n  },\r\n  MOUSE_WHEEL_ACTION: {\r\n    ZOOM: 'zoom',\r\n    MOVE: 'move'\r\n  },\r\n  INIT_ROOT_NODE_POSITION: {\r\n    LEFT: 'left',\r\n    TOP: 'top',\r\n    RIGHT: 'right',\r\n    BOTTOM: 'bottom',\r\n    CENTER: 'center'\r\n  },\r\n  LAYOUT_GROW_DIR: {\r\n    LEFT: 'left',\r\n    TOP: 'top',\r\n    RIGHT: 'right',\r\n    BOTTOM: 'bottom'\r\n  },\r\n  PASTE_TYPE: {\r\n    CLIP_BOARD: 'clipBoard',\r\n    CANVAS: 'canvas'\r\n  },\r\n  SCROLL_BAR_DIR: {\r\n    VERTICAL: 'vertical',\r\n    HORIZONTAL: 'horizontal'\r\n  },\r\n  CREATE_NEW_NODE_BEHAVIOR: {\r\n    DEFAULT: 'default',\r\n    NOT_ACTIVE: 'notActive',\r\n    ACTIVE_ONLY: 'activeOnly'\r\n  },\r\n  TAG_PLACEMENT: {\r\n    RIGHT: 'right',\r\n    BOTTOM: 'bottom'\r\n  },\r\n  IMG_PLACEMENT: {\r\n    LEFT: 'left',\r\n    TOP: 'top',\r\n    RIGHT: 'right',\r\n    BOTTOM: 'bottom'\r\n  }\r\n}\r\n\r\nexport const initRootNodePositionMap = {\r\n  [CONSTANTS.INIT_ROOT_NODE_POSITION.LEFT]: 0,\r\n  [CONSTANTS.INIT_ROOT_NODE_POSITION.TOP]: 0,\r\n  [CONSTANTS.INIT_ROOT_NODE_POSITION.RIGHT]: 1,\r\n  [CONSTANTS.INIT_ROOT_NODE_POSITION.BOTTOM]: 1,\r\n  [CONSTANTS.INIT_ROOT_NODE_POSITION.CENTER]: 0.5\r\n}\r\n\r\n//  \r\nexport const layoutList = [\r\n  {\r\n    name: '',\r\n    value: CONSTANTS.LAYOUT.LOGICAL_STRUCTURE\r\n  },\r\n  {\r\n    name: '',\r\n    value: CONSTANTS.LAYOUT.LOGICAL_STRUCTURE_LEFT\r\n  },\r\n  {\r\n    name: '',\r\n    value: CONSTANTS.LAYOUT.MIND_MAP\r\n  },\r\n  {\r\n    name: '',\r\n    value: CONSTANTS.LAYOUT.ORGANIZATION_STRUCTURE\r\n  },\r\n  {\r\n    name: '',\r\n    value: CONSTANTS.LAYOUT.CATALOG_ORGANIZATION\r\n  },\r\n  {\r\n    name: '',\r\n    value: CONSTANTS.LAYOUT.TIMELINE\r\n  },\r\n  {\r\n    name: '2',\r\n    value: CONSTANTS.LAYOUT.TIMELINE2\r\n  },\r\n  {\r\n    name: '',\r\n    value: CONSTANTS.LAYOUT.VERTICAL_TIMELINE\r\n  },\r\n  {\r\n    name: '2',\r\n    value: CONSTANTS.LAYOUT.VERTICAL_TIMELINE2\r\n  },\r\n  {\r\n    name: '3',\r\n    value: CONSTANTS.LAYOUT.VERTICAL_TIMELINE3\r\n  },\r\n  {\r\n    name: '',\r\n    value: CONSTANTS.LAYOUT.FISHBONE\r\n  },\r\n  {\r\n    name: '2',\r\n    value: CONSTANTS.LAYOUT.FISHBONE2\r\n  },\r\n  {\r\n    name: '',\r\n    value: CONSTANTS.LAYOUT.RIGHT_FISHBONE\r\n  },\r\n  {\r\n    name: '2',\r\n    value: CONSTANTS.LAYOUT.RIGHT_FISHBONE2\r\n  }\r\n]\r\nexport const layoutValueList = [\r\n  CONSTANTS.LAYOUT.LOGICAL_STRUCTURE,\r\n  CONSTANTS.LAYOUT.LOGICAL_STRUCTURE_LEFT,\r\n  CONSTANTS.LAYOUT.MIND_MAP,\r\n  CONSTANTS.LAYOUT.CATALOG_ORGANIZATION,\r\n  CONSTANTS.LAYOUT.ORGANIZATION_STRUCTURE,\r\n  CONSTANTS.LAYOUT.TIMELINE,\r\n  CONSTANTS.LAYOUT.TIMELINE2,\r\n  CONSTANTS.LAYOUT.VERTICAL_TIMELINE,\r\n  CONSTANTS.LAYOUT.VERTICAL_TIMELINE2,\r\n  CONSTANTS.LAYOUT.VERTICAL_TIMELINE3,\r\n  CONSTANTS.LAYOUT.FISHBONE,\r\n  CONSTANTS.LAYOUT.FISHBONE2,\r\n  CONSTANTS.LAYOUT.RIGHT_FISHBONE,\r\n  CONSTANTS.LAYOUT.RIGHT_FISHBONE2\r\n]\r\n\r\n// \r\nexport const nodeDataNoStylePropList = [\r\n  'text',\r\n  'image',\r\n  'imageTitle',\r\n  'imageSize',\r\n  'icon',\r\n  'tag',\r\n  'hyperlink',\r\n  'hyperlinkTitle',\r\n  'note',\r\n  'expand',\r\n  'isActive',\r\n  'generalization',\r\n  'richText',\r\n  'resetRichText', // \r\n  'uid',\r\n  'activeStyle',\r\n  'associativeLineTargets',\r\n  'associativeLineTargetControlOffsets',\r\n  'associativeLinePoint',\r\n  'associativeLineText',\r\n  'attachmentUrl',\r\n  'attachmentName',\r\n  'notation',\r\n  'outerFrame',\r\n  'number',\r\n  'range',\r\n  'customLeft',\r\n  'customTop',\r\n  'customTextWidth',\r\n  'checkbox',\r\n  'dir',\r\n  'needUpdate', // \r\n  'imgMap',\r\n  'nodeLink'\r\n]\r\n\r\n// \r\nexport const ERROR_TYPES = {\r\n  READ_CLIPBOARD_ERROR: 'read_clipboard_error',\r\n  PARSE_PASTE_DATA_ERROR: 'parse_paste_data_error',\r\n  CUSTOM_HANDLE_CLIPBOARD_TEXT_ERROR: 'custom_handle_clipboard_text_error',\r\n  LOAD_CLIPBOARD_IMAGE_ERROR: 'load_clipboard_image_error',\r\n  BEFORE_TEXT_EDIT_ERROR: 'before_text_edit_error',\r\n  EXPORT_ERROR: 'export_error',\r\n  EXPORT_LOAD_IMAGE_ERROR: 'export_load_image_error',\r\n  DATA_CHANGE_DETAIL_EVENT_ERROR: 'data_change_detail_event_error'\r\n}\r\n\r\n// css\r\nexport const cssContent = `\r\n  /* hover */\r\n  .smm-hover-node{\r\n    display: none;\r\n    opacity: 0.6;\r\n    stroke-width: 1;\r\n  }\r\n\r\n  .smm-node:not(.smm-node-dragging):hover .smm-hover-node{\r\n    display: block;\r\n  }\r\n\r\n  .smm-node.active .smm-hover-node, .smm-node-highlight .smm-hover-node{\r\n    display: block;\r\n    opacity: 1;\r\n    stroke-width: 2;\r\n  }\r\n\r\n  .smm-text-node-wrap, .smm-expand-btn-text {\r\n    user-select: none;\r\n  }\r\n`\r\n\r\n// html\r\nexport const selfCloseTagList = [\r\n  'img',\r\n  'br',\r\n  'hr',\r\n  'input',\r\n  'link',\r\n  'meta',\r\n  'area'\r\n]\r\n\r\n// \r\nexport const noneRichTextNodeLineHeight = 1.2\r\n\r\n// \r\nexport const richTextSupportStyleList = [\r\n  'fontFamily',\r\n  'fontSize',\r\n  'fontWeight',\r\n  'fontStyle',\r\n  'textDecoration',\r\n  'color',\r\n  'textAlign'\r\n]\r\n","import { CONSTANTS } from '../../constants/constant'\r\n\r\n//  \r\nclass View {\r\n  //  \r\n  constructor(opt = {}) {\r\n    this.opt = opt\r\n    this.mindMap = this.opt.mindMap\r\n    this.scale = 1\r\n    this.sx = 0\r\n    this.sy = 0\r\n    this.x = 0\r\n    this.y = 0\r\n    this.firstDrag = true\r\n    this.setTransformData(this.mindMap.opt.viewData)\r\n    this.bind()\r\n  }\r\n\r\n  //  \r\n  bind() {\r\n    // \r\n    this.mindMap.keyCommand.addShortcut('Control+=', () => {\r\n      this.enlarge()\r\n    })\r\n    this.mindMap.keyCommand.addShortcut('Control+-', () => {\r\n      this.narrow()\r\n    })\r\n    this.mindMap.keyCommand.addShortcut('Control+i', () => {\r\n      this.fit()\r\n    })\r\n    // \r\n    this.mindMap.event.on('mousedown', e => {\r\n      const { isDisableDrag, mousedownEventPreventDefault } = this.mindMap.opt\r\n      if (isDisableDrag) return\r\n      if (mousedownEventPreventDefault) {\r\n        e.preventDefault()\r\n      }\r\n      this.sx = this.x\r\n      this.sy = this.y\r\n    })\r\n    this.mindMap.event.on('drag', (e, event) => {\r\n      // ctrl\r\n      // \r\n      if (e.ctrlKey || e.metaKey || this.mindMap.opt.isDisableDrag) {\r\n        return\r\n      }\r\n      if (this.firstDrag) {\r\n        this.firstDrag = false\r\n        // \r\n        if (this.mindMap.renderer.activeNodeList.length > 0) {\r\n          this.mindMap.execCommand('CLEAR_ACTIVE_NODE')\r\n        }\r\n      }\r\n      this.x = this.sx + event.mousemoveOffset.x\r\n      this.y = this.sy + event.mousemoveOffset.y\r\n      this.transform()\r\n    })\r\n    this.mindMap.event.on('mouseup', () => {\r\n      this.firstDrag = true\r\n    })\r\n    // \r\n    this.mindMap.event.on('mousewheel', (e, dirs, event, isTouchPad) => {\r\n      const {\r\n        customHandleMousewheel,\r\n        mousewheelAction,\r\n        mouseScaleCenterUseMousePosition,\r\n        mousewheelMoveStep,\r\n        mousewheelZoomActionReverse,\r\n        disableMouseWheelZoom,\r\n        translateRatio\r\n      } = this.mindMap.opt\r\n      // \r\n      if (\r\n        customHandleMousewheel &&\r\n        typeof customHandleMousewheel === 'function'\r\n      ) {\r\n        return customHandleMousewheel(e)\r\n      }\r\n      // 1.\r\n      if (\r\n        mousewheelAction === CONSTANTS.MOUSE_WHEEL_ACTION.ZOOM ||\r\n        e.ctrlKey ||\r\n        e.metaKey\r\n      ) {\r\n        if (disableMouseWheelZoom) return\r\n        const { x: clientX, y: clientY } = this.mindMap.toPos(\r\n          e.clientX,\r\n          e.clientY\r\n        )\r\n        const cx = mouseScaleCenterUseMousePosition ? clientX : undefined\r\n        const cy = mouseScaleCenterUseMousePosition ? clientY : undefined\r\n        // \r\n        if (\r\n          isTouchPad &&\r\n          (dirs.includes(CONSTANTS.DIR.LEFT) ||\r\n            dirs.includes(CONSTANTS.DIR.RIGHT))\r\n        ) {\r\n          dirs = dirs.filter(dir => {\r\n            return ![CONSTANTS.DIR.LEFT, CONSTANTS.DIR.RIGHT].includes(dir)\r\n          })\r\n        }\r\n        switch (true) {\r\n          // \r\n          case dirs.includes(CONSTANTS.DIR.UP || CONSTANTS.DIR.LEFT):\r\n            mousewheelZoomActionReverse\r\n              ? this.enlarge(cx, cy, isTouchPad)\r\n              : this.narrow(cx, cy, isTouchPad)\r\n            break\r\n          // \r\n          case dirs.includes(CONSTANTS.DIR.DOWN || CONSTANTS.DIR.RIGHT):\r\n            mousewheelZoomActionReverse\r\n              ? this.narrow(cx, cy, isTouchPad)\r\n              : this.enlarge(cx, cy, isTouchPad)\r\n            break\r\n        }\r\n      } else {\r\n        // 2.\r\n        let stepX = 0\r\n        let stepY = 0\r\n        if (isTouchPad) {\r\n          // \r\n          stepX = Math.abs(e.wheelDeltaX)\r\n          stepY = Math.abs(e.wheelDeltaY)\r\n        } else {\r\n          stepX = stepY = mousewheelMoveStep\r\n        }\r\n        let mx = 0\r\n        let my = 0\r\n        // \r\n        if (dirs.includes(CONSTANTS.DIR.DOWN)) {\r\n          my = -stepY\r\n        }\r\n        // \r\n        if (dirs.includes(CONSTANTS.DIR.UP)) {\r\n          my = stepY\r\n        }\r\n        // \r\n        if (dirs.includes(CONSTANTS.DIR.LEFT)) {\r\n          mx = stepX\r\n        }\r\n        // \r\n        if (dirs.includes(CONSTANTS.DIR.RIGHT)) {\r\n          mx = -stepX\r\n        }\r\n        this.translateXY(mx * translateRatio, my * translateRatio)\r\n      }\r\n    })\r\n    this.mindMap.on('resize', () => {\r\n      if (!this.checkNeedMindMapInCanvas()) return\r\n      this.transform()\r\n    })\r\n  }\r\n\r\n  //  \r\n  getTransformData() {\r\n    return {\r\n      transform: this.mindMap.draw.transform(),\r\n      state: {\r\n        scale: this.scale,\r\n        x: this.x,\r\n        y: this.y,\r\n        sx: this.sx,\r\n        sy: this.sy\r\n      }\r\n    }\r\n  }\r\n\r\n  //  \r\n  setTransformData(viewData) {\r\n    if (viewData) {\r\n      Object.keys(viewData.state).forEach(prop => {\r\n        this[prop] = viewData.state[prop]\r\n      })\r\n      this.mindMap.draw.transform({\r\n        ...viewData.transform\r\n      })\r\n      this.mindMap.emit('view_data_change', this.getTransformData())\r\n      this.emitEvent('scale')\r\n      this.emitEvent('translate')\r\n    }\r\n  }\r\n\r\n  //  x,y\r\n  translateXY(x, y) {\r\n    if (x === 0 && y === 0) return\r\n    this.x += x\r\n    this.y += y\r\n    this.transform()\r\n    this.emitEvent('translate')\r\n  }\r\n\r\n  //  x\r\n  translateX(step) {\r\n    if (step === 0) return\r\n    this.x += step\r\n    this.transform()\r\n    this.emitEvent('translate')\r\n  }\r\n\r\n  //  x\r\n  translateXTo(x) {\r\n    this.x = x\r\n    this.transform()\r\n    this.emitEvent('translate')\r\n  }\r\n\r\n  //  y\r\n  translateY(step) {\r\n    if (step === 0) return\r\n    this.y += step\r\n    this.transform()\r\n    this.emitEvent('translate')\r\n  }\r\n\r\n  //  y\r\n  translateYTo(y) {\r\n    this.y = y\r\n    this.transform()\r\n    this.emitEvent('translate')\r\n  }\r\n\r\n  //   \r\n  transform() {\r\n    try {\r\n      this.limitMindMapInCanvas()\r\n    } catch (error) {}\r\n    this.mindMap.draw.transform({\r\n      origin: [0, 0],\r\n      scale: this.scale,\r\n      translate: [this.x, this.y]\r\n    })\r\n    this.mindMap.emit('view_data_change', this.getTransformData())\r\n  }\r\n\r\n  //  \r\n  reset() {\r\n    const scaleChange = this.scale !== 1\r\n    const translateChange = this.x !== 0 || this.y !== 0\r\n    this.scale = 1\r\n    this.x = 0\r\n    this.y = 0\r\n    this.transform()\r\n    if (scaleChange) {\r\n      this.emitEvent('scale')\r\n    }\r\n    if (translateChange) {\r\n      this.emitEvent('translate')\r\n    }\r\n  }\r\n\r\n  //  \r\n  narrow(cx, cy, isTouchPad) {\r\n    let { scaleRatio, minZoomRatio } = this.mindMap.opt\r\n    scaleRatio = scaleRatio / (isTouchPad ? 5 : 1)\r\n    const scale = Math.max(this.scale - scaleRatio, minZoomRatio / 100)\r\n    this.scaleInCenter(scale, cx, cy)\r\n    this.transform()\r\n    this.emitEvent('scale')\r\n  }\r\n\r\n  //  \r\n  enlarge(cx, cy, isTouchPad) {\r\n    let { scaleRatio, maxZoomRatio } = this.mindMap.opt\r\n    scaleRatio = scaleRatio / (isTouchPad ? 5 : 1)\r\n    let scale = 0\r\n    if (maxZoomRatio === -1) {\r\n      scale = this.scale + scaleRatio\r\n    } else {\r\n      scale = Math.min(this.scale + scaleRatio, maxZoomRatio / 100)\r\n    }\r\n    this.scaleInCenter(scale, cx, cy)\r\n    this.transform()\r\n    this.emitEvent('scale')\r\n  }\r\n\r\n  // cxcy \r\n  scaleInCenter(scale, cx, cy) {\r\n    if (cx === undefined || cy === undefined) {\r\n      cx = this.mindMap.width / 2\r\n      cy = this.mindMap.height / 2\r\n    }\r\n    const prevScale = this.scale\r\n    const ratio = 1 - scale / prevScale\r\n    const dx = (cx - this.x) * ratio\r\n    const dy = (cy - this.y) * ratio\r\n    this.x += dx\r\n    this.y += dy\r\n    this.scale = scale\r\n  }\r\n\r\n  //  \r\n  setScale(scale, cx, cy) {\r\n    if (cx !== undefined && cy !== undefined) {\r\n      this.scaleInCenter(scale, cx, cy)\r\n    } else {\r\n      this.scale = scale\r\n    }\r\n    this.transform()\r\n    this.emitEvent('scale')\r\n  }\r\n\r\n  // \r\n  fit(getRbox = () => {}, enlarge = false, fitPadding) {\r\n    fitPadding =\r\n      fitPadding === undefined ? this.mindMap.opt.fitPadding : fitPadding\r\n    const draw = this.mindMap.draw\r\n    const origTransform = draw.transform()\r\n    const rect = getRbox() || draw.rbox()\r\n    const drawWidth = rect.width / origTransform.scaleX\r\n    const drawHeight = rect.height / origTransform.scaleY\r\n    const drawRatio = drawWidth / drawHeight\r\n    let { width: elWidth, height: elHeight } = this.mindMap.elRect\r\n    elWidth = elWidth - fitPadding * 2\r\n    elHeight = elHeight - fitPadding * 2\r\n    const elRatio = elWidth / elHeight\r\n    let newScale = 0\r\n    let flag = ''\r\n    if (drawWidth <= elWidth && drawHeight <= elHeight && !enlarge) {\r\n      newScale = 1\r\n      flag = 1\r\n    } else {\r\n      let newWidth = 0\r\n      let newHeight = 0\r\n      if (drawRatio > elRatio) {\r\n        newWidth = elWidth\r\n        newHeight = elWidth / drawRatio\r\n        flag = 2\r\n      } else {\r\n        newHeight = elHeight\r\n        newWidth = elHeight * drawRatio\r\n        flag = 3\r\n      }\r\n      newScale = newWidth / drawWidth\r\n    }\r\n    this.setScale(newScale)\r\n    const newRect = getRbox() || draw.rbox()\r\n    // \r\n    newRect.x -= this.mindMap.elRect.left\r\n    newRect.y -= this.mindMap.elRect.top\r\n    let newX = 0\r\n    let newY = 0\r\n    if (flag === 1) {\r\n      newX = -newRect.x + fitPadding + (elWidth - newRect.width) / 2\r\n      newY = -newRect.y + fitPadding + (elHeight - newRect.height) / 2\r\n    } else if (flag === 2) {\r\n      newX = -newRect.x + fitPadding\r\n      newY = -newRect.y + fitPadding + (elHeight - newRect.height) / 2\r\n    } else if (flag === 3) {\r\n      newX = -newRect.x + fitPadding + (elWidth - newRect.width) / 2\r\n      newY = -newRect.y + fitPadding\r\n    }\r\n    this.translateXY(newX, newY)\r\n  }\r\n\r\n  // \r\n  checkNeedMindMapInCanvas() {\r\n    // \r\n    if (this.mindMap.demonstrate && this.mindMap.demonstrate.isInDemonstrate) {\r\n      return false\r\n    }\r\n    const { isLimitMindMapInCanvasWhenHasScrollbar, isLimitMindMapInCanvas } =\r\n      this.mindMap.opt\r\n    // isLimitMindMapInCanvasWhenHasScrollbar\r\n    if (this.mindMap.scrollbar) {\r\n      return isLimitMindMapInCanvasWhenHasScrollbar\r\n    } else {\r\n      // isLimitMindMapInCanvas\r\n      return isLimitMindMapInCanvas\r\n    }\r\n  }\r\n\r\n  // \r\n  limitMindMapInCanvas() {\r\n    if (!this.checkNeedMindMapInCanvas()) return\r\n\r\n    let { scale, left, top, right, bottom } = this.getPositionLimit()\r\n\r\n    // \r\n    const centerXChange =\r\n      ((this.mindMap.width - this.mindMap.initWidth) / 2) * scale\r\n    const centerYChange =\r\n      ((this.mindMap.height - this.mindMap.initHeight) / 2) * scale\r\n\r\n    // \r\n    const scaleRatio = this.scale / scale\r\n    left *= scaleRatio\r\n    right *= scaleRatio\r\n    top *= scaleRatio\r\n    bottom *= scaleRatio\r\n\r\n    // \r\n    const centerX = this.mindMap.width / 2\r\n    const centerY = this.mindMap.height / 2\r\n    const scaleOffset = this.scale - 1\r\n    left -= scaleOffset * centerX - centerXChange\r\n    right -= scaleOffset * centerX - centerXChange\r\n    top -= scaleOffset * centerY - centerYChange\r\n    bottom -= scaleOffset * centerY - centerYChange\r\n\r\n    // \r\n    if (this.x > left) {\r\n      this.x = left\r\n    }\r\n    if (this.x < right) {\r\n      this.x = right\r\n    }\r\n    if (this.y > top) {\r\n      this.y = top\r\n    }\r\n    if (this.y < bottom) {\r\n      this.y = bottom\r\n    }\r\n  }\r\n\r\n  // \r\n  getPositionLimit() {\r\n    const { scaleX, scaleY } = this.mindMap.draw.transform()\r\n    const drawRect = this.mindMap.draw.rbox()\r\n    const rootRect = this.mindMap.renderer.root.group.rbox()\r\n    const rootCenterOffset = this.mindMap.renderer.layout.getRootCenterOffset(\r\n      rootRect.width,\r\n      rootRect.height\r\n    )\r\n    const left = rootRect.x - drawRect.x - rootCenterOffset.x * scaleX\r\n    const right = rootRect.x - drawRect.x2 - rootCenterOffset.x * scaleX\r\n    const top = rootRect.y - drawRect.y - rootCenterOffset.y * scaleY\r\n    const bottom = rootRect.y - drawRect.y2 - rootCenterOffset.y * scaleY\r\n    return {\r\n      scale: scaleX,\r\n      left,\r\n      right,\r\n      top,\r\n      bottom\r\n    }\r\n  }\r\n\r\n  // \r\n  emitEvent(type) {\r\n    switch (type) {\r\n      case 'scale':\r\n        this.mindMap.emit('scale', this.scale)\r\n      case 'translate':\r\n        this.mindMap.emit('translate', this.x, this.y)\r\n    }\r\n  }\r\n}\r\n\r\nexport default View\r\n","import EventEmitter from 'eventemitter3'\r\nimport { CONSTANTS } from '../../constants/constant'\r\n\r\n//  \r\nclass Event extends EventEmitter {\r\n  //  \r\n  constructor(opt = {}) {\r\n    super()\r\n    this.opt = opt\r\n    this.mindMap = opt.mindMap\r\n    this.isLeftMousedown = false\r\n    this.isRightMousedown = false\r\n    this.isMiddleMousedown = false\r\n    this.mousedownPos = {\r\n      x: 0,\r\n      y: 0\r\n    }\r\n    this.mousemovePos = {\r\n      x: 0,\r\n      y: 0\r\n    }\r\n    this.mousemoveOffset = {\r\n      x: 0,\r\n      y: 0\r\n    }\r\n    this.bindFn()\r\n    this.bind()\r\n  }\r\n\r\n  //  \r\n  bindFn() {\r\n    this.onBodyMousedown = this.onBodyMousedown.bind(this)\r\n    this.onBodyClick = this.onBodyClick.bind(this)\r\n    this.onDrawClick = this.onDrawClick.bind(this)\r\n    this.onMousedown = this.onMousedown.bind(this)\r\n    this.onMousemove = this.onMousemove.bind(this)\r\n    this.onMouseup = this.onMouseup.bind(this)\r\n    this.onNodeMouseup = this.onNodeMouseup.bind(this)\r\n    this.onMousewheel = this.onMousewheel.bind(this)\r\n    this.onContextmenu = this.onContextmenu.bind(this)\r\n    this.onSvgMousedown = this.onSvgMousedown.bind(this)\r\n    this.onKeyup = this.onKeyup.bind(this)\r\n    this.onMouseenter = this.onMouseenter.bind(this)\r\n    this.onMouseleave = this.onMouseleave.bind(this)\r\n  }\r\n\r\n  //  \r\n  bind() {\r\n    document.body.addEventListener('mousedown', this.onBodyMousedown)\r\n    document.body.addEventListener('click', this.onBodyClick)\r\n    this.mindMap.svg.on('click', this.onDrawClick)\r\n    this.mindMap.el.addEventListener('mousedown', this.onMousedown)\r\n    this.mindMap.svg.on('mousedown', this.onSvgMousedown)\r\n    window.addEventListener('mousemove', this.onMousemove)\r\n    window.addEventListener('mouseup', this.onMouseup)\r\n    this.on('node_mouseup', this.onNodeMouseup)\r\n    this.mindMap.el.addEventListener('wheel', this.onMousewheel)\r\n    this.mindMap.svg.on('contextmenu', this.onContextmenu)\r\n    this.mindMap.svg.on('mouseenter', this.onMouseenter)\r\n    this.mindMap.svg.on('mouseleave', this.onMouseleave)\r\n    window.addEventListener('keyup', this.onKeyup)\r\n  }\r\n\r\n  //  \r\n  unbind() {\r\n    document.body.removeEventListener('mousedown', this.onBodyMousedown)\r\n    document.body.removeEventListener('click', this.onBodyClick)\r\n    this.mindMap.svg.off('click', this.onDrawClick)\r\n    this.mindMap.el.removeEventListener('mousedown', this.onMousedown)\r\n    window.removeEventListener('mousemove', this.onMousemove)\r\n    window.removeEventListener('mouseup', this.onMouseup)\r\n    this.off('node_mouseup', this.onNodeMouseup)\r\n    this.mindMap.el.removeEventListener('wheel', this.onMousewheel)\r\n    this.mindMap.svg.off('contextmenu', this.onContextmenu)\r\n    this.mindMap.svg.off('mouseenter', this.onMouseenter)\r\n    this.mindMap.svg.off('mouseleave', this.onMouseleave)\r\n    window.removeEventListener('keyup', this.onKeyup)\r\n  }\r\n\r\n  //   \r\n  onDrawClick(e) {\r\n    this.emit('draw_click', e)\r\n  }\r\n\r\n  // \r\n  onBodyMousedown(e) {\r\n    this.emit('body_mousedown', e)\r\n  }\r\n\r\n  // \r\n  onBodyClick(e) {\r\n    this.emit('body_click', e)\r\n  }\r\n\r\n  //   svg\r\n  onSvgMousedown(e) {\r\n    this.emit('svg_mousedown', e)\r\n  }\r\n\r\n  //  \r\n  onMousedown(e) {\r\n    // \r\n    if (e.which === 1) {\r\n      this.isLeftMousedown = true\r\n    } else if (e.which === 3) {\r\n      this.isRightMousedown = true\r\n    } else if (e.which === 2) {\r\n      this.isMiddleMousedown = true\r\n    }\r\n    this.mousedownPos.x = e.clientX\r\n    this.mousedownPos.y = e.clientY\r\n    this.emit('mousedown', e, this)\r\n  }\r\n\r\n  //  \r\n  onMousemove(e) {\r\n    let { useLeftKeySelectionRightKeyDrag } = this.mindMap.opt\r\n    this.mousemovePos.x = e.clientX\r\n    this.mousemovePos.y = e.clientY\r\n    this.mousemoveOffset.x = e.clientX - this.mousedownPos.x\r\n    this.mousemoveOffset.y = e.clientY - this.mousedownPos.y\r\n    this.emit('mousemove', e, this)\r\n    if (\r\n      this.isMiddleMousedown ||\r\n      (useLeftKeySelectionRightKeyDrag\r\n        ? this.isRightMousedown\r\n        : this.isLeftMousedown)\r\n    ) {\r\n      e.preventDefault()\r\n      this.emit('drag', e, this)\r\n    }\r\n  }\r\n\r\n  //  \r\n  onMouseup(e) {\r\n    this.onNodeMouseup()\r\n    this.emit('mouseup', e, this)\r\n  }\r\n\r\n  // \r\n  onNodeMouseup() {\r\n    this.isLeftMousedown = false\r\n    this.isRightMousedown = false\r\n    this.isMiddleMousedown = false\r\n  }\r\n\r\n  //  /\r\n  onMousewheel(e) {\r\n    e.stopPropagation()\r\n    e.preventDefault()\r\n    const dirs = []\r\n    if (e.deltaY < 0) dirs.push(CONSTANTS.DIR.UP)\r\n    if (e.deltaY > 0) dirs.push(CONSTANTS.DIR.DOWN)\r\n    if (e.deltaX < 0) dirs.push(CONSTANTS.DIR.LEFT)\r\n    if (e.deltaX > 0) dirs.push(CONSTANTS.DIR.RIGHT)\r\n    // \r\n    let isTouchPad = false\r\n    // macwindows\r\n    // if (e.wheelDeltaY === e.deltaY * -3 || Math.abs(e.wheelDeltaY) <= 10) {\r\n    //   isTouchPad = true\r\n    // }\r\n    const { customCheckIsTouchPad } = this.mindMap.opt\r\n    if (typeof customCheckIsTouchPad === 'function') {\r\n      isTouchPad = customCheckIsTouchPad(e)\r\n    } else {\r\n      isTouchPad = Math.abs(e.deltaY) <= 10\r\n    }\r\n    this.emit('mousewheel', e, dirs, this, isTouchPad)\r\n  }\r\n\r\n  //  \r\n  onContextmenu(e) {\r\n    e.preventDefault()\r\n    // Macctrlcontextmenu\r\n    if (e.ctrlKey) return\r\n    this.emit('contextmenu', e)\r\n  }\r\n\r\n  //  \r\n  onKeyup(e) {\r\n    this.emit('keyup', e)\r\n  }\r\n\r\n  // \r\n  onMouseenter(e) {\r\n    this.emit('svg_mouseenter', e)\r\n  }\r\n\r\n  // \r\n  onMouseleave(e) {\r\n    this.emit('svg_mouseleave', e)\r\n  }\r\n}\r\n\r\nexport default Event\r\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","/**\r\n * @description PRNGMersenne TwisterPRNG\r\n *\r\n * @param {*} seed\r\n */\r\n\r\nexport default function MersenneTwister(seed) {\r\n  this.N = 624\r\n  this.M = 397\r\n  this.MATRIX_A = 0x9908b0df\r\n  this.UPPER_MASK = 0x80000000\r\n  this.LOWER_MASK = 0x7fffffff\r\n\r\n  this.mt = new Array(this.N)\r\n  this.mti = this.N + 1\r\n\r\n  this.init_genrand(seed)\r\n}\r\n\r\nMersenneTwister.prototype.init_genrand = function (s) {\r\n  this.mt[0] = s >>> 0\r\n  for (this.mti = 1; this.mti < this.N; this.mti++) {\r\n    s = this.mt[this.mti - 1] ^ (this.mt[this.mti - 1] >>> 30)\r\n    this.mt[this.mti] =\r\n      ((((s & 0xffff0000) >>> 16) * 1812433253) << 16) +\r\n      (s & 0x0000ffff) * 1812433253 +\r\n      this.mti\r\n    this.mt[this.mti] >>>= 0\r\n  }\r\n}\r\n\r\nMersenneTwister.prototype.genrand_int32 = function () {\r\n  var y\r\n  var mag01 = new Array(0x0, this.MATRIX_A)\r\n\r\n  if (this.mti >= this.N) {\r\n    var kk\r\n\r\n    if (this.mti == this.N + 1) this.init_genrand(5489)\r\n\r\n    for (kk = 0; kk < this.N - this.M; kk++) {\r\n      y = (this.mt[kk] & this.UPPER_MASK) | (this.mt[kk + 1] & this.LOWER_MASK)\r\n      this.mt[kk] = this.mt[kk + this.M] ^ (y >>> 1) ^ mag01[y & 0x1]\r\n    }\r\n\r\n    for (; kk < this.N - 1; kk++) {\r\n      y = (this.mt[kk] & this.UPPER_MASK) | (this.mt[kk + 1] & this.LOWER_MASK)\r\n      this.mt[kk] = this.mt[kk + (this.M - this.N)] ^ (y >>> 1) ^ mag01[y & 0x1]\r\n    }\r\n\r\n    y = (this.mt[this.N - 1] & this.UPPER_MASK) | (this.mt[0] & this.LOWER_MASK)\r\n    this.mt[this.N - 1] = this.mt[this.M - 1] ^ (y >>> 1) ^ mag01[y & 0x1]\r\n\r\n    this.mti = 0\r\n  }\r\n\r\n  y = this.mt[this.mti++]\r\n\r\n  y ^= y >>> 11\r\n  y ^= (y << 7) & 0x9d2c5680\r\n  y ^= (y << 15) & 0xefc60000\r\n  y ^= y >>> 18\r\n\r\n  return y >>> 0\r\n}\r\n","const methods = {}\nconst names = []\n\nexport function registerMethods (name, m) {\n  if (Array.isArray(name)) {\n    for (const _name of name) {\n      registerMethods(_name, m)\n    }\n    return\n  }\n\n  if (typeof name === 'object') {\n    for (const _name in name) {\n      registerMethods(_name, name[_name])\n    }\n    return\n  }\n\n  addMethodNames(Object.getOwnPropertyNames(m))\n  methods[name] = Object.assign(methods[name] || {}, m)\n}\n\nexport function getMethodsFor (name) {\n  return methods[name] || {}\n}\n\nexport function getMethodNames () {\n  return [ ...new Set(names) ]\n}\n\nexport function addMethodNames (_names) {\n  names.push(..._names)\n}\n","// Map function\nexport function map (array, block) {\n  let i\n  const il = array.length\n  const result = []\n\n  for (i = 0; i < il; i++) {\n    result.push(block(array[i]))\n  }\n\n  return result\n}\n\n// Filter function\nexport function filter (array, block) {\n  let i\n  const il = array.length\n  const result = []\n\n  for (i = 0; i < il; i++) {\n    if (block(array[i])) {\n      result.push(array[i])\n    }\n  }\n\n  return result\n}\n\n// Degrees to radians\nexport function radians (d) {\n  return d % 360 * Math.PI / 180\n}\n\n// Radians to degrees\nexport function degrees (r) {\n  return r * 180 / Math.PI % 360\n}\n\n// Convert dash-separated-string to camelCase\nexport function camelCase (s) {\n  return s.toLowerCase().replace(/-(.)/g, function (m, g) {\n    return g.toUpperCase()\n  })\n}\n\n// Convert camel cased string to dash separated\nexport function unCamelCase (s) {\n  return s.replace(/([A-Z])/g, function (m, g) {\n    return '-' + g.toLowerCase()\n  })\n}\n\n// Capitalize first letter of a string\nexport function capitalize (s) {\n  return s.charAt(0).toUpperCase() + s.slice(1)\n}\n\n// Calculate proportional width and height values when necessary\nexport function proportionalSize (element, width, height, box) {\n  if (width == null || height == null) {\n    box = box || element.bbox()\n\n    if (width == null) {\n      width = box.width / box.height * height\n    } else if (height == null) {\n      height = box.height / box.width * width\n    }\n  }\n\n  return {\n    width: width,\n    height: height\n  }\n}\n\n/**\n * This function adds support for string origins.\n * It searches for an origin in o.origin o.ox and o.originX.\n * This way, origin: {x: 'center', y: 50} can be passed as well as ox: 'center', oy: 50\n**/\nexport function getOrigin (o, element) {\n  const origin = o.origin\n  // First check if origin is in ox or originX\n  let ox = o.ox != null\n    ? o.ox\n    : o.originX != null\n      ? o.originX\n      : 'center'\n  let oy = o.oy != null\n    ? o.oy\n    : o.originY != null\n      ? o.originY\n      : 'center'\n\n  // Then check if origin was used and overwrite in that case\n  if (origin != null) {\n    [ ox, oy ] = Array.isArray(origin)\n      ? origin\n      : typeof origin === 'object'\n        ? [ origin.x, origin.y ]\n        : [ origin, origin ]\n  }\n\n  // Make sure to only call bbox when actually needed\n  const condX = typeof ox === 'string'\n  const condY = typeof oy === 'string'\n  if (condX || condY) {\n    const { height, width, x, y } = element.bbox()\n\n    // And only overwrite if string was passed for this specific axis\n    if (condX) {\n      ox = ox.includes('left')\n        ? x\n        : ox.includes('right')\n          ? x + width\n          : x + width / 2\n    }\n\n    if (condY) {\n      oy = oy.includes('top')\n        ? y\n        : oy.includes('bottom')\n          ? y + height\n          : y + height / 2\n    }\n  }\n\n  // Return the origin as it is if it wasn't a string\n  return [ ox, oy ]\n}\n","// Default namespaces\nexport const svg = 'http://www.w3.org/2000/svg'\nexport const html = 'http://www.w3.org/1999/xhtml'\nexport const xmlns = 'http://www.w3.org/2000/xmlns/'\nexport const xlink = 'http://www.w3.org/1999/xlink'\nexport const svgjs = 'http://svgjs.dev/svgjs'\n","export const globals = {\n  window: typeof window === 'undefined' ? null : window,\n  document: typeof document === 'undefined' ? null : document\n}\n\nexport function registerWindow (win = null, doc = null) {\n  globals.window = win\n  globals.document = doc\n}\n\nconst save = {}\n\nexport function saveWindow () {\n  save.window = globals.window\n  save.document = globals.document\n}\n\nexport function restoreWindow () {\n  globals.window = save.window\n  globals.document = save.document\n}\n\nexport function withWindow (win, fn) {\n  saveWindow()\n  registerWindow(win, win.document)\n  fn(win, win.document)\n  restoreWindow()\n}\n\nexport function getWindow () {\n  return globals.window\n}\n","export default class Base {\n  // constructor (node/*, {extensions = []} */) {\n  //   // this.tags = []\n  //   //\n  //   // for (let extension of extensions) {\n  //   //   extension.setup.call(this, node)\n  //   //   this.tags.push(extension.name)\n  //   // }\n  // }\n}\n","import { addMethodNames } from './methods.js'\nimport { capitalize } from './utils.js'\nimport { svg } from '../modules/core/namespaces.js'\nimport { globals } from '../utils/window.js'\nimport Base from '../types/Base.js'\n\nconst elements = {}\nexport const root = '___SYMBOL___ROOT___'\n\n// Method for element creation\nexport function create (name, ns = svg) {\n  // create element\n  return globals.document.createElementNS(ns, name)\n}\n\nexport function makeInstance (element, isHTML = false) {\n  if (element instanceof Base) return element\n\n  if (typeof element === 'object') {\n    return adopter(element)\n  }\n\n  if (element == null) {\n    return new elements[root]()\n  }\n\n  if (typeof element === 'string' && element.charAt(0) !== '<') {\n    return adopter(globals.document.querySelector(element))\n  }\n\n  // Make sure, that HTML elements are created with the correct namespace\n  const wrapper = isHTML ? globals.document.createElement('div') : create('svg')\n  wrapper.innerHTML = element\n\n  // We can use firstChild here because we know,\n  // that the first char is < and thus an element\n  element = adopter(wrapper.firstChild)\n\n  // make sure, that element doesn't have its wrapper attached\n  wrapper.removeChild(wrapper.firstChild)\n  return element\n}\n\nexport function nodeOrNew (name, node) {\n  return (node && node.ownerDocument && node instanceof node.ownerDocument.defaultView.Node) ? node : create(name)\n}\n\n// Adopt existing svg elements\nexport function adopt (node) {\n  // check for presence of node\n  if (!node) return null\n\n  // make sure a node isn't already adopted\n  if (node.instance instanceof Base) return node.instance\n\n  if (node.nodeName === '#document-fragment') {\n    return new elements.Fragment(node)\n  }\n\n  // initialize variables\n  let className = capitalize(node.nodeName || 'Dom')\n\n  // Make sure that gradients are adopted correctly\n  if (className === 'LinearGradient' || className === 'RadialGradient') {\n    className = 'Gradient'\n\n  // Fallback to Dom if element is not known\n  } else if (!elements[className]) {\n    className = 'Dom'\n  }\n\n  return new elements[className](node)\n}\n\nlet adopter = adopt\n\nexport function mockAdopt (mock = adopt) {\n  adopter = mock\n}\n\nexport function register (element, name = element.name, asRoot = false) {\n  elements[name] = element\n  if (asRoot) elements[root] = element\n\n  addMethodNames(Object.getOwnPropertyNames(element.prototype))\n\n  return element\n}\n\nexport function getClass (name) {\n  return elements[name]\n}\n\n// Element id sequence\nlet did = 1000\n\n// Get next named element id\nexport function eid (name) {\n  return 'Svgjs' + capitalize(name) + (did++)\n}\n\n// Deep new id assignment\nexport function assignNewId (node) {\n  // do the same for SVG child nodes as well\n  for (let i = node.children.length - 1; i >= 0; i--) {\n    assignNewId(node.children[i])\n  }\n\n  if (node.id) {\n    node.id = eid(node.nodeName)\n    return node\n  }\n\n  return node\n}\n\n// Method for extending objects\nexport function extend (modules, methods) {\n  let key, i\n\n  modules = Array.isArray(modules) ? modules : [ modules ]\n\n  for (i = modules.length - 1; i >= 0; i--) {\n    for (key in methods) {\n      modules[i].prototype[key] = methods[key]\n    }\n  }\n}\n\nexport function wrapWithAttrCheck (fn) {\n  return function (...args) {\n    const o = args[args.length - 1]\n\n    if (o && o.constructor === Object && !(o instanceof Array)) {\n      return fn.apply(this, args.slice(0, -1)).attr(o)\n    } else {\n      return fn.apply(this, args)\n    }\n  }\n}\n","import { makeInstance } from '../../utils/adopter.js'\nimport { registerMethods } from '../../utils/methods.js'\n\n// Get all siblings, including myself\nexport function siblings () {\n  return this.parent().children()\n}\n\n// Get the current position siblings\nexport function position () {\n  return this.parent().index(this)\n}\n\n// Get the next element (will return null if there is none)\nexport function next () {\n  return this.siblings()[this.position() + 1]\n}\n\n// Get the next element (will return null if there is none)\nexport function prev () {\n  return this.siblings()[this.position() - 1]\n}\n\n// Send given element one step forward\nexport function forward () {\n  const i = this.position()\n  const p = this.parent()\n\n  // move node one step forward\n  p.add(this.remove(), i + 1)\n\n  return this\n}\n\n// Send given element one step backward\nexport function backward () {\n  const i = this.position()\n  const p = this.parent()\n\n  p.add(this.remove(), i ? i - 1 : 0)\n\n  return this\n}\n\n// Send given element all the way to the front\nexport function front () {\n  const p = this.parent()\n\n  // Move node forward\n  p.add(this.remove())\n\n  return this\n}\n\n// Send given element all the way to the back\nexport function back () {\n  const p = this.parent()\n\n  // Move node back\n  p.add(this.remove(), 0)\n\n  return this\n}\n\n// Inserts a given element before the targeted element\nexport function before (element) {\n  element = makeInstance(element)\n  element.remove()\n\n  const i = this.position()\n\n  this.parent().add(element, i)\n\n  return this\n}\n\n// Inserts a given element after the targeted element\nexport function after (element) {\n  element = makeInstance(element)\n  element.remove()\n\n  const i = this.position()\n\n  this.parent().add(element, i + 1)\n\n  return this\n}\n\nexport function insertBefore (element) {\n  element = makeInstance(element)\n  element.before(this)\n  return this\n}\n\nexport function insertAfter (element) {\n  element = makeInstance(element)\n  element.after(this)\n  return this\n}\n\nregisterMethods('Dom', {\n  siblings,\n  position,\n  next,\n  prev,\n  forward,\n  backward,\n  front,\n  back,\n  before,\n  after,\n  insertBefore,\n  insertAfter\n})\n","// Parse unit value\nexport const numberAndUnit = /^([+-]?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?)([a-z%]*)$/i\n\n// Parse hex value\nexport const hex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i\n\n// Parse rgb value\nexport const rgb = /rgb\\((\\d+),(\\d+),(\\d+)\\)/\n\n// Parse reference id\nexport const reference = /(#[a-z_][a-z0-9\\-_]*)/i\n\n// splits a transformation chain\nexport const transforms = /\\)\\s*,?\\s*/\n\n// Whitespace\nexport const whitespace = /\\s/g\n\n// Test hex value\nexport const isHex = /^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i\n\n// Test rgb value\nexport const isRgb = /^rgb\\(/\n\n// Test for blank string\nexport const isBlank = /^(\\s+)?$/\n\n// Test for numeric string\nexport const isNumber = /^[+-]?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i\n\n// Test for image url\nexport const isImage = /\\.(jpg|jpeg|png|gif|svg)(\\?[^=]+.*)?/i\n\n// split at whitespace and comma\nexport const delimiter = /[\\s,]+/\n\n// Test for path letter\nexport const isPathLetter = /[MLHVCSQTAZ]/i\n","import { delimiter } from '../core/regex.js'\nimport { registerMethods } from '../../utils/methods.js'\n\n// Return array of classes on the node\nexport function classes () {\n  const attr = this.attr('class')\n  return attr == null ? [] : attr.trim().split(delimiter)\n}\n\n// Return true if class exists on the node, false otherwise\nexport function hasClass (name) {\n  return this.classes().indexOf(name) !== -1\n}\n\n// Add class to the node\nexport function addClass (name) {\n  if (!this.hasClass(name)) {\n    const array = this.classes()\n    array.push(name)\n    this.attr('class', array.join(' '))\n  }\n\n  return this\n}\n\n// Remove class from the node\nexport function removeClass (name) {\n  if (this.hasClass(name)) {\n    this.attr('class', this.classes().filter(function (c) {\n      return c !== name\n    }).join(' '))\n  }\n\n  return this\n}\n\n// Toggle the presence of a class on the node\nexport function toggleClass (name) {\n  return this.hasClass(name) ? this.removeClass(name) : this.addClass(name)\n}\n\nregisterMethods('Dom', {\n  classes, hasClass, addClass, removeClass, toggleClass\n})\n","import { camelCase } from '../../utils/utils.js'\nimport { isBlank } from '../core/regex.js'\nimport { registerMethods } from '../../utils/methods.js'\n\n// Dynamic style generator\nexport function css (style, val) {\n  const ret = {}\n  if (arguments.length === 0) {\n    // get full style as object\n    this.node.style.cssText.split(/\\s*;\\s*/)\n      .filter(function (el) {\n        return !!el.length\n      })\n      .forEach(function (el) {\n        const t = el.split(/\\s*:\\s*/)\n        ret[t[0]] = t[1]\n      })\n    return ret\n  }\n\n  if (arguments.length < 2) {\n    // get style properties as array\n    if (Array.isArray(style)) {\n      for (const name of style) {\n        const cased = camelCase(name)\n        ret[name] = this.node.style[cased]\n      }\n      return ret\n    }\n\n    // get style for property\n    if (typeof style === 'string') {\n      return this.node.style[camelCase(style)]\n    }\n\n    // set styles in object\n    if (typeof style === 'object') {\n      for (const name in style) {\n        // set empty string if null/undefined/'' was given\n        this.node.style[camelCase(name)]\n          = (style[name] == null || isBlank.test(style[name])) ? '' : style[name]\n      }\n    }\n  }\n\n  // set style for property\n  if (arguments.length === 2) {\n    this.node.style[camelCase(style)]\n      = (val == null || isBlank.test(val)) ? '' : val\n  }\n\n  return this\n}\n\n// Show element\nexport function show () {\n  return this.css('display', '')\n}\n\n// Hide element\nexport function hide () {\n  return this.css('display', 'none')\n}\n\n// Is element visible?\nexport function visible () {\n  return this.css('display') !== 'none'\n}\n\nregisterMethods('Dom', {\n  css, show, hide, visible\n})\n","import { registerMethods } from '../../utils/methods.js'\nimport { filter, map } from '../../utils/utils.js'\n\n// Store data values on svg nodes\nexport function data (a, v, r) {\n  if (a == null) {\n    // get an object of attributes\n    return this.data(map(filter(this.node.attributes, (el) => el.nodeName.indexOf('data-') === 0), (el) => el.nodeName.slice(5)))\n  } else if (a instanceof Array) {\n    const data = {}\n    for (const key of a) {\n      data[key] = this.data(key)\n    }\n    return data\n  } else if (typeof a === 'object') {\n    for (v in a) {\n      this.data(v, a[v])\n    }\n  } else if (arguments.length < 2) {\n    try {\n      return JSON.parse(this.attr('data-' + a))\n    } catch (e) {\n      return this.attr('data-' + a)\n    }\n  } else {\n    this.attr('data-' + a,\n      v === null\n        ? null\n        : r === true || typeof v === 'string' || typeof v === 'number'\n          ? v\n          : JSON.stringify(v)\n    )\n  }\n\n  return this\n}\n\nregisterMethods('Dom', { data })\n","import { registerMethods } from '../../utils/methods.js'\n\n// Remember arbitrary data\nexport function remember (k, v) {\n  // remember every item in an object individually\n  if (typeof arguments[0] === 'object') {\n    for (const key in k) {\n      this.remember(key, k[key])\n    }\n  } else if (arguments.length === 1) {\n    // retrieve memory\n    return this.memory()[k]\n  } else {\n    // store memory\n    this.memory()[k] = v\n  }\n\n  return this\n}\n\n// Erase a given memory\nexport function forget () {\n  if (arguments.length === 0) {\n    this._memory = {}\n  } else {\n    for (let i = arguments.length - 1; i >= 0; i--) {\n      delete this.memory()[arguments[i]]\n    }\n  }\n  return this\n}\n\n// This triggers creation of a new hidden class which is not performant\n// However, this function is not rarely used so it will not happen frequently\n// Return local memory object\nexport function memory () {\n  return (this._memory = this._memory || {})\n}\n\nregisterMethods('Dom', { remember, forget, memory })\n","\nimport { hex, isHex, isRgb, rgb, whitespace } from '../modules/core/regex.js'\n\nfunction sixDigitHex (hex) {\n  return hex.length === 4\n    ? [ '#',\n      hex.substring(1, 2), hex.substring(1, 2),\n      hex.substring(2, 3), hex.substring(2, 3),\n      hex.substring(3, 4), hex.substring(3, 4)\n    ].join('')\n    : hex\n}\n\nfunction componentHex (component) {\n  const integer = Math.round(component)\n  const bounded = Math.max(0, Math.min(255, integer))\n  const hex = bounded.toString(16)\n  return hex.length === 1 ? '0' + hex : hex\n}\n\nfunction is (object, space) {\n  for (let i = space.length; i--;) {\n    if (object[space[i]] == null) {\n      return false\n    }\n  }\n  return true\n}\n\nfunction getParameters (a, b) {\n  const params = is(a, 'rgb')\n    ? { _a: a.r, _b: a.g, _c: a.b, _d: 0, space: 'rgb' }\n    : is(a, 'xyz')\n      ? { _a: a.x, _b: a.y, _c: a.z, _d: 0, space: 'xyz' }\n      : is(a, 'hsl')\n        ? { _a: a.h, _b: a.s, _c: a.l, _d: 0, space: 'hsl' }\n        : is(a, 'lab')\n          ? { _a: a.l, _b: a.a, _c: a.b, _d: 0, space: 'lab' }\n          : is(a, 'lch')\n            ? { _a: a.l, _b: a.c, _c: a.h, _d: 0, space: 'lch' }\n            : is(a, 'cmyk')\n              ? { _a: a.c, _b: a.m, _c: a.y, _d: a.k, space: 'cmyk' }\n              : { _a: 0, _b: 0, _c: 0, space: 'rgb' }\n\n  params.space = b || params.space\n  return params\n}\n\nfunction cieSpace (space) {\n  if (space === 'lab' || space === 'xyz' || space === 'lch') {\n    return true\n  } else {\n    return false\n  }\n}\n\nfunction hueToRgb (p, q, t) {\n  if (t < 0) t += 1\n  if (t > 1) t -= 1\n  if (t < 1 / 6) return p + (q - p) * 6 * t\n  if (t < 1 / 2) return q\n  if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6\n  return p\n}\n\nexport default class Color {\n  constructor (...inputs) {\n    this.init(...inputs)\n  }\n\n  // Test if given value is a color\n  static isColor (color) {\n    return color && (\n      color instanceof Color\n      || this.isRgb(color)\n      || this.test(color)\n    )\n  }\n\n  // Test if given value is an rgb object\n  static isRgb (color) {\n    return color && typeof color.r === 'number'\n      && typeof color.g === 'number'\n      && typeof color.b === 'number'\n  }\n\n  /*\n  Generating random colors\n  */\n  static random (mode = 'vibrant', t, u) {\n\n    // Get the math modules\n    const { random, round, sin, PI: pi } = Math\n\n    // Run the correct generator\n    if (mode === 'vibrant') {\n\n      const l = (81 - 57) * random() + 57\n      const c = (83 - 45) * random() + 45\n      const h = 360 * random()\n      const color = new Color(l, c, h, 'lch')\n      return color\n\n    } else if (mode === 'sine') {\n\n      t = t == null ? random() : t\n      const r = round(80 * sin(2 * pi * t / 0.5 + 0.01) + 150)\n      const g = round(50 * sin(2 * pi * t / 0.5 + 4.6) + 200)\n      const b = round(100 * sin(2 * pi * t / 0.5 + 2.3) + 150)\n      const color = new Color(r, g, b)\n      return color\n\n    } else if (mode === 'pastel') {\n\n      const l = (94 - 86) * random() + 86\n      const c = (26 - 9) * random() + 9\n      const h = 360 * random()\n      const color = new Color(l, c, h, 'lch')\n      return color\n\n    } else if (mode === 'dark') {\n\n      const l = 10 + 10 * random()\n      const c = (125 - 75) * random() + 86\n      const h = 360 * random()\n      const color = new Color(l, c, h, 'lch')\n      return color\n\n    } else if (mode === 'rgb') {\n\n      const r = 255 * random()\n      const g = 255 * random()\n      const b = 255 * random()\n      const color = new Color(r, g, b)\n      return color\n\n    } else if (mode === 'lab') {\n\n      const l = 100 * random()\n      const a = 256 * random() - 128\n      const b = 256 * random() - 128\n      const color = new Color(l, a, b, 'lab')\n      return color\n\n    } else if (mode === 'grey') {\n\n      const grey = 255 * random()\n      const color = new Color(grey, grey, grey)\n      return color\n\n    } else {\n\n      throw new Error('Unsupported random color mode')\n\n    }\n  }\n\n  // Test if given value is a color string\n  static test (color) {\n    return (typeof color === 'string')\n      && (isHex.test(color) || isRgb.test(color))\n  }\n\n  cmyk () {\n\n    // Get the rgb values for the current color\n    const { _a, _b, _c } = this.rgb()\n    const [ r, g, b ] = [ _a, _b, _c ].map(v => v / 255)\n\n    // Get the cmyk values in an unbounded format\n    const k = Math.min(1 - r, 1 - g, 1 - b)\n\n    if (k === 1) {\n      // Catch the black case\n      return new Color(0, 0, 0, 1, 'cmyk')\n    }\n\n    const c = (1 - r - k) / (1 - k)\n    const m = (1 - g - k) / (1 - k)\n    const y = (1 - b - k) / (1 - k)\n\n    // Construct the new color\n    const color = new Color(c, m, y, k, 'cmyk')\n    return color\n  }\n\n  hsl () {\n\n    // Get the rgb values\n    const { _a, _b, _c } = this.rgb()\n    const [ r, g, b ] = [ _a, _b, _c ].map(v => v / 255)\n\n    // Find the maximum and minimum values to get the lightness\n    const max = Math.max(r, g, b)\n    const min = Math.min(r, g, b)\n    const l = (max + min) / 2\n\n    // If the r, g, v values are identical then we are grey\n    const isGrey = max === min\n\n    // Calculate the hue and saturation\n    const delta = max - min\n    const s = isGrey\n      ? 0\n      : l > 0.5\n        ? delta / (2 - max - min)\n        : delta / (max + min)\n    const h = isGrey\n      ? 0\n      : max === r\n        ? ((g - b) / delta + (g < b ? 6 : 0)) / 6\n        : max === g\n          ? ((b - r) / delta + 2) / 6\n          : max === b\n            ? ((r - g) / delta + 4) / 6\n            : 0\n\n    // Construct and return the new color\n    const color = new Color(360 * h, 100 * s, 100 * l, 'hsl')\n    return color\n  }\n\n  init (a = 0, b = 0, c = 0, d = 0, space = 'rgb') {\n    // This catches the case when a falsy value is passed like ''\n    a = !a ? 0 : a\n\n    // Reset all values in case the init function is rerun with new color space\n    if (this.space) {\n      for (const component in this.space) {\n        delete this[this.space[component]]\n      }\n    }\n\n    if (typeof a === 'number') {\n      // Allow for the case that we don't need d...\n      space = typeof d === 'string' ? d : space\n      d = typeof d === 'string' ? 0 : d\n\n      // Assign the values straight to the color\n      Object.assign(this, { _a: a, _b: b, _c: c, _d: d, space })\n    // If the user gave us an array, make the color from it\n    } else if (a instanceof Array) {\n      this.space = b || (typeof a[3] === 'string' ? a[3] : a[4]) || 'rgb'\n      Object.assign(this, { _a: a[0], _b: a[1], _c: a[2], _d: a[3] || 0 })\n    } else if (a instanceof Object) {\n      // Set the object up and assign its values directly\n      const values = getParameters(a, b)\n      Object.assign(this, values)\n    } else if (typeof a === 'string') {\n      if (isRgb.test(a)) {\n        const noWhitespace = a.replace(whitespace, '')\n        const [ _a, _b, _c ] = rgb.exec(noWhitespace)\n          .slice(1, 4).map(v => parseInt(v))\n        Object.assign(this, { _a, _b, _c, _d: 0, space: 'rgb' })\n      } else if (isHex.test(a)) {\n        const hexParse = v => parseInt(v, 16)\n        const [ , _a, _b, _c ] = hex.exec(sixDigitHex(a)).map(hexParse)\n        Object.assign(this, { _a, _b, _c, _d: 0, space: 'rgb' })\n      } else throw Error('Unsupported string format, can\\'t construct Color')\n    }\n\n    // Now add the components as a convenience\n    const { _a, _b, _c, _d } = this\n    const components = this.space === 'rgb'\n      ? { r: _a, g: _b, b: _c }\n      : this.space === 'xyz'\n        ? { x: _a, y: _b, z: _c }\n        : this.space === 'hsl'\n          ? { h: _a, s: _b, l: _c }\n          : this.space === 'lab'\n            ? { l: _a, a: _b, b: _c }\n            : this.space === 'lch'\n              ? { l: _a, c: _b, h: _c }\n              : this.space === 'cmyk'\n                ? { c: _a, m: _b, y: _c, k: _d }\n                : {}\n    Object.assign(this, components)\n  }\n\n  lab () {\n    // Get the xyz color\n    const { x, y, z } = this.xyz()\n\n    // Get the lab components\n    const l = (116 * y) - 16\n    const a = 500 * (x - y)\n    const b = 200 * (y - z)\n\n    // Construct and return a new color\n    const color = new Color(l, a, b, 'lab')\n    return color\n  }\n\n  lch () {\n\n    // Get the lab color directly\n    const { l, a, b } = this.lab()\n\n    // Get the chromaticity and the hue using polar coordinates\n    const c = Math.sqrt(a ** 2 + b ** 2)\n    let h = 180 * Math.atan2(b, a) / Math.PI\n    if (h < 0) {\n      h *= -1\n      h = 360 - h\n    }\n\n    // Make a new color and return it\n    const color = new Color(l, c, h, 'lch')\n    return color\n  }\n  /*\n  Conversion Methods\n  */\n\n  rgb () {\n    if (this.space === 'rgb') {\n      return this\n    } else if (cieSpace(this.space)) {\n      // Convert to the xyz color space\n      let { x, y, z } = this\n      if (this.space === 'lab' || this.space === 'lch') {\n        // Get the values in the lab space\n        let { l, a, b } = this\n        if (this.space === 'lch') {\n          const { c, h } = this\n          const dToR = Math.PI / 180\n          a = c * Math.cos(dToR * h)\n          b = c * Math.sin(dToR * h)\n        }\n\n        // Undo the nonlinear function\n        const yL = (l + 16) / 116\n        const xL = a / 500 + yL\n        const zL = yL - b / 200\n\n        // Get the xyz values\n        const ct = 16 / 116\n        const mx = 0.008856\n        const nm = 7.787\n        x = 0.95047 * ((xL ** 3 > mx) ? xL ** 3 : (xL - ct) / nm)\n        y = 1.00000 * ((yL ** 3 > mx) ? yL ** 3 : (yL - ct) / nm)\n        z = 1.08883 * ((zL ** 3 > mx) ? zL ** 3 : (zL - ct) / nm)\n      }\n\n      // Convert xyz to unbounded rgb values\n      const rU = x * 3.2406 + y * -1.5372 + z * -0.4986\n      const gU = x * -0.9689 + y * 1.8758 + z * 0.0415\n      const bU = x * 0.0557 + y * -0.2040 + z * 1.0570\n\n      // Convert the values to true rgb values\n      const pow = Math.pow\n      const bd = 0.0031308\n      const r = (rU > bd) ? (1.055 * pow(rU, 1 / 2.4) - 0.055) : 12.92 * rU\n      const g = (gU > bd) ? (1.055 * pow(gU, 1 / 2.4) - 0.055) : 12.92 * gU\n      const b = (bU > bd) ? (1.055 * pow(bU, 1 / 2.4) - 0.055) : 12.92 * bU\n\n      // Make and return the color\n      const color = new Color(255 * r, 255 * g, 255 * b)\n      return color\n    } else if (this.space === 'hsl') {\n      // https://bgrins.github.io/TinyColor/docs/tinycolor.html\n      // Get the current hsl values\n      let { h, s, l } = this\n      h /= 360\n      s /= 100\n      l /= 100\n\n      // If we are grey, then just make the color directly\n      if (s === 0) {\n        l *= 255\n        const color = new Color(l, l, l)\n        return color\n      }\n\n      // TODO I have no idea what this does :D If you figure it out, tell me!\n      const q = l < 0.5 ? l * (1 + s) : l + s - l * s\n      const p = 2 * l - q\n\n      // Get the rgb values\n      const r = 255 * hueToRgb(p, q, h + 1 / 3)\n      const g = 255 * hueToRgb(p, q, h)\n      const b = 255 * hueToRgb(p, q, h - 1 / 3)\n\n      // Make a new color\n      const color = new Color(r, g, b)\n      return color\n    } else if (this.space === 'cmyk') {\n      // https://gist.github.com/felipesabino/5066336\n      // Get the normalised cmyk values\n      const { c, m, y, k } = this\n\n      // Get the rgb values\n      const r = 255 * (1 - Math.min(1, c * (1 - k) + k))\n      const g = 255 * (1 - Math.min(1, m * (1 - k) + k))\n      const b = 255 * (1 - Math.min(1, y * (1 - k) + k))\n\n      // Form the color and return it\n      const color = new Color(r, g, b)\n      return color\n    } else {\n      return this\n    }\n  }\n\n  toArray () {\n    const { _a, _b, _c, _d, space } = this\n    return [ _a, _b, _c, _d, space ]\n  }\n\n  toHex () {\n    const [ r, g, b ] = this._clamped().map(componentHex)\n    return `#${r}${g}${b}`\n  }\n\n  toRgb () {\n    const [ rV, gV, bV ] = this._clamped()\n    const string = `rgb(${rV},${gV},${bV})`\n    return string\n  }\n\n  toString () {\n    return this.toHex()\n  }\n\n  xyz () {\n\n    // Normalise the red, green and blue values\n    const { _a: r255, _b: g255, _c: b255 } = this.rgb()\n    const [ r, g, b ] = [ r255, g255, b255 ].map(v => v / 255)\n\n    // Convert to the lab rgb space\n    const rL = (r > 0.04045) ? Math.pow((r + 0.055) / 1.055, 2.4) : r / 12.92\n    const gL = (g > 0.04045) ? Math.pow((g + 0.055) / 1.055, 2.4) : g / 12.92\n    const bL = (b > 0.04045) ? Math.pow((b + 0.055) / 1.055, 2.4) : b / 12.92\n\n    // Convert to the xyz color space without bounding the values\n    const xU = (rL * 0.4124 + gL * 0.3576 + bL * 0.1805) / 0.95047\n    const yU = (rL * 0.2126 + gL * 0.7152 + bL * 0.0722) / 1.00000\n    const zU = (rL * 0.0193 + gL * 0.1192 + bL * 0.9505) / 1.08883\n\n    // Get the proper xyz values by applying the bounding\n    const x = (xU > 0.008856) ? Math.pow(xU, 1 / 3) : (7.787 * xU) + 16 / 116\n    const y = (yU > 0.008856) ? Math.pow(yU, 1 / 3) : (7.787 * yU) + 16 / 116\n    const z = (zU > 0.008856) ? Math.pow(zU, 1 / 3) : (7.787 * zU) + 16 / 116\n\n    // Make and return the color\n    const color = new Color(x, y, z, 'xyz')\n    return color\n  }\n\n  /*\n  Input and Output methods\n  */\n\n  _clamped () {\n    const { _a, _b, _c } = this.rgb()\n    const { max, min, round } = Math\n    const format = v => max(0, min(round(v), 255))\n    return [ _a, _b, _c ].map(format)\n  }\n\n  /*\n  Constructing colors\n  */\n\n}\n","import Matrix from './Matrix.js'\n\nexport default class Point {\n  // Initialize\n  constructor (...args) {\n    this.init(...args)\n  }\n\n  // Clone point\n  clone () {\n    return new Point(this)\n  }\n\n  init (x, y) {\n    const base = { x: 0, y: 0 }\n\n    // ensure source as object\n    const source = Array.isArray(x)\n      ? { x: x[0], y: x[1] }\n      : typeof x === 'object'\n        ? { x: x.x, y: x.y }\n        : { x: x, y: y }\n\n    // merge source\n    this.x = source.x == null ? base.x : source.x\n    this.y = source.y == null ? base.y : source.y\n\n    return this\n  }\n\n  toArray () {\n    return [ this.x, this.y ]\n  }\n\n  transform (m) {\n    return this.clone().transformO(m)\n  }\n\n  // Transform point with matrix\n  transformO (m) {\n    if (!Matrix.isMatrixLike(m)) {\n      m = new Matrix(m)\n    }\n\n    const { x, y } = this\n\n    // Perform the matrix multiplication\n    this.x = m.a * x + m.c * y + m.e\n    this.y = m.b * x + m.d * y + m.f\n\n    return this\n  }\n\n}\n\nexport function point (x, y) {\n  return new Point(x, y).transformO(this.screenCTM().inverseO())\n}\n","import { delimiter } from '../modules/core/regex.js'\nimport { radians } from '../utils/utils.js'\nimport { register } from '../utils/adopter.js'\nimport Element from '../elements/Element.js'\nimport Point from './Point.js'\n\nfunction closeEnough (a, b, threshold) {\n  return Math.abs(b - a) < (threshold || 1e-6)\n}\n\nexport default class Matrix {\n  constructor (...args) {\n    this.init(...args)\n  }\n\n  static formatTransforms (o) {\n    // Get all of the parameters required to form the matrix\n    const flipBoth = o.flip === 'both' || o.flip === true\n    const flipX = o.flip && (flipBoth || o.flip === 'x') ? -1 : 1\n    const flipY = o.flip && (flipBoth || o.flip === 'y') ? -1 : 1\n    const skewX = o.skew && o.skew.length\n      ? o.skew[0]\n      : isFinite(o.skew)\n        ? o.skew\n        : isFinite(o.skewX)\n          ? o.skewX\n          : 0\n    const skewY = o.skew && o.skew.length\n      ? o.skew[1]\n      : isFinite(o.skew)\n        ? o.skew\n        : isFinite(o.skewY)\n          ? o.skewY\n          : 0\n    const scaleX = o.scale && o.scale.length\n      ? o.scale[0] * flipX\n      : isFinite(o.scale)\n        ? o.scale * flipX\n        : isFinite(o.scaleX)\n          ? o.scaleX * flipX\n          : flipX\n    const scaleY = o.scale && o.scale.length\n      ? o.scale[1] * flipY\n      : isFinite(o.scale)\n        ? o.scale * flipY\n        : isFinite(o.scaleY)\n          ? o.scaleY * flipY\n          : flipY\n    const shear = o.shear || 0\n    const theta = o.rotate || o.theta || 0\n    const origin = new Point(o.origin || o.around || o.ox || o.originX, o.oy || o.originY)\n    const ox = origin.x\n    const oy = origin.y\n    // We need Point to be invalid if nothing was passed because we cannot default to 0 here. That is why NaN\n    const position = new Point(o.position || o.px || o.positionX || NaN, o.py || o.positionY || NaN)\n    const px = position.x\n    const py = position.y\n    const translate = new Point(o.translate || o.tx || o.translateX, o.ty || o.translateY)\n    const tx = translate.x\n    const ty = translate.y\n    const relative = new Point(o.relative || o.rx || o.relativeX, o.ry || o.relativeY)\n    const rx = relative.x\n    const ry = relative.y\n\n    // Populate all of the values\n    return {\n      scaleX, scaleY, skewX, skewY, shear, theta, rx, ry, tx, ty, ox, oy, px, py\n    }\n  }\n\n  static fromArray (a) {\n    return { a: a[0], b: a[1], c: a[2], d: a[3], e: a[4], f: a[5] }\n  }\n\n  static isMatrixLike (o) {\n    return (\n      o.a != null\n      || o.b != null\n      || o.c != null\n      || o.d != null\n      || o.e != null\n      || o.f != null\n    )\n  }\n\n  // left matrix, right matrix, target matrix which is overwritten\n  static matrixMultiply (l, r, o) {\n    // Work out the product directly\n    const a = l.a * r.a + l.c * r.b\n    const b = l.b * r.a + l.d * r.b\n    const c = l.a * r.c + l.c * r.d\n    const d = l.b * r.c + l.d * r.d\n    const e = l.e + l.a * r.e + l.c * r.f\n    const f = l.f + l.b * r.e + l.d * r.f\n\n    // make sure to use local variables because l/r and o could be the same\n    o.a = a\n    o.b = b\n    o.c = c\n    o.d = d\n    o.e = e\n    o.f = f\n\n    return o\n  }\n\n  around (cx, cy, matrix) {\n    return this.clone().aroundO(cx, cy, matrix)\n  }\n\n  // Transform around a center point\n  aroundO (cx, cy, matrix) {\n    const dx = cx || 0\n    const dy = cy || 0\n    return this.translateO(-dx, -dy).lmultiplyO(matrix).translateO(dx, dy)\n  }\n\n  // Clones this matrix\n  clone () {\n    return new Matrix(this)\n  }\n\n  // Decomposes this matrix into its affine parameters\n  decompose (cx = 0, cy = 0) {\n    // Get the parameters from the matrix\n    const a = this.a\n    const b = this.b\n    const c = this.c\n    const d = this.d\n    const e = this.e\n    const f = this.f\n\n    // Figure out if the winding direction is clockwise or counterclockwise\n    const determinant = a * d - b * c\n    const ccw = determinant > 0 ? 1 : -1\n\n    // Since we only shear in x, we can use the x basis to get the x scale\n    // and the rotation of the resulting matrix\n    const sx = ccw * Math.sqrt(a * a + b * b)\n    const thetaRad = Math.atan2(ccw * b, ccw * a)\n    const theta = 180 / Math.PI * thetaRad\n    const ct = Math.cos(thetaRad)\n    const st = Math.sin(thetaRad)\n\n    // We can then solve the y basis vector simultaneously to get the other\n    // two affine parameters directly from these parameters\n    const lam = (a * c + b * d) / determinant\n    const sy = ((c * sx) / (lam * a - b)) || ((d * sx) / (lam * b + a))\n\n    // Use the translations\n    const tx = e - cx + cx * ct * sx + cy * (lam * ct * sx - st * sy)\n    const ty = f - cy + cx * st * sx + cy * (lam * st * sx + ct * sy)\n\n    // Construct the decomposition and return it\n    return {\n      // Return the affine parameters\n      scaleX: sx,\n      scaleY: sy,\n      shear: lam,\n      rotate: theta,\n      translateX: tx,\n      translateY: ty,\n      originX: cx,\n      originY: cy,\n\n      // Return the matrix parameters\n      a: this.a,\n      b: this.b,\n      c: this.c,\n      d: this.d,\n      e: this.e,\n      f: this.f\n    }\n  }\n\n  // Check if two matrices are equal\n  equals (other) {\n    if (other === this) return true\n    const comp = new Matrix(other)\n    return closeEnough(this.a, comp.a) && closeEnough(this.b, comp.b)\n      && closeEnough(this.c, comp.c) && closeEnough(this.d, comp.d)\n      && closeEnough(this.e, comp.e) && closeEnough(this.f, comp.f)\n  }\n\n  // Flip matrix on x or y, at a given offset\n  flip (axis, around) {\n    return this.clone().flipO(axis, around)\n  }\n\n  flipO (axis, around) {\n    return axis === 'x'\n      ? this.scaleO(-1, 1, around, 0)\n      : axis === 'y'\n        ? this.scaleO(1, -1, 0, around)\n        : this.scaleO(-1, -1, axis, around || axis) // Define an x, y flip point\n  }\n\n  // Initialize\n  init (source) {\n    const base = Matrix.fromArray([ 1, 0, 0, 1, 0, 0 ])\n\n    // ensure source as object\n    source = source instanceof Element\n      ? source.matrixify()\n      : typeof source === 'string'\n        ? Matrix.fromArray(source.split(delimiter).map(parseFloat))\n        : Array.isArray(source)\n          ? Matrix.fromArray(source)\n          : (typeof source === 'object' && Matrix.isMatrixLike(source))\n            ? source\n            : (typeof source === 'object')\n              ? new Matrix().transform(source)\n              : arguments.length === 6\n                ? Matrix.fromArray([].slice.call(arguments))\n                : base\n\n    // Merge the source matrix with the base matrix\n    this.a = source.a != null ? source.a : base.a\n    this.b = source.b != null ? source.b : base.b\n    this.c = source.c != null ? source.c : base.c\n    this.d = source.d != null ? source.d : base.d\n    this.e = source.e != null ? source.e : base.e\n    this.f = source.f != null ? source.f : base.f\n\n    return this\n  }\n\n  inverse () {\n    return this.clone().inverseO()\n  }\n\n  // Inverses matrix\n  inverseO () {\n    // Get the current parameters out of the matrix\n    const a = this.a\n    const b = this.b\n    const c = this.c\n    const d = this.d\n    const e = this.e\n    const f = this.f\n\n    // Invert the 2x2 matrix in the top left\n    const det = a * d - b * c\n    if (!det) throw new Error('Cannot invert ' + this)\n\n    // Calculate the top 2x2 matrix\n    const na = d / det\n    const nb = -b / det\n    const nc = -c / det\n    const nd = a / det\n\n    // Apply the inverted matrix to the top right\n    const ne = -(na * e + nc * f)\n    const nf = -(nb * e + nd * f)\n\n    // Construct the inverted matrix\n    this.a = na\n    this.b = nb\n    this.c = nc\n    this.d = nd\n    this.e = ne\n    this.f = nf\n\n    return this\n  }\n\n  lmultiply (matrix) {\n    return this.clone().lmultiplyO(matrix)\n  }\n\n  lmultiplyO (matrix) {\n    const r = this\n    const l = matrix instanceof Matrix\n      ? matrix\n      : new Matrix(matrix)\n\n    return Matrix.matrixMultiply(l, r, this)\n  }\n\n  // Left multiplies by the given matrix\n  multiply (matrix) {\n    return this.clone().multiplyO(matrix)\n  }\n\n  multiplyO (matrix) {\n    // Get the matrices\n    const l = this\n    const r = matrix instanceof Matrix\n      ? matrix\n      : new Matrix(matrix)\n\n    return Matrix.matrixMultiply(l, r, this)\n  }\n\n  // Rotate matrix\n  rotate (r, cx, cy) {\n    return this.clone().rotateO(r, cx, cy)\n  }\n\n  rotateO (r, cx = 0, cy = 0) {\n    // Convert degrees to radians\n    r = radians(r)\n\n    const cos = Math.cos(r)\n    const sin = Math.sin(r)\n\n    const { a, b, c, d, e, f } = this\n\n    this.a = a * cos - b * sin\n    this.b = b * cos + a * sin\n    this.c = c * cos - d * sin\n    this.d = d * cos + c * sin\n    this.e = e * cos - f * sin + cy * sin - cx * cos + cx\n    this.f = f * cos + e * sin - cx * sin - cy * cos + cy\n\n    return this\n  }\n\n  // Scale matrix\n  scale (x, y, cx, cy) {\n    return this.clone().scaleO(...arguments)\n  }\n\n  scaleO (x, y = x, cx = 0, cy = 0) {\n    // Support uniform scaling\n    if (arguments.length === 3) {\n      cy = cx\n      cx = y\n      y = x\n    }\n\n    const { a, b, c, d, e, f } = this\n\n    this.a = a * x\n    this.b = b * y\n    this.c = c * x\n    this.d = d * y\n    this.e = e * x - cx * x + cx\n    this.f = f * y - cy * y + cy\n\n    return this\n  }\n\n  // Shear matrix\n  shear (a, cx, cy) {\n    return this.clone().shearO(a, cx, cy)\n  }\n\n  shearO (lx, cx = 0, cy = 0) {\n    const { a, b, c, d, e, f } = this\n\n    this.a = a + b * lx\n    this.c = c + d * lx\n    this.e = e + f * lx - cy * lx\n\n    return this\n  }\n\n  // Skew Matrix\n  skew (x, y, cx, cy) {\n    return this.clone().skewO(...arguments)\n  }\n\n  skewO (x, y = x, cx = 0, cy = 0) {\n    // support uniformal skew\n    if (arguments.length === 3) {\n      cy = cx\n      cx = y\n      y = x\n    }\n\n    // Convert degrees to radians\n    x = radians(x)\n    y = radians(y)\n\n    const lx = Math.tan(x)\n    const ly = Math.tan(y)\n\n    const { a, b, c, d, e, f } = this\n\n    this.a = a + b * lx\n    this.b = b + a * ly\n    this.c = c + d * lx\n    this.d = d + c * ly\n    this.e = e + f * lx - cy * lx\n    this.f = f + e * ly - cx * ly\n\n    return this\n  }\n\n  // SkewX\n  skewX (x, cx, cy) {\n    return this.skew(x, 0, cx, cy)\n  }\n\n  // SkewY\n  skewY (y, cx, cy) {\n    return this.skew(0, y, cx, cy)\n  }\n\n  toArray () {\n    return [ this.a, this.b, this.c, this.d, this.e, this.f ]\n  }\n\n  // Convert matrix to string\n  toString () {\n    return 'matrix(' + this.a + ',' + this.b + ',' + this.c + ',' + this.d + ',' + this.e + ',' + this.f + ')'\n  }\n\n  // Transform a matrix into another matrix by manipulating the space\n  transform (o) {\n    // Check if o is a matrix and then left multiply it directly\n    if (Matrix.isMatrixLike(o)) {\n      const matrix = new Matrix(o)\n      return matrix.multiplyO(this)\n    }\n\n    // Get the proposed transformations and the current transformations\n    const t = Matrix.formatTransforms(o)\n    const current = this\n    const { x: ox, y: oy } = new Point(t.ox, t.oy).transform(current)\n\n    // Construct the resulting matrix\n    const transformer = new Matrix()\n      .translateO(t.rx, t.ry)\n      .lmultiplyO(current)\n      .translateO(-ox, -oy)\n      .scaleO(t.scaleX, t.scaleY)\n      .skewO(t.skewX, t.skewY)\n      .shearO(t.shear)\n      .rotateO(t.theta)\n      .translateO(ox, oy)\n\n    // If we want the origin at a particular place, we force it there\n    if (isFinite(t.px) || isFinite(t.py)) {\n      const origin = new Point(ox, oy).transform(transformer)\n      // TODO: Replace t.px with isFinite(t.px)\n      // Doesn't work because t.px is also 0 if it wasn't passed\n      const dx = isFinite(t.px) ? t.px - origin.x : 0\n      const dy = isFinite(t.py) ? t.py - origin.y : 0\n      transformer.translateO(dx, dy)\n    }\n\n    // Translate now after positioning\n    transformer.translateO(t.tx, t.ty)\n    return transformer\n  }\n\n  // Translate matrix\n  translate (x, y) {\n    return this.clone().translateO(x, y)\n  }\n\n  translateO (x, y) {\n    this.e += x || 0\n    this.f += y || 0\n    return this\n  }\n\n  valueOf () {\n    return {\n      a: this.a,\n      b: this.b,\n      c: this.c,\n      d: this.d,\n      e: this.e,\n      f: this.f\n    }\n  }\n\n}\n\nexport function ctm () {\n  return new Matrix(this.node.getCTM())\n}\n\nexport function screenCTM () {\n  /* https://bugzilla.mozilla.org/show_bug.cgi?id=1344537\n     This is needed because FF does not return the transformation matrix\n     for the inner coordinate system when getScreenCTM() is called on nested svgs.\n     However all other Browsers do that */\n  if (typeof this.isRoot === 'function' && !this.isRoot()) {\n    const rect = this.rect(1, 1)\n    const m = rect.node.getScreenCTM()\n    rect.remove()\n    return new Matrix(m)\n  }\n  return new Matrix(this.node.getScreenCTM())\n}\n\nregister(Matrix, 'Matrix')\n","import { globals } from '../../utils/window.js'\nimport { makeInstance } from '../../utils/adopter.js'\n\nexport default function parser () {\n  // Reuse cached element if possible\n  if (!parser.nodes) {\n    const svg = makeInstance().size(2, 0)\n    svg.node.style.cssText = [\n      'opacity: 0',\n      'position: absolute',\n      'left: -100%',\n      'top: -100%',\n      'overflow: hidden'\n    ].join(';')\n\n    svg.attr('focusable', 'false')\n    svg.attr('aria-hidden', 'true')\n\n    const path = svg.path().node\n\n    parser.nodes = { svg, path }\n  }\n\n  if (!parser.nodes.svg.node.parentNode) {\n    const b = globals.document.body || globals.document.documentElement\n    parser.nodes.svg.addTo(b)\n  }\n\n  return parser.nodes\n}\n","import { delimiter } from '../modules/core/regex.js'\nimport { globals } from '../utils/window.js'\nimport { register } from '../utils/adopter.js'\nimport { registerMethods } from '../utils/methods.js'\nimport Matrix from './Matrix.js'\nimport Point from './Point.js'\nimport parser from '../modules/core/parser.js'\n\nexport function isNulledBox (box) {\n  return !box.width && !box.height && !box.x && !box.y\n}\n\nexport function domContains (node) {\n  return node === globals.document\n    || (globals.document.documentElement.contains || function (node) {\n      // This is IE - it does not support contains() for top-level SVGs\n      while (node.parentNode) {\n        node = node.parentNode\n      }\n      return node === globals.document\n    }).call(globals.document.documentElement, node)\n}\n\nexport default class Box {\n  constructor (...args) {\n    this.init(...args)\n  }\n\n  addOffset () {\n    // offset by window scroll position, because getBoundingClientRect changes when window is scrolled\n    this.x += globals.window.pageXOffset\n    this.y += globals.window.pageYOffset\n    return new Box(this)\n  }\n\n  init (source) {\n    const base = [ 0, 0, 0, 0 ]\n    source = typeof source === 'string'\n      ? source.split(delimiter).map(parseFloat)\n      : Array.isArray(source)\n        ? source\n        : typeof source === 'object'\n          ? [ source.left != null\n            ? source.left\n            : source.x, source.top != null ? source.top : source.y, source.width, source.height ]\n          : arguments.length === 4\n            ? [].slice.call(arguments)\n            : base\n\n    this.x = source[0] || 0\n    this.y = source[1] || 0\n    this.width = this.w = source[2] || 0\n    this.height = this.h = source[3] || 0\n\n    // Add more bounding box properties\n    this.x2 = this.x + this.w\n    this.y2 = this.y + this.h\n    this.cx = this.x + this.w / 2\n    this.cy = this.y + this.h / 2\n\n    return this\n  }\n\n  isNulled () {\n    return isNulledBox(this)\n  }\n\n  // Merge rect box with another, return a new instance\n  merge (box) {\n    const x = Math.min(this.x, box.x)\n    const y = Math.min(this.y, box.y)\n    const width = Math.max(this.x + this.width, box.x + box.width) - x\n    const height = Math.max(this.y + this.height, box.y + box.height) - y\n\n    return new Box(x, y, width, height)\n  }\n\n  toArray () {\n    return [ this.x, this.y, this.width, this.height ]\n  }\n\n  toString () {\n    return this.x + ' ' + this.y + ' ' + this.width + ' ' + this.height\n  }\n\n  transform (m) {\n    if (!(m instanceof Matrix)) {\n      m = new Matrix(m)\n    }\n\n    let xMin = Infinity\n    let xMax = -Infinity\n    let yMin = Infinity\n    let yMax = -Infinity\n\n    const pts = [\n      new Point(this.x, this.y),\n      new Point(this.x2, this.y),\n      new Point(this.x, this.y2),\n      new Point(this.x2, this.y2)\n    ]\n\n    pts.forEach(function (p) {\n      p = p.transform(m)\n      xMin = Math.min(xMin, p.x)\n      xMax = Math.max(xMax, p.x)\n      yMin = Math.min(yMin, p.y)\n      yMax = Math.max(yMax, p.y)\n    })\n\n    return new Box(\n      xMin, yMin,\n      xMax - xMin,\n      yMax - yMin\n    )\n  }\n\n}\n\nfunction getBox (el, getBBoxFn, retry) {\n  let box\n\n  try {\n    // Try to get the box with the provided function\n    box = getBBoxFn(el.node)\n\n    // If the box is worthless and not even in the dom, retry\n    // by throwing an error here...\n    if (isNulledBox(box) && !domContains(el.node)) {\n      throw new Error('Element not in the dom')\n    }\n  } catch (e) {\n    // ... and calling the retry handler here\n    box = retry(el)\n  }\n\n  return box\n}\n\nexport function bbox () {\n  // Function to get bbox is getBBox()\n  const getBBox = (node) => node.getBBox()\n\n  // Take all measures so that a stupid browser renders the element\n  // so we can get the bbox from it when we try again\n  const retry = (el) => {\n    try {\n      const clone = el.clone().addTo(parser().svg).show()\n      const box = clone.node.getBBox()\n      clone.remove()\n      return box\n    } catch (e) {\n      // We give up...\n      throw new Error(`Getting bbox of element \"${el.node.nodeName}\" is not possible: ${e.toString()}`)\n    }\n  }\n\n  const box = getBox(this, getBBox, retry)\n  const bbox = new Box(box)\n\n  return bbox\n}\n\nexport function rbox (el) {\n  const getRBox = (node) => node.getBoundingClientRect()\n  const retry = (el) => {\n    // There is no point in trying tricks here because if we insert the element into the dom ourselves\n    // it obviously will be at the wrong position\n    throw new Error(`Getting rbox of element \"${el.node.nodeName}\" is not possible`)\n  }\n\n  const box = getBox(this, getRBox, retry)\n  const rbox = new Box(box)\n\n  // If an element was passed, we want the bbox in the coordinate system of that element\n  if (el) {\n    return rbox.transform(el.screenCTM().inverseO())\n  }\n\n  // Else we want it in absolute screen coordinates\n  // Therefore we need to add the scrollOffset\n  return rbox.addOffset()\n}\n\n// Checks whether the given point is inside the bounding box\nexport function inside (x, y) {\n  const box = this.bbox()\n\n  return x > box.x\n    && y > box.y\n    && x < box.x + box.width\n    && y < box.y + box.height\n}\n\nregisterMethods({\n  viewbox: {\n    viewbox (x, y, width, height) {\n      // act as getter\n      if (x == null) return new Box(this.attr('viewBox'))\n\n      // act as setter\n      return this.attr('viewBox', new Box(x, y, width, height))\n    },\n\n    zoom (level, point) {\n      // Its best to rely on the attributes here and here is why:\n      // clientXYZ: Doesn't work on non-root svgs because they dont have a CSSBox (silly!)\n      // getBoundingClientRect: Doesn't work because Chrome just ignores width and height of nested svgs completely\n      //                        that means, their clientRect is always as big as the content.\n      //                        Furthermore this size is incorrect if the element is further transformed by its parents\n      // computedStyle: Only returns meaningful values if css was used with px. We dont go this route here!\n      // getBBox: returns the bounding box of its content - that doesn't help!\n      let { width, height } = this.attr([ 'width', 'height' ])\n\n      // Width and height is a string when a number with a unit is present which we can't use\n      // So we try clientXYZ\n      if ((!width && !height) || (typeof width === 'string' || typeof height === 'string')) {\n        width = this.node.clientWidth\n        height = this.node.clientHeight\n      }\n\n      // Giving up...\n      if (!width || !height) {\n        throw new Error('Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element')\n      }\n\n      const v = this.viewbox()\n\n      const zoomX = width / v.width\n      const zoomY = height / v.height\n      const zoom = Math.min(zoomX, zoomY)\n\n      if (level == null) {\n        return zoom\n      }\n\n      let zoomAmount = zoom / level\n\n      // Set the zoomAmount to the highest value which is safe to process and recover from\n      // The * 100 is a bit of wiggle room for the matrix transformation\n      if (zoomAmount === Infinity) zoomAmount = Number.MAX_SAFE_INTEGER / 100\n\n      point = point || new Point(width / 2 / zoomX + v.x, height / 2 / zoomY + v.y)\n\n      const box = new Box(v).transform(\n        new Matrix({ scale: zoomAmount, origin: point })\n      )\n\n      return this.viewbox(box)\n    }\n  }\n})\n\nregister(Box, 'Box')\n","import { extend } from '../utils/adopter.js'\n// import { subClassArray } from './ArrayPolyfill.js'\n\nclass List extends Array {\n  constructor (arr = [], ...args) {\n    super(arr, ...args)\n    if (typeof arr === 'number') return this\n    this.length = 0\n    this.push(...arr)\n  }\n}\n\n/* = subClassArray('List', Array, function (arr = []) {\n  // This catches the case, that native map tries to create an array with new Array(1)\n  if (typeof arr === 'number') return this\n  this.length = 0\n  this.push(...arr)\n}) */\n\nexport default List\n\nextend([ List ], {\n  each (fnOrMethodName, ...args) {\n    if (typeof fnOrMethodName === 'function') {\n      return this.map((el, i, arr) => {\n        return fnOrMethodName.call(el, el, i, arr)\n      })\n    } else {\n      return this.map(el => {\n        return el[fnOrMethodName](...args)\n      })\n    }\n  },\n\n  toArray () {\n    return Array.prototype.concat.apply([], this)\n  }\n})\n\nconst reserved = [ 'toArray', 'constructor', 'each' ]\n\nList.extend = function (methods) {\n  methods = methods.reduce((obj, name) => {\n    // Don't overwrite own methods\n    if (reserved.includes(name)) return obj\n\n    // Don't add private methods\n    if (name[0] === '_') return obj\n\n    // Relay every call to each()\n    obj[name] = function (...attrs) {\n      return this.each(name, ...attrs)\n    }\n    return obj\n  }, {})\n\n  extend([ List ], methods)\n}\n","import { adopt } from '../../utils/adopter.js'\nimport { globals } from '../../utils/window.js'\nimport { map } from '../../utils/utils.js'\nimport List from '../../types/List.js'\n\nexport default function baseFind (query, parent) {\n  return new List(map((parent || globals.document).querySelectorAll(query), function (node) {\n    return adopt(node)\n  }))\n}\n\n// Scoped find method\nexport function find (query) {\n  return baseFind(query, this.node)\n}\n\nexport function findOne (query) {\n  return adopt(this.node.querySelector(query))\n}\n","import { delimiter } from './regex.js'\nimport { makeInstance } from '../../utils/adopter.js'\nimport { globals } from '../../utils/window.js'\n\nlet listenerId = 0\nexport const windowEvents = {}\n\nexport function getEvents (instance) {\n  let n = instance.getEventHolder()\n\n  // We dont want to save events in global space\n  if (n === globals.window) n = windowEvents\n  if (!n.events) n.events = {}\n  return n.events\n}\n\nexport function getEventTarget (instance) {\n  return instance.getEventTarget()\n}\n\nexport function clearEvents (instance) {\n  let n = instance.getEventHolder()\n  if (n === globals.window) n = windowEvents\n  if (n.events) n.events = {}\n}\n\n// Add event binder in the SVG namespace\nexport function on (node, events, listener, binding, options) {\n  const l = listener.bind(binding || node)\n  const instance = makeInstance(node)\n  const bag = getEvents(instance)\n  const n = getEventTarget(instance)\n\n  // events can be an array of events or a string of events\n  events = Array.isArray(events) ? events : events.split(delimiter)\n\n  // add id to listener\n  if (!listener._svgjsListenerId) {\n    listener._svgjsListenerId = ++listenerId\n  }\n\n  events.forEach(function (event) {\n    const ev = event.split('.')[0]\n    const ns = event.split('.')[1] || '*'\n\n    // ensure valid object\n    bag[ev] = bag[ev] || {}\n    bag[ev][ns] = bag[ev][ns] || {}\n\n    // reference listener\n    bag[ev][ns][listener._svgjsListenerId] = l\n\n    // add listener\n    n.addEventListener(ev, l, options || false)\n  })\n}\n\n// Add event unbinder in the SVG namespace\nexport function off (node, events, listener, options) {\n  const instance = makeInstance(node)\n  const bag = getEvents(instance)\n  const n = getEventTarget(instance)\n\n  // listener can be a function or a number\n  if (typeof listener === 'function') {\n    listener = listener._svgjsListenerId\n    if (!listener) return\n  }\n\n  // events can be an array of events or a string or undefined\n  events = Array.isArray(events) ? events : (events || '').split(delimiter)\n\n  events.forEach(function (event) {\n    const ev = event && event.split('.')[0]\n    const ns = event && event.split('.')[1]\n    let namespace, l\n\n    if (listener) {\n      // remove listener reference\n      if (bag[ev] && bag[ev][ns || '*']) {\n        // removeListener\n        n.removeEventListener(ev, bag[ev][ns || '*'][listener], options || false)\n\n        delete bag[ev][ns || '*'][listener]\n      }\n    } else if (ev && ns) {\n      // remove all listeners for a namespaced event\n      if (bag[ev] && bag[ev][ns]) {\n        for (l in bag[ev][ns]) {\n          off(n, [ ev, ns ].join('.'), l)\n        }\n\n        delete bag[ev][ns]\n      }\n    } else if (ns) {\n      // remove all listeners for a specific namespace\n      for (event in bag) {\n        for (namespace in bag[event]) {\n          if (ns === namespace) {\n            off(n, [ event, ns ].join('.'))\n          }\n        }\n      }\n    } else if (ev) {\n      // remove all listeners for the event\n      if (bag[ev]) {\n        for (namespace in bag[ev]) {\n          off(n, [ ev, namespace ].join('.'))\n        }\n\n        delete bag[ev]\n      }\n    } else {\n      // remove all listeners on a given node\n      for (event in bag) {\n        off(n, event)\n      }\n\n      clearEvents(instance)\n    }\n  })\n}\n\nexport function dispatch (node, event, data, options) {\n  const n = getEventTarget(node)\n\n  // Dispatch event\n  if (event instanceof globals.window.Event) {\n    n.dispatchEvent(event)\n  } else {\n    event = new globals.window.CustomEvent(event, { detail: data, cancelable: true, ...options })\n    n.dispatchEvent(event)\n  }\n  return event\n}\n","import { dispatch, off, on } from '../modules/core/event.js'\nimport { register } from '../utils/adopter.js'\nimport Base from './Base.js'\n\nexport default class EventTarget extends Base {\n  addEventListener () {}\n\n  dispatch (event, data, options) {\n    return dispatch(this, event, data, options)\n  }\n\n  dispatchEvent (event) {\n    const bag = this.getEventHolder().events\n    if (!bag) return true\n\n    const events = bag[event.type]\n\n    for (const i in events) {\n      for (const j in events[i]) {\n        events[i][j](event)\n      }\n    }\n\n    return !event.defaultPrevented\n  }\n\n  // Fire given event\n  fire (event, data, options) {\n    this.dispatch(event, data, options)\n    return this\n  }\n\n  getEventHolder () {\n    return this\n  }\n\n  getEventTarget () {\n    return this\n  }\n\n  // Unbind event from listener\n  off (event, listener, options) {\n    off(this, event, listener, options)\n    return this\n  }\n\n  // Bind given event to listener\n  on (event, listener, binding, options) {\n    on(this, event, listener, binding, options)\n    return this\n  }\n\n  removeEventListener () {}\n}\n\nregister(EventTarget, 'EventTarget')\n","\nexport function noop () {}\n\n// Default animation values\nexport const timeline = {\n  duration: 400,\n  ease: '>',\n  delay: 0\n}\n\n// Default attribute values\nexport const attrs = {\n\n  // fill and stroke\n  'fill-opacity': 1,\n  'stroke-opacity': 1,\n  'stroke-width': 0,\n  'stroke-linejoin': 'miter',\n  'stroke-linecap': 'butt',\n  fill: '#000000',\n  stroke: '#000000',\n  opacity: 1,\n\n  // position\n  x: 0,\n  y: 0,\n  cx: 0,\n  cy: 0,\n\n  // size\n  width: 0,\n  height: 0,\n\n  // radius\n  r: 0,\n  rx: 0,\n  ry: 0,\n\n  // gradient\n  offset: 0,\n  'stop-opacity': 1,\n  'stop-color': '#000000',\n\n  // text\n  'text-anchor': 'start'\n}\n","import { delimiter } from '../modules/core/regex.js'\n\nexport default class SVGArray extends Array {\n  constructor (...args) {\n    super(...args)\n    this.init(...args)\n  }\n\n  clone () {\n    return new this.constructor(this)\n  }\n\n  init (arr) {\n    // This catches the case, that native map tries to create an array with new Array(1)\n    if (typeof arr === 'number') return this\n    this.length = 0\n    this.push(...this.parse(arr))\n    return this\n  }\n\n  // Parse whitespace separated string\n  parse (array = []) {\n    // If already is an array, no need to parse it\n    if (array instanceof Array) return array\n\n    return array.trim().split(delimiter).map(parseFloat)\n  }\n\n  toArray () {\n    return Array.prototype.concat.apply([], this)\n  }\n\n  toSet () {\n    return new Set(this)\n  }\n\n  toString () {\n    return this.join(' ')\n  }\n\n  // Flattens the array if needed\n  valueOf () {\n    const ret = []\n    ret.push(...this)\n    return ret\n  }\n\n}\n","import { numberAndUnit } from '../modules/core/regex.js'\n\n// Module for unit conversions\nexport default class SVGNumber {\n  // Initialize\n  constructor (...args) {\n    this.init(...args)\n  }\n\n  convert (unit) {\n    return new SVGNumber(this.value, unit)\n  }\n\n  // Divide number\n  divide (number) {\n    number = new SVGNumber(number)\n    return new SVGNumber(this / number, this.unit || number.unit)\n  }\n\n  init (value, unit) {\n    unit = Array.isArray(value) ? value[1] : unit\n    value = Array.isArray(value) ? value[0] : value\n\n    // initialize defaults\n    this.value = 0\n    this.unit = unit || ''\n\n    // parse value\n    if (typeof value === 'number') {\n      // ensure a valid numeric value\n      this.value = isNaN(value) ? 0 : !isFinite(value) ? (value < 0 ? -3.4e+38 : +3.4e+38) : value\n    } else if (typeof value === 'string') {\n      unit = value.match(numberAndUnit)\n\n      if (unit) {\n        // make value numeric\n        this.value = parseFloat(unit[1])\n\n        // normalize\n        if (unit[5] === '%') {\n          this.value /= 100\n        } else if (unit[5] === 's') {\n          this.value *= 1000\n        }\n\n        // store unit\n        this.unit = unit[5]\n      }\n    } else {\n      if (value instanceof SVGNumber) {\n        this.value = value.valueOf()\n        this.unit = value.unit\n      }\n    }\n\n    return this\n  }\n\n  // Subtract number\n  minus (number) {\n    number = new SVGNumber(number)\n    return new SVGNumber(this - number, this.unit || number.unit)\n  }\n\n  // Add number\n  plus (number) {\n    number = new SVGNumber(number)\n    return new SVGNumber(this + number, this.unit || number.unit)\n  }\n\n  // Multiply number\n  times (number) {\n    number = new SVGNumber(number)\n    return new SVGNumber(this * number, this.unit || number.unit)\n  }\n\n  toArray () {\n    return [ this.value, this.unit ]\n  }\n\n  toJSON () {\n    return this.toString()\n  }\n\n  toString () {\n    return (this.unit === '%'\n      ? ~~(this.value * 1e8) / 1e6\n      : this.unit === 's'\n        ? this.value / 1e3\n        : this.value\n    ) + this.unit\n  }\n\n  valueOf () {\n    return this.value\n  }\n\n}\n","import { attrs as defaults } from './defaults.js'\nimport { isNumber } from './regex.js'\nimport Color from '../../types/Color.js'\nimport SVGArray from '../../types/SVGArray.js'\nimport SVGNumber from '../../types/SVGNumber.js'\n\nconst hooks = []\nexport function registerAttrHook (fn) {\n  hooks.push(fn)\n}\n\n// Set svg element attribute\nexport default function attr (attr, val, ns) {\n  // act as full getter\n  if (attr == null) {\n    // get an object of attributes\n    attr = {}\n    val = this.node.attributes\n\n    for (const node of val) {\n      attr[node.nodeName] = isNumber.test(node.nodeValue)\n        ? parseFloat(node.nodeValue)\n        : node.nodeValue\n    }\n\n    return attr\n  } else if (attr instanceof Array) {\n    // loop through array and get all values\n    return attr.reduce((last, curr) => {\n      last[curr] = this.attr(curr)\n      return last\n    }, {})\n  } else if (typeof attr === 'object' && attr.constructor === Object) {\n    // apply every attribute individually if an object is passed\n    for (val in attr) this.attr(val, attr[val])\n  } else if (val === null) {\n    // remove value\n    this.node.removeAttribute(attr)\n  } else if (val == null) {\n    // act as a getter if the first and only argument is not an object\n    val = this.node.getAttribute(attr)\n    return val == null\n      ? defaults[attr]\n      : isNumber.test(val)\n        ? parseFloat(val)\n        : val\n  } else {\n    // Loop through hooks and execute them to convert value\n    val = hooks.reduce((_val, hook) => {\n      return hook(attr, _val, this)\n    }, val)\n\n    // ensure correct numeric values (also accepts NaN and Infinity)\n    if (typeof val === 'number') {\n      val = new SVGNumber(val)\n    } else if (Color.isColor(val)) {\n      // ensure full hex color\n      val = new Color(val)\n    } else if (val.constructor === Array) {\n      // Check for plain arrays and parse array values\n      val = new SVGArray(val)\n    }\n\n    // if the passed attribute is leading...\n    if (attr === 'leading') {\n      // ... call the leading method instead\n      if (this.leading) {\n        this.leading(val)\n      }\n    } else {\n      // set given attribute on node\n      typeof ns === 'string'\n        ? this.node.setAttributeNS(ns, attr, val.toString())\n        : this.node.setAttribute(attr, val.toString())\n    }\n\n    // rebuild if required\n    if (this.rebuild && (attr === 'font-size' || attr === 'x')) {\n      this.rebuild()\n    }\n  }\n\n  return this\n}\n","import {\n  adopt,\n  assignNewId,\n  eid,\n  extend,\n  makeInstance,\n  create,\n  register\n} from '../utils/adopter.js'\nimport { find, findOne } from '../modules/core/selector.js'\nimport { globals } from '../utils/window.js'\nimport { map } from '../utils/utils.js'\nimport { svg, html } from '../modules/core/namespaces.js'\nimport EventTarget from '../types/EventTarget.js'\nimport List from '../types/List.js'\nimport attr from '../modules/core/attr.js'\n\nexport default class Dom extends EventTarget {\n  constructor (node, attrs) {\n    super()\n    this.node = node\n    this.type = node.nodeName\n\n    if (attrs && node !== attrs) {\n      this.attr(attrs)\n    }\n  }\n\n  // Add given element at a position\n  add (element, i) {\n    element = makeInstance(element)\n\n    // If non-root svg nodes are added we have to remove their namespaces\n    if (element.removeNamespace && this.node instanceof globals.window.SVGElement) {\n      element.removeNamespace()\n    }\n\n    if (i == null) {\n      this.node.appendChild(element.node)\n    } else if (element.node !== this.node.childNodes[i]) {\n      this.node.insertBefore(element.node, this.node.childNodes[i])\n    }\n\n    return this\n  }\n\n  // Add element to given container and return self\n  addTo (parent, i) {\n    return makeInstance(parent).put(this, i)\n  }\n\n  // Returns all child elements\n  children () {\n    return new List(map(this.node.children, function (node) {\n      return adopt(node)\n    }))\n  }\n\n  // Remove all elements in this container\n  clear () {\n    // remove children\n    while (this.node.hasChildNodes()) {\n      this.node.removeChild(this.node.lastChild)\n    }\n\n    return this\n  }\n\n  // Clone element\n  clone (deep = true, assignNewIds = true) {\n    // write dom data to the dom so the clone can pickup the data\n    this.writeDataToDom()\n\n    // clone element\n    let nodeClone = this.node.cloneNode(deep)\n    if (assignNewIds) {\n      // assign new id\n      nodeClone = assignNewId(nodeClone)\n    }\n    return new this.constructor(nodeClone)\n  }\n\n  // Iterates over all children and invokes a given block\n  each (block, deep) {\n    const children = this.children()\n    let i, il\n\n    for (i = 0, il = children.length; i < il; i++) {\n      block.apply(children[i], [ i, children ])\n\n      if (deep) {\n        children[i].each(block, deep)\n      }\n    }\n\n    return this\n  }\n\n  element (nodeName, attrs) {\n    return this.put(new Dom(create(nodeName), attrs))\n  }\n\n  // Get first child\n  first () {\n    return adopt(this.node.firstChild)\n  }\n\n  // Get a element at the given index\n  get (i) {\n    return adopt(this.node.childNodes[i])\n  }\n\n  getEventHolder () {\n    return this.node\n  }\n\n  getEventTarget () {\n    return this.node\n  }\n\n  // Checks if the given element is a child\n  has (element) {\n    return this.index(element) >= 0\n  }\n\n  html (htmlOrFn, outerHTML) {\n    return this.xml(htmlOrFn, outerHTML, html)\n  }\n\n  // Get / set id\n  id (id) {\n    // generate new id if no id set\n    if (typeof id === 'undefined' && !this.node.id) {\n      this.node.id = eid(this.type)\n    }\n\n    // don't set directly with this.node.id to make `null` work correctly\n    return this.attr('id', id)\n  }\n\n  // Gets index of given element\n  index (element) {\n    return [].slice.call(this.node.childNodes).indexOf(element.node)\n  }\n\n  // Get the last child\n  last () {\n    return adopt(this.node.lastChild)\n  }\n\n  // matches the element vs a css selector\n  matches (selector) {\n    const el = this.node\n    const matcher = el.matches || el.matchesSelector || el.msMatchesSelector || el.mozMatchesSelector || el.webkitMatchesSelector || el.oMatchesSelector || null\n    return matcher && matcher.call(el, selector)\n  }\n\n  // Returns the parent element instance\n  parent (type) {\n    let parent = this\n\n    // check for parent\n    if (!parent.node.parentNode) return null\n\n    // get parent element\n    parent = adopt(parent.node.parentNode)\n\n    if (!type) return parent\n\n    // loop through ancestors if type is given\n    do {\n      if (typeof type === 'string' ? parent.matches(type) : parent instanceof type) return parent\n    } while ((parent = adopt(parent.node.parentNode)))\n\n    return parent\n  }\n\n  // Basically does the same as `add()` but returns the added element instead\n  put (element, i) {\n    element = makeInstance(element)\n    this.add(element, i)\n    return element\n  }\n\n  // Add element to given container and return container\n  putIn (parent, i) {\n    return makeInstance(parent).add(this, i)\n  }\n\n  // Remove element\n  remove () {\n    if (this.parent()) {\n      this.parent().removeElement(this)\n    }\n\n    return this\n  }\n\n  // Remove a given child\n  removeElement (element) {\n    this.node.removeChild(element.node)\n\n    return this\n  }\n\n  // Replace this with element\n  replace (element) {\n    element = makeInstance(element)\n\n    if (this.node.parentNode) {\n      this.node.parentNode.replaceChild(element.node, this.node)\n    }\n\n    return element\n  }\n\n  round (precision = 2, map = null) {\n    const factor = 10 ** precision\n    const attrs = this.attr(map)\n\n    for (const i in attrs) {\n      if (typeof attrs[i] === 'number') {\n        attrs[i] = Math.round(attrs[i] * factor) / factor\n      }\n    }\n\n    this.attr(attrs)\n    return this\n  }\n\n  // Import / Export raw svg\n  svg (svgOrFn, outerSVG) {\n    return this.xml(svgOrFn, outerSVG, svg)\n  }\n\n  // Return id on string conversion\n  toString () {\n    return this.id()\n  }\n\n  words (text) {\n    // This is faster than removing all children and adding a new one\n    this.node.textContent = text\n    return this\n  }\n\n  wrap (node) {\n    const parent = this.parent()\n\n    if (!parent) {\n      return this.addTo(node)\n    }\n\n    const position = parent.index(this)\n    return parent.put(node, position).put(this)\n  }\n\n  // write svgjs data to the dom\n  writeDataToDom () {\n    // dump variables recursively\n    this.each(function () {\n      this.writeDataToDom()\n    })\n\n    return this\n  }\n\n  // Import / Export raw svg\n  xml (xmlOrFn, outerXML, ns) {\n    if (typeof xmlOrFn === 'boolean') {\n      ns = outerXML\n      outerXML = xmlOrFn\n      xmlOrFn = null\n    }\n\n    // act as getter if no svg string is given\n    if (xmlOrFn == null || typeof xmlOrFn === 'function') {\n      // The default for exports is, that the outerNode is included\n      outerXML = outerXML == null ? true : outerXML\n\n      // write svgjs data to the dom\n      this.writeDataToDom()\n      let current = this\n\n      // An export modifier was passed\n      if (xmlOrFn != null) {\n        current = adopt(current.node.cloneNode(true))\n\n        // If the user wants outerHTML we need to process this node, too\n        if (outerXML) {\n          const result = xmlOrFn(current)\n          current = result || current\n\n          // The user does not want this node? Well, then he gets nothing\n          if (result === false) return ''\n        }\n\n        // Deep loop through all children and apply modifier\n        current.each(function () {\n          const result = xmlOrFn(this)\n          const _this = result || this\n\n          // If modifier returns false, discard node\n          if (result === false) {\n            this.remove()\n\n            // If modifier returns new node, use it\n          } else if (result && this !== _this) {\n            this.replace(_this)\n          }\n        }, true)\n      }\n\n      // Return outer or inner content\n      return outerXML\n        ? current.node.outerHTML\n        : current.node.innerHTML\n    }\n\n    // Act as setter if we got a string\n\n    // The default for import is, that the current node is not replaced\n    outerXML = outerXML == null ? false : outerXML\n\n    // Create temporary holder\n    const well = create('wrapper', ns)\n    const fragment = globals.document.createDocumentFragment()\n\n    // Dump raw svg\n    well.innerHTML = xmlOrFn\n\n    // Transplant nodes into the fragment\n    for (let len = well.children.length; len--;) {\n      fragment.appendChild(well.firstElementChild)\n    }\n\n    const parent = this.parent()\n\n    // Add the whole fragment at once\n    return outerXML\n      ? this.replace(fragment) && parent\n      : this.add(fragment)\n  }\n}\n\nextend(Dom, { attr, find, findOne })\nregister(Dom, 'Dom')\n","import { bbox, rbox, inside } from '../types/Box.js'\nimport { ctm, screenCTM } from '../types/Matrix.js'\nimport {\n  extend,\n  getClass,\n  makeInstance,\n  register,\n  root\n} from '../utils/adopter.js'\nimport { globals } from '../utils/window.js'\nimport { point } from '../types/Point.js'\nimport { proportionalSize } from '../utils/utils.js'\nimport { reference } from '../modules/core/regex.js'\nimport Dom from './Dom.js'\nimport List from '../types/List.js'\nimport SVGNumber from '../types/SVGNumber.js'\n\nexport default class Element extends Dom {\n  constructor (node, attrs) {\n    super(node, attrs)\n\n    // initialize data object\n    this.dom = {}\n\n    // create circular reference\n    this.node.instance = this\n\n    if (node.hasAttribute('svgjs:data')) {\n      // pull svgjs data from the dom (getAttributeNS doesn't work in html5)\n      this.setData(JSON.parse(node.getAttribute('svgjs:data')) || {})\n    }\n  }\n\n  // Move element by its center\n  center (x, y) {\n    return this.cx(x).cy(y)\n  }\n\n  // Move by center over x-axis\n  cx (x) {\n    return x == null\n      ? this.x() + this.width() / 2\n      : this.x(x - this.width() / 2)\n  }\n\n  // Move by center over y-axis\n  cy (y) {\n    return y == null\n      ? this.y() + this.height() / 2\n      : this.y(y - this.height() / 2)\n  }\n\n  // Get defs\n  defs () {\n    const root = this.root()\n    return root && root.defs()\n  }\n\n  // Relative move over x and y axes\n  dmove (x, y) {\n    return this.dx(x).dy(y)\n  }\n\n  // Relative move over x axis\n  dx (x = 0) {\n    return this.x(new SVGNumber(x).plus(this.x()))\n  }\n\n  // Relative move over y axis\n  dy (y = 0) {\n    return this.y(new SVGNumber(y).plus(this.y()))\n  }\n\n  getEventHolder () {\n    return this\n  }\n\n  // Set height of element\n  height (height) {\n    return this.attr('height', height)\n  }\n\n  // Move element to given x and y values\n  move (x, y) {\n    return this.x(x).y(y)\n  }\n\n  // return array of all ancestors of given type up to the root svg\n  parents (until = this.root()) {\n    const isSelector = typeof until === 'string'\n    if (!isSelector) {\n      until = makeInstance(until)\n    }\n    const parents = new List()\n    let parent = this\n\n    while (\n      (parent = parent.parent())\n      && parent.node !== globals.document\n      && parent.nodeName !== '#document-fragment') {\n\n      parents.push(parent)\n\n      if (!isSelector && (parent.node === until.node)) {\n        break\n      }\n      if (isSelector && parent.matches(until)) {\n        break\n      }\n      if (parent.node === this.root().node) {\n        // We worked our way to the root and didn't match `until`\n        return null\n      }\n    }\n\n    return parents\n  }\n\n  // Get referenced element form attribute value\n  reference (attr) {\n    attr = this.attr(attr)\n    if (!attr) return null\n\n    const m = (attr + '').match(reference)\n    return m ? makeInstance(m[1]) : null\n  }\n\n  // Get parent document\n  root () {\n    const p = this.parent(getClass(root))\n    return p && p.root()\n  }\n\n  // set given data to the elements data property\n  setData (o) {\n    this.dom = o\n    return this\n  }\n\n  // Set element size to given width and height\n  size (width, height) {\n    const p = proportionalSize(this, width, height)\n\n    return this\n      .width(new SVGNumber(p.width))\n      .height(new SVGNumber(p.height))\n  }\n\n  // Set width of element\n  width (width) {\n    return this.attr('width', width)\n  }\n\n  // write svgjs data to the dom\n  writeDataToDom () {\n    // remove previously set data\n    this.node.removeAttribute('svgjs:data')\n\n    if (Object.keys(this.dom).length) {\n      this.node.setAttribute('svgjs:data', JSON.stringify(this.dom)) // see #428\n    }\n\n    return super.writeDataToDom()\n  }\n\n  // Move over x-axis\n  x (x) {\n    return this.attr('x', x)\n  }\n\n  // Move over y-axis\n  y (y) {\n    return this.attr('y', y)\n  }\n}\n\nextend(Element, {\n  bbox, rbox, inside, point, ctm, screenCTM\n})\n\nregister(Element, 'Element')\n","import { registerMethods } from '../../utils/methods.js'\nimport Color from '../../types/Color.js'\nimport Element from '../../elements/Element.js'\nimport Matrix from '../../types/Matrix.js'\nimport Point from '../../types/Point.js'\nimport SVGNumber from '../../types/SVGNumber.js'\n\n// Define list of available attributes for stroke and fill\nconst sugar = {\n  stroke: [ 'color', 'width', 'opacity', 'linecap', 'linejoin', 'miterlimit', 'dasharray', 'dashoffset' ],\n  fill: [ 'color', 'opacity', 'rule' ],\n  prefix: function (t, a) {\n    return a === 'color' ? t : t + '-' + a\n  }\n}\n\n// Add sugar for fill and stroke\n;[ 'fill', 'stroke' ].forEach(function (m) {\n  const extension = {}\n  let i\n\n  extension[m] = function (o) {\n    if (typeof o === 'undefined') {\n      return this.attr(m)\n    }\n    if (typeof o === 'string' || o instanceof Color || Color.isRgb(o) || (o instanceof Element)) {\n      this.attr(m, o)\n    } else {\n      // set all attributes from sugar.fill and sugar.stroke list\n      for (i = sugar[m].length - 1; i >= 0; i--) {\n        if (o[sugar[m][i]] != null) {\n          this.attr(sugar.prefix(m, sugar[m][i]), o[sugar[m][i]])\n        }\n      }\n    }\n\n    return this\n  }\n\n  registerMethods([ 'Element', 'Runner' ], extension)\n})\n\nregisterMethods([ 'Element', 'Runner' ], {\n  // Let the user set the matrix directly\n  matrix: function (mat, b, c, d, e, f) {\n    // Act as a getter\n    if (mat == null) {\n      return new Matrix(this)\n    }\n\n    // Act as a setter, the user can pass a matrix or a set of numbers\n    return this.attr('transform', new Matrix(mat, b, c, d, e, f))\n  },\n\n  // Map rotation to transform\n  rotate: function (angle, cx, cy) {\n    return this.transform({ rotate: angle, ox: cx, oy: cy }, true)\n  },\n\n  // Map skew to transform\n  skew: function (x, y, cx, cy) {\n    return arguments.length === 1 || arguments.length === 3\n      ? this.transform({ skew: x, ox: y, oy: cx }, true)\n      : this.transform({ skew: [ x, y ], ox: cx, oy: cy }, true)\n  },\n\n  shear: function (lam, cx, cy) {\n    return this.transform({ shear: lam, ox: cx, oy: cy }, true)\n  },\n\n  // Map scale to transform\n  scale: function (x, y, cx, cy) {\n    return arguments.length === 1 || arguments.length === 3\n      ? this.transform({ scale: x, ox: y, oy: cx }, true)\n      : this.transform({ scale: [ x, y ], ox: cx, oy: cy }, true)\n  },\n\n  // Map translate to transform\n  translate: function (x, y) {\n    return this.transform({ translate: [ x, y ] }, true)\n  },\n\n  // Map relative translations to transform\n  relative: function (x, y) {\n    return this.transform({ relative: [ x, y ] }, true)\n  },\n\n  // Map flip to transform\n  flip: function (direction = 'both', origin = 'center') {\n    if ('xybothtrue'.indexOf(direction) === -1) {\n      origin = direction\n      direction = 'both'\n    }\n\n    return this.transform({ flip: direction, origin: origin }, true)\n  },\n\n  // Opacity\n  opacity: function (value) {\n    return this.attr('opacity', value)\n  }\n})\n\nregisterMethods('radius', {\n  // Add x and y radius\n  radius: function (x, y = x) {\n    const type = (this._element || this).type\n    return type === 'radialGradient'\n      ? this.attr('r', new SVGNumber(x))\n      : this.rx(x).ry(y)\n  }\n})\n\nregisterMethods('Path', {\n  // Get path length\n  length: function () {\n    return this.node.getTotalLength()\n  },\n  // Get point at length\n  pointAt: function (length) {\n    return new Point(this.node.getPointAtLength(length))\n  }\n})\n\nregisterMethods([ 'Element', 'Runner' ], {\n  // Set font\n  font: function (a, v) {\n    if (typeof a === 'object') {\n      for (v in a) this.font(v, a[v])\n      return this\n    }\n\n    return a === 'leading'\n      ? this.leading(v)\n      : a === 'anchor'\n        ? this.attr('text-anchor', v)\n        : a === 'size' || a === 'family' || a === 'weight' || a === 'stretch' || a === 'variant' || a === 'style'\n          ? this.attr('font-' + a, v)\n          : this.attr(a, v)\n  }\n})\n\n// Add events to elements\nconst methods = [ 'click',\n  'dblclick',\n  'mousedown',\n  'mouseup',\n  'mouseover',\n  'mouseout',\n  'mousemove',\n  'mouseenter',\n  'mouseleave',\n  'touchstart',\n  'touchmove',\n  'touchleave',\n  'touchend',\n  'touchcancel' ].reduce(function (last, event) {\n  // add event to Element\n  const fn = function (f) {\n    if (f === null) {\n      this.off(event)\n    } else {\n      this.on(event, f)\n    }\n    return this\n  }\n\n  last[event] = fn\n  return last\n}, {})\n\nregisterMethods('Element', methods)\n","import { getOrigin } from '../../utils/utils.js'\nimport { delimiter, transforms } from '../core/regex.js'\nimport { registerMethods } from '../../utils/methods.js'\nimport Matrix from '../../types/Matrix.js'\n\n// Reset all transformations\nexport function untransform () {\n  return this.attr('transform', null)\n}\n\n// merge the whole transformation chain into one matrix and returns it\nexport function matrixify () {\n  const matrix = (this.attr('transform') || '')\n    // split transformations\n    .split(transforms).slice(0, -1).map(function (str) {\n      // generate key => value pairs\n      const kv = str.trim().split('(')\n      return [ kv[0],\n        kv[1].split(delimiter)\n          .map(function (str) {\n            return parseFloat(str)\n          })\n      ]\n    })\n    .reverse()\n    // merge every transformation into one matrix\n    .reduce(function (matrix, transform) {\n      if (transform[0] === 'matrix') {\n        return matrix.lmultiply(Matrix.fromArray(transform[1]))\n      }\n      return matrix[transform[0]].apply(matrix, transform[1])\n    }, new Matrix())\n\n  return matrix\n}\n\n// add an element to another parent without changing the visual representation on the screen\nexport function toParent (parent, i) {\n  if (this === parent) return this\n  const ctm = this.screenCTM()\n  const pCtm = parent.screenCTM().inverse()\n\n  this.addTo(parent, i).untransform().transform(pCtm.multiply(ctm))\n\n  return this\n}\n\n// same as above with parent equals root-svg\nexport function toRoot (i) {\n  return this.toParent(this.root(), i)\n}\n\n// Add transformations\nexport function transform (o, relative) {\n  // Act as a getter if no object was passed\n  if (o == null || typeof o === 'string') {\n    const decomposed = new Matrix(this).decompose()\n    return o == null ? decomposed : decomposed[o]\n  }\n\n  if (!Matrix.isMatrixLike(o)) {\n    // Set the origin according to the defined transform\n    o = { ...o, origin: getOrigin(o, this) }\n  }\n\n  // The user can pass a boolean, an Element or an Matrix or nothing\n  const cleanRelative = relative === true ? this : (relative || false)\n  const result = new Matrix(cleanRelative).transform(o)\n  return this.attr('transform', result)\n}\n\nregisterMethods('Element', {\n  untransform, matrixify, toParent, toRoot, transform\n})\n","import { register } from '../utils/adopter.js'\nimport Element from './Element.js'\n\nexport default class Container extends Element {\n  flatten (parent = this, index) {\n    this.each(function () {\n      if (this instanceof Container) {\n        return this.flatten().ungroup()\n      }\n    })\n\n    return this\n  }\n\n  ungroup (parent = this.parent(), index = parent.index(this)) {\n    // when parent != this, we want append all elements to the end\n    index = index === -1 ? parent.children().length : index\n\n    this.each(function (i, children) {\n      // reverse each\n      return children[children.length - i - 1].toParent(parent, index)\n    })\n\n    return this.remove()\n  }\n}\n\nregister(Container, 'Container')\n","import { nodeOrNew, register } from '../utils/adopter.js'\nimport Container from './Container.js'\n\nexport default class Defs extends Container {\n  constructor (node, attrs = node) {\n    super(nodeOrNew('defs', node), attrs)\n  }\n\n  flatten () {\n    return this\n  }\n\n  ungroup () {\n    return this\n  }\n}\n\nregister(Defs, 'Defs')\n","import { register } from '../utils/adopter.js'\nimport Element from './Element.js'\n\nexport default class Shape extends Element {}\n\nregister(Shape, 'Shape')\n","import SVGNumber from '../../types/SVGNumber.js'\n\n// Radius x value\nexport function rx (rx) {\n  return this.attr('rx', rx)\n}\n\n// Radius y value\nexport function ry (ry) {\n  return this.attr('ry', ry)\n}\n\n// Move over x-axis\nexport function x (x) {\n  return x == null\n    ? this.cx() - this.rx()\n    : this.cx(x + this.rx())\n}\n\n// Move over y-axis\nexport function y (y) {\n  return y == null\n    ? this.cy() - this.ry()\n    : this.cy(y + this.ry())\n}\n\n// Move by center over x-axis\nexport function cx (x) {\n  return this.attr('cx', x)\n}\n\n// Move by center over y-axis\nexport function cy (y) {\n  return this.attr('cy', y)\n}\n\n// Set width of element\nexport function width (width) {\n  return width == null\n    ? this.rx() * 2\n    : this.rx(new SVGNumber(width).divide(2))\n}\n\n// Set height of element\nexport function height (height) {\n  return height == null\n    ? this.ry() * 2\n    : this.ry(new SVGNumber(height).divide(2))\n}\n","import {\n  extend,\n  nodeOrNew,\n  register,\n  wrapWithAttrCheck\n} from '../utils/adopter.js'\nimport { proportionalSize } from '../utils/utils.js'\nimport { registerMethods } from '../utils/methods.js'\nimport SVGNumber from '../types/SVGNumber.js'\nimport Shape from './Shape.js'\nimport * as circled from '../modules/core/circled.js'\n\nexport default class Ellipse extends Shape {\n  constructor (node, attrs = node) {\n    super(nodeOrNew('ellipse', node), attrs)\n  }\n\n  size (width, height) {\n    const p = proportionalSize(this, width, height)\n\n    return this\n      .rx(new SVGNumber(p.width).divide(2))\n      .ry(new SVGNumber(p.height).divide(2))\n  }\n}\n\nextend(Ellipse, circled)\n\nregisterMethods('Container', {\n  // Create an ellipse\n  ellipse: wrapWithAttrCheck(function (width = 0, height = width) {\n    return this.put(new Ellipse()).size(width, height).move(0, 0)\n  })\n})\n\nregister(Ellipse, 'Ellipse')\n","import Dom from './Dom.js'\nimport { globals } from '../utils/window.js'\nimport { register, create } from '../utils/adopter.js'\n\nclass Fragment extends Dom {\n  constructor (node = globals.document.createDocumentFragment()) {\n    super(node)\n  }\n\n  // Import / Export raw xml\n  xml (xmlOrFn, outerXML, ns) {\n    if (typeof xmlOrFn === 'boolean') {\n      ns = outerXML\n      outerXML = xmlOrFn\n      xmlOrFn = null\n    }\n\n    // because this is a fragment we have to put all elements into a wrapper first\n    // before we can get the innerXML from it\n    if (xmlOrFn == null || typeof xmlOrFn === 'function') {\n      const wrapper = new Dom(create('wrapper', ns))\n      wrapper.add(this.node.cloneNode(true))\n\n      return wrapper.xml(false, ns)\n    }\n\n    // Act as setter if we got a string\n    return super.xml(xmlOrFn, false, ns)\n  }\n\n}\n\nregister(Fragment, 'Fragment')\n\nexport default Fragment\n","import SVGNumber from '../../types/SVGNumber.js'\n\nexport function from (x, y) {\n  return (this._element || this).type === 'radialGradient'\n    ? this.attr({ fx: new SVGNumber(x), fy: new SVGNumber(y) })\n    : this.attr({ x1: new SVGNumber(x), y1: new SVGNumber(y) })\n}\n\nexport function to (x, y) {\n  return (this._element || this).type === 'radialGradient'\n    ? this.attr({ cx: new SVGNumber(x), cy: new SVGNumber(y) })\n    : this.attr({ x2: new SVGNumber(x), y2: new SVGNumber(y) })\n}\n","import {\n  extend,\n  nodeOrNew,\n  register,\n  wrapWithAttrCheck\n} from '../utils/adopter.js'\nimport { registerMethods } from '../utils/methods.js'\nimport Box from '../types/Box.js'\nimport Container from './Container.js'\nimport baseFind from '../modules/core/selector.js'\nimport * as gradiented from '../modules/core/gradiented.js'\n\nexport default class Gradient extends Container {\n  constructor (type, attrs) {\n    super(\n      nodeOrNew(type + 'Gradient', typeof type === 'string' ? null : type),\n      attrs\n    )\n  }\n\n  // custom attr to handle transform\n  attr (a, b, c) {\n    if (a === 'transform') a = 'gradientTransform'\n    return super.attr(a, b, c)\n  }\n\n  bbox () {\n    return new Box()\n  }\n\n  targets () {\n    return baseFind('svg [fill*=' + this.id() + ']')\n  }\n\n  // Alias string conversion to fill\n  toString () {\n    return this.url()\n  }\n\n  // Update gradient\n  update (block) {\n    // remove all stops\n    this.clear()\n\n    // invoke passed block\n    if (typeof block === 'function') {\n      block.call(this, this)\n    }\n\n    return this\n  }\n\n  // Return the fill id\n  url () {\n    return 'url(#' + this.id() + ')'\n  }\n}\n\nextend(Gradient, gradiented)\n\nregisterMethods({\n  Container: {\n    // Create gradient element in defs\n    gradient (...args) {\n      return this.defs().gradient(...args)\n    }\n  },\n  // define gradient\n  Defs: {\n    gradient: wrapWithAttrCheck(function (type, block) {\n      return this.put(new Gradient(type)).update(block)\n    })\n  }\n})\n\nregister(Gradient, 'Gradient')\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\nimport { registerMethods } from '../utils/methods.js'\nimport Box from '../types/Box.js'\nimport Container from './Container.js'\nimport baseFind from '../modules/core/selector.js'\n\nexport default class Pattern extends Container {\n  // Initialize node\n  constructor (node, attrs = node) {\n    super(nodeOrNew('pattern', node), attrs)\n  }\n\n  // custom attr to handle transform\n  attr (a, b, c) {\n    if (a === 'transform') a = 'patternTransform'\n    return super.attr(a, b, c)\n  }\n\n  bbox () {\n    return new Box()\n  }\n\n  targets () {\n    return baseFind('svg [fill*=' + this.id() + ']')\n  }\n\n  // Alias string conversion to fill\n  toString () {\n    return this.url()\n  }\n\n  // Update pattern by rebuilding\n  update (block) {\n    // remove content\n    this.clear()\n\n    // invoke passed block\n    if (typeof block === 'function') {\n      block.call(this, this)\n    }\n\n    return this\n  }\n\n  // Return the fill id\n  url () {\n    return 'url(#' + this.id() + ')'\n  }\n\n}\n\nregisterMethods({\n  Container: {\n    // Create pattern element in defs\n    pattern (...args) {\n      return this.defs().pattern(...args)\n    }\n  },\n  Defs: {\n    pattern: wrapWithAttrCheck(function (width, height, block) {\n      return this.put(new Pattern()).update(block).attr({\n        x: 0,\n        y: 0,\n        width: width,\n        height: height,\n        patternUnits: 'userSpaceOnUse'\n      })\n    })\n  }\n})\n\nregister(Pattern, 'Pattern')\n","import { isImage } from '../modules/core/regex.js'\nimport { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\nimport { off, on } from '../modules/core/event.js'\nimport { registerAttrHook } from '../modules/core/attr.js'\nimport { registerMethods } from '../utils/methods.js'\nimport { xlink } from '../modules/core/namespaces.js'\nimport Pattern from './Pattern.js'\nimport Shape from './Shape.js'\nimport { globals } from '../utils/window.js'\n\nexport default class Image extends Shape {\n  constructor (node, attrs = node) {\n    super(nodeOrNew('image', node), attrs)\n  }\n\n  // (re)load image\n  load (url, callback) {\n    if (!url) return this\n\n    const img = new globals.window.Image()\n\n    on(img, 'load', function (e) {\n      const p = this.parent(Pattern)\n\n      // ensure image size\n      if (this.width() === 0 && this.height() === 0) {\n        this.size(img.width, img.height)\n      }\n\n      if (p instanceof Pattern) {\n        // ensure pattern size if not set\n        if (p.width() === 0 && p.height() === 0) {\n          p.size(this.width(), this.height())\n        }\n      }\n\n      if (typeof callback === 'function') {\n        callback.call(this, e)\n      }\n    }, this)\n\n    on(img, 'load error', function () {\n      // dont forget to unbind memory leaking events\n      off(img)\n    })\n\n    return this.attr('href', (img.src = url), xlink)\n  }\n}\n\nregisterAttrHook(function (attr, val, _this) {\n  // convert image fill and stroke to patterns\n  if (attr === 'fill' || attr === 'stroke') {\n    if (isImage.test(val)) {\n      val = _this.root().defs().image(val)\n    }\n  }\n\n  if (val instanceof Image) {\n    val = _this.root().defs().pattern(0, 0, (pattern) => {\n      pattern.add(val)\n    })\n  }\n\n  return val\n})\n\nregisterMethods({\n  Container: {\n    // create image element, load image and set its size\n    image: wrapWithAttrCheck(function (source, callback) {\n      return this.put(new Image()).size(0, 0).load(source, callback)\n    })\n  }\n})\n\nregister(Image, 'Image')\n","import { delimiter } from '../modules/core/regex.js'\nimport SVGArray from './SVGArray.js'\nimport Box from './Box.js'\nimport Matrix from './Matrix.js'\n\nexport default class PointArray extends SVGArray {\n  // Get bounding box of points\n  bbox () {\n    let maxX = -Infinity\n    let maxY = -Infinity\n    let minX = Infinity\n    let minY = Infinity\n    this.forEach(function (el) {\n      maxX = Math.max(el[0], maxX)\n      maxY = Math.max(el[1], maxY)\n      minX = Math.min(el[0], minX)\n      minY = Math.min(el[1], minY)\n    })\n    return new Box(minX, minY, maxX - minX, maxY - minY)\n  }\n\n  // Move point string\n  move (x, y) {\n    const box = this.bbox()\n\n    // get relative offset\n    x -= box.x\n    y -= box.y\n\n    // move every point\n    if (!isNaN(x) && !isNaN(y)) {\n      for (let i = this.length - 1; i >= 0; i--) {\n        this[i] = [ this[i][0] + x, this[i][1] + y ]\n      }\n    }\n\n    return this\n  }\n\n  // Parse point string and flat array\n  parse (array = [ 0, 0 ]) {\n    const points = []\n\n    // if it is an array, we flatten it and therefore clone it to 1 depths\n    if (array instanceof Array) {\n      array = Array.prototype.concat.apply([], array)\n    } else { // Else, it is considered as a string\n      // parse points\n      array = array.trim().split(delimiter).map(parseFloat)\n    }\n\n    // validate points - https://svgwg.org/svg2-draft/shapes.html#DataTypePoints\n    // Odd number of coordinates is an error. In such cases, drop the last odd coordinate.\n    if (array.length % 2 !== 0) array.pop()\n\n    // wrap points in two-tuples\n    for (let i = 0, len = array.length; i < len; i = i + 2) {\n      points.push([ array[i], array[i + 1] ])\n    }\n\n    return points\n  }\n\n  // Resize poly string\n  size (width, height) {\n    let i\n    const box = this.bbox()\n\n    // recalculate position of all points according to new size\n    for (i = this.length - 1; i >= 0; i--) {\n      if (box.width) this[i][0] = ((this[i][0] - box.x) * width) / box.width + box.x\n      if (box.height) this[i][1] = ((this[i][1] - box.y) * height) / box.height + box.y\n    }\n\n    return this\n  }\n\n  // Convert array to line object\n  toLine () {\n    return {\n      x1: this[0][0],\n      y1: this[0][1],\n      x2: this[1][0],\n      y2: this[1][1]\n    }\n  }\n\n  // Convert array to string\n  toString () {\n    const array = []\n    // convert to a poly point string\n    for (let i = 0, il = this.length; i < il; i++) {\n      array.push(this[i].join(','))\n    }\n\n    return array.join(' ')\n  }\n\n  transform (m) {\n    return this.clone().transformO(m)\n  }\n\n  // transform points with matrix (similar to Point.transform)\n  transformO (m) {\n    if (!Matrix.isMatrixLike(m)) {\n      m = new Matrix(m)\n    }\n\n    for (let i = this.length; i--;) {\n      // Perform the matrix multiplication\n      const [ x, y ] = this[i]\n      this[i][0] = m.a * x + m.c * y + m.e\n      this[i][1] = m.b * x + m.d * y + m.f\n    }\n\n    return this\n  }\n\n}\n","import PointArray from '../../types/PointArray.js'\n\nexport const MorphArray = PointArray\n\n// Move by left top corner over x-axis\nexport function x (x) {\n  return x == null ? this.bbox().x : this.move(x, this.bbox().y)\n}\n\n// Move by left top corner over y-axis\nexport function y (y) {\n  return y == null ? this.bbox().y : this.move(this.bbox().x, y)\n}\n\n// Set width of element\nexport function width (width) {\n  const b = this.bbox()\n  return width == null ? b.width : this.size(width, b.height)\n}\n\n// Set height of element\nexport function height (height) {\n  const b = this.bbox()\n  return height == null ? b.height : this.size(b.width, height)\n}\n","import {\n  extend,\n  nodeOrNew,\n  register,\n  wrapWithAttrCheck\n} from '../utils/adopter.js'\nimport { proportionalSize } from '../utils/utils.js'\nimport { registerMethods } from '../utils/methods.js'\nimport PointArray from '../types/PointArray.js'\nimport Shape from './Shape.js'\nimport * as pointed from '../modules/core/pointed.js'\n\nexport default class Line extends Shape {\n  // Initialize node\n  constructor (node, attrs = node) {\n    super(nodeOrNew('line', node), attrs)\n  }\n\n  // Get array\n  array () {\n    return new PointArray([\n      [ this.attr('x1'), this.attr('y1') ],\n      [ this.attr('x2'), this.attr('y2') ]\n    ])\n  }\n\n  // Move by left top corner\n  move (x, y) {\n    return this.attr(this.array().move(x, y).toLine())\n  }\n\n  // Overwrite native plot() method\n  plot (x1, y1, x2, y2) {\n    if (x1 == null) {\n      return this.array()\n    } else if (typeof y1 !== 'undefined') {\n      x1 = { x1, y1, x2, y2 }\n    } else {\n      x1 = new PointArray(x1).toLine()\n    }\n\n    return this.attr(x1)\n  }\n\n  // Set element size to given width and height\n  size (width, height) {\n    const p = proportionalSize(this, width, height)\n    return this.attr(this.array().size(p.width, p.height).toLine())\n  }\n}\n\nextend(Line, pointed)\n\nregisterMethods({\n  Container: {\n    // Create a line element\n    line: wrapWithAttrCheck(function (...args) {\n      // make sure plot is called as a setter\n      // x1 is not necessarily a number, it can also be an array, a string and a PointArray\n      return Line.prototype.plot.apply(\n        this.put(new Line())\n        , args[0] != null ? args : [ 0, 0, 0, 0 ]\n      )\n    })\n  }\n})\n\nregister(Line, 'Line')\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\nimport { registerMethods } from '../utils/methods.js'\nimport Container from './Container.js'\n\nexport default class Marker extends Container {\n  // Initialize node\n  constructor (node, attrs = node) {\n    super(nodeOrNew('marker', node), attrs)\n  }\n\n  // Set height of element\n  height (height) {\n    return this.attr('markerHeight', height)\n  }\n\n  orient (orient) {\n    return this.attr('orient', orient)\n  }\n\n  // Set marker refX and refY\n  ref (x, y) {\n    return this.attr('refX', x).attr('refY', y)\n  }\n\n  // Return the fill id\n  toString () {\n    return 'url(#' + this.id() + ')'\n  }\n\n  // Update marker\n  update (block) {\n    // remove all content\n    this.clear()\n\n    // invoke passed block\n    if (typeof block === 'function') {\n      block.call(this, this)\n    }\n\n    return this\n  }\n\n  // Set width of element\n  width (width) {\n    return this.attr('markerWidth', width)\n  }\n\n}\n\nregisterMethods({\n  Container: {\n    marker (...args) {\n      // Create marker element in defs\n      return this.defs().marker(...args)\n    }\n  },\n  Defs: {\n    // Create marker\n    marker: wrapWithAttrCheck(function (width, height, block) {\n      // Set default viewbox to match the width and height, set ref to cx and cy and set orient to auto\n      return this.put(new Marker())\n        .size(width, height)\n        .ref(width / 2, height / 2)\n        .viewbox(0, 0, width, height)\n        .attr('orient', 'auto')\n        .update(block)\n    })\n  },\n  marker: {\n    // Create and attach markers\n    marker (marker, width, height, block) {\n      let attr = [ 'marker' ]\n\n      // Build attribute name\n      if (marker !== 'all') attr.push(marker)\n      attr = attr.join('-')\n\n      // Set marker attribute\n      marker = arguments[1] instanceof Marker\n        ? arguments[1]\n        : this.defs().marker(width, height, block)\n\n      return this.attr(attr, marker)\n    }\n  }\n})\n\nregister(Marker, 'Marker')\n","import { timeline } from '../modules/core/defaults.js'\nimport { extend } from '../utils/adopter.js'\n\n/***\nBase Class\n==========\nThe base stepper class that will be\n***/\n\nfunction makeSetterGetter (k, f) {\n  return function (v) {\n    if (v == null) return this[k]\n    this[k] = v\n    if (f) f.call(this)\n    return this\n  }\n}\n\nexport const easing = {\n  '-': function (pos) {\n    return pos\n  },\n  '<>': function (pos) {\n    return -Math.cos(pos * Math.PI) / 2 + 0.5\n  },\n  '>': function (pos) {\n    return Math.sin(pos * Math.PI / 2)\n  },\n  '<': function (pos) {\n    return -Math.cos(pos * Math.PI / 2) + 1\n  },\n  bezier: function (x1, y1, x2, y2) {\n    // see https://www.w3.org/TR/css-easing-1/#cubic-bezier-algo\n    return function (t) {\n      if (t < 0) {\n        if (x1 > 0) {\n          return y1 / x1 * t\n        } else if (x2 > 0) {\n          return y2 / x2 * t\n        } else {\n          return 0\n        }\n      } else if (t > 1) {\n        if (x2 < 1) {\n          return (1 - y2) / (1 - x2) * t + (y2 - x2) / (1 - x2)\n        } else if (x1 < 1) {\n          return (1 - y1) / (1 - x1) * t + (y1 - x1) / (1 - x1)\n        } else {\n          return 1\n        }\n      } else {\n        return 3 * t * (1 - t) ** 2 * y1 + 3 * t ** 2 * (1 - t) * y2 + t ** 3\n      }\n    }\n  },\n  // see https://www.w3.org/TR/css-easing-1/#step-timing-function-algo\n  steps: function (steps, stepPosition = 'end') {\n    // deal with \"jump-\" prefix\n    stepPosition = stepPosition.split('-').reverse()[0]\n\n    let jumps = steps\n    if (stepPosition === 'none') {\n      --jumps\n    } else if (stepPosition === 'both') {\n      ++jumps\n    }\n\n    // The beforeFlag is essentially useless\n    return (t, beforeFlag = false) => {\n      // Step is called currentStep in referenced url\n      let step = Math.floor(t * steps)\n      const jumping = (t * step) % 1 === 0\n\n      if (stepPosition === 'start' || stepPosition === 'both') {\n        ++step\n      }\n\n      if (beforeFlag && jumping) {\n        --step\n      }\n\n      if (t >= 0 && step < 0) {\n        step = 0\n      }\n\n      if (t <= 1 && step > jumps) {\n        step = jumps\n      }\n\n      return step / jumps\n    }\n  }\n}\n\nexport class Stepper {\n  done () {\n    return false\n  }\n}\n\n/***\nEasing Functions\n================\n***/\n\nexport class Ease extends Stepper {\n  constructor (fn = timeline.ease) {\n    super()\n    this.ease = easing[fn] || fn\n  }\n\n  step (from, to, pos) {\n    if (typeof from !== 'number') {\n      return pos < 1 ? from : to\n    }\n    return from + (to - from) * this.ease(pos)\n  }\n}\n\n/***\nController Types\n================\n***/\n\nexport class Controller extends Stepper {\n  constructor (fn) {\n    super()\n    this.stepper = fn\n  }\n\n  done (c) {\n    return c.done\n  }\n\n  step (current, target, dt, c) {\n    return this.stepper(current, target, dt, c)\n  }\n\n}\n\nfunction recalculate () {\n  // Apply the default parameters\n  const duration = (this._duration || 500) / 1000\n  const overshoot = this._overshoot || 0\n\n  // Calculate the PID natural response\n  const eps = 1e-10\n  const pi = Math.PI\n  const os = Math.log(overshoot / 100 + eps)\n  const zeta = -os / Math.sqrt(pi * pi + os * os)\n  const wn = 3.9 / (zeta * duration)\n\n  // Calculate the Spring values\n  this.d = 2 * zeta * wn\n  this.k = wn * wn\n}\n\nexport class Spring extends Controller {\n  constructor (duration = 500, overshoot = 0) {\n    super()\n    this.duration(duration)\n      .overshoot(overshoot)\n  }\n\n  step (current, target, dt, c) {\n    if (typeof current === 'string') return current\n    c.done = dt === Infinity\n    if (dt === Infinity) return target\n    if (dt === 0) return current\n\n    if (dt > 100) dt = 16\n\n    dt /= 1000\n\n    // Get the previous velocity\n    const velocity = c.velocity || 0\n\n    // Apply the control to get the new position and store it\n    const acceleration = -this.d * velocity - this.k * (current - target)\n    const newPosition = current\n      + velocity * dt\n      + acceleration * dt * dt / 2\n\n    // Store the velocity\n    c.velocity = velocity + acceleration * dt\n\n    // Figure out if we have converged, and if so, pass the value\n    c.done = Math.abs(target - newPosition) + Math.abs(velocity) < 0.002\n    return c.done ? target : newPosition\n  }\n}\n\nextend(Spring, {\n  duration: makeSetterGetter('_duration', recalculate),\n  overshoot: makeSetterGetter('_overshoot', recalculate)\n})\n\nexport class PID extends Controller {\n  constructor (p = 0.1, i = 0.01, d = 0, windup = 1000) {\n    super()\n    this.p(p).i(i).d(d).windup(windup)\n  }\n\n  step (current, target, dt, c) {\n    if (typeof current === 'string') return current\n    c.done = dt === Infinity\n\n    if (dt === Infinity) return target\n    if (dt === 0) return current\n\n    const p = target - current\n    let i = (c.integral || 0) + p * dt\n    const d = (p - (c.error || 0)) / dt\n    const windup = this._windup\n\n    // antiwindup\n    if (windup !== false) {\n      i = Math.max(-windup, Math.min(i, windup))\n    }\n\n    c.error = p\n    c.integral = i\n\n    c.done = Math.abs(p) < 0.001\n\n    return c.done ? target : current + (this.P * p + this.I * i + this.D * d)\n  }\n}\n\nextend(PID, {\n  windup: makeSetterGetter('_windup'),\n  p: makeSetterGetter('P'),\n  i: makeSetterGetter('I'),\n  d: makeSetterGetter('D')\n})\n","import { isPathLetter } from '../modules/core/regex.js'\nimport Point from '../types/Point.js'\n\nconst segmentParameters = { M: 2, L: 2, H: 1, V: 1, C: 6, S: 4, Q: 4, T: 2, A: 7, Z: 0 }\n\nconst pathHandlers = {\n  M: function (c, p, p0) {\n    p.x = p0.x = c[0]\n    p.y = p0.y = c[1]\n\n    return [ 'M', p.x, p.y ]\n  },\n  L: function (c, p) {\n    p.x = c[0]\n    p.y = c[1]\n    return [ 'L', c[0], c[1] ]\n  },\n  H: function (c, p) {\n    p.x = c[0]\n    return [ 'H', c[0] ]\n  },\n  V: function (c, p) {\n    p.y = c[0]\n    return [ 'V', c[0] ]\n  },\n  C: function (c, p) {\n    p.x = c[4]\n    p.y = c[5]\n    return [ 'C', c[0], c[1], c[2], c[3], c[4], c[5] ]\n  },\n  S: function (c, p) {\n    p.x = c[2]\n    p.y = c[3]\n    return [ 'S', c[0], c[1], c[2], c[3] ]\n  },\n  Q: function (c, p) {\n    p.x = c[2]\n    p.y = c[3]\n    return [ 'Q', c[0], c[1], c[2], c[3] ]\n  },\n  T: function (c, p) {\n    p.x = c[0]\n    p.y = c[1]\n    return [ 'T', c[0], c[1] ]\n  },\n  Z: function (c, p, p0) {\n    p.x = p0.x\n    p.y = p0.y\n    return [ 'Z' ]\n  },\n  A: function (c, p) {\n    p.x = c[5]\n    p.y = c[6]\n    return [ 'A', c[0], c[1], c[2], c[3], c[4], c[5], c[6] ]\n  }\n}\n\nconst mlhvqtcsaz = 'mlhvqtcsaz'.split('')\n\nfor (let i = 0, il = mlhvqtcsaz.length; i < il; ++i) {\n  pathHandlers[mlhvqtcsaz[i]] = (function (i) {\n    return function (c, p, p0) {\n      if (i === 'H') c[0] = c[0] + p.x\n      else if (i === 'V') c[0] = c[0] + p.y\n      else if (i === 'A') {\n        c[5] = c[5] + p.x\n        c[6] = c[6] + p.y\n      } else {\n        for (let j = 0, jl = c.length; j < jl; ++j) {\n          c[j] = c[j] + (j % 2 ? p.y : p.x)\n        }\n      }\n\n      return pathHandlers[i](c, p, p0)\n    }\n  })(mlhvqtcsaz[i].toUpperCase())\n}\n\nfunction makeAbsolut (parser) {\n  const command = parser.segment[0]\n  return pathHandlers[command](parser.segment.slice(1), parser.p, parser.p0)\n}\n\nfunction segmentComplete (parser) {\n  return parser.segment.length && parser.segment.length - 1 === segmentParameters[parser.segment[0].toUpperCase()]\n}\n\nfunction startNewSegment (parser, token) {\n  parser.inNumber && finalizeNumber(parser, false)\n  const pathLetter = isPathLetter.test(token)\n\n  if (pathLetter) {\n    parser.segment = [ token ]\n  } else {\n    const lastCommand = parser.lastCommand\n    const small = lastCommand.toLowerCase()\n    const isSmall = lastCommand === small\n    parser.segment = [ small === 'm' ? (isSmall ? 'l' : 'L') : lastCommand ]\n  }\n\n  parser.inSegment = true\n  parser.lastCommand = parser.segment[0]\n\n  return pathLetter\n}\n\nfunction finalizeNumber (parser, inNumber) {\n  if (!parser.inNumber) throw new Error('Parser Error')\n  parser.number && parser.segment.push(parseFloat(parser.number))\n  parser.inNumber = inNumber\n  parser.number = ''\n  parser.pointSeen = false\n  parser.hasExponent = false\n\n  if (segmentComplete(parser)) {\n    finalizeSegment(parser)\n  }\n}\n\nfunction finalizeSegment (parser) {\n  parser.inSegment = false\n  if (parser.absolute) {\n    parser.segment = makeAbsolut(parser)\n  }\n  parser.segments.push(parser.segment)\n}\n\nfunction isArcFlag (parser) {\n  if (!parser.segment.length) return false\n  const isArc = parser.segment[0].toUpperCase() === 'A'\n  const length = parser.segment.length\n\n  return isArc && (length === 4 || length === 5)\n}\n\nfunction isExponential (parser) {\n  return parser.lastToken.toUpperCase() === 'E'\n}\n\nexport function pathParser (d, toAbsolute = true) {\n\n  let index = 0\n  let token = ''\n  const parser = {\n    segment: [],\n    inNumber: false,\n    number: '',\n    lastToken: '',\n    inSegment: false,\n    segments: [],\n    pointSeen: false,\n    hasExponent: false,\n    absolute: toAbsolute,\n    p0: new Point(),\n    p: new Point()\n  }\n\n  while ((parser.lastToken = token, token = d.charAt(index++))) {\n    if (!parser.inSegment) {\n      if (startNewSegment(parser, token)) {\n        continue\n      }\n    }\n\n    if (token === '.') {\n      if (parser.pointSeen || parser.hasExponent) {\n        finalizeNumber(parser, false)\n        --index\n        continue\n      }\n      parser.inNumber = true\n      parser.pointSeen = true\n      parser.number += token\n      continue\n    }\n\n    if (!isNaN(parseInt(token))) {\n\n      if (parser.number === '0' || isArcFlag(parser)) {\n        parser.inNumber = true\n        parser.number = token\n        finalizeNumber(parser, true)\n        continue\n      }\n\n      parser.inNumber = true\n      parser.number += token\n      continue\n    }\n\n    if (token === ' ' || token === ',') {\n      if (parser.inNumber) {\n        finalizeNumber(parser, false)\n      }\n      continue\n    }\n\n    if (token === '-') {\n      if (parser.inNumber && !isExponential(parser)) {\n        finalizeNumber(parser, false)\n        --index\n        continue\n      }\n      parser.number += token\n      parser.inNumber = true\n      continue\n    }\n\n    if (token.toUpperCase() === 'E') {\n      parser.number += token\n      parser.hasExponent = true\n      continue\n    }\n\n    if (isPathLetter.test(token)) {\n      if (parser.inNumber) {\n        finalizeNumber(parser, false)\n      } else if (!segmentComplete(parser)) {\n        throw new Error('parser Error')\n      } else {\n        finalizeSegment(parser)\n      }\n      --index\n    }\n  }\n\n  if (parser.inNumber) {\n    finalizeNumber(parser, false)\n  }\n\n  if (parser.inSegment && segmentComplete(parser)) {\n    finalizeSegment(parser)\n  }\n\n  return parser.segments\n\n}\n","import SVGArray from './SVGArray.js'\nimport parser from '../modules/core/parser.js'\nimport Box from './Box.js'\nimport { pathParser } from '../utils/pathParser.js'\n\nfunction arrayToString (a) {\n  let s = ''\n  for (let i = 0, il = a.length; i < il; i++) {\n    s += a[i][0]\n\n    if (a[i][1] != null) {\n      s += a[i][1]\n\n      if (a[i][2] != null) {\n        s += ' '\n        s += a[i][2]\n\n        if (a[i][3] != null) {\n          s += ' '\n          s += a[i][3]\n          s += ' '\n          s += a[i][4]\n\n          if (a[i][5] != null) {\n            s += ' '\n            s += a[i][5]\n            s += ' '\n            s += a[i][6]\n\n            if (a[i][7] != null) {\n              s += ' '\n              s += a[i][7]\n            }\n          }\n        }\n      }\n    }\n  }\n\n  return s + ' '\n}\n\nexport default class PathArray extends SVGArray {\n  // Get bounding box of path\n  bbox () {\n    parser().path.setAttribute('d', this.toString())\n    return new Box(parser.nodes.path.getBBox())\n  }\n\n  // Move path string\n  move (x, y) {\n    // get bounding box of current situation\n    const box = this.bbox()\n\n    // get relative offset\n    x -= box.x\n    y -= box.y\n\n    if (!isNaN(x) && !isNaN(y)) {\n      // move every point\n      for (let l, i = this.length - 1; i >= 0; i--) {\n        l = this[i][0]\n\n        if (l === 'M' || l === 'L' || l === 'T') {\n          this[i][1] += x\n          this[i][2] += y\n        } else if (l === 'H') {\n          this[i][1] += x\n        } else if (l === 'V') {\n          this[i][1] += y\n        } else if (l === 'C' || l === 'S' || l === 'Q') {\n          this[i][1] += x\n          this[i][2] += y\n          this[i][3] += x\n          this[i][4] += y\n\n          if (l === 'C') {\n            this[i][5] += x\n            this[i][6] += y\n          }\n        } else if (l === 'A') {\n          this[i][6] += x\n          this[i][7] += y\n        }\n      }\n    }\n\n    return this\n  }\n\n  // Absolutize and parse path to array\n  parse (d = 'M0 0') {\n    if (Array.isArray(d)) {\n      d = Array.prototype.concat.apply([], d).toString()\n    }\n\n    return pathParser(d)\n  }\n\n  // Resize path string\n  size (width, height) {\n    // get bounding box of current situation\n    const box = this.bbox()\n    let i, l\n\n    // If the box width or height is 0 then we ignore\n    // transformations on the respective axis\n    box.width = box.width === 0 ? 1 : box.width\n    box.height = box.height === 0 ? 1 : box.height\n\n    // recalculate position of all points according to new size\n    for (i = this.length - 1; i >= 0; i--) {\n      l = this[i][0]\n\n      if (l === 'M' || l === 'L' || l === 'T') {\n        this[i][1] = ((this[i][1] - box.x) * width) / box.width + box.x\n        this[i][2] = ((this[i][2] - box.y) * height) / box.height + box.y\n      } else if (l === 'H') {\n        this[i][1] = ((this[i][1] - box.x) * width) / box.width + box.x\n      } else if (l === 'V') {\n        this[i][1] = ((this[i][1] - box.y) * height) / box.height + box.y\n      } else if (l === 'C' || l === 'S' || l === 'Q') {\n        this[i][1] = ((this[i][1] - box.x) * width) / box.width + box.x\n        this[i][2] = ((this[i][2] - box.y) * height) / box.height + box.y\n        this[i][3] = ((this[i][3] - box.x) * width) / box.width + box.x\n        this[i][4] = ((this[i][4] - box.y) * height) / box.height + box.y\n\n        if (l === 'C') {\n          this[i][5] = ((this[i][5] - box.x) * width) / box.width + box.x\n          this[i][6] = ((this[i][6] - box.y) * height) / box.height + box.y\n        }\n      } else if (l === 'A') {\n        // resize radii\n        this[i][1] = (this[i][1] * width) / box.width\n        this[i][2] = (this[i][2] * height) / box.height\n\n        // move position values\n        this[i][6] = ((this[i][6] - box.x) * width) / box.width + box.x\n        this[i][7] = ((this[i][7] - box.y) * height) / box.height + box.y\n      }\n    }\n\n    return this\n  }\n\n  // Convert array to string\n  toString () {\n    return arrayToString(this)\n  }\n\n}\n","import { Ease } from './Controller.js'\nimport {\n  delimiter,\n  numberAndUnit,\n  isPathLetter\n} from '../modules/core/regex.js'\nimport { extend } from '../utils/adopter.js'\nimport Color from '../types/Color.js'\nimport PathArray from '../types/PathArray.js'\nimport SVGArray from '../types/SVGArray.js'\nimport SVGNumber from '../types/SVGNumber.js'\n\nconst getClassForType = (value) => {\n  const type = typeof value\n\n  if (type === 'number') {\n    return SVGNumber\n  } else if (type === 'string') {\n    if (Color.isColor(value)) {\n      return Color\n    } else if (delimiter.test(value)) {\n      return isPathLetter.test(value)\n        ? PathArray\n        : SVGArray\n    } else if (numberAndUnit.test(value)) {\n      return SVGNumber\n    } else {\n      return NonMorphable\n    }\n  } else if (morphableTypes.indexOf(value.constructor) > -1) {\n    return value.constructor\n  } else if (Array.isArray(value)) {\n    return SVGArray\n  } else if (type === 'object') {\n    return ObjectBag\n  } else {\n    return NonMorphable\n  }\n}\n\nexport default class Morphable {\n  constructor (stepper) {\n    this._stepper = stepper || new Ease('-')\n\n    this._from = null\n    this._to = null\n    this._type = null\n    this._context = null\n    this._morphObj = null\n  }\n\n  at (pos) {\n    return this._morphObj.morph(this._from, this._to, pos, this._stepper, this._context)\n\n  }\n\n  done () {\n    const complete = this._context\n      .map(this._stepper.done)\n      .reduce(function (last, curr) {\n        return last && curr\n      }, true)\n    return complete\n  }\n\n  from (val) {\n    if (val == null) {\n      return this._from\n    }\n\n    this._from = this._set(val)\n    return this\n  }\n\n  stepper (stepper) {\n    if (stepper == null) return this._stepper\n    this._stepper = stepper\n    return this\n  }\n\n  to (val) {\n    if (val == null) {\n      return this._to\n    }\n\n    this._to = this._set(val)\n    return this\n  }\n\n  type (type) {\n    // getter\n    if (type == null) {\n      return this._type\n    }\n\n    // setter\n    this._type = type\n    return this\n  }\n\n  _set (value) {\n    if (!this._type) {\n      this.type(getClassForType(value))\n    }\n\n    let result = (new this._type(value))\n    if (this._type === Color) {\n      result = this._to\n        ? result[this._to[4]]()\n        : this._from\n          ? result[this._from[4]]()\n          : result\n    }\n\n    if (this._type === ObjectBag) {\n      result = this._to\n        ? result.align(this._to)\n        : this._from\n          ? result.align(this._from)\n          : result\n    }\n\n    result = result.toConsumable()\n\n    this._morphObj = this._morphObj || new this._type()\n    this._context = this._context\n      || Array.apply(null, Array(result.length))\n        .map(Object)\n        .map(function (o) {\n          o.done = true\n          return o\n        })\n    return result\n  }\n\n}\n\nexport class NonMorphable {\n  constructor (...args) {\n    this.init(...args)\n  }\n\n  init (val) {\n    val = Array.isArray(val) ? val[0] : val\n    this.value = val\n    return this\n  }\n\n  toArray () {\n    return [ this.value ]\n  }\n\n  valueOf () {\n    return this.value\n  }\n\n}\n\nexport class TransformBag {\n  constructor (...args) {\n    this.init(...args)\n  }\n\n  init (obj) {\n    if (Array.isArray(obj)) {\n      obj = {\n        scaleX: obj[0],\n        scaleY: obj[1],\n        shear: obj[2],\n        rotate: obj[3],\n        translateX: obj[4],\n        translateY: obj[5],\n        originX: obj[6],\n        originY: obj[7]\n      }\n    }\n\n    Object.assign(this, TransformBag.defaults, obj)\n    return this\n  }\n\n  toArray () {\n    const v = this\n\n    return [\n      v.scaleX,\n      v.scaleY,\n      v.shear,\n      v.rotate,\n      v.translateX,\n      v.translateY,\n      v.originX,\n      v.originY\n    ]\n  }\n}\n\nTransformBag.defaults = {\n  scaleX: 1,\n  scaleY: 1,\n  shear: 0,\n  rotate: 0,\n  translateX: 0,\n  translateY: 0,\n  originX: 0,\n  originY: 0\n}\n\nconst sortByKey = (a, b) => {\n  return (a[0] < b[0] ? -1 : (a[0] > b[0] ? 1 : 0))\n}\n\nexport class ObjectBag {\n  constructor (...args) {\n    this.init(...args)\n  }\n\n  align (other) {\n    const values = this.values\n    for (let i = 0, il = values.length; i < il; ++i) {\n\n      // If the type is the same we only need to check if the color is in the correct format\n      if (values[i + 1] === other[i + 1]) {\n        if (values[i + 1] === Color && other[i + 7] !== values[i + 7]) {\n          const space = other[i + 7]\n          const color = new Color(this.values.splice(i + 3, 5))[space]().toArray()\n          this.values.splice(i + 3, 0, ...color)\n        }\n\n        i += values[i + 2] + 2\n        continue\n      }\n\n      if (!other[i + 1]) {\n        return this\n      }\n\n      // The types differ, so we overwrite the new type with the old one\n      // And initialize it with the types default (e.g. black for color or 0 for number)\n      const defaultObject = new (other[i + 1])().toArray()\n\n      // Than we fix the values array\n      const toDelete = (values[i + 2]) + 3\n\n      values.splice(i, toDelete, other[i], other[i + 1], other[i + 2], ...defaultObject)\n\n      i += values[i + 2] + 2\n    }\n    return this\n  }\n\n  init (objOrArr) {\n    this.values = []\n\n    if (Array.isArray(objOrArr)) {\n      this.values = objOrArr.slice()\n      return\n    }\n\n    objOrArr = objOrArr || {}\n    const entries = []\n\n    for (const i in objOrArr) {\n      const Type = getClassForType(objOrArr[i])\n      const val = new Type(objOrArr[i]).toArray()\n      entries.push([ i, Type, val.length, ...val ])\n    }\n\n    entries.sort(sortByKey)\n\n    this.values = entries.reduce((last, curr) => last.concat(curr), [])\n    return this\n  }\n\n  toArray () {\n    return this.values\n  }\n\n  valueOf () {\n    const obj = {}\n    const arr = this.values\n\n    // for (var i = 0, len = arr.length; i < len; i += 2) {\n    while (arr.length) {\n      const key = arr.shift()\n      const Type = arr.shift()\n      const num = arr.shift()\n      const values = arr.splice(0, num)\n      obj[key] = new Type(values)// .valueOf()\n    }\n\n    return obj\n  }\n\n}\n\nconst morphableTypes = [\n  NonMorphable,\n  TransformBag,\n  ObjectBag\n]\n\nexport function registerMorphableType (type = []) {\n  morphableTypes.push(...[].concat(type))\n}\n\nexport function makeMorphable () {\n  extend(morphableTypes, {\n    to (val) {\n      return new Morphable()\n        .type(this.constructor)\n        .from(this.toArray())// this.valueOf())\n        .to(val)\n    },\n    fromArray (arr) {\n      this.init(arr)\n      return this\n    },\n    toConsumable () {\n      return this.toArray()\n    },\n    morph (from, to, pos, stepper, context) {\n      const mapper = function (i, index) {\n        return stepper.step(i, to[index], pos, context[index], context)\n      }\n\n      return this.fromArray(from.map(mapper))\n    }\n  })\n}\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\nimport { proportionalSize } from '../utils/utils.js'\nimport { registerMethods } from '../utils/methods.js'\nimport PathArray from '../types/PathArray.js'\nimport Shape from './Shape.js'\n\nexport default class Path extends Shape {\n  // Initialize node\n  constructor (node, attrs = node) {\n    super(nodeOrNew('path', node), attrs)\n  }\n\n  // Get array\n  array () {\n    return this._array || (this._array = new PathArray(this.attr('d')))\n  }\n\n  // Clear array cache\n  clear () {\n    delete this._array\n    return this\n  }\n\n  // Set height of element\n  height (height) {\n    return height == null ? this.bbox().height : this.size(this.bbox().width, height)\n  }\n\n  // Move by left top corner\n  move (x, y) {\n    return this.attr('d', this.array().move(x, y))\n  }\n\n  // Plot new path\n  plot (d) {\n    return (d == null)\n      ? this.array()\n      : this.clear().attr('d', typeof d === 'string' ? d : (this._array = new PathArray(d)))\n  }\n\n  // Set element size to given width and height\n  size (width, height) {\n    const p = proportionalSize(this, width, height)\n    return this.attr('d', this.array().size(p.width, p.height))\n  }\n\n  // Set width of element\n  width (width) {\n    return width == null ? this.bbox().width : this.size(width, this.bbox().height)\n  }\n\n  // Move by left top corner over x-axis\n  x (x) {\n    return x == null ? this.bbox().x : this.move(x, this.bbox().y)\n  }\n\n  // Move by left top corner over y-axis\n  y (y) {\n    return y == null ? this.bbox().y : this.move(this.bbox().x, y)\n  }\n\n}\n\n// Define morphable array\nPath.prototype.MorphArray = PathArray\n\n// Add parent method\nregisterMethods({\n  Container: {\n    // Create a wrapped path element\n    path: wrapWithAttrCheck(function (d) {\n      // make sure plot is called as a setter\n      return this.put(new Path()).plot(d || new PathArray())\n    })\n  }\n})\n\nregister(Path, 'Path')\n","import { proportionalSize } from '../../utils/utils.js'\nimport PointArray from '../../types/PointArray.js'\n\n// Get array\nexport function array () {\n  return this._array || (this._array = new PointArray(this.attr('points')))\n}\n\n// Clear array cache\nexport function clear () {\n  delete this._array\n  return this\n}\n\n// Move by left top corner\nexport function move (x, y) {\n  return this.attr('points', this.array().move(x, y))\n}\n\n// Plot new path\nexport function plot (p) {\n  return (p == null)\n    ? this.array()\n    : this.clear().attr('points', typeof p === 'string'\n      ? p\n      : (this._array = new PointArray(p)))\n}\n\n// Set element size to given width and height\nexport function size (width, height) {\n  const p = proportionalSize(this, width, height)\n  return this.attr('points', this.array().size(p.width, p.height))\n}\n","import {\n  extend,\n  nodeOrNew,\n  register,\n  wrapWithAttrCheck\n} from '../utils/adopter.js'\nimport { registerMethods } from '../utils/methods.js'\nimport PointArray from '../types/PointArray.js'\nimport Shape from './Shape.js'\nimport * as pointed from '../modules/core/pointed.js'\nimport * as poly from '../modules/core/poly.js'\n\nexport default class Polygon extends Shape {\n  // Initialize node\n  constructor (node, attrs = node) {\n    super(nodeOrNew('polygon', node), attrs)\n  }\n}\n\nregisterMethods({\n  Container: {\n    // Create a wrapped polygon element\n    polygon: wrapWithAttrCheck(function (p) {\n      // make sure plot is called as a setter\n      return this.put(new Polygon()).plot(p || new PointArray())\n    })\n  }\n})\n\nextend(Polygon, pointed)\nextend(Polygon, poly)\nregister(Polygon, 'Polygon')\n","import {\n  extend,\n  nodeOrNew,\n  register,\n  wrapWithAttrCheck\n} from '../utils/adopter.js'\nimport { registerMethods } from '../utils/methods.js'\nimport PointArray from '../types/PointArray.js'\nimport Shape from './Shape.js'\nimport * as pointed from '../modules/core/pointed.js'\nimport * as poly from '../modules/core/poly.js'\n\nexport default class Polyline extends Shape {\n  // Initialize node\n  constructor (node, attrs = node) {\n    super(nodeOrNew('polyline', node), attrs)\n  }\n}\n\nregisterMethods({\n  Container: {\n    // Create a wrapped polygon element\n    polyline: wrapWithAttrCheck(function (p) {\n      // make sure plot is called as a setter\n      return this.put(new Polyline()).plot(p || new PointArray())\n    })\n  }\n})\n\nextend(Polyline, pointed)\nextend(Polyline, poly)\nregister(Polyline, 'Polyline')\n","import {\n  extend,\n  nodeOrNew,\n  register,\n  wrapWithAttrCheck\n} from '../utils/adopter.js'\nimport { registerMethods } from '../utils/methods.js'\nimport { rx, ry } from '../modules/core/circled.js'\nimport Shape from './Shape.js'\n\nexport default class Rect extends Shape {\n  // Initialize node\n  constructor (node, attrs = node) {\n    super(nodeOrNew('rect', node), attrs)\n  }\n}\n\nextend(Rect, { rx, ry })\n\nregisterMethods({\n  Container: {\n    // Create a rect element\n    rect: wrapWithAttrCheck(function (width, height) {\n      return this.put(new Rect()).size(width, height)\n    })\n  }\n})\n\nregister(Rect, 'Rect')\n","export default class Queue {\n  constructor () {\n    this._first = null\n    this._last = null\n  }\n\n  // Shows us the first item in the list\n  first () {\n    return this._first && this._first.value\n  }\n\n  // Shows us the last item in the list\n  last () {\n    return this._last && this._last.value\n  }\n\n  push (value) {\n    // An item stores an id and the provided value\n    const item = typeof value.next !== 'undefined' ? value : { value: value, next: null, prev: null }\n\n    // Deal with the queue being empty or populated\n    if (this._last) {\n      item.prev = this._last\n      this._last.next = item\n      this._last = item\n    } else {\n      this._last = item\n      this._first = item\n    }\n\n    // Return the current item\n    return item\n  }\n\n  // Removes the item that was returned from the push\n  remove (item) {\n    // Relink the previous item\n    if (item.prev) item.prev.next = item.next\n    if (item.next) item.next.prev = item.prev\n    if (item === this._last) this._last = item.prev\n    if (item === this._first) this._first = item.next\n\n    // Invalidate item\n    item.prev = null\n    item.next = null\n  }\n\n  shift () {\n    // Check if we have a value\n    const remove = this._first\n    if (!remove) return null\n\n    // If we do, remove it and relink things\n    this._first = remove.next\n    if (this._first) this._first.prev = null\n    this._last = this._first ? this._last : null\n    return remove.value\n  }\n\n}\n","import { globals } from '../utils/window.js'\nimport Queue from './Queue.js'\n\nconst Animator = {\n  nextDraw: null,\n  frames: new Queue(),\n  timeouts: new Queue(),\n  immediates: new Queue(),\n  timer: () => globals.window.performance || globals.window.Date,\n  transforms: [],\n\n  frame (fn) {\n    // Store the node\n    const node = Animator.frames.push({ run: fn })\n\n    // Request an animation frame if we don't have one\n    if (Animator.nextDraw === null) {\n      Animator.nextDraw = globals.window.requestAnimationFrame(Animator._draw)\n    }\n\n    // Return the node so we can remove it easily\n    return node\n  },\n\n  timeout (fn, delay) {\n    delay = delay || 0\n\n    // Work out when the event should fire\n    const time = Animator.timer().now() + delay\n\n    // Add the timeout to the end of the queue\n    const node = Animator.timeouts.push({ run: fn, time: time })\n\n    // Request another animation frame if we need one\n    if (Animator.nextDraw === null) {\n      Animator.nextDraw = globals.window.requestAnimationFrame(Animator._draw)\n    }\n\n    return node\n  },\n\n  immediate (fn) {\n    // Add the immediate fn to the end of the queue\n    const node = Animator.immediates.push(fn)\n    // Request another animation frame if we need one\n    if (Animator.nextDraw === null) {\n      Animator.nextDraw = globals.window.requestAnimationFrame(Animator._draw)\n    }\n\n    return node\n  },\n\n  cancelFrame (node) {\n    node != null && Animator.frames.remove(node)\n  },\n\n  clearTimeout (node) {\n    node != null && Animator.timeouts.remove(node)\n  },\n\n  cancelImmediate (node) {\n    node != null && Animator.immediates.remove(node)\n  },\n\n  _draw (now) {\n    // Run all the timeouts we can run, if they are not ready yet, add them\n    // to the end of the queue immediately! (bad timeouts!!! [sarcasm])\n    let nextTimeout = null\n    const lastTimeout = Animator.timeouts.last()\n    while ((nextTimeout = Animator.timeouts.shift())) {\n      // Run the timeout if its time, or push it to the end\n      if (now >= nextTimeout.time) {\n        nextTimeout.run()\n      } else {\n        Animator.timeouts.push(nextTimeout)\n      }\n\n      // If we hit the last item, we should stop shifting out more items\n      if (nextTimeout === lastTimeout) break\n    }\n\n    // Run all of the animation frames\n    let nextFrame = null\n    const lastFrame = Animator.frames.last()\n    while ((nextFrame !== lastFrame) && (nextFrame = Animator.frames.shift())) {\n      nextFrame.run(now)\n    }\n\n    let nextImmediate = null\n    while ((nextImmediate = Animator.immediates.shift())) {\n      nextImmediate()\n    }\n\n    // If we have remaining timeouts or frames, draw until we don't anymore\n    Animator.nextDraw = Animator.timeouts.first() || Animator.frames.first()\n      ? globals.window.requestAnimationFrame(Animator._draw)\n      : null\n  }\n}\n\nexport default Animator\n","import { globals } from '../utils/window.js'\nimport { registerMethods } from '../utils/methods.js'\nimport Animator from './Animator.js'\nimport EventTarget from '../types/EventTarget.js'\n\nconst makeSchedule = function (runnerInfo) {\n  const start = runnerInfo.start\n  const duration = runnerInfo.runner.duration()\n  const end = start + duration\n  return { start: start, duration: duration, end: end, runner: runnerInfo.runner }\n}\n\nconst defaultSource = function () {\n  const w = globals.window\n  return (w.performance || w.Date).now()\n}\n\nexport default class Timeline extends EventTarget {\n  // Construct a new timeline on the given element\n  constructor (timeSource = defaultSource) {\n    super()\n\n    this._timeSource = timeSource\n\n    // Store the timing variables\n    this._startTime = 0\n    this._speed = 1.0\n\n    // Determines how long a runner is hold in memory. Can be a dt or true/false\n    this._persist = 0\n\n    // Keep track of the running animations and their starting parameters\n    this._nextFrame = null\n    this._paused = true\n    this._runners = []\n    this._runnerIds = []\n    this._lastRunnerId = -1\n    this._time = 0\n    this._lastSourceTime = 0\n    this._lastStepTime = 0\n\n    // Make sure that step is always called in class context\n    this._step = this._stepFn.bind(this, false)\n    this._stepImmediate = this._stepFn.bind(this, true)\n  }\n\n  active () {\n    return !!this._nextFrame\n  }\n\n  finish () {\n    // Go to end and pause\n    this.time(this.getEndTimeOfTimeline() + 1)\n    return this.pause()\n  }\n\n  // Calculates the end of the timeline\n  getEndTime () {\n    const lastRunnerInfo = this.getLastRunnerInfo()\n    const lastDuration = lastRunnerInfo ? lastRunnerInfo.runner.duration() : 0\n    const lastStartTime = lastRunnerInfo ? lastRunnerInfo.start : this._time\n    return lastStartTime + lastDuration\n  }\n\n  getEndTimeOfTimeline () {\n    const endTimes = this._runners.map((i) => i.start + i.runner.duration())\n    return Math.max(0, ...endTimes)\n  }\n\n  getLastRunnerInfo () {\n    return this.getRunnerInfoById(this._lastRunnerId)\n  }\n\n  getRunnerInfoById (id) {\n    return this._runners[this._runnerIds.indexOf(id)] || null\n  }\n\n  pause () {\n    this._paused = true\n    return this._continue()\n  }\n\n  persist (dtOrForever) {\n    if (dtOrForever == null) return this._persist\n    this._persist = dtOrForever\n    return this\n  }\n\n  play () {\n    // Now make sure we are not paused and continue the animation\n    this._paused = false\n    return this.updateTime()._continue()\n  }\n\n  reverse (yes) {\n    const currentSpeed = this.speed()\n    if (yes == null) return this.speed(-currentSpeed)\n\n    const positive = Math.abs(currentSpeed)\n    return this.speed(yes ? -positive : positive)\n  }\n\n  // schedules a runner on the timeline\n  schedule (runner, delay, when) {\n    if (runner == null) {\n      return this._runners.map(makeSchedule)\n    }\n\n    // The start time for the next animation can either be given explicitly,\n    // derived from the current timeline time or it can be relative to the\n    // last start time to chain animations directly\n\n    let absoluteStartTime = 0\n    const endTime = this.getEndTime()\n    delay = delay || 0\n\n    // Work out when to start the animation\n    if (when == null || when === 'last' || when === 'after') {\n      // Take the last time and increment\n      absoluteStartTime = endTime\n    } else if (when === 'absolute' || when === 'start') {\n      absoluteStartTime = delay\n      delay = 0\n    } else if (when === 'now') {\n      absoluteStartTime = this._time\n    } else if (when === 'relative') {\n      const runnerInfo = this.getRunnerInfoById(runner.id)\n      if (runnerInfo) {\n        absoluteStartTime = runnerInfo.start + delay\n        delay = 0\n      }\n    } else if (when === 'with-last') {\n      const lastRunnerInfo = this.getLastRunnerInfo()\n      const lastStartTime = lastRunnerInfo ? lastRunnerInfo.start : this._time\n      absoluteStartTime = lastStartTime\n    } else {\n      throw new Error('Invalid value for the \"when\" parameter')\n    }\n\n    // Manage runner\n    runner.unschedule()\n    runner.timeline(this)\n\n    const persist = runner.persist()\n    const runnerInfo = {\n      persist: persist === null ? this._persist : persist,\n      start: absoluteStartTime + delay,\n      runner\n    }\n\n    this._lastRunnerId = runner.id\n\n    this._runners.push(runnerInfo)\n    this._runners.sort((a, b) => a.start - b.start)\n    this._runnerIds = this._runners.map(info => info.runner.id)\n\n    this.updateTime()._continue()\n    return this\n  }\n\n  seek (dt) {\n    return this.time(this._time + dt)\n  }\n\n  source (fn) {\n    if (fn == null) return this._timeSource\n    this._timeSource = fn\n    return this\n  }\n\n  speed (speed) {\n    if (speed == null) return this._speed\n    this._speed = speed\n    return this\n  }\n\n  stop () {\n    // Go to start and pause\n    this.time(0)\n    return this.pause()\n  }\n\n  time (time) {\n    if (time == null) return this._time\n    this._time = time\n    return this._continue(true)\n  }\n\n  // Remove the runner from this timeline\n  unschedule (runner) {\n    const index = this._runnerIds.indexOf(runner.id)\n    if (index < 0) return this\n\n    this._runners.splice(index, 1)\n    this._runnerIds.splice(index, 1)\n\n    runner.timeline(null)\n    return this\n  }\n\n  // Makes sure, that after pausing the time doesn't jump\n  updateTime () {\n    if (!this.active()) {\n      this._lastSourceTime = this._timeSource()\n    }\n    return this\n  }\n\n  // Checks if we are running and continues the animation\n  _continue (immediateStep = false) {\n    Animator.cancelFrame(this._nextFrame)\n    this._nextFrame = null\n\n    if (immediateStep) return this._stepImmediate()\n    if (this._paused) return this\n\n    this._nextFrame = Animator.frame(this._step)\n    return this\n  }\n\n  _stepFn (immediateStep = false) {\n    // Get the time delta from the last time and update the time\n    const time = this._timeSource()\n    let dtSource = time - this._lastSourceTime\n\n    if (immediateStep) dtSource = 0\n\n    const dtTime = this._speed * dtSource + (this._time - this._lastStepTime)\n    this._lastSourceTime = time\n\n    // Only update the time if we use the timeSource.\n    // Otherwise use the current time\n    if (!immediateStep) {\n      // Update the time\n      this._time += dtTime\n      this._time = this._time < 0 ? 0 : this._time\n    }\n    this._lastStepTime = this._time\n    this.fire('time', this._time)\n\n    // This is for the case that the timeline was seeked so that the time\n    // is now before the startTime of the runner. That is why we need to set\n    // the runner to position 0\n\n    // FIXME:\n    // However, resetting in insertion order leads to bugs. Considering the case,\n    // where 2 runners change the same attribute but in different times,\n    // resetting both of them will lead to the case where the later defined\n    // runner always wins the reset even if the other runner started earlier\n    // and therefore should win the attribute battle\n    // this can be solved by resetting them backwards\n    for (let k = this._runners.length; k--;) {\n      // Get and run the current runner and ignore it if its inactive\n      const runnerInfo = this._runners[k]\n      const runner = runnerInfo.runner\n\n      // Make sure that we give the actual difference\n      // between runner start time and now\n      const dtToStart = this._time - runnerInfo.start\n\n      // Dont run runner if not started yet\n      // and try to reset it\n      if (dtToStart <= 0) {\n        runner.reset()\n      }\n    }\n\n    // Run all of the runners directly\n    let runnersLeft = false\n    for (let i = 0, len = this._runners.length; i < len; i++) {\n      // Get and run the current runner and ignore it if its inactive\n      const runnerInfo = this._runners[i]\n      const runner = runnerInfo.runner\n      let dt = dtTime\n\n      // Make sure that we give the actual difference\n      // between runner start time and now\n      const dtToStart = this._time - runnerInfo.start\n\n      // Dont run runner if not started yet\n      if (dtToStart <= 0) {\n        runnersLeft = true\n        continue\n      } else if (dtToStart < dt) {\n        // Adjust dt to make sure that animation is on point\n        dt = dtToStart\n      }\n\n      if (!runner.active()) continue\n\n      // If this runner is still going, signal that we need another animation\n      // frame, otherwise, remove the completed runner\n      const finished = runner.step(dt).done\n      if (!finished) {\n        runnersLeft = true\n        // continue\n      } else if (runnerInfo.persist !== true) {\n        // runner is finished. And runner might get removed\n        const endTime = runner.duration() - runner.time() + this._time\n\n        if (endTime + runnerInfo.persist < this._time) {\n          // Delete runner and correct index\n          runner.unschedule()\n          --i\n          --len\n        }\n      }\n    }\n\n    // Basically: we continue when there are runners right from us in time\n    // when -->, and when runners are left from us when <--\n    if ((runnersLeft && !(this._speed < 0 && this._time === 0)) || (this._runnerIds.length && this._speed < 0 && this._time > 0)) {\n      this._continue()\n    } else {\n      this.pause()\n      this.fire('finished')\n    }\n\n    return this\n  }\n\n}\n\nregisterMethods({\n  Element: {\n    timeline: function (timeline) {\n      if (timeline == null) {\n        this._timeline = (this._timeline || new Timeline())\n        return this._timeline\n      } else {\n        this._timeline = timeline\n        return this\n      }\n    }\n  }\n})\n","import { Controller, Ease, Stepper } from './Controller.js'\nimport { extend, register } from '../utils/adopter.js'\nimport { from, to } from '../modules/core/gradiented.js'\nimport { getOrigin } from '../utils/utils.js'\nimport { noop, timeline } from '../modules/core/defaults.js'\nimport { registerMethods } from '../utils/methods.js'\nimport { rx, ry } from '../modules/core/circled.js'\nimport Animator from './Animator.js'\nimport Box from '../types/Box.js'\nimport EventTarget from '../types/EventTarget.js'\nimport Matrix from '../types/Matrix.js'\nimport Morphable, { TransformBag, ObjectBag } from './Morphable.js'\nimport Point from '../types/Point.js'\nimport SVGNumber from '../types/SVGNumber.js'\nimport Timeline from './Timeline.js'\n\nexport default class Runner extends EventTarget {\n  constructor (options) {\n    super()\n\n    // Store a unique id on the runner, so that we can identify it later\n    this.id = Runner.id++\n\n    // Ensure a default value\n    options = options == null\n      ? timeline.duration\n      : options\n\n    // Ensure that we get a controller\n    options = typeof options === 'function'\n      ? new Controller(options)\n      : options\n\n    // Declare all of the variables\n    this._element = null\n    this._timeline = null\n    this.done = false\n    this._queue = []\n\n    // Work out the stepper and the duration\n    this._duration = typeof options === 'number' && options\n    this._isDeclarative = options instanceof Controller\n    this._stepper = this._isDeclarative ? options : new Ease()\n\n    // We copy the current values from the timeline because they can change\n    this._history = {}\n\n    // Store the state of the runner\n    this.enabled = true\n    this._time = 0\n    this._lastTime = 0\n\n    // At creation, the runner is in reset state\n    this._reseted = true\n\n    // Save transforms applied to this runner\n    this.transforms = new Matrix()\n    this.transformId = 1\n\n    // Looping variables\n    this._haveReversed = false\n    this._reverse = false\n    this._loopsDone = 0\n    this._swing = false\n    this._wait = 0\n    this._times = 1\n\n    this._frameId = null\n\n    // Stores how long a runner is stored after being done\n    this._persist = this._isDeclarative ? true : null\n  }\n\n  static sanitise (duration, delay, when) {\n    // Initialise the default parameters\n    let times = 1\n    let swing = false\n    let wait = 0\n    duration = duration || timeline.duration\n    delay = delay || timeline.delay\n    when = when || 'last'\n\n    // If we have an object, unpack the values\n    if (typeof duration === 'object' && !(duration instanceof Stepper)) {\n      delay = duration.delay || delay\n      when = duration.when || when\n      swing = duration.swing || swing\n      times = duration.times || times\n      wait = duration.wait || wait\n      duration = duration.duration || timeline.duration\n    }\n\n    return {\n      duration: duration,\n      delay: delay,\n      swing: swing,\n      times: times,\n      wait: wait,\n      when: when\n    }\n  }\n\n  active (enabled) {\n    if (enabled == null) return this.enabled\n    this.enabled = enabled\n    return this\n  }\n\n  /*\n  Private Methods\n  ===============\n  Methods that shouldn't be used externally\n  */\n  addTransform (transform, index) {\n    this.transforms.lmultiplyO(transform)\n    return this\n  }\n\n  after (fn) {\n    return this.on('finished', fn)\n  }\n\n  animate (duration, delay, when) {\n    const o = Runner.sanitise(duration, delay, when)\n    const runner = new Runner(o.duration)\n    if (this._timeline) runner.timeline(this._timeline)\n    if (this._element) runner.element(this._element)\n    return runner.loop(o).schedule(o.delay, o.when)\n  }\n\n  clearTransform () {\n    this.transforms = new Matrix()\n    return this\n  }\n\n  // TODO: Keep track of all transformations so that deletion is faster\n  clearTransformsFromQueue () {\n    if (!this.done || !this._timeline || !this._timeline._runnerIds.includes(this.id)) {\n      this._queue = this._queue.filter((item) => {\n        return !item.isTransform\n      })\n    }\n  }\n\n  delay (delay) {\n    return this.animate(0, delay)\n  }\n\n  duration () {\n    return this._times * (this._wait + this._duration) - this._wait\n  }\n\n  during (fn) {\n    return this.queue(null, fn)\n  }\n\n  ease (fn) {\n    this._stepper = new Ease(fn)\n    return this\n  }\n  /*\n  Runner Definitions\n  ==================\n  These methods help us define the runtime behaviour of the Runner or they\n  help us make new runners from the current runner\n  */\n\n  element (element) {\n    if (element == null) return this._element\n    this._element = element\n    element._prepareRunner()\n    return this\n  }\n\n  finish () {\n    return this.step(Infinity)\n  }\n\n  loop (times, swing, wait) {\n    // Deal with the user passing in an object\n    if (typeof times === 'object') {\n      swing = times.swing\n      wait = times.wait\n      times = times.times\n    }\n\n    // Sanitise the values and store them\n    this._times = times || Infinity\n    this._swing = swing || false\n    this._wait = wait || 0\n\n    // Allow true to be passed\n    if (this._times === true) { this._times = Infinity }\n\n    return this\n  }\n\n  loops (p) {\n    const loopDuration = this._duration + this._wait\n    if (p == null) {\n      const loopsDone = Math.floor(this._time / loopDuration)\n      const relativeTime = (this._time - loopsDone * loopDuration)\n      const position = relativeTime / this._duration\n      return Math.min(loopsDone + position, this._times)\n    }\n    const whole = Math.floor(p)\n    const partial = p % 1\n    const time = loopDuration * whole + this._duration * partial\n    return this.time(time)\n  }\n\n  persist (dtOrForever) {\n    if (dtOrForever == null) return this._persist\n    this._persist = dtOrForever\n    return this\n  }\n\n  position (p) {\n    // Get all of the variables we need\n    const x = this._time\n    const d = this._duration\n    const w = this._wait\n    const t = this._times\n    const s = this._swing\n    const r = this._reverse\n    let position\n\n    if (p == null) {\n      /*\n      This function converts a time to a position in the range [0, 1]\n      The full explanation can be found in this desmos demonstration\n        https://www.desmos.com/calculator/u4fbavgche\n      The logic is slightly simplified here because we can use booleans\n      */\n\n      // Figure out the value without thinking about the start or end time\n      const f = function (x) {\n        const swinging = s * Math.floor(x % (2 * (w + d)) / (w + d))\n        const backwards = (swinging && !r) || (!swinging && r)\n        const uncliped = Math.pow(-1, backwards) * (x % (w + d)) / d + backwards\n        const clipped = Math.max(Math.min(uncliped, 1), 0)\n        return clipped\n      }\n\n      // Figure out the value by incorporating the start time\n      const endTime = t * (w + d) - w\n      position = x <= 0\n        ? Math.round(f(1e-5))\n        : x < endTime\n          ? f(x)\n          : Math.round(f(endTime - 1e-5))\n      return position\n    }\n\n    // Work out the loops done and add the position to the loops done\n    const loopsDone = Math.floor(this.loops())\n    const swingForward = s && (loopsDone % 2 === 0)\n    const forwards = (swingForward && !r) || (r && swingForward)\n    position = loopsDone + (forwards ? p : 1 - p)\n    return this.loops(position)\n  }\n\n  progress (p) {\n    if (p == null) {\n      return Math.min(1, this._time / this.duration())\n    }\n    return this.time(p * this.duration())\n  }\n\n  /*\n  Basic Functionality\n  ===================\n  These methods allow us to attach basic functions to the runner directly\n  */\n  queue (initFn, runFn, retargetFn, isTransform) {\n    this._queue.push({\n      initialiser: initFn || noop,\n      runner: runFn || noop,\n      retarget: retargetFn,\n      isTransform: isTransform,\n      initialised: false,\n      finished: false\n    })\n    const timeline = this.timeline()\n    timeline && this.timeline()._continue()\n    return this\n  }\n\n  reset () {\n    if (this._reseted) return this\n    this.time(0)\n    this._reseted = true\n    return this\n  }\n\n  reverse (reverse) {\n    this._reverse = reverse == null ? !this._reverse : reverse\n    return this\n  }\n\n  schedule (timeline, delay, when) {\n    // The user doesn't need to pass a timeline if we already have one\n    if (!(timeline instanceof Timeline)) {\n      when = delay\n      delay = timeline\n      timeline = this.timeline()\n    }\n\n    // If there is no timeline, yell at the user...\n    if (!timeline) {\n      throw Error('Runner cannot be scheduled without timeline')\n    }\n\n    // Schedule the runner on the timeline provided\n    timeline.schedule(this, delay, when)\n    return this\n  }\n\n  step (dt) {\n    // If we are inactive, this stepper just gets skipped\n    if (!this.enabled) return this\n\n    // Update the time and get the new position\n    dt = dt == null ? 16 : dt\n    this._time += dt\n    const position = this.position()\n\n    // Figure out if we need to run the stepper in this frame\n    const running = this._lastPosition !== position && this._time >= 0\n    this._lastPosition = position\n\n    // Figure out if we just started\n    const duration = this.duration()\n    const justStarted = this._lastTime <= 0 && this._time > 0\n    const justFinished = this._lastTime < duration && this._time >= duration\n\n    this._lastTime = this._time\n    if (justStarted) {\n      this.fire('start', this)\n    }\n\n    // Work out if the runner is finished set the done flag here so animations\n    // know, that they are running in the last step (this is good for\n    // transformations which can be merged)\n    const declarative = this._isDeclarative\n    this.done = !declarative && !justFinished && this._time >= duration\n\n    // Runner is running. So its not in reset state anymore\n    this._reseted = false\n\n    let converged = false\n    // Call initialise and the run function\n    if (running || declarative) {\n      this._initialise(running)\n\n      // clear the transforms on this runner so they dont get added again and again\n      this.transforms = new Matrix()\n      converged = this._run(declarative ? dt : position)\n\n      this.fire('step', this)\n    }\n    // correct the done flag here\n    // declarative animations itself know when they converged\n    this.done = this.done || (converged && declarative)\n    if (justFinished) {\n      this.fire('finished', this)\n    }\n    return this\n  }\n\n  /*\n  Runner animation methods\n  ========================\n  Control how the animation plays\n  */\n  time (time) {\n    if (time == null) {\n      return this._time\n    }\n    const dt = time - this._time\n    this.step(dt)\n    return this\n  }\n\n  timeline (timeline) {\n    // check explicitly for undefined so we can set the timeline to null\n    if (typeof timeline === 'undefined') return this._timeline\n    this._timeline = timeline\n    return this\n  }\n\n  unschedule () {\n    const timeline = this.timeline()\n    timeline && timeline.unschedule(this)\n    return this\n  }\n\n  // Run each initialise function in the runner if required\n  _initialise (running) {\n    // If we aren't running, we shouldn't initialise when not declarative\n    if (!running && !this._isDeclarative) return\n\n    // Loop through all of the initialisers\n    for (let i = 0, len = this._queue.length; i < len; ++i) {\n      // Get the current initialiser\n      const current = this._queue[i]\n\n      // Determine whether we need to initialise\n      const needsIt = this._isDeclarative || (!current.initialised && running)\n      running = !current.finished\n\n      // Call the initialiser if we need to\n      if (needsIt && running) {\n        current.initialiser.call(this)\n        current.initialised = true\n      }\n    }\n  }\n\n  // Save a morpher to the morpher list so that we can retarget it later\n  _rememberMorpher (method, morpher) {\n    this._history[method] = {\n      morpher: morpher,\n      caller: this._queue[this._queue.length - 1]\n    }\n\n    // We have to resume the timeline in case a controller\n    // is already done without being ever run\n    // This can happen when e.g. this is done:\n    //    anim = el.animate(new SVG.Spring)\n    // and later\n    //    anim.move(...)\n    if (this._isDeclarative) {\n      const timeline = this.timeline()\n      timeline && timeline.play()\n    }\n  }\n\n  // Try to set the target for a morpher if the morpher exists, otherwise\n  // Run each run function for the position or dt given\n  _run (positionOrDt) {\n    // Run all of the _queue directly\n    let allfinished = true\n    for (let i = 0, len = this._queue.length; i < len; ++i) {\n      // Get the current function to run\n      const current = this._queue[i]\n\n      // Run the function if its not finished, we keep track of the finished\n      // flag for the sake of declarative _queue\n      const converged = current.runner.call(this, positionOrDt)\n      current.finished = current.finished || (converged === true)\n      allfinished = allfinished && current.finished\n    }\n\n    // We report when all of the constructors are finished\n    return allfinished\n  }\n\n  // do nothing and return false\n  _tryRetarget (method, target, extra) {\n    if (this._history[method]) {\n      // if the last method wasn't even initialised, throw it away\n      if (!this._history[method].caller.initialised) {\n        const index = this._queue.indexOf(this._history[method].caller)\n        this._queue.splice(index, 1)\n        return false\n      }\n\n      // for the case of transformations, we use the special retarget function\n      // which has access to the outer scope\n      if (this._history[method].caller.retarget) {\n        this._history[method].caller.retarget.call(this, target, extra)\n        // for everything else a simple morpher change is sufficient\n      } else {\n        this._history[method].morpher.to(target)\n      }\n\n      this._history[method].caller.finished = false\n      const timeline = this.timeline()\n      timeline && timeline.play()\n      return true\n    }\n    return false\n  }\n\n}\n\nRunner.id = 0\n\nexport class FakeRunner {\n  constructor (transforms = new Matrix(), id = -1, done = true) {\n    this.transforms = transforms\n    this.id = id\n    this.done = done\n  }\n\n  clearTransformsFromQueue () { }\n}\n\nextend([ Runner, FakeRunner ], {\n  mergeWith (runner) {\n    return new FakeRunner(\n      runner.transforms.lmultiply(this.transforms),\n      runner.id\n    )\n  }\n})\n\n// FakeRunner.emptyRunner = new FakeRunner()\n\nconst lmultiply = (last, curr) => last.lmultiplyO(curr)\nconst getRunnerTransform = (runner) => runner.transforms\n\nfunction mergeTransforms () {\n  // Find the matrix to apply to the element and apply it\n  const runners = this._transformationRunners.runners\n  const netTransform = runners\n    .map(getRunnerTransform)\n    .reduce(lmultiply, new Matrix())\n\n  this.transform(netTransform)\n\n  this._transformationRunners.merge()\n\n  if (this._transformationRunners.length() === 1) {\n    this._frameId = null\n  }\n}\n\nexport class RunnerArray {\n  constructor () {\n    this.runners = []\n    this.ids = []\n  }\n\n  add (runner) {\n    if (this.runners.includes(runner)) return\n    const id = runner.id + 1\n\n    this.runners.push(runner)\n    this.ids.push(id)\n\n    return this\n  }\n\n  clearBefore (id) {\n    const deleteCnt = this.ids.indexOf(id + 1) || 1\n    this.ids.splice(0, deleteCnt, 0)\n    this.runners.splice(0, deleteCnt, new FakeRunner())\n      .forEach((r) => r.clearTransformsFromQueue())\n    return this\n  }\n\n  edit (id, newRunner) {\n    const index = this.ids.indexOf(id + 1)\n    this.ids.splice(index, 1, id + 1)\n    this.runners.splice(index, 1, newRunner)\n    return this\n  }\n\n  getByID (id) {\n    return this.runners[this.ids.indexOf(id + 1)]\n  }\n\n  length () {\n    return this.ids.length\n  }\n\n  merge () {\n    let lastRunner = null\n    for (let i = 0; i < this.runners.length; ++i) {\n      const runner = this.runners[i]\n\n      const condition = lastRunner\n        && runner.done && lastRunner.done\n        // don't merge runner when persisted on timeline\n        && (!runner._timeline || !runner._timeline._runnerIds.includes(runner.id))\n        && (!lastRunner._timeline || !lastRunner._timeline._runnerIds.includes(lastRunner.id))\n\n      if (condition) {\n        // the +1 happens in the function\n        this.remove(runner.id)\n        const newRunner = runner.mergeWith(lastRunner)\n        this.edit(lastRunner.id, newRunner)\n        lastRunner = newRunner\n        --i\n      } else {\n        lastRunner = runner\n      }\n    }\n\n    return this\n  }\n\n  remove (id) {\n    const index = this.ids.indexOf(id + 1)\n    this.ids.splice(index, 1)\n    this.runners.splice(index, 1)\n    return this\n  }\n\n}\n\nregisterMethods({\n  Element: {\n    animate (duration, delay, when) {\n      const o = Runner.sanitise(duration, delay, when)\n      const timeline = this.timeline()\n      return new Runner(o.duration)\n        .loop(o)\n        .element(this)\n        .timeline(timeline.play())\n        .schedule(o.delay, o.when)\n    },\n\n    delay (by, when) {\n      return this.animate(0, by, when)\n    },\n\n    // this function searches for all runners on the element and deletes the ones\n    // which run before the current one. This is because absolute transformations\n    // overwrite anything anyway so there is no need to waste time computing\n    // other runners\n    _clearTransformRunnersBefore (currentRunner) {\n      this._transformationRunners.clearBefore(currentRunner.id)\n    },\n\n    _currentTransform (current) {\n      return this._transformationRunners.runners\n        // we need the equal sign here to make sure, that also transformations\n        // on the same runner which execute before the current transformation are\n        // taken into account\n        .filter((runner) => runner.id <= current.id)\n        .map(getRunnerTransform)\n        .reduce(lmultiply, new Matrix())\n    },\n\n    _addRunner (runner) {\n      this._transformationRunners.add(runner)\n\n      // Make sure that the runner merge is executed at the very end of\n      // all Animator functions. That is why we use immediate here to execute\n      // the merge right after all frames are run\n      Animator.cancelImmediate(this._frameId)\n      this._frameId = Animator.immediate(mergeTransforms.bind(this))\n    },\n\n    _prepareRunner () {\n      if (this._frameId == null) {\n        this._transformationRunners = new RunnerArray()\n          .add(new FakeRunner(new Matrix(this)))\n      }\n    }\n  }\n})\n\n// Will output the elements from array A that are not in the array B\nconst difference = (a, b) => a.filter(x => !b.includes(x))\n\nextend(Runner, {\n  attr (a, v) {\n    return this.styleAttr('attr', a, v)\n  },\n\n  // Add animatable styles\n  css (s, v) {\n    return this.styleAttr('css', s, v)\n  },\n\n  styleAttr (type, nameOrAttrs, val) {\n    if (typeof nameOrAttrs === 'string') {\n      return this.styleAttr(type, { [nameOrAttrs]: val })\n    }\n\n    let attrs = nameOrAttrs\n    if (this._tryRetarget(type, attrs)) return this\n\n    let morpher = new Morphable(this._stepper).to(attrs)\n    let keys = Object.keys(attrs)\n\n    this.queue(function () {\n      morpher = morpher.from(this.element()[type](keys))\n    }, function (pos) {\n      this.element()[type](morpher.at(pos).valueOf())\n      return morpher.done()\n    }, function (newToAttrs) {\n\n      // Check if any new keys were added\n      const newKeys = Object.keys(newToAttrs)\n      const differences = difference(newKeys, keys)\n\n      // If their are new keys, initialize them and add them to morpher\n      if (differences.length) {\n        // Get the values\n        const addedFromAttrs = this.element()[type](differences)\n\n        // Get the already initialized values\n        const oldFromAttrs = new ObjectBag(morpher.from()).valueOf()\n\n        // Merge old and new\n        Object.assign(oldFromAttrs, addedFromAttrs)\n        morpher.from(oldFromAttrs)\n      }\n\n      // Get the object from the morpher\n      const oldToAttrs = new ObjectBag(morpher.to()).valueOf()\n\n      // Merge in new attributes\n      Object.assign(oldToAttrs, newToAttrs)\n\n      // Change morpher target\n      morpher.to(oldToAttrs)\n\n      // Make sure that we save the work we did so we don't need it to do again\n      keys = newKeys\n      attrs = newToAttrs\n    })\n\n    this._rememberMorpher(type, morpher)\n    return this\n  },\n\n  zoom (level, point) {\n    if (this._tryRetarget('zoom', level, point)) return this\n\n    let morpher = new Morphable(this._stepper).to(new SVGNumber(level))\n\n    this.queue(function () {\n      morpher = morpher.from(this.element().zoom())\n    }, function (pos) {\n      this.element().zoom(morpher.at(pos), point)\n      return morpher.done()\n    }, function (newLevel, newPoint) {\n      point = newPoint\n      morpher.to(newLevel)\n    })\n\n    this._rememberMorpher('zoom', morpher)\n    return this\n  },\n\n  /**\n   ** absolute transformations\n   **/\n\n  //\n  // M v -----|-----(D M v = F v)------|----->  T v\n  //\n  // 1. define the final state (T) and decompose it (once)\n  //    t = [tx, ty, the, lam, sy, sx]\n  // 2. on every frame: pull the current state of all previous transforms\n  //    (M - m can change)\n  //   and then write this as m = [tx0, ty0, the0, lam0, sy0, sx0]\n  // 3. Find the interpolated matrix F(pos) = m + pos * (t - m)\n  //   - Note F(0) = M\n  //   - Note F(1) = T\n  // 4. Now you get the delta matrix as a result: D = F * inv(M)\n\n  transform (transforms, relative, affine) {\n    // If we have a declarative function, we should retarget it if possible\n    relative = transforms.relative || relative\n    if (this._isDeclarative && !relative && this._tryRetarget('transform', transforms)) {\n      return this\n    }\n\n    // Parse the parameters\n    const isMatrix = Matrix.isMatrixLike(transforms)\n    affine = transforms.affine != null\n      ? transforms.affine\n      : (affine != null ? affine : !isMatrix)\n\n    // Create a morpher and set its type\n    const morpher = new Morphable(this._stepper)\n      .type(affine ? TransformBag : Matrix)\n\n    let origin\n    let element\n    let current\n    let currentAngle\n    let startTransform\n\n    function setup () {\n      // make sure element and origin is defined\n      element = element || this.element()\n      origin = origin || getOrigin(transforms, element)\n\n      startTransform = new Matrix(relative ? undefined : element)\n\n      // add the runner to the element so it can merge transformations\n      element._addRunner(this)\n\n      // Deactivate all transforms that have run so far if we are absolute\n      if (!relative) {\n        element._clearTransformRunnersBefore(this)\n      }\n    }\n\n    function run (pos) {\n      // clear all other transforms before this in case something is saved\n      // on this runner. We are absolute. We dont need these!\n      if (!relative) this.clearTransform()\n\n      const { x, y } = new Point(origin).transform(element._currentTransform(this))\n\n      let target = new Matrix({ ...transforms, origin: [ x, y ] })\n      let start = this._isDeclarative && current\n        ? current\n        : startTransform\n\n      if (affine) {\n        target = target.decompose(x, y)\n        start = start.decompose(x, y)\n\n        // Get the current and target angle as it was set\n        const rTarget = target.rotate\n        const rCurrent = start.rotate\n\n        // Figure out the shortest path to rotate directly\n        const possibilities = [ rTarget - 360, rTarget, rTarget + 360 ]\n        const distances = possibilities.map(a => Math.abs(a - rCurrent))\n        const shortest = Math.min(...distances)\n        const index = distances.indexOf(shortest)\n        target.rotate = possibilities[index]\n      }\n\n      if (relative) {\n        // we have to be careful here not to overwrite the rotation\n        // with the rotate method of Matrix\n        if (!isMatrix) {\n          target.rotate = transforms.rotate || 0\n        }\n        if (this._isDeclarative && currentAngle) {\n          start.rotate = currentAngle\n        }\n      }\n\n      morpher.from(start)\n      morpher.to(target)\n\n      const affineParameters = morpher.at(pos)\n      currentAngle = affineParameters.rotate\n      current = new Matrix(affineParameters)\n\n      this.addTransform(current)\n      element._addRunner(this)\n      return morpher.done()\n    }\n\n    function retarget (newTransforms) {\n      // only get a new origin if it changed since the last call\n      if (\n        (newTransforms.origin || 'center').toString()\n        !== (transforms.origin || 'center').toString()\n      ) {\n        origin = getOrigin(newTransforms, element)\n      }\n\n      // overwrite the old transformations with the new ones\n      transforms = { ...newTransforms, origin }\n    }\n\n    this.queue(setup, run, retarget, true)\n    this._isDeclarative && this._rememberMorpher('transform', morpher)\n    return this\n  },\n\n  // Animatable x-axis\n  x (x, relative) {\n    return this._queueNumber('x', x)\n  },\n\n  // Animatable y-axis\n  y (y) {\n    return this._queueNumber('y', y)\n  },\n\n  dx (x = 0) {\n    return this._queueNumberDelta('x', x)\n  },\n\n  dy (y = 0) {\n    return this._queueNumberDelta('y', y)\n  },\n\n  dmove (x, y) {\n    return this.dx(x).dy(y)\n  },\n\n  _queueNumberDelta (method, to) {\n    to = new SVGNumber(to)\n\n    // Try to change the target if we have this method already registered\n    if (this._tryRetarget(method, to)) return this\n\n    // Make a morpher and queue the animation\n    const morpher = new Morphable(this._stepper).to(to)\n    let from = null\n    this.queue(function () {\n      from = this.element()[method]()\n      morpher.from(from)\n      morpher.to(from + to)\n    }, function (pos) {\n      this.element()[method](morpher.at(pos))\n      return morpher.done()\n    }, function (newTo) {\n      morpher.to(from + new SVGNumber(newTo))\n    })\n\n    // Register the morpher so that if it is changed again, we can retarget it\n    this._rememberMorpher(method, morpher)\n    return this\n  },\n\n  _queueObject (method, to) {\n    // Try to change the target if we have this method already registered\n    if (this._tryRetarget(method, to)) return this\n\n    // Make a morpher and queue the animation\n    const morpher = new Morphable(this._stepper).to(to)\n    this.queue(function () {\n      morpher.from(this.element()[method]())\n    }, function (pos) {\n      this.element()[method](morpher.at(pos))\n      return morpher.done()\n    })\n\n    // Register the morpher so that if it is changed again, we can retarget it\n    this._rememberMorpher(method, morpher)\n    return this\n  },\n\n  _queueNumber (method, value) {\n    return this._queueObject(method, new SVGNumber(value))\n  },\n\n  // Animatable center x-axis\n  cx (x) {\n    return this._queueNumber('cx', x)\n  },\n\n  // Animatable center y-axis\n  cy (y) {\n    return this._queueNumber('cy', y)\n  },\n\n  // Add animatable move\n  move (x, y) {\n    return this.x(x).y(y)\n  },\n\n  // Add animatable center\n  center (x, y) {\n    return this.cx(x).cy(y)\n  },\n\n  // Add animatable size\n  size (width, height) {\n    // animate bbox based size for all other elements\n    let box\n\n    if (!width || !height) {\n      box = this._element.bbox()\n    }\n\n    if (!width) {\n      width = box.width / box.height * height\n    }\n\n    if (!height) {\n      height = box.height / box.width * width\n    }\n\n    return this\n      .width(width)\n      .height(height)\n  },\n\n  // Add animatable width\n  width (width) {\n    return this._queueNumber('width', width)\n  },\n\n  // Add animatable height\n  height (height) {\n    return this._queueNumber('height', height)\n  },\n\n  // Add animatable plot\n  plot (a, b, c, d) {\n    // Lines can be plotted with 4 arguments\n    if (arguments.length === 4) {\n      return this.plot([ a, b, c, d ])\n    }\n\n    if (this._tryRetarget('plot', a)) return this\n\n    const morpher = new Morphable(this._stepper)\n      .type(this._element.MorphArray).to(a)\n\n    this.queue(function () {\n      morpher.from(this._element.array())\n    }, function (pos) {\n      this._element.plot(morpher.at(pos))\n      return morpher.done()\n    })\n\n    this._rememberMorpher('plot', morpher)\n    return this\n  },\n\n  // Add leading method\n  leading (value) {\n    return this._queueNumber('leading', value)\n  },\n\n  // Add animatable viewbox\n  viewbox (x, y, width, height) {\n    return this._queueObject('viewbox', new Box(x, y, width, height))\n  },\n\n  update (o) {\n    if (typeof o !== 'object') {\n      return this.update({\n        offset: arguments[0],\n        color: arguments[1],\n        opacity: arguments[2]\n      })\n    }\n\n    if (o.opacity != null) this.attr('stop-opacity', o.opacity)\n    if (o.color != null) this.attr('stop-color', o.color)\n    if (o.offset != null) this.attr('offset', o.offset)\n\n    return this\n  }\n})\n\nextend(Runner, { rx, ry, from, to })\nregister(Runner, 'Runner')\n","import {\n  adopt,\n  nodeOrNew,\n  register,\n  wrapWithAttrCheck\n} from '../utils/adopter.js'\nimport { svg, svgjs, xlink, xmlns } from '../modules/core/namespaces.js'\nimport { registerMethods } from '../utils/methods.js'\nimport Container from './Container.js'\nimport Defs from './Defs.js'\nimport { globals } from '../utils/window.js'\n\nexport default class Svg extends Container {\n  constructor (node, attrs = node) {\n    super(nodeOrNew('svg', node), attrs)\n    this.namespace()\n  }\n\n  // Creates and returns defs element\n  defs () {\n    if (!this.isRoot()) return this.root().defs()\n\n    return adopt(this.node.querySelector('defs'))\n      || this.put(new Defs())\n  }\n\n  isRoot () {\n    return !this.node.parentNode\n      || (!(this.node.parentNode instanceof globals.window.SVGElement) && this.node.parentNode.nodeName !== '#document-fragment')\n  }\n\n  // Add namespaces\n  namespace () {\n    if (!this.isRoot()) return this.root().namespace()\n    return this\n      .attr({ xmlns: svg, version: '1.1' })\n      .attr('xmlns:xlink', xlink, xmlns)\n      .attr('xmlns:svgjs', svgjs, xmlns)\n  }\n\n  removeNamespace () {\n    return this.attr({ xmlns: null, version: null })\n      .attr('xmlns:xlink', null, xmlns)\n      .attr('xmlns:svgjs', null, xmlns)\n  }\n\n  // Check if this is a root svg\n  // If not, call root() from this element\n  root () {\n    if (this.isRoot()) return this\n    return super.root()\n  }\n\n}\n\nregisterMethods({\n  Container: {\n    // Create nested svg document\n    nested: wrapWithAttrCheck(function () {\n      return this.put(new Svg())\n    })\n  }\n})\n\nregister(Svg, 'Svg', true)\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\nimport { registerMethods } from '../utils/methods.js'\nimport Container from './Container.js'\n\nexport default class Symbol extends Container {\n  // Initialize node\n  constructor (node, attrs = node) {\n    super(nodeOrNew('symbol', node), attrs)\n  }\n}\n\nregisterMethods({\n  Container: {\n    symbol: wrapWithAttrCheck(function () {\n      return this.put(new Symbol())\n    })\n  }\n})\n\nregister(Symbol, 'Symbol')\n","import { globals } from '../../utils/window.js'\n\n// Create plain text node\nexport function plain (text) {\n  // clear if build mode is disabled\n  if (this._build === false) {\n    this.clear()\n  }\n\n  // create text node\n  this.node.appendChild(globals.document.createTextNode(text))\n\n  return this\n}\n\n// Get length of text element\nexport function length () {\n  return this.node.getComputedTextLength()\n}\n\n// Move over x-axis\n// Text is moved by its bounding box\n// text-anchor does NOT matter\nexport function x (x, box = this.bbox()) {\n  if (x == null) {\n    return box.x\n  }\n\n  return this.attr('x', this.attr('x') + x - box.x)\n}\n\n// Move over y-axis\nexport function y (y, box = this.bbox()) {\n  if (y == null) {\n    return box.y\n  }\n\n  return this.attr('y', this.attr('y') + y - box.y)\n}\n\nexport function move (x, y, box = this.bbox()) {\n  return this.x(x, box).y(y, box)\n}\n\n// Move center over x-axis\nexport function cx (x, box = this.bbox()) {\n  if (x == null) {\n    return box.cx\n  }\n\n  return this.attr('x', this.attr('x') + x - box.cx)\n}\n\n// Move center over y-axis\nexport function cy (y, box = this.bbox()) {\n  if (y == null) {\n    return box.cy\n  }\n\n  return this.attr('y', this.attr('y') + y - box.cy)\n}\n\nexport function center (x, y, box = this.bbox()) {\n  return this.cx(x, box).cy(y, box)\n}\n\nexport function ax (x) {\n  return this.attr('x', x)\n}\n\nexport function ay (y) {\n  return this.attr('y', y)\n}\n\nexport function amove (x, y) {\n  return this.ax(x).ay(y)\n}\n\n// Enable / disable build mode\nexport function build (build) {\n  this._build = !!build\n  return this\n}\n","import {\n  adopt,\n  extend,\n  nodeOrNew,\n  register,\n  wrapWithAttrCheck\n} from '../utils/adopter.js'\nimport { registerMethods } from '../utils/methods.js'\nimport SVGNumber from '../types/SVGNumber.js'\nimport Shape from './Shape.js'\nimport { globals } from '../utils/window.js'\nimport * as textable from '../modules/core/textable.js'\n\nexport default class Text extends Shape {\n  // Initialize node\n  constructor (node, attrs = node) {\n    super(nodeOrNew('text', node), attrs)\n\n    this.dom.leading = new SVGNumber(1.3) // store leading value for rebuilding\n    this._rebuild = true // enable automatic updating of dy values\n    this._build = false // disable build mode for adding multiple lines\n  }\n\n  // Set / get leading\n  leading (value) {\n    // act as getter\n    if (value == null) {\n      return this.dom.leading\n    }\n\n    // act as setter\n    this.dom.leading = new SVGNumber(value)\n\n    return this.rebuild()\n  }\n\n  // Rebuild appearance type\n  rebuild (rebuild) {\n    // store new rebuild flag if given\n    if (typeof rebuild === 'boolean') {\n      this._rebuild = rebuild\n    }\n\n    // define position of all lines\n    if (this._rebuild) {\n      const self = this\n      let blankLineOffset = 0\n      const leading = this.dom.leading\n\n      this.each(function (i) {\n        const fontSize = globals.window.getComputedStyle(this.node)\n          .getPropertyValue('font-size')\n\n        const dy = leading * new SVGNumber(fontSize)\n\n        if (this.dom.newLined) {\n          this.attr('x', self.attr('x'))\n\n          if (this.text() === '\\n') {\n            blankLineOffset += dy\n          } else {\n            this.attr('dy', i ? dy + blankLineOffset : 0)\n            blankLineOffset = 0\n          }\n        }\n      })\n\n      this.fire('rebuild')\n    }\n\n    return this\n  }\n\n  // overwrite method from parent to set data properly\n  setData (o) {\n    this.dom = o\n    this.dom.leading = new SVGNumber(o.leading || 1.3)\n    return this\n  }\n\n  // Set the text content\n  text (text) {\n    // act as getter\n    if (text === undefined) {\n      const children = this.node.childNodes\n      let firstLine = 0\n      text = ''\n\n      for (let i = 0, len = children.length; i < len; ++i) {\n        // skip textPaths - they are no lines\n        if (children[i].nodeName === 'textPath') {\n          if (i === 0) firstLine = 1\n          continue\n        }\n\n        // add newline if its not the first child and newLined is set to true\n        if (i !== firstLine && children[i].nodeType !== 3 && adopt(children[i]).dom.newLined === true) {\n          text += '\\n'\n        }\n\n        // add content of this node\n        text += children[i].textContent\n      }\n\n      return text\n    }\n\n    // remove existing content\n    this.clear().build(true)\n\n    if (typeof text === 'function') {\n      // call block\n      text.call(this, this)\n    } else {\n      // store text and make sure text is not blank\n      text = (text + '').split('\\n')\n\n      // build new lines\n      for (let j = 0, jl = text.length; j < jl; j++) {\n        this.newLine(text[j])\n      }\n    }\n\n    // disable build mode and rebuild lines\n    return this.build(false).rebuild()\n  }\n\n}\n\nextend(Text, textable)\n\nregisterMethods({\n  Container: {\n    // Create text element\n    text: wrapWithAttrCheck(function (text = '') {\n      return this.put(new Text()).text(text)\n    }),\n\n    // Create plain text element\n    plain: wrapWithAttrCheck(function (text = '') {\n      return this.put(new Text()).plain(text)\n    })\n  }\n})\n\nregister(Text, 'Text')\n","import {\n  extend,\n  nodeOrNew,\n  register,\n  wrapWithAttrCheck\n} from '../utils/adopter.js'\nimport { globals } from '../utils/window.js'\nimport { registerMethods } from '../utils/methods.js'\nimport SVGNumber from '../types/SVGNumber.js'\nimport Shape from './Shape.js'\nimport Text from './Text.js'\nimport * as textable from '../modules/core/textable.js'\n\nexport default class Tspan extends Shape {\n  // Initialize node\n  constructor (node, attrs = node) {\n    super(nodeOrNew('tspan', node), attrs)\n    this._build = false // disable build mode for adding multiple lines\n  }\n\n  // Shortcut dx\n  dx (dx) {\n    return this.attr('dx', dx)\n  }\n\n  // Shortcut dy\n  dy (dy) {\n    return this.attr('dy', dy)\n  }\n\n  // Create new line\n  newLine () {\n    // mark new line\n    this.dom.newLined = true\n\n    // fetch parent\n    const text = this.parent()\n\n    // early return in case we are not in a text element\n    if (!(text instanceof Text)) {\n      return this\n    }\n\n    const i = text.index(this)\n\n    const fontSize = globals.window.getComputedStyle(this.node)\n      .getPropertyValue('font-size')\n    const dy = text.dom.leading * new SVGNumber(fontSize)\n\n    // apply new position\n    return this.dy(i ? dy : 0).attr('x', text.x())\n  }\n\n  // Set text content\n  text (text) {\n    if (text == null) return this.node.textContent + (this.dom.newLined ? '\\n' : '')\n\n    if (typeof text === 'function') {\n      this.clear().build(true)\n      text.call(this, this)\n      this.build(false)\n    } else {\n      this.plain(text)\n    }\n\n    return this\n  }\n\n}\n\nextend(Tspan, textable)\n\nregisterMethods({\n  Tspan: {\n    tspan: wrapWithAttrCheck(function (text = '') {\n      const tspan = new Tspan()\n\n      // clear if build mode is disabled\n      if (!this._build) {\n        this.clear()\n      }\n\n      // add new tspan\n      return this.put(tspan).text(text)\n    })\n  },\n  Text: {\n    newLine: function (text = '') {\n      return this.tspan(text).newLine()\n    }\n  }\n})\n\nregister(Tspan, 'Tspan')\n","import { cx, cy, height, width, x, y } from '../modules/core/circled.js'\nimport {\n  extend,\n  nodeOrNew,\n  register,\n  wrapWithAttrCheck\n} from '../utils/adopter.js'\nimport { registerMethods } from '../utils/methods.js'\nimport SVGNumber from '../types/SVGNumber.js'\nimport Shape from './Shape.js'\n\nexport default class Circle extends Shape {\n  constructor (node, attrs = node) {\n    super(nodeOrNew('circle', node), attrs)\n  }\n\n  radius (r) {\n    return this.attr('r', r)\n  }\n\n  // Radius x value\n  rx (rx) {\n    return this.attr('r', rx)\n  }\n\n  // Alias radius x value\n  ry (ry) {\n    return this.rx(ry)\n  }\n\n  size (size) {\n    return this.radius(new SVGNumber(size).divide(2))\n  }\n}\n\nextend(Circle, { x, y, cx, cy, width, height })\n\nregisterMethods({\n  Container: {\n    // Create circle element\n    circle: wrapWithAttrCheck(function (size = 0) {\n      return this.put(new Circle())\n        .size(size)\n        .move(0, 0)\n    })\n  }\n})\n\nregister(Circle, 'Circle')\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\nimport { registerMethods } from '../utils/methods.js'\nimport Container from './Container.js'\nimport baseFind from '../modules/core/selector.js'\n\nexport default class ClipPath extends Container {\n  constructor (node, attrs = node) {\n    super(nodeOrNew('clipPath', node), attrs)\n  }\n\n  // Unclip all clipped elements and remove itself\n  remove () {\n    // unclip all targets\n    this.targets().forEach(function (el) {\n      el.unclip()\n    })\n\n    // remove clipPath from parent\n    return super.remove()\n  }\n\n  targets () {\n    return baseFind('svg [clip-path*=' + this.id() + ']')\n  }\n}\n\nregisterMethods({\n  Container: {\n    // Create clipping element\n    clip: wrapWithAttrCheck(function () {\n      return this.defs().put(new ClipPath())\n    })\n  },\n  Element: {\n    // Distribute clipPath to svg element\n    clipper () {\n      return this.reference('clip-path')\n    },\n\n    clipWith (element) {\n      // use given clip or create a new one\n      const clipper = element instanceof ClipPath\n        ? element\n        : this.parent().clip().add(element)\n\n      // apply mask\n      return this.attr('clip-path', 'url(#' + clipper.id() + ')')\n    },\n\n    // Unclip element\n    unclip () {\n      return this.attr('clip-path', null)\n    }\n  }\n})\n\nregister(ClipPath, 'ClipPath')\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\nimport { registerMethods } from '../utils/methods.js'\nimport Element from './Element.js'\n\nexport default class ForeignObject extends Element {\n  constructor (node, attrs = node) {\n    super(nodeOrNew('foreignObject', node), attrs)\n  }\n}\n\nregisterMethods({\n  Container: {\n    foreignObject: wrapWithAttrCheck(function (width, height) {\n      return this.put(new ForeignObject()).size(width, height)\n    })\n  }\n})\n\nregister(ForeignObject, 'ForeignObject')\n","import Matrix from '../../types/Matrix.js'\nimport Point from '../../types/Point.js'\nimport { proportionalSize } from '../../utils/utils.js'\n\nexport function dmove (dx, dy) {\n  this.children().forEach((child, i) => {\n\n    let bbox\n\n    // We have to wrap this for elements that dont have a bbox\n    // e.g. title and other descriptive elements\n    try {\n      // Get the childs bbox\n      bbox = child.bbox()\n    } catch (e) {\n      return\n    }\n\n    // Get childs matrix\n    const m = new Matrix(child)\n    // Translate childs matrix by amount and\n    // transform it back into parents space\n    const matrix = m.translate(dx, dy).transform(m.inverse())\n    // Calculate new x and y from old box\n    const p = new Point(bbox.x, bbox.y).transform(matrix)\n    // Move element\n    child.move(p.x, p.y)\n  })\n\n  return this\n}\n\nexport function dx (dx) {\n  return this.dmove(dx, 0)\n}\n\nexport function dy (dy) {\n  return this.dmove(0, dy)\n}\n\nexport function height (height, box = this.bbox()) {\n  if (height == null) return box.height\n  return this.size(box.width, height, box)\n}\n\nexport function move (x = 0, y = 0, box = this.bbox()) {\n  const dx = x - box.x\n  const dy = y - box.y\n\n  return this.dmove(dx, dy)\n}\n\nexport function size (width, height, box = this.bbox()) {\n  const p = proportionalSize(this, width, height, box)\n  const scaleX = p.width / box.width\n  const scaleY = p.height / box.height\n\n  this.children().forEach((child, i) => {\n    const o = new Point(box).transform(new Matrix(child).inverse())\n    child.scale(scaleX, scaleY, o.x, o.y)\n  })\n\n  return this\n}\n\nexport function width (width, box = this.bbox()) {\n  if (width == null) return box.width\n  return this.size(width, box.height, box)\n}\n\nexport function x (x, box = this.bbox()) {\n  if (x == null) return box.x\n  return this.move(x, box.y, box)\n}\n\nexport function y (y, box = this.bbox()) {\n  if (y == null) return box.y\n  return this.move(box.x, y, box)\n}\n","import { nodeOrNew, register, wrapWithAttrCheck, extend } from '../utils/adopter.js'\nimport { registerMethods } from '../utils/methods.js'\nimport Container from './Container.js'\nimport * as containerGeometry from '../modules/core/containerGeometry.js'\n\nexport default class G extends Container {\n  constructor (node, attrs = node) {\n    super(nodeOrNew('g', node), attrs)\n  }\n}\n\nextend(G, containerGeometry)\n\nregisterMethods({\n  Container: {\n    // Create a group element\n    group: wrapWithAttrCheck(function () {\n      return this.put(new G())\n    })\n  }\n})\n\nregister(G, 'G')\n","import { nodeOrNew, register, wrapWithAttrCheck, extend } from '../utils/adopter.js'\nimport { registerMethods } from '../utils/methods.js'\nimport { xlink } from '../modules/core/namespaces.js'\nimport Container from './Container.js'\nimport * as containerGeometry from '../modules/core/containerGeometry.js'\n\nexport default class A extends Container {\n  constructor (node, attrs = node) {\n    super(nodeOrNew('a', node), attrs)\n  }\n\n  // Link target attribute\n  target (target) {\n    return this.attr('target', target)\n  }\n\n  // Link url\n  to (url) {\n    return this.attr('href', url, xlink)\n  }\n\n}\n\nextend(A, containerGeometry)\n\nregisterMethods({\n  Container: {\n    // Create a hyperlink element\n    link: wrapWithAttrCheck(function (url) {\n      return this.put(new A()).to(url)\n    })\n  },\n  Element: {\n    unlink () {\n      const link = this.linker()\n\n      if (!link) return this\n\n      const parent = link.parent()\n\n      if (!parent) {\n        return this.remove()\n      }\n\n      const index = parent.index(link)\n      parent.add(this, index)\n\n      link.remove()\n      return this\n    },\n    linkTo (url) {\n      // reuse old link if possible\n      let link = this.linker()\n\n      if (!link) {\n        link = new A()\n        this.wrap(link)\n      }\n\n      if (typeof url === 'function') {\n        url.call(link, link)\n      } else {\n        link.to(url)\n      }\n\n      return this\n    },\n    linker () {\n      const link = this.parent()\n      if (link && link.node.nodeName.toLowerCase() === 'a') {\n        return link\n      }\n\n      return null\n    }\n  }\n})\n\nregister(A, 'A')\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\nimport { registerMethods } from '../utils/methods.js'\nimport Container from './Container.js'\nimport baseFind from '../modules/core/selector.js'\n\nexport default class Mask extends Container {\n  // Initialize node\n  constructor (node, attrs = node) {\n    super(nodeOrNew('mask', node), attrs)\n  }\n\n  // Unmask all masked elements and remove itself\n  remove () {\n    // unmask all targets\n    this.targets().forEach(function (el) {\n      el.unmask()\n    })\n\n    // remove mask from parent\n    return super.remove()\n  }\n\n  targets () {\n    return baseFind('svg [mask*=' + this.id() + ']')\n  }\n}\n\nregisterMethods({\n  Container: {\n    mask: wrapWithAttrCheck(function () {\n      return this.defs().put(new Mask())\n    })\n  },\n  Element: {\n    // Distribute mask to svg element\n    masker () {\n      return this.reference('mask')\n    },\n\n    maskWith (element) {\n      // use given mask or create a new one\n      const masker = element instanceof Mask\n        ? element\n        : this.parent().mask().add(element)\n\n      // apply mask\n      return this.attr('mask', 'url(#' + masker.id() + ')')\n    },\n\n    // Unmask element\n    unmask () {\n      return this.attr('mask', null)\n    }\n  }\n})\n\nregister(Mask, 'Mask')\n","import { nodeOrNew, register } from '../utils/adopter.js'\nimport Element from './Element.js'\nimport SVGNumber from '../types/SVGNumber.js'\nimport { registerMethods } from '../utils/methods.js'\n\nexport default class Stop extends Element {\n  constructor (node, attrs = node) {\n    super(nodeOrNew('stop', node), attrs)\n  }\n\n  // add color stops\n  update (o) {\n    if (typeof o === 'number' || o instanceof SVGNumber) {\n      o = {\n        offset: arguments[0],\n        color: arguments[1],\n        opacity: arguments[2]\n      }\n    }\n\n    // set attributes\n    if (o.opacity != null) this.attr('stop-opacity', o.opacity)\n    if (o.color != null) this.attr('stop-color', o.color)\n    if (o.offset != null) this.attr('offset', new SVGNumber(o.offset))\n\n    return this\n  }\n}\n\nregisterMethods({\n  Gradient: {\n    // Add a color stop\n    stop: function (offset, color, opacity) {\n      return this.put(new Stop()).update(offset, color, opacity)\n    }\n  }\n})\n\nregister(Stop, 'Stop')\n","import { nodeOrNew, register } from '../utils/adopter.js'\nimport { registerMethods } from '../utils/methods.js'\nimport { unCamelCase } from '../utils/utils.js'\nimport Element from './Element.js'\n\nfunction cssRule (selector, rule) {\n  if (!selector) return ''\n  if (!rule) return selector\n\n  let ret = selector + '{'\n\n  for (const i in rule) {\n    ret += unCamelCase(i) + ':' + rule[i] + ';'\n  }\n\n  ret += '}'\n\n  return ret\n}\n\nexport default class Style extends Element {\n  constructor (node, attrs = node) {\n    super(nodeOrNew('style', node), attrs)\n  }\n\n  addText (w = '') {\n    this.node.textContent += w\n    return this\n  }\n\n  font (name, src, params = {}) {\n    return this.rule('@font-face', {\n      fontFamily: name,\n      src: src,\n      ...params\n    })\n  }\n\n  rule (selector, obj) {\n    return this.addText(cssRule(selector, obj))\n  }\n}\n\nregisterMethods('Dom', {\n  style (selector, obj) {\n    return this.put(new Style()).rule(selector, obj)\n  },\n  fontface  (name, src, params) {\n    return this.put(new Style()).font(name, src, params)\n  }\n})\n\nregister(Style, 'Style')\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\nimport { registerMethods } from '../utils/methods.js'\nimport { xlink } from '../modules/core/namespaces.js'\nimport Path from './Path.js'\nimport PathArray from '../types/PathArray.js'\nimport Text from './Text.js'\nimport baseFind from '../modules/core/selector.js'\n\nexport default class TextPath extends Text {\n  // Initialize node\n  constructor (node, attrs = node) {\n    super(nodeOrNew('textPath', node), attrs)\n  }\n\n  // return the array of the path track element\n  array () {\n    const track = this.track()\n\n    return track ? track.array() : null\n  }\n\n  // Plot path if any\n  plot (d) {\n    const track = this.track()\n    let pathArray = null\n\n    if (track) {\n      pathArray = track.plot(d)\n    }\n\n    return (d == null) ? pathArray : this\n  }\n\n  // Get the path element\n  track () {\n    return this.reference('href')\n  }\n}\n\nregisterMethods({\n  Container: {\n    textPath: wrapWithAttrCheck(function (text, path) {\n      // Convert text to instance if needed\n      if (!(text instanceof Text)) {\n        text = this.text(text)\n      }\n\n      return text.path(path)\n    })\n  },\n  Text: {\n    // Create path for text to run on\n    path: wrapWithAttrCheck(function (track, importNodes = true) {\n      const textPath = new TextPath()\n\n      // if track is a path, reuse it\n      if (!(track instanceof Path)) {\n        // create path element\n        track = this.defs().path(track)\n      }\n\n      // link textPath to path and add content\n      textPath.attr('href', '#' + track, xlink)\n\n      // Transplant all nodes from text to textPath\n      let node\n      if (importNodes) {\n        while ((node = this.node.firstChild)) {\n          textPath.node.appendChild(node)\n        }\n      }\n\n      // add textPath element as child node and return textPath\n      return this.put(textPath)\n    }),\n\n    // Get the textPath children\n    textPath () {\n      return this.findOne('textPath')\n    }\n  },\n  Path: {\n    // creates a textPath from this path\n    text: wrapWithAttrCheck(function (text) {\n      // Convert text to instance if needed\n      if (!(text instanceof Text)) {\n        text = new Text().addTo(this.parent()).text(text)\n      }\n\n      // Create textPath from text and path and return\n      return text.path(this)\n    }),\n\n    targets () {\n      return baseFind('svg textPath').filter((node) => {\n        return (node.attr('href') || '').includes(this.id())\n      })\n\n      // Does not work in IE11. Use when IE support is dropped\n      // return baseFind('svg textPath[*|href*=' + this.id() + ']')\n    }\n  }\n})\n\nTextPath.prototype.MorphArray = PathArray\nregister(TextPath, 'TextPath')\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\nimport { registerMethods } from '../utils/methods.js'\nimport { xlink } from '../modules/core/namespaces.js'\nimport Shape from './Shape.js'\n\nexport default class Use extends Shape {\n  constructor (node, attrs = node) {\n    super(nodeOrNew('use', node), attrs)\n  }\n\n  // Use element as a reference\n  use (element, file) {\n    // Set lined element\n    return this.attr('href', (file || '') + '#' + element, xlink)\n  }\n}\n\nregisterMethods({\n  Container: {\n    // Create a use element\n    use: wrapWithAttrCheck(function (element, file) {\n      return this.put(new Use()).use(element, file)\n    })\n  }\n})\n\nregister(Use, 'Use')\n","/* Optional Modules */\nimport './modules/optional/arrange.js'\nimport './modules/optional/class.js'\nimport './modules/optional/css.js'\nimport './modules/optional/data.js'\nimport './modules/optional/memory.js'\nimport './modules/optional/sugar.js'\nimport './modules/optional/transform.js'\n\nimport { extend, makeInstance } from './utils/adopter.js'\nimport { getMethodNames, getMethodsFor } from './utils/methods.js'\nimport Box from './types/Box.js'\nimport Color from './types/Color.js'\nimport Container from './elements/Container.js'\nimport Defs from './elements/Defs.js'\nimport Dom from './elements/Dom.js'\nimport Element from './elements/Element.js'\nimport Ellipse from './elements/Ellipse.js'\nimport EventTarget from './types/EventTarget.js'\nimport Fragment from './elements/Fragment.js'\nimport Gradient from './elements/Gradient.js'\nimport Image from './elements/Image.js'\nimport Line from './elements/Line.js'\nimport List from './types/List.js'\nimport Marker from './elements/Marker.js'\nimport Matrix from './types/Matrix.js'\nimport Morphable, {\n  NonMorphable,\n  ObjectBag,\n  TransformBag,\n  makeMorphable,\n  registerMorphableType\n} from './animation/Morphable.js'\nimport Path from './elements/Path.js'\nimport PathArray from './types/PathArray.js'\nimport Pattern from './elements/Pattern.js'\nimport PointArray from './types/PointArray.js'\nimport Point from './types/Point.js'\nimport Polygon from './elements/Polygon.js'\nimport Polyline from './elements/Polyline.js'\nimport Rect from './elements/Rect.js'\nimport Runner from './animation/Runner.js'\nimport SVGArray from './types/SVGArray.js'\nimport SVGNumber from './types/SVGNumber.js'\nimport Shape from './elements/Shape.js'\nimport Svg from './elements/Svg.js'\nimport Symbol from './elements/Symbol.js'\nimport Text from './elements/Text.js'\nimport Tspan from './elements/Tspan.js'\nimport * as defaults from './modules/core/defaults.js'\nimport * as utils from './utils/utils.js'\nimport * as namespaces from './modules/core/namespaces.js'\nimport * as regex from './modules/core/regex.js'\n\nexport {\n  Morphable,\n  registerMorphableType,\n  makeMorphable,\n  TransformBag,\n  ObjectBag,\n  NonMorphable\n}\n\nexport { defaults, utils, namespaces, regex }\nexport const SVG = makeInstance\nexport { default as parser } from './modules/core/parser.js'\nexport { default as find } from './modules/core/selector.js'\nexport * from './modules/core/event.js'\nexport * from './utils/adopter.js'\nexport {\n  getWindow,\n  registerWindow,\n  restoreWindow,\n  saveWindow,\n  withWindow\n} from './utils/window.js'\n\n/* Animation Modules */\nexport { default as Animator } from './animation/Animator.js'\nexport { Controller, Ease, PID, Spring, easing } from './animation/Controller.js'\nexport { default as Queue } from './animation/Queue.js'\nexport { default as Runner } from './animation/Runner.js'\nexport { default as Timeline } from './animation/Timeline.js'\n\n/* Types */\nexport { default as Array } from './types/SVGArray.js'\nexport { default as Box } from './types/Box.js'\nexport { default as Color } from './types/Color.js'\nexport { default as EventTarget } from './types/EventTarget.js'\nexport { default as Matrix } from './types/Matrix.js'\nexport { default as Number } from './types/SVGNumber.js'\nexport { default as PathArray } from './types/PathArray.js'\nexport { default as Point } from './types/Point.js'\nexport { default as PointArray } from './types/PointArray.js'\nexport { default as List } from './types/List.js'\n\n/* Elements */\nexport { default as Circle } from './elements/Circle.js'\nexport { default as ClipPath } from './elements/ClipPath.js'\nexport { default as Container } from './elements/Container.js'\nexport { default as Defs } from './elements/Defs.js'\nexport { default as Dom } from './elements/Dom.js'\nexport { default as Element } from './elements/Element.js'\nexport { default as Ellipse } from './elements/Ellipse.js'\nexport { default as ForeignObject } from './elements/ForeignObject.js'\nexport { default as Fragment } from './elements/Fragment.js'\nexport { default as Gradient } from './elements/Gradient.js'\nexport { default as G } from './elements/G.js'\nexport { default as A } from './elements/A.js'\nexport { default as Image } from './elements/Image.js'\nexport { default as Line } from './elements/Line.js'\nexport { default as Marker } from './elements/Marker.js'\nexport { default as Mask } from './elements/Mask.js'\nexport { default as Path } from './elements/Path.js'\nexport { default as Pattern } from './elements/Pattern.js'\nexport { default as Polygon } from './elements/Polygon.js'\nexport { default as Polyline } from './elements/Polyline.js'\nexport { default as Rect } from './elements/Rect.js'\nexport { default as Shape } from './elements/Shape.js'\nexport { default as Stop } from './elements/Stop.js'\nexport { default as Style } from './elements/Style.js'\nexport { default as Svg } from './elements/Svg.js'\nexport { default as Symbol } from './elements/Symbol.js'\nexport { default as Text } from './elements/Text.js'\nexport { default as TextPath } from './elements/TextPath.js'\nexport { default as Tspan } from './elements/Tspan.js'\nexport { default as Use } from './elements/Use.js'\n\nextend([\n  Svg,\n  Symbol,\n  Image,\n  Pattern,\n  Marker\n], getMethodsFor('viewbox'))\n\nextend([\n  Line,\n  Polyline,\n  Polygon,\n  Path\n], getMethodsFor('marker'))\n\nextend(Text, getMethodsFor('Text'))\nextend(Path, getMethodsFor('Path'))\n\nextend(Defs, getMethodsFor('Defs'))\n\nextend([\n  Text,\n  Tspan\n], getMethodsFor('Tspan'))\n\nextend([\n  Rect,\n  Ellipse,\n  Gradient,\n  Runner\n], getMethodsFor('radius'))\n\nextend(EventTarget, getMethodsFor('EventTarget'))\nextend(Dom, getMethodsFor('Dom'))\nextend(Element, getMethodsFor('Element'))\nextend(Shape, getMethodsFor('Shape'))\nextend([ Container, Fragment ], getMethodsFor('Container'))\nextend(Gradient, getMethodsFor('Gradient'))\n\nextend(Runner, getMethodsFor('Runner'))\n\nList.extend(getMethodNames())\n\nregisterMorphableType([\n  SVGNumber,\n  Color,\n  Box,\n  Matrix,\n  SVGArray,\n  PointArray,\n  PathArray,\n  Point\n])\n\nmakeMorphable()\n","//  \r\nexport default {\r\n  // \r\n  paddingX: 15,\r\n  paddingY: 5,\r\n  // \r\n  imgMaxWidth: 200,\r\n  // \r\n  imgMaxHeight: 100,\r\n  // icon\r\n  iconSize: 20,\r\n  // \r\n  lineWidth: 1,\r\n  // \r\n  lineColor: '#549688',\r\n  // \r\n  lineDasharray: 'none',\r\n  // LineFlow\r\n  lineFlow: false,\r\n  // s\r\n  lineFlowDuration: 1,\r\n  // \r\n  lineFlowForward: true,\r\n  // \r\n  lineStyle: 'straight', // curvelogicalStructuremindMapverticalTimelinestraightdirectlogicalStructuremindMaporganizationStructureverticalTimeline\r\n  //  (  { true { logicalStructuremindMap\r\n  rootLineKeepSameInCurve: true,\r\n  // true\r\n  rootLineStartPositionKeepSameInCurve: false,\r\n  // (straight)0logicalStructuremindMapverticalTimeline\r\n  lineRadius: 5,\r\n  // \r\n  showLineMarker: false,\r\n  // \r\n  generalizationLineWidth: 1,\r\n  // \r\n  generalizationLineColor: '#549688',\r\n  // \r\n  generalizationLineMargin: 0,\r\n  // \r\n  generalizationNodeMargin: 20,\r\n  // \r\n  associativeLineWidth: 2,\r\n  // \r\n  associativeLineColor: 'rgb(51, 51, 51)',\r\n  // \r\n  associativeLineActiveWidth: 8,\r\n  // \r\n  associativeLineActiveColor: 'rgba(2, 167, 240, 1)',\r\n  // \r\n  associativeLineDasharray: '6,4',\r\n  // \r\n  associativeLineTextColor: 'rgb(51, 51, 51)',\r\n  // \r\n  associativeLineTextFontSize: 14,\r\n  // \r\n  associativeLineTextLineHeight: 1.2,\r\n  // \r\n  associativeLineTextFontFamily: ', Microsoft YaHei',\r\n  // \r\n  backgroundColor: '#fafafa',\r\n  // \r\n  backgroundImage: 'none',\r\n  // \r\n  backgroundRepeat: 'no-repeat',\r\n  // \r\n  backgroundPosition: 'center center',\r\n  // \r\n  backgroundSize: 'cover',\r\n  // logicalStructuremindMapcatalogOrganizationorganizationStructure\r\n  nodeUseLineStyle: false,\r\n  // \r\n  root: {\r\n    shape: 'rectangle',\r\n    fillColor: '#549688',\r\n    fontFamily: ', Microsoft YaHei',\r\n    color: '#fff',\r\n    fontSize: 16,\r\n    fontWeight: 'bold',\r\n    fontStyle: 'normal',\r\n    borderColor: 'transparent',\r\n    borderWidth: 0,\r\n    borderDasharray: 'none',\r\n    borderRadius: 5,\r\n    textDecoration: 'none',\r\n    gradientStyle: false,\r\n    startColor: '#549688',\r\n    endColor: '#fff',\r\n    startDir: [0, 0],\r\n    endDir: [1, 0],\r\n    // startendshowLineMarkertrue\r\n    lineMarkerDir: 'end',\r\n    // hoverhoverRectColor\r\n    hoverRectColor: '',\r\n    // hover\r\n    hoverRectRadius: 5,\r\n    // \r\n    textAlign: 'left',// rightcenterjustifyleft\r\n    // \r\n    imgPlacement: 'top', // leftrightbottomtop\r\n    // \r\n    tagPlacement: 'right' // rightbottom\r\n    // \r\n    // paddingX,\r\n    // paddingY,\r\n    // lineWidth,\r\n    // lineColor,\r\n    // lineDasharray,\r\n    // lineFlow,\r\n    // lineFlowDuration,\r\n    // lineFlowForward\r\n    // \r\n  },\r\n  // \r\n  second: {\r\n    shape: 'rectangle',\r\n    marginX: 100,\r\n    marginY: 40,\r\n    fillColor: '#fff',\r\n    fontFamily: ', Microsoft YaHei',\r\n    color: '#565656',\r\n    fontSize: 16,\r\n    fontWeight: 'normal',\r\n    fontStyle: 'normal',\r\n    borderColor: '#549688',\r\n    borderWidth: 1,\r\n    borderDasharray: 'none',\r\n    borderRadius: 5,\r\n    textDecoration: 'none',\r\n    gradientStyle: false,\r\n    startColor: '#549688',\r\n    endColor: '#fff',\r\n    startDir: [0, 0],\r\n    endDir: [1, 0],\r\n    lineMarkerDir: 'end',\r\n    hoverRectColor: '',\r\n    hoverRectRadius: 5,\r\n    textAlign: 'left',\r\n    imgPlacement: 'top',\r\n    tagPlacement: 'right'\r\n  },\r\n  // \r\n  node: {\r\n    shape: 'rectangle',\r\n    marginX: 50,\r\n    marginY: 0,\r\n    fillColor: 'transparent',\r\n    fontFamily: ', Microsoft YaHei',\r\n    color: '#6a6d6c',\r\n    fontSize: 14,\r\n    fontWeight: 'normal',\r\n    fontStyle: 'normal',\r\n    borderColor: 'transparent',\r\n    borderWidth: 0,\r\n    borderRadius: 5,\r\n    borderDasharray: 'none',\r\n    textDecoration: 'none',\r\n    gradientStyle: false,\r\n    startColor: '#549688',\r\n    endColor: '#fff',\r\n    startDir: [0, 0],\r\n    endDir: [1, 0],\r\n    lineMarkerDir: 'end',\r\n    hoverRectColor: '',\r\n    hoverRectRadius: 5,\r\n    textAlign: 'left',\r\n    imgPlacement: 'top',\r\n    tagPlacement: 'right'\r\n  },\r\n  // \r\n  generalization: {\r\n    shape: 'rectangle',\r\n    marginX: 100,\r\n    marginY: 40,\r\n    fillColor: '#fff',\r\n    fontFamily: ', Microsoft YaHei',\r\n    color: '#565656',\r\n    fontSize: 16,\r\n    fontWeight: 'normal',\r\n    fontStyle: 'normal',\r\n    borderColor: '#549688',\r\n    borderWidth: 1,\r\n    borderDasharray: 'none',\r\n    borderRadius: 5,\r\n    textDecoration: 'none',\r\n    gradientStyle: false,\r\n    startColor: '#549688',\r\n    endColor: '#fff',\r\n    startDir: [0, 0],\r\n    endDir: [1, 0],\r\n    hoverRectColor: '',\r\n    hoverRectRadius: 5,\r\n    textAlign: 'left',\r\n    imgPlacement: 'top',\r\n    tagPlacement: 'right'\r\n  }\r\n}\r\n\r\n// \r\nconst nodeSizeIndependenceList = [\r\n  'lineWidth',\r\n  'lineColor',\r\n  'lineDasharray',\r\n  'lineStyle',\r\n  'generalizationLineWidth',\r\n  'generalizationLineColor',\r\n  'associativeLineWidth',\r\n  'associativeLineColor',\r\n  'associativeLineActiveWidth',\r\n  'associativeLineActiveColor',\r\n  'associativeLineTextColor',\r\n  'associativeLineTextFontSize',\r\n  'associativeLineTextLineHeight',\r\n  'associativeLineTextFontFamily',\r\n  'backgroundColor',\r\n  'backgroundImage',\r\n  'backgroundRepeat',\r\n  'backgroundPosition',\r\n  'backgroundSize',\r\n  'rootLineKeepSameInCurve',\r\n  'rootLineStartPositionKeepSameInCurve',\r\n  'showLineMarker',\r\n  'lineRadius',\r\n  'hoverRectColor',\r\n  'hoverRectRadius',\r\n  'lineFlow',\r\n  'lineFlowDuration',\r\n  'lineFlowForward',\r\n  'textAlign'\r\n]\r\nexport const checkIsNodeSizeIndependenceConfig = config => {\r\n  let keys = Object.keys(config)\r\n  for (let i = 0; i < keys.length; i++) {\r\n    if (\r\n      !nodeSizeIndependenceList.find(item => {\r\n        return item === keys[i]\r\n      })\r\n    ) {\r\n      return false\r\n    }\r\n  }\r\n  return true\r\n}\r\n\r\n// \r\nexport const lineStyleProps = [\r\n  'lineColor',\r\n  'lineDasharray',\r\n  'lineWidth',\r\n  'lineMarkerDir',\r\n  'lineFlow',\r\n  'lineFlowDuration',\r\n  'lineFlowForward'\r\n]\r\n","import { v4 as uuidv4 } from 'uuid'\r\nimport {\r\n  nodeDataNoStylePropList,\r\n  selfCloseTagList,\r\n  richTextSupportStyleList\r\n} from '../constants/constant'\r\nimport MersenneTwister from './mersenneTwister'\r\nimport { ForeignObject } from '@svgdotjs/svg.js'\r\nimport merge from 'deepmerge'\r\nimport { lineStyleProps } from '../theme/default'\r\n\r\n//  \r\nexport const walk = (\r\n  root,\r\n  parent,\r\n  beforeCallback,\r\n  afterCallback,\r\n  isRoot,\r\n  layerIndex = 0,\r\n  index = 0,\r\n  ancestors = []\r\n) => {\r\n  let stop = false\r\n  if (beforeCallback) {\r\n    stop = beforeCallback(root, parent, isRoot, layerIndex, index, ancestors)\r\n  }\r\n  if (!stop && root.children && root.children.length > 0) {\r\n    let _layerIndex = layerIndex + 1\r\n    root.children.forEach((node, nodeIndex) => {\r\n      walk(\r\n        node,\r\n        root,\r\n        beforeCallback,\r\n        afterCallback,\r\n        false,\r\n        _layerIndex,\r\n        nodeIndex,\r\n        [...ancestors, root]\r\n      )\r\n    })\r\n  }\r\n  afterCallback &&\r\n    afterCallback(root, parent, isRoot, layerIndex, index, ancestors)\r\n}\r\n\r\n//  \r\nexport const bfsWalk = (root, callback) => {\r\n  let stack = [root]\r\n  let isStop = false\r\n  if (callback(root, null) === 'stop') {\r\n    isStop = true\r\n  }\r\n  while (stack.length) {\r\n    if (isStop) {\r\n      break\r\n    }\r\n    let cur = stack.shift()\r\n    if (cur.children && cur.children.length) {\r\n      cur.children.forEach(item => {\r\n        if (isStop) return\r\n        stack.push(item)\r\n        if (callback(item, cur) === 'stop') {\r\n          isStop = true\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n// \r\nexport const resizeImgSizeByOriginRatio = (\r\n  width,\r\n  height,\r\n  newWidth,\r\n  newHeight\r\n) => {\r\n  let arr = []\r\n  let nRatio = width / height\r\n  let mRatio = newWidth / newHeight\r\n  if (nRatio > mRatio) {\r\n    // \r\n    arr = [newWidth, newWidth / nRatio]\r\n  } else {\r\n    // \r\n    arr = [nRatio * newHeight, newHeight]\r\n  }\r\n  return arr\r\n}\r\n\r\n//  \r\nexport const resizeImgSize = (width, height, maxWidth, maxHeight) => {\r\n  let nRatio = width / height\r\n  let arr = []\r\n  if (maxWidth && maxHeight) {\r\n    if (width <= maxWidth && height <= maxHeight) {\r\n      arr = [width, height]\r\n    } else {\r\n      let mRatio = maxWidth / maxHeight\r\n      if (nRatio > mRatio) {\r\n        // \r\n        arr = [maxWidth, maxWidth / nRatio]\r\n      } else {\r\n        // \r\n        arr = [nRatio * maxHeight, maxHeight]\r\n      }\r\n    }\r\n  } else if (maxWidth) {\r\n    if (width <= maxWidth) {\r\n      arr = [width, height]\r\n    } else {\r\n      arr = [maxWidth, maxWidth / nRatio]\r\n    }\r\n  } else if (maxHeight) {\r\n    if (height <= maxHeight) {\r\n      arr = [width, height]\r\n    } else {\r\n      arr = [nRatio * maxHeight, maxHeight]\r\n    }\r\n  }\r\n  return arr\r\n}\r\n\r\n//  \r\nexport const resizeImg = (imgUrl, maxWidth, maxHeight) => {\r\n  return new Promise((resolve, reject) => {\r\n    let img = new Image()\r\n    img.src = imgUrl\r\n    img.onload = () => {\r\n      let arr = resizeImgSize(\r\n        img.naturalWidth,\r\n        img.naturalHeight,\r\n        maxWidth,\r\n        maxHeight\r\n      )\r\n      resolve(arr)\r\n    }\r\n    img.onerror = e => {\r\n      reject(e)\r\n    }\r\n  })\r\n}\r\n\r\n//  html\r\nexport const getStrWithBrFromHtml = str => {\r\n  str = str.replace(/<br>/gim, '\\n')\r\n  let el = document.createElement('div')\r\n  el.innerHTML = str\r\n  str = el.textContent\r\n  return str\r\n}\r\n\r\n//  \r\nexport const simpleDeepClone = data => {\r\n  try {\r\n    return JSON.parse(JSON.stringify(data))\r\n  } catch (error) {\r\n    return null\r\n  }\r\n}\r\n\r\n//  \r\nexport const copyRenderTree = (tree, root, removeActiveState = false) => {\r\n  tree.data = simpleDeepClone(root.data)\r\n  if (removeActiveState) {\r\n    tree.data.isActive = false\r\n    const generalizationList = formatGetNodeGeneralization(tree.data)\r\n    generalizationList.forEach(item => {\r\n      item.isActive = false\r\n    })\r\n  }\r\n  tree.children = []\r\n  if (root.children && root.children.length > 0) {\r\n    root.children.forEach((item, index) => {\r\n      tree.children[index] = copyRenderTree({}, item, removeActiveState)\r\n    })\r\n  }\r\n  // datachildren\r\n  Object.keys(root).forEach(key => {\r\n    if (!['data', 'children'].includes(key) && !/^_/.test(key)) {\r\n      tree[key] = root[key]\r\n    }\r\n  })\r\n  return tree\r\n}\r\n\r\n//  \r\nexport const copyNodeTree = (\r\n  tree,\r\n  root,\r\n  removeActiveState = false,\r\n  removeId = true\r\n) => {\r\n  const rootData = root.nodeData ? root.nodeData : root\r\n  tree.data = simpleDeepClone(rootData.data)\r\n  // uid\r\n  if (removeId) {\r\n    delete tree.data.uid\r\n  } else if (!tree.data.uid) {\r\n    // \r\n    tree.data.uid = createUid()\r\n  }\r\n  if (removeActiveState) {\r\n    tree.data.isActive = false\r\n  }\r\n  tree.children = []\r\n  if (root.children && root.children.length > 0) {\r\n    root.children.forEach((item, index) => {\r\n      tree.children[index] = copyNodeTree({}, item, removeActiveState, removeId)\r\n    })\r\n  } else if (\r\n    root.nodeData &&\r\n    root.nodeData.children &&\r\n    root.nodeData.children.length > 0\r\n  ) {\r\n    root.nodeData.children.forEach((item, index) => {\r\n      tree.children[index] = copyNodeTree({}, item, removeActiveState, removeId)\r\n    })\r\n  }\r\n  // datachildren\r\n  Object.keys(rootData).forEach(key => {\r\n    if (!['data', 'children'].includes(key) && !/^_/.test(key)) {\r\n      tree[key] = rootData[key]\r\n    }\r\n  })\r\n  return tree\r\n}\r\n\r\n//  dataURL\r\nexport const imgToDataUrl = (src, returnBlob = false) => {\r\n  return new Promise((resolve, reject) => {\r\n    const img = new Image()\r\n    // \r\n    img.setAttribute('crossOrigin', 'anonymous')\r\n    img.onload = () => {\r\n      try {\r\n        let canvas = document.createElement('canvas')\r\n        canvas.width = img.width\r\n        canvas.height = img.height\r\n        let ctx = canvas.getContext('2d')\r\n        // canvas\r\n        ctx.drawImage(img, 0, 0, img.width, img.height)\r\n        if (returnBlob) {\r\n          canvas.toBlob(blob => {\r\n            resolve(blob)\r\n          })\r\n        } else {\r\n          resolve(canvas.toDataURL())\r\n        }\r\n      } catch (e) {\r\n        reject(e)\r\n      }\r\n    }\r\n    img.onerror = e => {\r\n      reject(e)\r\n    }\r\n    img.src = src\r\n  })\r\n}\r\n\r\n// dataUrl\r\nexport const parseDataUrl = data => {\r\n  if (!/^data:/.test(data)) return data\r\n  let [typeStr, base64] = data.split(',')\r\n  let res = /^data:[^/]+\\/([^;]+);/.exec(typeStr)\r\n  let type = res[1]\r\n  return {\r\n    type,\r\n    base64\r\n  }\r\n}\r\n\r\n//  \r\nexport const downloadFile = (file, fileName) => {\r\n  let a = document.createElement('a')\r\n  a.href = file\r\n  a.download = fileName\r\n  a.click()\r\n}\r\n\r\n//  \r\nexport const throttle = (fn, time = 300, ctx) => {\r\n  let timer = null\r\n  return (...args) => {\r\n    if (timer) {\r\n      return\r\n    }\r\n    timer = setTimeout(() => {\r\n      fn.call(ctx, ...args)\r\n      timer = null\r\n    }, time)\r\n  }\r\n}\r\n\r\n// \r\nexport const debounce = (fn, wait = 300, ctx) => {\r\n  let timeout = null\r\n\r\n  return (...args) => {\r\n    if (timeout) clearTimeout(timeout)\r\n    timeout = setTimeout(() => {\r\n      timeout = null\r\n      fn.apply(ctx, args)\r\n    }, wait)\r\n  }\r\n}\r\n\r\n//  \r\nexport const asyncRun = (taskList, callback = () => {}) => {\r\n  let index = 0\r\n  let len = taskList.length\r\n  if (len <= 0) {\r\n    return callback()\r\n  }\r\n  let loop = () => {\r\n    if (index >= len) {\r\n      callback()\r\n      return\r\n    }\r\n    taskList[index]()\r\n    setTimeout(() => {\r\n      index++\r\n      loop()\r\n    }, 0)\r\n  }\r\n  loop()\r\n}\r\n\r\n// \r\nexport const degToRad = deg => {\r\n  return deg * (Math.PI / 180)\r\n}\r\n\r\n// \r\nexport const camelCaseToHyphen = str => {\r\n  return str.replace(/([a-z])([A-Z])/g, (...args) => {\r\n    return args[1] + '-' + args[2].toLowerCase()\r\n  })\r\n}\r\n\r\n//\r\nlet measureTextContext = null\r\nexport const measureText = (text, { italic, bold, fontSize, fontFamily }) => {\r\n  const font = joinFontStr({\r\n    italic,\r\n    bold,\r\n    fontSize,\r\n    fontFamily\r\n  })\r\n  if (!measureTextContext) {\r\n    const canvas = document.createElement('canvas')\r\n    measureTextContext = canvas.getContext('2d')\r\n  }\r\n  measureTextContext.save()\r\n  measureTextContext.font = font\r\n  const { width, actualBoundingBoxAscent, actualBoundingBoxDescent } =\r\n    measureTextContext.measureText(text)\r\n  measureTextContext.restore()\r\n  const height = actualBoundingBoxAscent + actualBoundingBoxDescent\r\n  return { width, height }\r\n}\r\n\r\n// font\r\nexport const joinFontStr = ({ italic, bold, fontSize, fontFamily }) => {\r\n  return `${italic ? 'italic ' : ''} ${\r\n    bold ? 'bold ' : ''\r\n  } ${fontSize}px ${fontFamily} `\r\n}\r\n\r\n//  \r\nexport const nextTick = function (fn, ctx) {\r\n  let pending = false\r\n  let timerFunc = null\r\n  let handle = () => {\r\n    pending = false\r\n    ctx ? fn.call(ctx) : fn()\r\n  }\r\n  // MutationObserverMutationObserver\r\n  if (typeof MutationObserver !== 'undefined') {\r\n    let counter = 1\r\n    let observer = new MutationObserver(handle)\r\n    let textNode = document.createTextNode(counter)\r\n    observer.observe(textNode, {\r\n      characterData: true //  true \r\n    })\r\n    timerFunc = function () {\r\n      counter = (counter + 1) % 2 // counter01\r\n      textNode.data = counter // handle\r\n    }\r\n  } else {\r\n    // \r\n    timerFunc = setTimeout\r\n  }\r\n  return function () {\r\n    if (pending) return\r\n    pending = true\r\n    timerFunc(handle, 0)\r\n  }\r\n}\r\n\r\n// \r\nexport const checkNodeOuter = (mindMap, node, offsetX = 0, offsetY = 0) => {\r\n  let elRect = mindMap.elRect\r\n  let { scaleX, scaleY, translateX, translateY } = mindMap.draw.transform()\r\n  let { left, top, width, height } = node\r\n  let right = (left + width) * scaleX + translateX\r\n  let bottom = (top + height) * scaleY + translateY\r\n  left = left * scaleX + translateX\r\n  top = top * scaleY + translateY\r\n  let offsetLeft = 0\r\n  let offsetTop = 0\r\n  if (left < 0 + offsetX) {\r\n    offsetLeft = -left + offsetX\r\n  }\r\n  if (right > elRect.width - offsetX) {\r\n    offsetLeft = -(right - elRect.width) - offsetX\r\n  }\r\n  if (top < 0 + offsetY) {\r\n    offsetTop = -top + offsetY\r\n  }\r\n  if (bottom > elRect.height - offsetY) {\r\n    offsetTop = -(bottom - elRect.height) - offsetY\r\n  }\r\n  return {\r\n    isOuter: offsetLeft !== 0 || offsetTop !== 0,\r\n    offsetLeft,\r\n    offsetTop\r\n  }\r\n}\r\n\r\n// html\r\nlet getTextFromHtmlEl = null\r\nexport const getTextFromHtml = html => {\r\n  if (!getTextFromHtmlEl) {\r\n    getTextFromHtmlEl = document.createElement('div')\r\n  }\r\n  getTextFromHtmlEl.innerHTML = html\r\n  return getTextFromHtmlEl.textContent\r\n}\r\n\r\n// blobdata:url\r\nexport const readBlob = blob => {\r\n  return new Promise((resolve, reject) => {\r\n    let reader = new FileReader()\r\n    reader.onload = evt => {\r\n      resolve(evt.target.result)\r\n    }\r\n    reader.onerror = err => {\r\n      reject(err)\r\n    }\r\n    reader.readAsDataURL(blob)\r\n  })\r\n}\r\n\r\n// domhtml\r\nlet nodeToHTMLWrapEl = null\r\nexport const nodeToHTML = node => {\r\n  if (!nodeToHTMLWrapEl) {\r\n    nodeToHTMLWrapEl = document.createElement('div')\r\n  }\r\n  nodeToHTMLWrapEl.innerHTML = ''\r\n  nodeToHTMLWrapEl.appendChild(node)\r\n  return nodeToHTMLWrapEl.innerHTML\r\n}\r\n\r\n// \r\nexport const getImageSize = src => {\r\n  return new Promise(resolve => {\r\n    let img = new Image()\r\n    img.src = src\r\n    img.onload = () => {\r\n      resolve({\r\n        width: img.width,\r\n        height: img.height\r\n      })\r\n    }\r\n    img.onerror = () => {\r\n      resolve({\r\n        width: 0,\r\n        height: 0\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\n// id\r\nexport const createUid = () => {\r\n  return uuidv4()\r\n}\r\n\r\n// \r\nexport const loadImage = imgFile => {\r\n  return new Promise((resolve, reject) => {\r\n    let fr = new FileReader()\r\n    fr.readAsDataURL(imgFile)\r\n    fr.onload = async e => {\r\n      let url = e.target.result\r\n      let size = await getImageSize(url)\r\n      resolve({\r\n        url,\r\n        size\r\n      })\r\n    }\r\n    fr.onerror = error => {\r\n      reject(error)\r\n    }\r\n  })\r\n}\r\n\r\n// html\r\nexport const removeHTMLEntities = str => {\r\n  [['&nbsp;', '&#160;']].forEach(item => {\r\n    str = str.replace(new RegExp(item[0], 'g'), item[1])\r\n  })\r\n  return str\r\n}\r\n\r\n// \r\nexport const getType = data => {\r\n  return Object.prototype.toString.call(data).slice(8, -1)\r\n}\r\n\r\n// nullundefined\r\nexport const isUndef = data => {\r\n  return data === null || data === undefined || data === ''\r\n}\r\n\r\n// html\r\nexport const removeHtmlStyle = html => {\r\n  return html.replace(/(<[^\\s]+)\\s+style=[\"'][^'\"]+[\"']\\s*(>)/g, '$1$2')\r\n}\r\n\r\n// html\r\nlet addHtmlStyleEl = null\r\nexport const addHtmlStyle = (html, tag, style) => {\r\n  if (!addHtmlStyleEl) {\r\n    addHtmlStyleEl = document.createElement('div')\r\n  }\r\n  const tags = Array.isArray(tag) ? tag : [tag]\r\n  addHtmlStyleEl.innerHTML = html\r\n  let walk = root => {\r\n    let childNodes = root.childNodes\r\n    childNodes.forEach(node => {\r\n      if (node.nodeType === 1) {\r\n        // \r\n        if (tags.includes(node.tagName.toLowerCase())) {\r\n          node.style.cssText = style\r\n        } else {\r\n          walk(node)\r\n        }\r\n      }\r\n    })\r\n  }\r\n  walk(addHtmlStyleEl)\r\n  return addHtmlStyleEl.innerHTML\r\n}\r\n\r\n// \r\nlet checkIsRichTextEl = null\r\nexport const checkIsRichText = str => {\r\n  if (!checkIsRichTextEl) {\r\n    checkIsRichTextEl = document.createElement('div')\r\n  }\r\n  checkIsRichTextEl.innerHTML = str\r\n  for (let c = checkIsRichTextEl.childNodes, i = c.length; i--; ) {\r\n    if (c[i].nodeType == 1) return true\r\n  }\r\n  return false\r\n}\r\n\r\n// html\r\nlet replaceHtmlTextEl = null\r\nexport const replaceHtmlText = (html, searchText, replaceText) => {\r\n  if (!replaceHtmlTextEl) {\r\n    replaceHtmlTextEl = document.createElement('div')\r\n  }\r\n  replaceHtmlTextEl.innerHTML = html\r\n  let walk = root => {\r\n    let childNodes = root.childNodes\r\n    childNodes.forEach(node => {\r\n      if (node.nodeType === 1) {\r\n        // \r\n        walk(node)\r\n      } else if (node.nodeType === 3) {\r\n        // \r\n        root.replaceChild(\r\n          document.createTextNode(\r\n            node.nodeValue.replace(new RegExp(searchText, 'g'), replaceText)\r\n          ),\r\n          node\r\n        )\r\n      }\r\n    })\r\n  }\r\n  walk(replaceHtmlTextEl)\r\n  return replaceHtmlTextEl.innerHTML\r\n}\r\n\r\n// htmlhtml\r\nlet removeHtmlNodeByClassEl = null\r\nexport const removeHtmlNodeByClass = (html, selector) => {\r\n  if (!removeHtmlNodeByClassEl) {\r\n    removeHtmlNodeByClassEl = document.createElement('div')\r\n  }\r\n  removeHtmlNodeByClassEl.innerHTML = html\r\n  const node = removeHtmlNodeByClassEl.querySelector(selector)\r\n  if (node) {\r\n    node.parentNode.removeChild(node)\r\n  }\r\n  return removeHtmlNodeByClassEl.innerHTML\r\n}\r\n\r\n// \r\nexport const isWhite = color => {\r\n  color = String(color).replace(/\\s+/g, '')\r\n  return (\r\n    ['#fff', '#ffffff', '#FFF', '#FFFFFF', 'rgb(255,255,255)'].includes(\r\n      color\r\n    ) || /rgba\\(255,255,255,[^)]+\\)/.test(color)\r\n  )\r\n}\r\n\r\n// \r\nexport const isTransparent = color => {\r\n  color = String(color).replace(/\\s+/g, '')\r\n  return (\r\n    ['', 'transparent'].includes(color) || /rgba\\(\\d+,\\d+,\\d+,0\\)/.test(color)\r\n  )\r\n}\r\n\r\n// \r\nexport const getVisibleColorFromTheme = themeConfig => {\r\n  let { lineColor, root, second, node } = themeConfig\r\n  let list = [\r\n    lineColor,\r\n    root.fillColor,\r\n    root.color,\r\n    second.fillColor,\r\n    second.color,\r\n    node.fillColor,\r\n    node.color,\r\n    root.borderColor,\r\n    second.borderColor,\r\n    node.borderColor\r\n  ]\r\n  for (let i = 0; i < list.length; i++) {\r\n    let color = list[i]\r\n    if (!isTransparent(color) && !isWhite(color)) {\r\n      return color\r\n    }\r\n  }\r\n}\r\n\r\n// DOM\r\nexport const removeFormulaTags = node => {\r\n  const walk = root => {\r\n    const childNodes = root.childNodes\r\n    childNodes.forEach(node => {\r\n      if (node.nodeType === 1) {\r\n        if (node.classList.contains('ql-formula')) {\r\n          node.parentNode.removeChild(node)\r\n        } else {\r\n          walk(node)\r\n        }\r\n      }\r\n    })\r\n  }\r\n  walk(node)\r\n}\r\n\r\n// <p><span></span><p>\\n\r\n// \r\nlet nodeRichTextToTextWithWrapEl = null\r\nexport const nodeRichTextToTextWithWrap = html => {\r\n  if (!nodeRichTextToTextWithWrapEl) {\r\n    nodeRichTextToTextWithWrapEl = document.createElement('div')\r\n  }\r\n  nodeRichTextToTextWithWrapEl.innerHTML = html\r\n  const childNodes = nodeRichTextToTextWithWrapEl.childNodes\r\n  let res = ''\r\n  for (let i = 0; i < childNodes.length; i++) {\r\n    const node = childNodes[i]\r\n    if (node.nodeType === 1) {\r\n      // \r\n      removeFormulaTags(node)\r\n      if (node.tagName.toLowerCase() === 'p') {\r\n        res += node.textContent + '\\n'\r\n      } else {\r\n        res += node.textContent\r\n      }\r\n    } else if (node.nodeType === 3) {\r\n      // \r\n      res += node.nodeValue\r\n    }\r\n  }\r\n  return res.replace(/\\n$/, '')\r\n}\r\n\r\n// <br><p><span></span><p>\r\nlet textToNodeRichTextWithWrapEl = null\r\nexport const textToNodeRichTextWithWrap = html => {\r\n  if (!textToNodeRichTextWithWrapEl) {\r\n    textToNodeRichTextWithWrapEl = document.createElement('div')\r\n  }\r\n  textToNodeRichTextWithWrapEl.innerHTML = html\r\n  const childNodes = textToNodeRichTextWithWrapEl.childNodes\r\n  let list = []\r\n  let str = ''\r\n  for (let i = 0; i < childNodes.length; i++) {\r\n    const node = childNodes[i]\r\n    if (node.nodeType === 1) {\r\n      // \r\n      if (node.tagName.toLowerCase() === 'br') {\r\n        list.push(str)\r\n        str = ''\r\n      } else {\r\n        str += node.textContent\r\n      }\r\n    } else if (node.nodeType === 3) {\r\n      // \r\n      str += node.nodeValue\r\n    }\r\n  }\r\n  if (str) {\r\n    list.push(str)\r\n  }\r\n  return list\r\n    .map(item => {\r\n      return `<p><span>${htmlEscape(item)}</span></p>`\r\n    })\r\n    .join('')\r\n}\r\n\r\n// strongems\r\n// \r\nlet removeRichTextStyesEl = null\r\nexport const removeRichTextStyes = html => {\r\n  if (!removeRichTextStyesEl) {\r\n    removeRichTextStyesEl = document.createElement('div')\r\n  }\r\n  removeRichTextStyesEl.innerHTML = html\r\n  // \r\n  const formulaList = removeRichTextStyesEl.querySelectorAll('.ql-formula')\r\n  Array.from(formulaList).forEach(el => {\r\n    const placeholder = document.createTextNode('$smmformula$')\r\n    el.parentNode.replaceChild(placeholder, el)\r\n  })\r\n  // \r\n  const childNodes = removeRichTextStyesEl.childNodes\r\n  let list = []\r\n  for (let i = 0; i < childNodes.length; i++) {\r\n    const node = childNodes[i]\r\n    if (node.nodeType === 1) {\r\n      // \r\n      list.push(node.textContent)\r\n    } else if (node.nodeType === 3) {\r\n      // \r\n      list.push(node.nodeValue)\r\n    }\r\n  }\r\n  // \r\n  html = list\r\n    .map(item => {\r\n      return `<p><span>${htmlEscape(item)}</span></p>`\r\n    })\r\n    .join('')\r\n  // \r\n  if (formulaList.length > 0) {\r\n    html = html.replace(/\\$smmformula\\$/g, '<span class=\"smmformula\"></span>')\r\n    removeRichTextStyesEl.innerHTML = html\r\n    const els = removeRichTextStyesEl.querySelectorAll('.smmformula')\r\n    Array.from(els).forEach((el, index) => {\r\n      el.parentNode.replaceChild(formulaList[index], el)\r\n    })\r\n    html = removeRichTextStyesEl.innerHTML\r\n  }\r\n  return html\r\n}\r\n\r\n// \r\nexport const isMobile = () => {\r\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\r\n    navigator.userAgent\r\n  )\r\n}\r\n\r\n// \r\nexport const getObjectChangedProps = (oldObject, newObject) => {\r\n  const res = {}\r\n  Object.keys(newObject).forEach(prop => {\r\n    const oldVal = oldObject[prop]\r\n    const newVal = newObject[prop]\r\n    if (getType(oldVal) !== getType(newVal)) {\r\n      res[prop] = newVal\r\n      return\r\n    }\r\n    if (getType(oldVal) === 'Object') {\r\n      if (JSON.stringify(oldVal) !== JSON.stringify(newVal)) {\r\n        res[prop] = newVal\r\n        return\r\n      }\r\n    } else {\r\n      if (oldVal !== newVal) {\r\n        res[prop] = newVal\r\n        return\r\n      }\r\n    }\r\n  })\r\n  return res\r\n}\r\n\r\n// \r\nexport const checkIsNodeStyleDataKey = key => {\r\n  // \r\n  if (/^_/.test(key)) return false\r\n  // \r\n  if (!nodeDataNoStylePropList.includes(key)) {\r\n    return true\r\n  }\r\n  return false\r\n}\r\n\r\n// \r\nexport const isNodeNotNeedRenderData = config => {\r\n  const list = [...lineStyleProps] // \r\n  const keys = Object.keys(config)\r\n  for (let i = 0; i < keys.length; i++) {\r\n    if (!list.includes(keys[i])) {\r\n      return false\r\n    }\r\n  }\r\n  return true\r\n}\r\n\r\n// \r\n// const data = [\r\n//   { type: 'priority', name: '', list: [{ name: '1', icon: 'a' }, { name: 2, icon: 'b' }] },\r\n//   { type: 'priority', name: '', list: [{ name: '2', icon: 'c' }, { name: 3, icon: 'd' }] },\r\n// ];\r\n\r\n// mergerIconList(data) \r\n\r\n// [\r\n//   { type: 'priority', name: '', list: [{ name: '1', icon: 'a' }, { name: 2, icon: 'c' }, { name: 3, icon: 'd' }] },\r\n// ]\r\nexport const mergerIconList = list => {\r\n  return list.reduce((result, item) => {\r\n    const existingItem = result.find(x => x.type === item.type)\r\n    if (existingItem) {\r\n      item.list.forEach(newObj => {\r\n        const existingObj = existingItem.list.find(x => x.name === newObj.name)\r\n        if (existingObj) {\r\n          existingObj.icon = newObj.icon\r\n        } else {\r\n          existingItem.list.push(newObj)\r\n        }\r\n      })\r\n    } else {\r\n      result.push({ ...item })\r\n    }\r\n    return result\r\n  }, [])\r\n}\r\n\r\n// \r\nexport const getTopAncestorsFomNodeList = list => {\r\n  let res = []\r\n  list.forEach(node => {\r\n    if (\r\n      !list.find(item => {\r\n        return item.uid !== node.uid && item.isAncestor(node)\r\n      })\r\n    ) {\r\n      res.push(node)\r\n    }\r\n  })\r\n  return res\r\n}\r\n\r\n// \r\nexport const checkHasSupSubRelation = list => {\r\n  for (let i = 0; i < list.length; i++) {\r\n    const cur = list[i]\r\n    if (\r\n      list.find(item => {\r\n        return item.uid !== cur.uid && cur.isAncestor(item)\r\n      })\r\n    ) {\r\n      return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\n// \r\nexport const parseAddGeneralizationNodeList = list => {\r\n  const cache = {}\r\n  const uidToParent = {}\r\n  list.forEach(node => {\r\n    const parent = node.parent\r\n    if (parent) {\r\n      const pUid = parent.uid\r\n      uidToParent[pUid] = parent\r\n      const index = node.getIndexInBrothers()\r\n      const data = {\r\n        node,\r\n        index\r\n      }\r\n      if (cache[pUid]) {\r\n        if (\r\n          !cache[pUid].find(item => {\r\n            return item.index === data.index\r\n          })\r\n        ) {\r\n          cache[pUid].push(data)\r\n        }\r\n      } else {\r\n        cache[pUid] = [data]\r\n      }\r\n    }\r\n  })\r\n  const res = []\r\n  Object.keys(cache).forEach(uid => {\r\n    if (cache[uid].length > 1) {\r\n      const rangeList = cache[uid]\r\n        .map(item => {\r\n          return item.index\r\n        })\r\n        .sort((a, b) => {\r\n          return a - b\r\n        })\r\n      res.push({\r\n        node: uidToParent[uid],\r\n        range: [rangeList[0], rangeList[rangeList.length - 1]]\r\n      })\r\n    } else {\r\n      res.push({\r\n        node: cache[uid][0].node\r\n      })\r\n    }\r\n  })\r\n  return res\r\n}\r\n\r\n// \r\nexport const checkTwoRectIsOverlap = (\r\n  minx1,\r\n  maxx1,\r\n  miny1,\r\n  maxy1,\r\n  minx2,\r\n  maxx2,\r\n  miny2,\r\n  maxy2\r\n) => {\r\n  return maxx1 > minx2 && maxx2 > minx1 && maxy1 > miny2 && maxy2 > miny1\r\n}\r\n\r\n// \r\nexport const focusInput = el => {\r\n  let selection = window.getSelection()\r\n  let range = document.createRange()\r\n  range.selectNodeContents(el)\r\n  range.collapse()\r\n  selection.removeAllRanges()\r\n  selection.addRange(range)\r\n}\r\n\r\n// \r\nexport const selectAllInput = el => {\r\n  let selection = window.getSelection()\r\n  let range = document.createRange()\r\n  range.selectNodeContents(el)\r\n  selection.removeAllRanges()\r\n  selection.addRange(range)\r\n}\r\n\r\n// \r\nexport const addDataToAppointNodes = (appointNodes, data = {}) => {\r\n  data = { ...data }\r\n  const alreadyIsRichText = data && data.richText\r\n  // \r\n  if (alreadyIsRichText && data.resetRichText) {\r\n    delete data.resetRichText\r\n  }\r\n  const walk = list => {\r\n    list.forEach(node => {\r\n      node.data = {\r\n        ...node.data,\r\n        ...data\r\n      }\r\n      if (node.children && node.children.length > 0) {\r\n        walk(node.children)\r\n      }\r\n    })\r\n  }\r\n  walk(appointNodes)\r\n  return appointNodes\r\n}\r\n\r\n// uid\r\n// createNewIdfalseuiduidtrueuiduid\r\nexport const createUidForAppointNodes = (\r\n  appointNodes,\r\n  createNewId = false,\r\n  handle = null,\r\n  handleGeneralization = false\r\n) => {\r\n  const walk = list => {\r\n    list.forEach(node => {\r\n      if (!node.data) {\r\n        node.data = {}\r\n      }\r\n      if (createNewId || isUndef(node.data.uid)) {\r\n        node.data.uid = createUid()\r\n      }\r\n      if (handleGeneralization) {\r\n        const generalizationList = formatGetNodeGeneralization(node.data)\r\n        generalizationList.forEach(gNode => {\r\n          if (createNewId || isUndef(gNode.uid)) {\r\n            gNode.uid = createUid()\r\n          }\r\n        })\r\n      }\r\n      handle && handle(node)\r\n      if (node.children && node.children.length > 0) {\r\n        walk(node.children)\r\n      }\r\n    })\r\n  }\r\n  walk(appointNodes)\r\n  return appointNodes\r\n}\r\n\r\n// \r\nexport const formatDataToArray = data => {\r\n  if (!data) return []\r\n  return Array.isArray(data) ? data : [data]\r\n}\r\n\r\n//  \r\nexport const getNodeDataIndex = node => {\r\n  return node.parent\r\n    ? node.parent.nodeData.children.findIndex(item => {\r\n        return item.data.uid === node.uid\r\n      })\r\n    : 0\r\n}\r\n\r\n// \r\nexport const getNodeIndexInNodeList = (node, nodeList) => {\r\n  return nodeList.findIndex(item => {\r\n    return item.uid === node.uid\r\n  })\r\n}\r\n\r\n// \r\nexport const generateColorByContent = str => {\r\n  let hash = 0\r\n  for (let i = 0; i < str.length; i++) {\r\n    hash = str.charCodeAt(i) + ((hash << 5) - hash)\r\n  }\r\n  // \r\n  // 1. hashv1.1 v1.2\r\n  // 2. \r\n  const rng = new MersenneTwister(hash)\r\n  const h = rng.genrand_int32() % 360\r\n  return 'hsla(' + h + ', 50%, 50%, 1)'\r\n}\r\n\r\n//  html\r\nexport const htmlEscape = str => {\r\n  [\r\n    ['&', '&amp;'],\r\n    ['<', '&lt;'],\r\n    ['>', '&gt;']\r\n  ].forEach(item => {\r\n    str = str.replace(new RegExp(item[0], 'g'), item[1])\r\n  })\r\n  return str\r\n}\r\n\r\n// \r\nexport const isSameObject = (a, b) => {\r\n  const type = getType(a)\r\n  // ab\r\n  if (type !== getType(b)) return false\r\n  // \r\n  if (type === 'Object') {\r\n    const keysa = Object.keys(a)\r\n    const keysb = Object.keys(b)\r\n    // \r\n    if (keysa.length !== keysb.length) return false\r\n    // \r\n    for (let i = 0; i < keysa.length; i++) {\r\n      const key = keysa[i]\r\n      // ba\r\n      if (!keysb.includes(key)) return false\r\n      // \r\n      const isSame = isSameObject(a[key], b[key])\r\n      if (!isSame) {\r\n        return false\r\n      }\r\n    }\r\n    return true\r\n  } else if (type === 'Array') {\r\n    // \r\n    // \r\n    if (a.length !== b.length) return false\r\n    // \r\n    for (let i = 0; i < a.length; i++) {\r\n      const itema = a[i]\r\n      const itemb = b[i]\r\n      const typea = getType(itema)\r\n      const typeb = getType(itemb)\r\n      if (typea !== typeb) return false\r\n      const isSame = isSameObject(itema, itemb)\r\n      if (!isSame) {\r\n        return false\r\n      }\r\n    }\r\n    return true\r\n  } else {\r\n    // \r\n    return a === b\r\n  }\r\n}\r\n\r\n// navigator.clipboard\r\nexport const checkClipboardReadEnable = () => {\r\n  return navigator.clipboard && typeof navigator.clipboard.read === 'function'\r\n}\r\n\r\n// \r\nexport const setDataToClipboard = data => {\r\n  if (navigator.clipboard && navigator.clipboard.writeText) {\r\n    navigator.clipboard.writeText(JSON.stringify(data))\r\n  }\r\n}\r\n\r\n// \r\nexport const getDataFromClipboard = async () => {\r\n  let text = null\r\n  let img = null\r\n  if (checkClipboardReadEnable()) {\r\n    const items = await navigator.clipboard.read()\r\n    if (items && items.length > 0) {\r\n      for (const clipboardItem of items) {\r\n        for (const type of clipboardItem.types) {\r\n          if (/^image\\//.test(type)) {\r\n            img = await clipboardItem.getType(type)\r\n          } else if (type === 'text/plain') {\r\n            const blob = await clipboardItem.getType(type)\r\n            text = await blob.text()\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return {\r\n    text,\r\n    img\r\n  }\r\n}\r\n\r\n// nodeData.children\r\nexport const removeFromParentNodeData = node => {\r\n  if (!node || !node.parent) return\r\n  const index = getNodeDataIndex(node)\r\n  if (index === -1) return\r\n  node.parent.nodeData.children.splice(index, 1)\r\n}\r\n\r\n// html\r\nexport const handleSelfCloseTags = str => {\r\n  selfCloseTagList.forEach(tagName => {\r\n    str = str.replace(\r\n      new RegExp(`<${tagName}([^>]*)>`, 'g'),\r\n      `<${tagName} $1 />`\r\n    )\r\n  })\r\n  return str\r\n}\r\n\r\n// \r\nexport const checkNodeListIsEqual = (list1, list2) => {\r\n  if (list1.length !== list2.length) return false\r\n  for (let i = 0; i < list1.length; i++) {\r\n    if (\r\n      !list2.find(item => {\r\n        return item.uid === list1[i].uid\r\n      })\r\n    ) {\r\n      return false\r\n    }\r\n  }\r\n  return true\r\n}\r\n\r\n// chrome\r\nexport const getChromeVersion = () => {\r\n  const match = navigator.userAgent.match(/\\s+Chrome\\/(.*)\\s+/)\r\n  if (match && match[1]) {\r\n    return Number.parseFloat(match[1])\r\n  }\r\n  return ''\r\n}\r\n\r\n// smm\r\nexport const createSmmFormatData = data => {\r\n  return {\r\n    simpleMindMap: true,\r\n    data\r\n  }\r\n}\r\n\r\n// smm\r\nexport const checkSmmFormatData = data => {\r\n  let smmData = null\r\n  // \r\n  if (typeof data === 'string') {\r\n    try {\r\n      const parsedData = JSON.parse(data)\r\n      // \r\n      if (typeof parsedData === 'object' && parsedData.simpleMindMap) {\r\n        smmData = parsedData.data\r\n      }\r\n    } catch (error) {}\r\n  } else if (typeof data === 'object' && data.simpleMindMap) {\r\n    // \r\n    smmData = data.data\r\n  }\r\n  const isSmm = !!smmData\r\n  return {\r\n    isSmm,\r\n    data: isSmm ? smmData : String(data)\r\n  }\r\n}\r\n\r\n// html\r\nexport const handleInputPasteText = (e, text) => {\r\n  e.preventDefault()\r\n  const selection = window.getSelection()\r\n  if (!selection.rangeCount) return\r\n  selection.deleteFromDocument()\r\n  text = text || e.clipboardData.getData('text')\r\n  // \r\n  text = htmlEscape(text)\r\n  // \r\n  text = getTextFromHtml(text)\r\n  // \r\n  // text = text.replace(/\\n/g, '')\r\n  const textArr = text.split(/\\n/g)\r\n  const fragment = document.createDocumentFragment()\r\n  textArr.forEach((item, index) => {\r\n    const node = document.createTextNode(item)\r\n    fragment.appendChild(node)\r\n    if (index < textArr.length - 1) {\r\n      const br = document.createElement('br')\r\n      fragment.appendChild(br)\r\n    }\r\n  })\r\n  selection.getRangeAt(0).insertNode(fragment)\r\n  selection.collapseToEnd()\r\n}\r\n\r\n// \r\n/*\r\n    {\r\n        data: {\r\n            uid: 'xxx'\r\n        },\r\n        children: [\r\n            {\r\n                data: {\r\n                    uid: 'xxx'\r\n                },\r\n                children: []\r\n            }\r\n        ]\r\n    }\r\n    \r\n    {\r\n        uid: {\r\n            children: [uid1, uid2],\r\n            data: {}\r\n        }\r\n    }\r\n  */\r\nexport const transformTreeDataToObject = data => {\r\n  const res = {}\r\n  const walk = (root, parent) => {\r\n    const uid = root.data.uid\r\n    if (parent) {\r\n      parent.children.push(uid)\r\n    }\r\n    res[uid] = {\r\n      isRoot: !parent,\r\n      data: {\r\n        ...root.data\r\n      },\r\n      children: []\r\n    }\r\n    if (root.children && root.children.length > 0) {\r\n      root.children.forEach(item => {\r\n        walk(item, res[uid])\r\n      })\r\n    }\r\n  }\r\n  walk(data, null)\r\n  return res\r\n}\r\n\r\n// \r\n// transformTreeDataToObject\r\n// uid\r\nconst _findParentUid = (data, targetUid) => {\r\n  const uids = Object.keys(data)\r\n  let res = ''\r\n  uids.forEach(uid => {\r\n    const children = data[uid].children\r\n    const isParent =\r\n      children.findIndex(childUid => {\r\n        return childUid === targetUid\r\n      }) !== -1\r\n    if (isParent) {\r\n      res = uid\r\n    }\r\n  })\r\n  return res\r\n}\r\nexport const transformObjectToTreeData = data => {\r\n  const uids = Object.keys(data)\r\n  if (uids.length <= 0) return null\r\n  const rootKey = uids.find(uid => {\r\n    return data[uid].isRoot\r\n  })\r\n  if (!rootKey || !data[rootKey]) return null\r\n  // \r\n  const res = {\r\n    data: simpleDeepClone(data[rootKey].data),\r\n    children: []\r\n  }\r\n  const map = {}\r\n  map[rootKey] = res\r\n  uids.forEach(uid => {\r\n    const parentUid = _findParentUid(data, uid)\r\n    const cur = data[uid]\r\n    const node = map[uid] || {\r\n      data: simpleDeepClone(cur.data),\r\n      children: []\r\n    }\r\n    if (!map[uid]) {\r\n      map[uid] = node\r\n    }\r\n    if (parentUid) {\r\n      const index = data[parentUid].children.findIndex(item => {\r\n        return item === uid\r\n      })\r\n      if (!map[parentUid]) {\r\n        map[parentUid] = {\r\n          data: simpleDeepClone(data[parentUid].data),\r\n          children: []\r\n        }\r\n      }\r\n      map[parentUid].children[index] = node\r\n    }\r\n  })\r\n  return res\r\n}\r\n\r\n// \r\nexport const getTwoPointDistance = (x1, y1, x2, y2) => {\r\n  return Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2))\r\n}\r\n\r\n// \r\n// \r\nexport const getRectRelativePosition = (rect1, rect2) => {\r\n  // \r\n  const rect1CenterX = rect1.x + rect1.width / 2\r\n  const rect1CenterY = rect1.y + rect1.height / 2\r\n\r\n  // \r\n  const rect2CenterX = rect2.x + rect2.width / 2\r\n  const rect2CenterY = rect2.y + rect2.height / 2\r\n\r\n  // \r\n  if (rect1CenterX < rect2CenterX && rect1CenterY < rect2CenterY) {\r\n    return 'left-top'\r\n  } else if (rect1CenterX > rect2CenterX && rect1CenterY < rect2CenterY) {\r\n    return 'right-top'\r\n  } else if (rect1CenterX > rect2CenterX && rect1CenterY > rect2CenterY) {\r\n    return 'right-bottom'\r\n  } else if (rect1CenterX < rect2CenterX && rect1CenterY > rect2CenterY) {\r\n    return 'left-bottom'\r\n  } else if (rect1CenterX < rect2CenterX && rect1CenterY === rect2CenterY) {\r\n    return 'left'\r\n  } else if (rect1CenterX > rect2CenterX && rect1CenterY === rect2CenterY) {\r\n    return 'right'\r\n  } else if (rect1CenterX === rect2CenterX && rect1CenterY < rect2CenterY) {\r\n    return 'top'\r\n  } else if (rect1CenterX === rect2CenterX && rect1CenterY > rect2CenterY) {\r\n    return 'bottom'\r\n  } else {\r\n    return 'overlap'\r\n  }\r\n}\r\n\r\n// svg\r\nexport const handleGetSvgDataExtraContent = ({\r\n  addContentToHeader,\r\n  addContentToFooter\r\n}) => {\r\n  // \r\n  const cssTextList = []\r\n  let header = null\r\n  let headerHeight = 0\r\n  let footer = null\r\n  let footerHeight = 0\r\n  const handle = (fn, callback) => {\r\n    if (typeof fn === 'function') {\r\n      const res = fn()\r\n      if (!res) return\r\n      const { el, cssText, height } = res\r\n      if (el instanceof HTMLElement) {\r\n        addXmlns(el)\r\n        const foreignObject = createForeignObjectNode({ el, height })\r\n        callback(foreignObject, height)\r\n      }\r\n      if (cssText) {\r\n        cssTextList.push(cssText)\r\n      }\r\n    }\r\n  }\r\n  handle(addContentToHeader, (foreignObject, height) => {\r\n    header = foreignObject\r\n    headerHeight = height\r\n  })\r\n  handle(addContentToFooter, (foreignObject, height) => {\r\n    footer = foreignObject\r\n    footerHeight = height\r\n  })\r\n  return {\r\n    cssTextList,\r\n    header,\r\n    headerHeight,\r\n    footer,\r\n    footerHeight\r\n  }\r\n}\r\n\r\n// \r\nexport const getNodeTreeBoundingRect = (\r\n  node,\r\n  x = 0,\r\n  y = 0,\r\n  paddingX = 0,\r\n  paddingY = 0,\r\n  excludeSelf = false,\r\n  excludeGeneralization = false\r\n) => {\r\n  let minX = Infinity\r\n  let maxX = -Infinity\r\n  let minY = Infinity\r\n  let maxY = -Infinity\r\n  const walk = (root, isRoot) => {\r\n    if (!(isRoot && excludeSelf) && root.group) {\r\n      try {\r\n        const { x, y, width, height } = root.group\r\n          .findOne('.smm-node-shape')\r\n          .rbox()\r\n        if (x < minX) {\r\n          minX = x\r\n        }\r\n        if (x + width > maxX) {\r\n          maxX = x + width\r\n        }\r\n        if (y < minY) {\r\n          minY = y\r\n        }\r\n        if (y + height > maxY) {\r\n          maxY = y + height\r\n        }\r\n      } catch (e) {}\r\n    }\r\n    if (!excludeGeneralization && root._generalizationList.length > 0) {\r\n      root._generalizationList.forEach(item => {\r\n        walk(item.generalizationNode)\r\n      })\r\n    }\r\n    if (root.children) {\r\n      root.children.forEach(item => {\r\n        walk(item)\r\n      })\r\n    }\r\n  }\r\n  walk(node, true)\r\n\r\n  minX = minX - x + paddingX\r\n  minY = minY - y + paddingY\r\n  maxX = maxX - x + paddingX\r\n  maxY = maxY - y + paddingY\r\n\r\n  return {\r\n    left: minX,\r\n    top: minY,\r\n    width: maxX - minX,\r\n    height: maxY - minY\r\n  }\r\n}\r\n\r\n// \r\nexport const getNodeListBoundingRect = (\r\n  nodeList,\r\n  x = 0,\r\n  y = 0,\r\n  paddingX = 0,\r\n  paddingY = 0\r\n) => {\r\n  let minX = Infinity\r\n  let maxX = -Infinity\r\n  let minY = Infinity\r\n  let maxY = -Infinity\r\n  nodeList.forEach(node => {\r\n    const { left, top, width, height } = getNodeTreeBoundingRect(\r\n      node,\r\n      x,\r\n      y,\r\n      paddingX,\r\n      paddingY,\r\n      false,\r\n      true\r\n    )\r\n    if (left < minX) {\r\n      minX = left\r\n    }\r\n    if (left + width > maxX) {\r\n      maxX = left + width\r\n    }\r\n    if (top < minY) {\r\n      minY = top\r\n    }\r\n    if (top + height > maxY) {\r\n      maxY = top + height\r\n    }\r\n  })\r\n  return {\r\n    left: minX,\r\n    top: minY,\r\n    width: maxX - minX,\r\n    height: maxY - minY\r\n  }\r\n}\r\n\r\n// \r\nconst getOnfullscreEnevt = () => {\r\n  if (document.documentElement.requestFullScreen) {\r\n    return 'fullscreenchange'\r\n  } else if (document.documentElement.webkitRequestFullScreen) {\r\n    return 'webkitfullscreenchange'\r\n  } else if (document.documentElement.mozRequestFullScreen) {\r\n    return 'mozfullscreenchange'\r\n  } else if (document.documentElement.msRequestFullscreen) {\r\n    return 'msfullscreenchange'\r\n  }\r\n}\r\nexport const fullscrrenEvent = getOnfullscreEnevt()\r\n\r\n// \r\nexport const fullScreen = element => {\r\n  if (element.requestFullScreen) {\r\n    element.requestFullScreen()\r\n  } else if (element.webkitRequestFullScreen) {\r\n    element.webkitRequestFullScreen()\r\n  } else if (element.mozRequestFullScreen) {\r\n    element.mozRequestFullScreen()\r\n  }\r\n}\r\n\r\n// \r\nexport const exitFullScreen = () => {\r\n  if (!document.fullscreenElement) return\r\n  if (document.exitFullscreen) {\r\n    document.exitFullscreen()\r\n  } else if (document.webkitExitFullscreen) {\r\n    document.webkitExitFullscreen()\r\n  } else if (document.mozCancelFullScreen) {\r\n    document.mozCancelFullScreen()\r\n  }\r\n}\r\n\r\n// foreignObject\r\nexport const createForeignObjectNode = ({ el, width, height }) => {\r\n  const foreignObject = new ForeignObject()\r\n  if (width !== undefined) {\r\n    foreignObject.width(width)\r\n  }\r\n  if (height !== undefined) {\r\n    foreignObject.height(height)\r\n  }\r\n  foreignObject.add(el)\r\n  return foreignObject\r\n}\r\n\r\n// \r\nexport const formatGetNodeGeneralization = data => {\r\n  const generalization = data.generalization\r\n  if (generalization) {\r\n    return Array.isArray(generalization) ? generalization : [generalization]\r\n  } else {\r\n    return []\r\n  }\r\n}\r\n\r\n/**\r\n *  XSS  HTML \r\n * @param {string} text \r\n * @returns {string} \r\n */\r\nexport const defenseXSS = text => {\r\n  text = String(text)\r\n\r\n  // \r\n  let result = text\r\n\r\n  //  HTML \r\n  const match = text.match(/<(\\S*?)[^>]*>.*?|<.*? \\/>/g)\r\n  if (match == null) {\r\n    // \r\n    return text\r\n  }\r\n\r\n  // \r\n  for (let value of match) {\r\n    // styletargethref\r\n    const whiteAttrRegex = new RegExp(/(style|target|href)=[\"'][^\"']*[\"']/g)\r\n\r\n    // hrefjavascript:\r\n    const aHrefBlackRegex = new RegExp(/href=[\"']javascript:/g)\r\n\r\n    //  HTML \r\n    const filterHtml = value.replace(\r\n      // key=\"value\"\r\n      /([a-zA-Z-]+)\\s*=\\s*[\"']([^\"']*)[\"']/g,\r\n      text => {\r\n        // href\r\n        if (aHrefBlackRegex.test(text) || !whiteAttrRegex.test(text)) {\r\n          return ''\r\n        }\r\n\r\n        // \r\n        return text\r\n      }\r\n    )\r\n\r\n    // \r\n    result = result.replace(value, filterHtml)\r\n  }\r\n\r\n  // \r\n  return result\r\n}\r\n\r\n// \r\nexport const addXmlns = el => {\r\n  el.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml')\r\n}\r\n\r\n// sortIndex\r\nexport const sortNodeList = nodeList => {\r\n  nodeList = [...nodeList]\r\n  nodeList.sort((a, b) => {\r\n    return a.sortIndex - b.sortIndex\r\n  })\r\n  return nodeList\r\n}\r\n\r\n// \r\nexport const mergeTheme = (dest, source) => {\r\n  return merge(dest, source, {\r\n    arrayMerge: (destinationArray, sourceArray) => {\r\n      return sourceArray\r\n    }\r\n  })\r\n}\r\n\r\n// \r\nexport const getNodeRichTextStyles = node => {\r\n  const res = {}\r\n  richTextSupportStyleList.forEach(prop => {\r\n    let value = node.style.merge(prop)\r\n    if (prop === 'fontSize') {\r\n      value = value + 'px'\r\n    }\r\n    res[prop] = value\r\n  })\r\n  return res\r\n}\r\n\r\n// \r\n/*\r\na > b  >\r\na < b  <\r\na = b  =\r\n*/\r\nexport const compareVersion = (a, b) => {\r\n  const aArr = String(a).split('.')\r\n  const bArr = String(b).split('.')\r\n  const max = Math.max(aArr.length, bArr.length)\r\n  for (let i = 0; i < max; i++) {\r\n    const ai = aArr[i] || 0\r\n    const bi = bArr[i] || 0\r\n    if (ai > bi) {\r\n      return '>'\r\n    } else if (ai < bi) {\r\n      return '<'\r\n    }\r\n  }\r\n  return '='\r\n}\r\n","import { checkIsNodeStyleDataKey } from '../../../utils/index'\r\n\r\nconst backgroundStyleProps = [\r\n  'backgroundColor',\r\n  'backgroundImage',\r\n  'backgroundRepeat',\r\n  'backgroundPosition',\r\n  'backgroundSize'\r\n]\r\n\r\nexport const shapeStyleProps = [\r\n  'gradientStyle',\r\n  'startColor',\r\n  'endColor',\r\n  'startDir',\r\n  'endDir',\r\n  'fillColor',\r\n  'borderColor',\r\n  'borderWidth',\r\n  'borderDasharray'\r\n]\r\n\r\n//  \r\nclass Style {\r\n  //   \r\n  static setBackgroundStyle(el, themeConfig) {\r\n    if (!el) return\r\n    // \r\n    if (!Style.cacheStyle) {\r\n      Style.cacheStyle = {}\r\n      let style = window.getComputedStyle(el)\r\n      backgroundStyleProps.forEach(prop => {\r\n        Style.cacheStyle[prop] = style[prop]\r\n      })\r\n    }\r\n    // \r\n    let {\r\n      backgroundColor,\r\n      backgroundImage,\r\n      backgroundRepeat,\r\n      backgroundPosition,\r\n      backgroundSize\r\n    } = themeConfig\r\n    el.style.backgroundColor = backgroundColor\r\n    if (backgroundImage && backgroundImage !== 'none') {\r\n      el.style.backgroundImage = `url(${backgroundImage})`\r\n      el.style.backgroundRepeat = backgroundRepeat\r\n      el.style.backgroundPosition = backgroundPosition\r\n      el.style.backgroundSize = backgroundSize\r\n    } else {\r\n      el.style.backgroundImage = 'none'\r\n    }\r\n  }\r\n\r\n  // \r\n  static removeBackgroundStyle(el) {\r\n    if (!Style.cacheStyle) return\r\n    backgroundStyleProps.forEach(prop => {\r\n      el.style[prop] = Style.cacheStyle[prop]\r\n    })\r\n    Style.cacheStyle = null\r\n  }\r\n\r\n  //  \r\n  constructor(ctx) {\r\n    this.ctx = ctx\r\n    // \r\n    this._markerPath = null\r\n    this._marker = null\r\n    // \r\n    this._gradient = null\r\n  }\r\n\r\n  //  \r\n  merge(prop, root) {\r\n    let themeConfig = this.ctx.mindMap.themeConfig\r\n    let defaultConfig = null\r\n    let useRoot = false\r\n    if (root) {\r\n      // \r\n      useRoot = true\r\n      defaultConfig = themeConfig\r\n    } else if (this.ctx.isGeneralization) {\r\n      // \r\n      defaultConfig = themeConfig.generalization\r\n    } else if (this.ctx.layerIndex === 0) {\r\n      // \r\n      defaultConfig = themeConfig.root\r\n    } else if (this.ctx.layerIndex === 1) {\r\n      // \r\n      defaultConfig = themeConfig.second\r\n    } else {\r\n      // \r\n      defaultConfig = themeConfig.node\r\n    }\r\n    let value = ''\r\n    // \r\n    if (this.getSelfStyle(prop) !== undefined) {\r\n      value = this.getSelfStyle(prop)\r\n    } else if (defaultConfig[prop] !== undefined) {\r\n      // \r\n      value = defaultConfig[prop]\r\n    } else {\r\n      // \r\n      value = themeConfig[prop]\r\n    }\r\n    if (!useRoot) {\r\n      this.addToEffectiveStyles({\r\n        [prop]: value\r\n      })\r\n    }\r\n    return value\r\n  }\r\n\r\n  //  \r\n  getStyle(prop, root) {\r\n    return this.merge(prop, root)\r\n  }\r\n\r\n  //  \r\n  getSelfStyle(prop) {\r\n    return this.ctx.getData(prop)\r\n  }\r\n\r\n  // \r\n  addToEffectiveStyles(styles) {\r\n    // effectiveStyles\r\n    if (!this.ctx.mindMap.painter) return\r\n    this.ctx.effectiveStyles = {\r\n      ...this.ctx.effectiveStyles,\r\n      ...styles\r\n    }\r\n  }\r\n\r\n  //  \r\n  rect(node) {\r\n    this.shape(node)\r\n    node.radius(this.merge('borderRadius'))\r\n  }\r\n\r\n  // \r\n  shape(node) {\r\n    const styles = {}\r\n    shapeStyleProps.forEach(key => {\r\n      styles[key] = this.merge(key)\r\n    })\r\n    if (styles.gradientStyle) {\r\n      if (!this._gradient) {\r\n        this._gradient = this.ctx.nodeDraw.gradient('linear')\r\n      }\r\n      this._gradient.update(add => {\r\n        add.stop(0, styles.startColor)\r\n        add.stop(1, styles.endColor)\r\n      })\r\n      this._gradient.from(...styles.startDir).to(...styles.endDir)\r\n      node.fill(this._gradient)\r\n    } else {\r\n      node.fill({\r\n        color: styles.fillColor\r\n      })\r\n    }\r\n    // \r\n    // if (\r\n    //   !this.ctx.isRoot &&\r\n    //   !this.ctx.isGeneralization &&\r\n    //   this.ctx.mindMap.themeConfig.nodeUseLineStyle &&\r\n    //   !this.ctx.getData('isActive')\r\n    // ) {\r\n    //   return\r\n    // }\r\n    node.stroke({\r\n      color: styles.borderColor,\r\n      width: styles.borderWidth,\r\n      dasharray: styles.borderDasharray\r\n    })\r\n  }\r\n\r\n  //  \r\n  text(node) {\r\n    const styles = {\r\n      color: this.merge('color'),\r\n      fontFamily: this.merge('fontFamily'),\r\n      fontSize: this.merge('fontSize'),\r\n      fontWeight: this.merge('fontWeight'),\r\n      fontStyle: this.merge('fontStyle'),\r\n      textDecoration: this.merge('textDecoration')\r\n    }\r\n    node\r\n      .fill({\r\n        color: styles.color\r\n      })\r\n      .css({\r\n        'font-family': styles.fontFamily,\r\n        'font-size': styles.fontSize + 'px',\r\n        'font-weight': styles.fontWeight,\r\n        'font-style': styles.fontStyle,\r\n        'text-decoration': styles.textDecoration\r\n      })\r\n  }\r\n\r\n  //  html\r\n  domText(node, fontSizeScale = 1) {\r\n    const styles = {\r\n      color: this.merge('color'),\r\n      fontFamily: this.merge('fontFamily'),\r\n      fontSize: this.merge('fontSize'),\r\n      fontWeight: this.merge('fontWeight'),\r\n      fontStyle: this.merge('fontStyle'),\r\n      textDecoration: this.merge('textDecoration'),\r\n      textAlign: this.merge('textAlign')\r\n    }\r\n    node.style.color = styles.color\r\n    node.style.textDecoration = styles.textDecoration\r\n    node.style.fontFamily = styles.fontFamily\r\n    node.style.fontSize = styles.fontSize * fontSizeScale + 'px'\r\n    node.style.fontWeight = styles.fontWeight || 'normal'\r\n    node.style.fontStyle = styles.fontStyle\r\n    node.style.textAlign = styles.textAlign\r\n  }\r\n\r\n  //  \r\n  tagText(node, style) {\r\n    node\r\n      .fill({\r\n        color: '#fff'\r\n      })\r\n      .css({\r\n        'font-size': style.fontSize + 'px'\r\n      })\r\n  }\r\n\r\n  //  \r\n  tagRect(node, style) {\r\n    node.fill({\r\n      color: style.fill\r\n    })\r\n    if (style.radius) {\r\n      node.radius(style.radius)\r\n    }\r\n  }\r\n\r\n  //  \r\n  iconNode(node, color) {\r\n    node.attr({\r\n      fill: color || this.merge('color')\r\n    })\r\n  }\r\n\r\n  //  \r\n  line(line, { width, color, dasharray } = {}, enableMarker, childNode) {\r\n    const { customHandleLine } = this.ctx.mindMap.opt\r\n    if (typeof customHandleLine === 'function') {\r\n      customHandleLine(this.ctx, line, { width, color, dasharray })\r\n    }\r\n    line.stroke({ color, dasharray, width }).fill({ color: 'none' })\r\n    // \r\n    if (enableMarker) {\r\n      const showMarker = this.merge('showLineMarker', true)\r\n      const childNodeStyle = childNode.style\r\n      // \r\n      if (showMarker) {\r\n        // \r\n        childNodeStyle._marker =\r\n          childNodeStyle._marker || childNodeStyle.createMarker()\r\n        // \r\n        childNodeStyle._markerPath.stroke({ color }).fill({ color })\r\n        // \r\n        line.attr('marker-start', '')\r\n        line.attr('marker-end', '')\r\n        const dir = childNodeStyle.merge('lineMarkerDir')\r\n        line.marker(dir, childNodeStyle._marker)\r\n      } else if (childNodeStyle._marker) {\r\n        // \r\n        line.attr('marker-start', '')\r\n        line.attr('marker-end', '')\r\n        childNodeStyle._marker.remove()\r\n        childNodeStyle._marker = null\r\n      }\r\n    }\r\n  }\r\n\r\n  // \r\n  createMarker() {\r\n    return this.ctx.lineDraw.marker(20, 20, add => {\r\n      add.ref(8, 5)\r\n      add.size(20, 20)\r\n      add.attr('markerUnits', 'userSpaceOnUse')\r\n      add.attr('orient', 'auto-start-reverse')\r\n      this._markerPath = add.path('M0,0 L2,5 L0,10 L10,5 Z')\r\n    })\r\n  }\r\n\r\n  //  \r\n  generalizationLine(node) {\r\n    node\r\n      .stroke({\r\n        width: this.merge('generalizationLineWidth', true),\r\n        color: this.merge('generalizationLineColor', true)\r\n      })\r\n      .fill({ color: 'none' })\r\n  }\r\n\r\n  //  \r\n  iconBtn(node, node2, fillNode) {\r\n    let { color, fill, fontSize, fontColor } = this.ctx.mindMap.opt\r\n      .expandBtnStyle || {\r\n      color: '#808080',\r\n      fill: '#fff',\r\n      fontSize: 12,\r\n      strokeColor: '#333333',\r\n      fontColor: '#333333'\r\n    }\r\n    node.fill({ color: color })\r\n    node2.fill({ color: color })\r\n    fillNode.fill({ color: fill })\r\n    if (this.ctx.mindMap.opt.isShowExpandNum) {\r\n      node.attr({ 'font-size': fontSize + 'px', 'font-color': fontColor })\r\n    }\r\n  }\r\n\r\n  // \r\n  hasCustomStyle() {\r\n    let res = false\r\n    Object.keys(this.ctx.getData()).forEach(item => {\r\n      if (checkIsNodeStyleDataKey(item)) {\r\n        res = true\r\n      }\r\n    })\r\n    return res\r\n  }\r\n\r\n  // \r\n  getCustomStyle() {\r\n    const customStyle = {}\r\n    Object.keys(this.ctx.getData()).forEach(item => {\r\n      if (checkIsNodeStyleDataKey(item)) {\r\n        customStyle[item] = this.ctx.getData(item)\r\n      }\r\n    })\r\n    return customStyle\r\n  }\r\n\r\n  // hover\r\n  hoverNode(node) {\r\n    const hoverRectColor =\r\n      this.merge('hoverRectColor') || this.ctx.mindMap.opt.hoverRectColor\r\n    const hoverRectRadius = this.merge('hoverRectRadius')\r\n    node.radius(hoverRectRadius).fill('none').stroke({\r\n      color: hoverRectColor\r\n    })\r\n  }\r\n\r\n  // \r\n  onRemove() {\r\n    if (this._marker) {\r\n      this._marker.remove()\r\n      this._marker = null\r\n    }\r\n    if (this._markerPath) {\r\n      this._markerPath.remove()\r\n      this._markerPath = null\r\n    }\r\n    if (this._gradient) {\r\n      this._gradient.remove()\r\n      this._gradient = null\r\n    }\r\n  }\r\n}\r\n\r\nStyle.cacheStyle = null\r\n\r\nexport default Style\r\n","import { Polygon, Path, SVG } from '@svgdotjs/svg.js'\r\nimport { CONSTANTS } from '../../../constants/constant'\r\n\r\n//  \r\nexport default class Shape {\r\n  constructor(node) {\r\n    this.node = node\r\n    this.mindMap = node.mindMap\r\n  }\r\n\r\n  //  padding\r\n  getShapePadding(width, height, paddingX, paddingY) {\r\n    const shape = this.node.getShape()\r\n    const defaultPaddingX = 15\r\n    const defaultPaddingY = 5\r\n    const actWidth = width + paddingX * 2\r\n    const actHeight = height + paddingY * 2\r\n    const actOffset = Math.abs(actWidth - actHeight)\r\n    switch (shape) {\r\n      case CONSTANTS.SHAPE.ROUNDED_RECTANGLE:\r\n        return {\r\n          paddingX: height > width ? (height - width) / 2 : 0,\r\n          paddingY: 0\r\n        }\r\n      case CONSTANTS.SHAPE.DIAMOND:\r\n        return {\r\n          paddingX: width / 2,\r\n          paddingY: height / 2\r\n        }\r\n      case CONSTANTS.SHAPE.PARALLELOGRAM:\r\n        return {\r\n          paddingX: paddingX <= 0 ? defaultPaddingX : 0,\r\n          paddingY: 0\r\n        }\r\n      case CONSTANTS.SHAPE.OUTER_TRIANGULAR_RECTANGLE:\r\n        return {\r\n          paddingX: paddingX <= 0 ? defaultPaddingX : 0,\r\n          paddingY: 0\r\n        }\r\n      case CONSTANTS.SHAPE.INNER_TRIANGULAR_RECTANGLE:\r\n        return {\r\n          paddingX: paddingX <= 0 ? defaultPaddingX : 0,\r\n          paddingY: 0\r\n        }\r\n      case CONSTANTS.SHAPE.ELLIPSE:\r\n        return {\r\n          paddingX: paddingX <= 0 ? defaultPaddingX : 0,\r\n          paddingY: paddingY <= 0 ? defaultPaddingY : 0\r\n        }\r\n      case CONSTANTS.SHAPE.CIRCLE:\r\n        return {\r\n          paddingX: actHeight > actWidth ? actOffset / 2 : 0,\r\n          paddingY: actHeight < actWidth ? actOffset / 2 : 0\r\n        }\r\n    }\r\n    const extendShape = this.getShapeFromExtendList(shape)\r\n    if (extendShape) {\r\n      return (\r\n        extendShape.getPadding({\r\n          node: this.node,\r\n          width,\r\n          height,\r\n          paddingX,\r\n          paddingY\r\n        }) || {\r\n          paddingX: 0,\r\n          paddingY: 0\r\n        }\r\n      )\r\n    } else {\r\n      return {\r\n        paddingX: 0,\r\n        paddingY: 0\r\n      }\r\n    }\r\n  }\r\n\r\n  // \r\n  getShapeFromExtendList(shape) {\r\n    return this.mindMap.extendShapeList.find(item => {\r\n      return item.name === shape\r\n    })\r\n  }\r\n\r\n  //  \r\n  createShape() {\r\n    const shape = this.node.getShape()\r\n    let node = null\r\n    // \r\n    if (shape === CONSTANTS.SHAPE.RECTANGLE) {\r\n      node = this.createRect()\r\n    } else if (shape === CONSTANTS.SHAPE.DIAMOND) {\r\n      // \r\n      node = this.createDiamond()\r\n    } else if (shape === CONSTANTS.SHAPE.PARALLELOGRAM) {\r\n      // \r\n      node = this.createParallelogram()\r\n    } else if (shape === CONSTANTS.SHAPE.ROUNDED_RECTANGLE) {\r\n      // \r\n      node = this.createRoundedRectangle()\r\n    } else if (shape === CONSTANTS.SHAPE.OCTAGONAL_RECTANGLE) {\r\n      // \r\n      node = this.createOctagonalRectangle()\r\n    } else if (shape === CONSTANTS.SHAPE.OUTER_TRIANGULAR_RECTANGLE) {\r\n      // \r\n      node = this.createOuterTriangularRectangle()\r\n    } else if (shape === CONSTANTS.SHAPE.INNER_TRIANGULAR_RECTANGLE) {\r\n      // \r\n      node = this.createInnerTriangularRectangle()\r\n    } else if (shape === CONSTANTS.SHAPE.ELLIPSE) {\r\n      // \r\n      node = this.createEllipse()\r\n    } else if (shape === CONSTANTS.SHAPE.CIRCLE) {\r\n      // \r\n      node = this.createCircle()\r\n    }\r\n    if (!node) {\r\n      const extendShape = this.getShapeFromExtendList(shape)\r\n      if (extendShape) {\r\n        node = extendShape.createShape(this.node)\r\n      }\r\n    }\r\n    return node || this.createRect()\r\n  }\r\n\r\n  // hover\r\n  getNodeSize() {\r\n    const borderWidth = this.node.getBorderWidth()\r\n    let { width, height } = this.node\r\n    width -= borderWidth\r\n    height -= borderWidth\r\n    return {\r\n      width,\r\n      height\r\n    }\r\n  }\r\n\r\n  // \r\n  createPath(pathStr) {\r\n    const { customCreateNodePath } = this.mindMap.opt\r\n    if (customCreateNodePath) {\r\n      return SVG(customCreateNodePath(pathStr))\r\n    }\r\n    return new Path().plot(pathStr)\r\n  }\r\n\r\n  // \r\n  createPolygon(points) {\r\n    const { customCreateNodePolygon } = this.mindMap.opt\r\n    if (customCreateNodePolygon) {\r\n      return SVG(customCreateNodePolygon(points))\r\n    }\r\n    return new Polygon().plot(points)\r\n  }\r\n\r\n  // \r\n  createRect() {\r\n    let { width, height } = this.getNodeSize()\r\n    let borderRadius = this.node.style.merge('borderRadius')\r\n    const pathStr = `\r\n      M${borderRadius},0\r\n      L${width - borderRadius},0\r\n      C${width - borderRadius},0 ${width},${0} ${width},${borderRadius}\r\n      L${width},${height - borderRadius}\r\n      C${width},${height - borderRadius} ${width},${height} ${\r\n      width - borderRadius\r\n    },${height}\r\n      L${borderRadius},${height}\r\n      C${borderRadius},${height} ${0},${height} ${0},${height - borderRadius}\r\n      L${0},${borderRadius}\r\n      C${0},${borderRadius} ${0},${0} ${borderRadius},${0}\r\n      Z\r\n    `\r\n    return this.createPath(pathStr)\r\n  }\r\n\r\n  //  \r\n  createDiamond() {\r\n    let { width, height } = this.getNodeSize()\r\n    let halfWidth = width / 2\r\n    let halfHeight = height / 2\r\n    let topX = halfWidth\r\n    let topY = 0\r\n    let rightX = width\r\n    let rightY = halfHeight\r\n    let bottomX = halfWidth\r\n    let bottomY = height\r\n    let leftX = 0\r\n    let leftY = halfHeight\r\n    const points = [\r\n      [topX, topY],\r\n      [rightX, rightY],\r\n      [bottomX, bottomY],\r\n      [leftX, leftY]\r\n    ]\r\n    return this.createPolygon(points)\r\n  }\r\n\r\n  //  \r\n  createParallelogram() {\r\n    let { paddingX } = this.node.getPaddingVale()\r\n    paddingX = paddingX || this.node.shapePadding.paddingX\r\n    let { width, height } = this.getNodeSize()\r\n    const points = [\r\n      [paddingX, 0],\r\n      [width, 0],\r\n      [width - paddingX, height],\r\n      [0, height]\r\n    ]\r\n    return this.createPolygon(points)\r\n  }\r\n\r\n  //  \r\n  createRoundedRectangle() {\r\n    let { width, height } = this.getNodeSize()\r\n    let halfHeight = height / 2\r\n    const pathStr = `\r\n      M${halfHeight},0\r\n      L${width - halfHeight},0\r\n      A${height / 2},${height / 2} 0 0,1 ${width - halfHeight},${height} \r\n      L${halfHeight},${height}\r\n      A${height / 2},${height / 2} 0 0,1 ${halfHeight},${0}\r\n    `\r\n    return this.createPath(pathStr)\r\n  }\r\n\r\n  //  \r\n  createOctagonalRectangle() {\r\n    let w = 5\r\n    let { width, height } = this.getNodeSize()\r\n    const points = [\r\n      [0, w],\r\n      [w, 0],\r\n      [width - w, 0],\r\n      [width, w],\r\n      [width, height - w],\r\n      [width - w, height],\r\n      [w, height],\r\n      [0, height - w]\r\n    ]\r\n    return this.createPolygon(points)\r\n  }\r\n\r\n  //  \r\n  createOuterTriangularRectangle() {\r\n    let { paddingX } = this.node.getPaddingVale()\r\n    paddingX = paddingX || this.node.shapePadding.paddingX\r\n    let { width, height } = this.getNodeSize()\r\n    const points = [\r\n      [paddingX, 0],\r\n      [width - paddingX, 0],\r\n      [width, height / 2],\r\n      [width - paddingX, height],\r\n      [paddingX, height],\r\n      [0, height / 2]\r\n    ]\r\n    return this.createPolygon(points)\r\n  }\r\n\r\n  //  \r\n  createInnerTriangularRectangle() {\r\n    let { paddingX } = this.node.getPaddingVale()\r\n    paddingX = paddingX || this.node.shapePadding.paddingX\r\n    let { width, height } = this.getNodeSize()\r\n    const points = [\r\n      [0, 0],\r\n      [width, 0],\r\n      [width - paddingX / 2, height / 2],\r\n      [width, height],\r\n      [0, height],\r\n      [paddingX / 2, height / 2]\r\n    ]\r\n    return this.createPolygon(points)\r\n  }\r\n\r\n  //  \r\n  createEllipse() {\r\n    let { width, height } = this.getNodeSize()\r\n    let halfWidth = width / 2\r\n    let halfHeight = height / 2\r\n    const pathStr = `\r\n      M${halfWidth},0\r\n      A${halfWidth},${halfHeight} 0 0,1 ${halfWidth},${height} \r\n      M${halfWidth},${height} \r\n      A${halfWidth},${halfHeight} 0 0,1 ${halfWidth},${0} \r\n    `\r\n    return this.createPath(pathStr)\r\n  }\r\n\r\n  //  \r\n  createCircle() {\r\n    let { width, height } = this.getNodeSize()\r\n    let halfWidth = width / 2\r\n    let halfHeight = height / 2\r\n    const pathStr = `\r\n      M${halfWidth},0\r\n      A${halfWidth},${halfHeight} 0 0,1 ${halfWidth},${height} \r\n      M${halfWidth},${height} \r\n      A${halfWidth},${halfHeight} 0 0,1 ${halfWidth},${0} \r\n    `\r\n    return this.createPath(pathStr)\r\n  }\r\n}\r\n\r\n// \r\nexport const shapeList = [\r\n  CONSTANTS.SHAPE.RECTANGLE,\r\n  CONSTANTS.SHAPE.DIAMOND,\r\n  CONSTANTS.SHAPE.PARALLELOGRAM,\r\n  CONSTANTS.SHAPE.ROUNDED_RECTANGLE,\r\n  CONSTANTS.SHAPE.OCTAGONAL_RECTANGLE,\r\n  CONSTANTS.SHAPE.OUTER_TRIANGULAR_RECTANGLE,\r\n  CONSTANTS.SHAPE.INNER_TRIANGULAR_RECTANGLE,\r\n  CONSTANTS.SHAPE.ELLIPSE,\r\n  CONSTANTS.SHAPE.CIRCLE\r\n]\r\n","import MindMapNode from './MindMapNode'\r\nimport { createUid } from '../../../utils/index'\r\n\r\n// \r\nfunction formatGetGeneralization() {\r\n  const data = this.getData('generalization')\r\n  return Array.isArray(data) ? data : data ? [data] : []\r\n}\r\n\r\n//  \r\nfunction checkHasGeneralization() {\r\n  return this.formatGetGeneralization().length > 0\r\n}\r\n\r\n//  \r\nfunction checkHasSelfGeneralization() {\r\n  const list = this.formatGetGeneralization()\r\n  return !!list.find(item => {\r\n    return !item.range || item.range.length <= 0\r\n  })\r\n}\r\n\r\n// \r\nfunction getGeneralizationNodeIndex(node) {\r\n  return this._generalizationList.findIndex(item => {\r\n    return item.generalizationNode.uid === node.uid\r\n  })\r\n}\r\n\r\n//  \r\nfunction createGeneralizationNode() {\r\n  if (this.isGeneralization || !this.checkHasGeneralization()) {\r\n    return\r\n  }\r\n  let maxWidth = 0\r\n  let maxHeight = 0\r\n  const list = this.formatGetGeneralization()\r\n  list.forEach((item, index) => {\r\n    let cur = this._generalizationList[index]\r\n    if (!cur) {\r\n      cur = this._generalizationList[index] = {}\r\n    }\r\n    // \r\n    cur.node = this\r\n    // \r\n    cur.range = item.range\r\n    // \r\n    if (!cur.generalizationLine) {\r\n      cur.generalizationLine = this.lineDraw.path()\r\n    }\r\n    if (!cur.generalizationNode) {\r\n      cur.generalizationNode = new MindMapNode({\r\n        data: {\r\n          inserting: item.inserting,\r\n          data: item\r\n        },\r\n        uid: createUid(),\r\n        renderer: this.renderer,\r\n        mindMap: this.mindMap,\r\n        isGeneralization: true\r\n      })\r\n    }\r\n    delete item.inserting\r\n    // \r\n    cur.generalizationNode.generalizationBelongNode = this\r\n    // \r\n    if (cur.generalizationNode.width > maxWidth)\r\n      maxWidth = cur.generalizationNode.width\r\n    if (cur.generalizationNode.height > maxHeight)\r\n      maxHeight = cur.generalizationNode.height\r\n    // \r\n    if (item.isActive) {\r\n      this.renderer.addNodeToActiveList(cur.generalizationNode)\r\n    }\r\n  })\r\n  this._generalizationNodeWidth = maxWidth\r\n  this._generalizationNodeHeight = maxHeight\r\n}\r\n\r\n//  \r\nfunction updateGeneralization() {\r\n  if (this.isGeneralization) return\r\n  this.removeGeneralization()\r\n  this.createGeneralizationNode()\r\n}\r\n\r\n//  \r\nfunction renderGeneralization(forceRender) {\r\n  if (this.isGeneralization) return\r\n  this.updateGeneralizationData()\r\n  const list = this.formatGetGeneralization()\r\n  if (list.length <= 0 || this.getData('expand') === false) {\r\n    this.removeGeneralization()\r\n    return\r\n  }\r\n  if (list.length !== this._generalizationList.length) {\r\n    this.removeGeneralization()\r\n  }\r\n  this.createGeneralizationNode()\r\n  this.renderer.layout.renderGeneralization(this._generalizationList)\r\n  this._generalizationList.forEach(item => {\r\n    this.style.generalizationLine(item.generalizationLine)\r\n    item.generalizationNode.render(() => {}, forceRender)\r\n  })\r\n}\r\n\r\n// \r\nfunction updateGeneralizationData() {\r\n  const childrenLength = this.getChildrenLength()\r\n  const list = this.formatGetGeneralization()\r\n  const newList = []\r\n  list.forEach(item => {\r\n    if (!item.range) {\r\n      newList.push(item)\r\n      return\r\n    }\r\n    if (\r\n      item.range.length > 0 &&\r\n      item.range[0] <= childrenLength - 1 &&\r\n      item.range[1] <= childrenLength - 1\r\n    ) {\r\n      newList.push(item)\r\n    }\r\n  })\r\n  if (newList.length !== list.length) {\r\n    this.setData({\r\n      generalization: newList\r\n    })\r\n  }\r\n}\r\n\r\n//  \r\nfunction removeGeneralization() {\r\n  if (this.isGeneralization) return\r\n  this._generalizationList.forEach(item => {\r\n    item.generalizationNode.style.onRemove()\r\n    if (item.generalizationLine) {\r\n      item.generalizationLine.remove()\r\n      item.generalizationLine = null\r\n    }\r\n    if (item.generalizationNode) {\r\n      // \r\n      this.renderer.removeNodeFromActiveList(item.generalizationNode)\r\n      item.generalizationNode.remove()\r\n      item.generalizationNode = null\r\n    }\r\n  })\r\n  this._generalizationList = []\r\n  // hack\r\n  if (this.generalizationBelongNode) {\r\n    this.nodeDraw\r\n      .find('.generalization_' + this.generalizationBelongNode.uid)\r\n      .remove()\r\n  }\r\n}\r\n\r\n//  \r\nfunction hideGeneralization() {\r\n  if (this.isGeneralization) return\r\n  this._generalizationList.forEach(item => {\r\n    if (item.generalizationLine) item.generalizationLine.hide()\r\n    if (item.generalizationNode) item.generalizationNode.hide()\r\n  })\r\n}\r\n\r\n//  \r\nfunction showGeneralization() {\r\n  if (this.isGeneralization) return\r\n  this._generalizationList.forEach(item => {\r\n    if (item.generalizationLine) item.generalizationLine.show()\r\n    if (item.generalizationNode) item.generalizationNode.show()\r\n  })\r\n}\r\n\r\n// \r\nfunction setGeneralizationOpacity(val) {\r\n  this._generalizationList.forEach(item => {\r\n    item.generalizationLine.opacity(val)\r\n    item.generalizationNode.group.opacity(val)\r\n  })\r\n}\r\n\r\n// \r\nfunction handleGeneralizationMouseenter() {\r\n  const belongNode = this.generalizationBelongNode\r\n  const list = belongNode.formatGetGeneralization()\r\n  const index = belongNode.getGeneralizationNodeIndex(this)\r\n  const generalizationData = list[index]\r\n  // hoverRectColor\r\n  // hoverRectColor\r\n  // highlightNode\r\n  const hoverRectColor = this.getStyle('hoverRectColor')\r\n  const color = hoverRectColor || this.mindMap.opt.hoverRectColor\r\n  const style = color\r\n    ? {\r\n        stroke: color\r\n      }\r\n    : null\r\n  // \r\n  if (\r\n    Array.isArray(generalizationData.range) &&\r\n    generalizationData.range.length > 0\r\n  ) {\r\n    this.mindMap.renderer.highlightNode(\r\n      belongNode,\r\n      generalizationData.range,\r\n      style\r\n    )\r\n  } else {\r\n    // \r\n    this.mindMap.renderer.highlightNode(belongNode, null, style)\r\n  }\r\n}\r\n\r\n// \r\nfunction handleGeneralizationMouseleave() {\r\n  this.mindMap.renderer.closeHighlightNode()\r\n}\r\n\r\nexport default {\r\n  formatGetGeneralization,\r\n  checkHasGeneralization,\r\n  checkHasSelfGeneralization,\r\n  getGeneralizationNodeIndex,\r\n  createGeneralizationNode,\r\n  updateGeneralization,\r\n  updateGeneralizationData,\r\n  renderGeneralization,\r\n  removeGeneralization,\r\n  hideGeneralization,\r\n  showGeneralization,\r\n  setGeneralizationOpacity,\r\n  handleGeneralizationMouseenter,\r\n  handleGeneralizationMouseleave\r\n}\r\n","//  \r\nconst open = `<svg viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"200\"><path d=\"M475.136 327.168v147.968h-147.968v74.24h147.968v147.968h74.24v-147.968h147.968v-74.24h-147.968v-147.968h-74.24z m36.864-222.208c225.28 0 407.04 181.76 407.04 407.04s-181.76 407.04-407.04 407.04-407.04-181.76-407.04-407.04 181.76-407.04 407.04-407.04z m0-74.24c-265.216 0-480.768 215.552-480.768 480.768s215.552 480.768 480.768 480.768 480.768-215.552 480.768-480.768-215.552-480.768-480.768-480.768z\"></path></svg>`\r\n\r\n//  \r\nconst close = `<svg viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"200\"><path d=\"M512 105.472c225.28 0 407.04 181.76 407.04 407.04s-181.76 407.04-407.04 407.04-407.04-181.76-407.04-407.04 181.76-407.04 407.04-407.04z m0-74.24c-265.216 0-480.768 215.552-480.768 480.768s215.552 480.768 480.768 480.768 480.768-215.552 480.768-480.768-215.552-480.768-480.768-480.768z\"></path><path d=\"M252.928 474.624h518.144v74.24h-518.144z\"></path></svg>`\r\n\r\n// \r\nconst remove = `<svg width=\"14px\" height=\"14px\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"200\"><path fill=\"#ffffff\" d=\"M512 105.472c225.28 0 407.04 181.76 407.04 407.04s-181.76 407.04-407.04 407.04-407.04-181.76-407.04-407.04 181.76-407.04 407.04-407.04z m0-74.24c-265.216 0-480.768 215.552-480.768 480.768s215.552 480.768 480.768 480.768 480.768-215.552 480.768-480.768-215.552-480.768-480.768-480.768z\"></path><path fill=\"#ffffff\" d=\"M252.928 474.624h518.144v74.24h-518.144z\"></path></svg>`\r\n\r\n// \r\nconst imgAdjust = `<svg width=\"12px\" height=\"12px\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#ffffff\" d=\"M1008.128 614.4a25.6 25.6 0 0 0-27.648 5.632l-142.848 142.848L259.072 186.88 401.92 43.52A25.6 25.6 0 0 0 384 0h-358.4a25.6 25.6 0 0 0-25.6 25.6v358.4a25.6 25.6 0 0 0 43.52 17.92l143.36-142.848 578.048 578.048-142.848 142.848a25.6 25.6 0 0 0 17.92 43.52h358.4a25.6 25.6 0 0 0 25.6-25.6v-358.4a25.6 25.6 0 0 0-15.872-25.088z\"  /></svg>`\r\n\r\n// \r\nconst quickCreateChild = `<svg viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\"><path d=\"M514.048 62.464q93.184 0 175.616 35.328t143.872 96.768 96.768 143.872 35.328 175.616q0 94.208-35.328 176.128t-96.768 143.36-143.872 96.768-175.616 35.328q-94.208 0-176.64-35.328t-143.872-96.768-96.768-143.36-35.328-176.128q0-93.184 35.328-175.616t96.768-143.872 143.872-96.768 176.64-35.328zM772.096 576.512q26.624 0 45.056-18.944t18.432-45.568-18.432-45.056-45.056-18.432l-192.512 0 0-192.512q0-26.624-18.944-45.568t-45.568-18.944-45.056 18.944-18.432 45.568l0 192.512-192.512 0q-26.624 0-45.056 18.432t-18.432 45.056 18.432 45.568 45.056 18.944l192.512 0 0 191.488q0 26.624 18.432 45.568t45.056 18.944 45.568-18.944 18.944-45.568l0-191.488 192.512 0z\"></path></svg>`\r\n\r\nexport default {\r\n  open,\r\n  close,\r\n  remove,\r\n  imgAdjust,\r\n  quickCreateChild\r\n}\r\n","import btnsSvg from '../../../svg/btns'\r\nimport { SVG, Circle, G, Text } from '@svgdotjs/svg.js'\r\nimport { isUndef } from '../../../utils'\r\n\r\n// \r\nfunction createExpandNodeContent() {\r\n  if (this._openExpandNode) {\r\n    return\r\n  }\r\n  const { expandBtnSize, expandBtnIcon, isShowExpandNum } = this.mindMap.opt\r\n  let { close, open } = expandBtnIcon || {}\r\n  // \r\n  if (isShowExpandNum) {\r\n    // \r\n    this._openExpandNode = new Text()\r\n    this._openExpandNode.addClass('smm-expand-btn-text')\r\n    // \r\n    this._openExpandNode.attr({\r\n      'text-anchor': 'middle',\r\n      'dominant-baseline': 'middle',\r\n      x: expandBtnSize / 2,\r\n      y: 2\r\n    })\r\n  } else {\r\n    this._openExpandNode = SVG(open || btnsSvg.open).size(\r\n      expandBtnSize,\r\n      expandBtnSize\r\n    )\r\n    this._openExpandNode.x(0).y(-expandBtnSize / 2)\r\n  }\r\n  // \r\n  this._closeExpandNode = SVG(close || btnsSvg.close).size(\r\n    expandBtnSize,\r\n    expandBtnSize\r\n  )\r\n  this._closeExpandNode.x(0).y(-expandBtnSize / 2)\r\n  // \r\n  this._fillExpandNode = new Circle().size(expandBtnSize)\r\n  this._fillExpandNode.x(0).y(-expandBtnSize / 2)\r\n\r\n  // \r\n  this.style.iconBtn(\r\n    this._openExpandNode,\r\n    this._closeExpandNode,\r\n    this._fillExpandNode\r\n  )\r\n}\r\nfunction sumNode(data = []) {\r\n  return data.reduce(\r\n    (total, cur) => total + this.sumNode(cur.children || []),\r\n    data.length\r\n  )\r\n}\r\n//  \r\nfunction updateExpandBtnNode() {\r\n  let { expand } = this.getData()\r\n  // \r\n  if (expand === this._lastExpandBtnType) return\r\n  if (this._expandBtn) {\r\n    this._expandBtn.clear()\r\n  }\r\n  this.createExpandNodeContent()\r\n  let node\r\n  if (expand === false) {\r\n    node = this._openExpandNode\r\n    this._lastExpandBtnType = false\r\n  } else {\r\n    node = this._closeExpandNode\r\n    this._lastExpandBtnType = true\r\n  }\r\n\r\n  if (this._expandBtn) {\r\n    // \r\n    let { isShowExpandNum, expandBtnStyle, expandBtnNumHandler } =\r\n      this.mindMap.opt\r\n    if (isShowExpandNum) {\r\n      if (!expand) {\r\n        // \r\n        this._fillExpandNode.stroke({\r\n          color: expandBtnStyle.strokeColor\r\n        })\r\n        // \r\n        let count = this.sumNode(this.nodeData.children || [])\r\n        if (typeof expandBtnNumHandler === 'function') {\r\n          const res = expandBtnNumHandler(count, this)\r\n          if (!isUndef(res)) {\r\n            count = res\r\n          }\r\n        }\r\n        node.text(String(count))\r\n      } else {\r\n        this._fillExpandNode.stroke('none')\r\n      }\r\n    }\r\n    this._expandBtn.add(this._fillExpandNode).add(node)\r\n  }\r\n}\r\n\r\n//  \r\nfunction updateExpandBtnPos() {\r\n  if (!this._expandBtn) {\r\n    return\r\n  }\r\n  this.renderer.layout.renderExpandBtn(this, this._expandBtn)\r\n}\r\n\r\n//  \r\nfunction renderExpandBtn() {\r\n  if (this.getChildrenLength() <= 0 || this.isRoot) {\r\n    return\r\n  }\r\n  if (this._expandBtn) {\r\n    this.group.add(this._expandBtn)\r\n  } else {\r\n    this._expandBtn = new G()\r\n    this._expandBtn.on('mouseover', e => {\r\n      e.stopPropagation()\r\n      this._expandBtn.css({\r\n        cursor: 'pointer'\r\n      })\r\n    })\r\n    this._expandBtn.on('mouseout', e => {\r\n      e.stopPropagation()\r\n      this._expandBtn.css({\r\n        cursor: 'auto'\r\n      })\r\n    })\r\n    this._expandBtn.on('click', e => {\r\n      e.stopPropagation()\r\n      // \r\n      this.mindMap.execCommand('SET_NODE_EXPAND', this, !this.getData('expand'))\r\n      this.mindMap.emit('expand_btn_click', this)\r\n    })\r\n    this._expandBtn.on('dblclick', e => {\r\n      e.stopPropagation()\r\n    })\r\n    this._expandBtn.addClass('smm-expand-btn')\r\n    this.group.add(this._expandBtn)\r\n  }\r\n  this._showExpandBtn = true\r\n  this.updateExpandBtnNode()\r\n  this.updateExpandBtnPos()\r\n}\r\n\r\n//  \r\nfunction removeExpandBtn() {\r\n  if (this._expandBtn && this._showExpandBtn) {\r\n    this._expandBtn.remove()\r\n    this._showExpandBtn = false\r\n  }\r\n}\r\n\r\n// \r\nfunction showExpandBtn() {\r\n  const { alwaysShowExpandBtn, notShowExpandBtn } = this.mindMap.opt\r\n  if (alwaysShowExpandBtn || notShowExpandBtn) return\r\n  setTimeout(() => {\r\n    this.renderExpandBtn()\r\n  }, 0)\r\n}\r\n\r\n// \r\nfunction hideExpandBtn() {\r\n  const { alwaysShowExpandBtn, notShowExpandBtn } = this.mindMap.opt\r\n  if (alwaysShowExpandBtn || this._isMouseenter || notShowExpandBtn) return\r\n  // \r\n  let { isActive, expand } = this.getData()\r\n  if (!isActive && expand) {\r\n    setTimeout(() => {\r\n      this.removeExpandBtn()\r\n    }, 0)\r\n  }\r\n}\r\n\r\nexport default {\r\n  createExpandNodeContent,\r\n  updateExpandBtnNode,\r\n  updateExpandBtnPos,\r\n  renderExpandBtn,\r\n  removeExpandBtn,\r\n  showExpandBtn,\r\n  hideExpandBtn,\r\n  sumNode\r\n}\r\n","//  \r\nfunction setData(data = {}) {\r\n  this.mindMap.execCommand('SET_NODE_DATA', this, data)\r\n}\r\n\r\n//  \r\nfunction setText(text, richText, resetRichText) {\r\n  this.mindMap.execCommand('SET_NODE_TEXT', this, text, richText, resetRichText)\r\n}\r\n\r\n//  \r\nfunction setImage(imgData) {\r\n  this.mindMap.execCommand('SET_NODE_IMAGE', this, imgData)\r\n}\r\n\r\n//  \r\nfunction setIcon(icons) {\r\n  this.mindMap.execCommand('SET_NODE_ICON', this, icons)\r\n}\r\n\r\n//  \r\nfunction setHyperlink(link, title) {\r\n  this.mindMap.execCommand('SET_NODE_HYPERLINK', this, link, title)\r\n}\r\n\r\n//  \r\nfunction setNote(note) {\r\n  this.mindMap.execCommand('SET_NODE_NOTE', this, note)\r\n}\r\n\r\n//  \r\nfunction setAttachment(url, name) {\r\n  this.mindMap.execCommand('SET_NODE_ATTACHMENT', this, url, name)\r\n}\r\n\r\n//  \r\nfunction setTag(tag) {\r\n  this.mindMap.execCommand('SET_NODE_TAG', this, tag)\r\n}\r\n\r\n//  \r\nfunction setShape(shape) {\r\n  this.mindMap.execCommand('SET_NODE_SHAPE', this, shape)\r\n}\r\n\r\n//  \r\nfunction setStyle(prop, value) {\r\n  this.mindMap.execCommand('SET_NODE_STYLE', this, prop, value)\r\n}\r\n\r\n//  \r\nfunction setStyles(style) {\r\n  this.mindMap.execCommand('SET_NODE_STYLES', this, style)\r\n}\r\n\r\nexport default {\r\n  setData,\r\n  setText,\r\n  setImage,\r\n  setIcon,\r\n  setHyperlink,\r\n  setNote,\r\n  setAttachment,\r\n  setTag,\r\n  setShape,\r\n  setStyle,\r\n  setStyles\r\n}\r\n","import { mergerIconList } from '../utils'\r\n\r\n// \r\nconst hyperlink =\r\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\" ><path d=\"M435.484444 251.733333v68.892445L295.822222 320.682667a168.504889 168.504889 0 0 0-2.844444 336.952889h142.506666v68.892444H295.822222a237.397333 237.397333 0 0 1 0-474.794667h139.662222z m248.945778 0a237.397333 237.397333 0 0 1 0 474.851556H544.654222v-69.006222l139.776 0.056889a168.504889 168.504889 0 0 0 2.844445-336.952889H544.597333V251.676444h139.776z m-25.827555 203.946667a34.474667 34.474667 0 0 1 0 68.892444H321.649778a34.474667 34.474667 0 0 1 0-68.892444h336.952889z\" ></path></svg>'\r\n\r\n// \r\nconst note =\r\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\" ><path d=\"M152.768 985.984 152.768 49.856l434.56 0 66.816 0 234.048 267.392 0 66.816 0 601.92L152.768 985.984 152.768 985.984zM654.144 193.088l0 124.16 108.736 0L654.144 193.088 654.144 193.088zM821.312 384.064l-167.168 0L587.328 384.064 587.328 317.312 587.328 116.736 219.584 116.736 219.584 919.04l601.728 0L821.312 384.064 821.312 384.064zM386.688 517.888 319.808 517.888 319.808 450.944l66.816 0L386.624 517.888 386.688 517.888zM386.688 651.584 319.808 651.584 319.808 584.704l66.816 0L386.624 651.584 386.688 651.584zM386.688 785.344 319.808 785.344l0-66.88 66.816 0L386.624 785.344 386.688 785.344zM721.024 517.888 453.632 517.888 453.632 450.944l267.392 0L721.024 517.888 721.024 517.888zM654.144 651.584 453.632 651.584 453.632 584.704l200.512 0L654.144 651.584 654.144 651.584zM620.672 785.344l-167.04 0 0-66.88 167.04 0L620.672 785.344 620.672 785.344z\" ></path></svg>'\r\n\r\n// \r\nconst attachment =\r\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\" width=\"128\" height=\"128\"><path d=\"M516.373333 375.978667l136.576-136.576a147.797333 147.797333 0 0 1 208.853334-0.021334 147.690667 147.690667 0 0 1-0.042667 208.832l-204.8 204.778667v0.021333l-153.621333 153.6c-85.973333 85.973333-225.28 85.973333-311.253334 0.021334-85.994667-85.973333-85.973333-225.216 0.149334-311.36L431.146667 256.362667a21.333333 21.333333 0 0 0-30.165334-30.165334L162.069333 465.066667c-102.805333 102.826667-102.826667 269.056-0.149333 371.733333 102.613333 102.613333 268.970667 102.613333 371.584 0l153.6-153.642667h0.021333l0.021334-0.021333 204.778666-204.778667c74.325333-74.325333 74.346667-194.858667 0.021334-269.184-74.24-74.24-194.88-74.24-269.162667 0.042667l-136.576 136.554667-187.626667 187.626666a117.845333 117.845333 0 0 0-0.106666 166.826667 118.037333 118.037333 0 0 0 166.826666-0.106667l255.850667-255.829333a21.333333 21.333333 0 0 0-30.165333-30.165333L435.136 669.973333a75.370667 75.370667 0 0 1-106.496 0.106667 75.178667 75.178667 0 0 1 0.128-106.496l187.605333-187.605333z\" ></path></svg>'\r\n\r\n// icon\r\nexport const nodeIconList = [\r\n  {\r\n    name: '',\r\n    type: 'priority',\r\n    list: [\r\n      {\r\n        name: '1',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512.042667 1024C229.248 1024 0 794.794667 0 511.957333 0 229.205333 229.248 0 512.042667 0 794.752 0 1024 229.205333 1024 511.957333 1024 794.794667 794.752 1024 512.042667 1024z\" fill=\"#E93B30\"></path><path d=\"M580.309333 256h-75.52c-10.666667 29.824-30.165333 55.765333-58.709333 78.165333-28.416 22.314667-54.869333 37.418667-79.146667 45.397334v84.608a320 320 0 0 0 120.234667-70.698667v352.085333H580.266667V256z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '2',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M511.957333 1024C229.248 1024 0 794.752 0 512S229.248 0 511.957333 0C794.752 0 1024 229.248 1024 512s-229.248 512-512.042667 512z\" fill=\"#FA8D2E\"></path><path d=\"M667.946667 658.602667h-185.301334c4.864-8.533333 11.178667-17.066667 19.072-25.984 7.808-8.874667 26.453333-26.837333 55.936-53.888 29.525333-27.008 49.877333-47.786667 61.226667-62.165334 16.981333-21.717333 29.44-42.453333 37.290667-62.293333 7.808-19.84 11.776-40.746667 11.776-62.677333 0-38.570667-13.738667-70.741333-41.088-96.725334C599.466667 268.928 561.706667 256 513.834667 256c-43.690667 0-80.128 11.136-109.354667 33.578667-29.098667 22.4-46.506667 59.306667-52.010667 110.805333l93.184 9.301333c1.792-27.349333 8.405333-46.890667 19.754667-58.624 11.434667-11.776 26.837333-17.664 46.165333-17.664 19.541333 0 34.858667 5.589333 45.909334 16.768 11.136 11.264 16.682667 27.221333 16.682666 48.042667 0 18.858667-6.4 37.930667-19.242666 57.258667-9.472 14.037333-35.157333 40.533333-77.098667 79.872-52.096 48.554667-87.04 87.509333-104.704 116.821333A226.688 226.688 0 0 0 341.333333 745.429333h326.613334v-86.826666z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '3',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z\" fill=\"#2E66FA\"></path><path d=\"M627.754667 731.733333c-29.354667 25.088-66.901333 37.632-112.725334 37.632-44.928 0-81.792-11.52-110.592-34.773333-33.066667-26.538667-49.877333-64.469333-50.304-114.133333h92.16c0.426667 21.76 7.552 38.314667 21.333334 49.664 12.288 10.88 28.117333 16.341333 47.402666 16.341333 20.309333 0 36.778667-6.101333 49.322667-18.432 12.544-12.330667 18.773333-29.568 18.773333-51.797333 0-21.290667-6.229333-38.186667-18.773333-50.773334-12.544-12.501333-29.866667-18.773333-52.138667-18.773333h-13.525333v-80.042667H512c42.112 0 63.274667-21.034667 63.274667-63.146666 0-20.309333-5.888-36.096-17.706667-47.445334a60.757333 60.757333 0 0 0-43.818667-17.066666c-17.493333 0-32 5.504-43.434666 16.298666-11.562667 10.88-17.792 25.728-18.773334 44.714667H359.68c0.981333-43.946667 16.042667-78.976 45.397333-104.96 29.354667-25.941333 65.706667-39.04 109.226667-39.04 44.928 0 81.792 13.525333 110.592 40.490667 28.8 26.922667 43.306667 61.610667 43.306667 104.149333 0 48.213333-19.413333 82.688-58.154667 103.552 43.52 23.125333 65.28 61.44 65.28 114.858667 0 48.128-15.957333 85.76-47.573333 112.682666z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '4',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512.042667 1024C229.248 1024 0 794.794667 0 512.042667 0 229.205333 229.248 0 512.042667 0 794.752 0 1024 229.205333 1024 512.042667 1024 794.794667 794.752 1024 512.042667 1024z\" fill=\"#6D768D\"></path><path d=\"M600.96 256v309.802667h60.117333v81.536h-60.16v98.218666h-90.154666v-98.218666H311.466667v-81.237334L522.666667 256h78.293333zM510.72 399.104l-112.042667 166.698667h112.042667V399.104z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '5',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512.042667 1024C229.248 1024 0 794.794667 0 512.042667 0 229.205333 229.248 0 512.042667 0 794.752 0 1024 229.205333 1024 512.042667 1024 794.794667 794.752 1024 512.042667 1024z\" fill=\"#6D768D\"></path><path d=\"M470.912 343.552h175.786667V256H400.256l-47.786667 253.952 75.434667 10.837333c21.205333-23.552 45.269333-35.413333 72.021333-35.413333 21.546667 0 38.997333 7.509333 52.437334 22.4 13.312 15.018667 20.053333 37.418667 20.053333 67.328 0 31.872-6.741333 55.765333-20.181333 71.552-13.397333 15.872-29.866667 23.765333-49.237334 23.765333-17.066667 0-32.085333-6.186667-45.013333-18.432-13.013333-12.373333-20.821333-29.013333-23.466667-50.133333L341.333333 611.498667c5.546667 40.874667 22.485333 73.429333 50.730667 97.621333 28.330667 24.32 64.938667 36.437333 109.866667 36.437333 56.149333 0 100.053333-21.546667 131.754666-64.554666a176.64 176.64 0 0 0 34.816-107.52c0-48.042667-14.378667-87.210667-43.221333-117.333334-28.8-30.208-63.957333-45.312-105.514667-45.312-21.674667 0-42.922667 5.248-63.829333 15.616l14.976-82.901333z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '6',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 1024C229.248 1024 0 794.794667 0 512.042667 0 229.205333 229.248 0 512 0c282.88 0 512 229.205333 512 512.042667C1024 794.794667 794.88 1024 512 1024z\" fill=\"#6D768D\"></path><path d=\"M519.210667 256c36.992 0 67.626667 10.368 91.776 31.189333 24.192 20.821333 39.68 51.029333 46.293333 90.709334l-90.197333 9.984c-2.176-18.56-7.978667-32.298667-17.28-41.173334-9.258667-8.874667-21.418667-13.226667-36.224-13.226666-19.754667 0-36.437333 8.789333-50.048 26.453333-13.696 17.664-22.314667 54.613333-25.856 110.549333 23.296-27.52 52.138667-41.258667 86.656-41.258666 38.997333 0 72.362667 14.805333 100.181333 44.544 27.733333 29.696 41.685333 68.010667 41.685333 114.858666 0 49.877333-14.634667 89.856-43.818666 119.936-29.226667 30.208-66.730667 45.226667-112.554667 45.226667-49.066667 0-89.429333-19.072-121.130667-57.344C357.12 658.218667 341.333333 595.541333 341.333333 508.416c0-89.344 16.469333-153.813333 49.493334-193.194667C423.722667 275.754667 466.56 256 519.168 256z m-9.472 241.834667c-17.962667 0-33.066667 6.997333-45.525334 21.12-12.330667 14.037333-18.56 34.858667-18.56 62.293333 0 30.421333 6.912 53.76 20.906667 70.4 13.952 16.469333 29.866667 24.746667 47.786667 24.746667 17.28 0 31.701333-6.826667 43.178666-20.309334 11.52-13.525333 17.237333-35.669333 17.237334-66.56 0-31.658667-6.186667-54.869333-18.517334-69.546666a58.197333 58.197333 0 0 0-46.506666-22.144z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '7',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512.042667 1024C229.248 1024 0 794.752 0 512S229.248 0 512.042667 0C794.752 0 1024 229.248 1024 512s-229.248 512-511.957333 512z\" fill=\"#6D768D\"></path><path d=\"M673.024 273.066667H354.133333v86.869333h212.224a691.2 691.2 0 0 0-104.746666 187.989333c-26.026667 70.101333-39.978667 138.88-41.429334 206.293334h89.6c-0.298667-42.922667 6.698667-91.776 21.034667-146.474667a654.72 654.72 0 0 1 62.08-154.965333c27.136-48.554667 53.888-85.76 80.128-111.701334V273.066667z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '8',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 1024C229.248 1024 0 794.752 0 512S229.248 0 512 0s512 229.248 512 512-229.248 512-512 512z\" fill=\"#6D768D\"></path><path d=\"M512.426667 256c46.208 0 82.048 11.861333 107.605333 35.541333 25.6 23.68 38.314667 53.674667 38.314667 89.898667 0 22.613333-5.802667 42.666667-17.578667 60.330667a111.445333 111.445333 0 0 1-49.450667 40.277333c26.965333 10.837333 47.36 26.752 61.312 47.658667 13.994667 20.906667 21.034667 45.013333 21.034667 72.362666 0 45.098667-14.336 81.834667-42.965333 109.952-28.586667 28.245333-66.602667 42.368-114.090667 42.368-44.245333 0-81.066667-11.648-110.464-34.986666-34.645333-27.52-52.010667-65.28-52.010667-113.365334 0-26.368 6.528-50.645333 19.626667-72.746666 13.056-22.144 33.578667-39.210667 61.696-51.242667-24.064-10.154667-41.557333-24.192-52.48-41.941333a109.824 109.824 0 0 1-16.512-58.666667c0-36.224 12.757333-66.218667 37.973333-89.898667 25.386667-23.68 61.354667-35.541333 108.032-35.541333z m1.28 265.429333c-22.784 0-39.722667 7.978667-50.901334 23.893334-11.136 15.786667-16.64 33.066667-16.64 51.498666 0 25.984 6.485333 46.208 19.712 60.714667 13.098667 14.506667 29.525333 21.802667 49.152 21.802667 19.242667 0 35.157333-6.997333 47.786667-20.992 12.629333-13.909333 18.858667-34.048 18.858667-60.416 0-23.082667-6.314667-41.557333-19.2-55.466667a63.274667 63.274667 0 0 0-48.725334-21.034667z m-0.341334-191.488c-17.792 0-32 5.333333-42.581333 16-10.538667 10.666667-15.872 24.746667-15.872 42.325334 0 18.645333 5.248 33.152 15.701333 43.648 10.453333 10.453333 24.362667 15.658667 41.770667 15.658666 17.664 0 31.658667-5.290667 42.24-15.872 10.538667-10.581333 15.872-25.173333 15.872-43.818666 0-17.493333-5.248-31.573333-15.701333-42.154667s-24.277333-15.786667-41.429334-15.786667z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '9',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 1024C229.248 1024 0 794.794667 0 512.042667 0 229.333333 229.248 0 512 0c282.88 0 512 229.333333 512 512.042667C1024 794.794667 794.88 1024 512 1024z\" fill=\"#6D768D\"></path><path d=\"M497.28 256c49.365333 0 89.856 19.157333 121.429333 57.429333 31.701333 38.229333 47.488 101.205333 47.488 188.842667 0 89.173333-16.384 153.386667-49.365333 192.853333-32.853333 39.594667-75.605333 59.264-128.426667 59.264-37.888 0-68.608-10.154667-91.989333-30.506666s-38.4-50.816-45.013333-91.306667l90.112-9.984c2.261333 18.474667 8.021333 32.085333 17.28 41.088 9.173333 8.874667 21.418667 13.312 36.608 13.312 19.2 0 35.541333-8.874667 48.981333-26.752 13.44-17.749333 22.016-54.613333 25.770667-110.549333-23.466667 27.264-52.821333 40.874667-88.064 40.874666-38.314667 0-71.253333-14.72-99.114667-44.330666C355.242667 506.709333 341.333333 468.224 341.333333 420.864c0-49.493333 14.592-89.258667 43.946667-119.466667C414.549333 271.104 451.925333 256 497.237333 256z m-4.352 77.482667c-17.237333 0-31.658667 6.826667-43.008 20.437333-11.477333 13.653333-17.194667 35.84-17.194667 66.816 0 31.402667 6.229333 54.485333 18.645334 69.205333 12.458667 14.72 27.946667 22.101333 46.592 22.101334 18.005333 0 33.066667-7.082667 45.44-21.205334 12.330667-14.208 18.432-35.029333 18.432-62.506666 0-29.994667-6.912-53.376-20.821334-69.973334-13.824-16.597333-29.866667-24.874667-48.085333-24.874666z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '10',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512.042667 1024C229.248 1024 0 794.794667 0 511.957333 0 229.205333 229.248 0 512.042667 0 794.752 0 1024 229.205333 1024 511.957333 1024 794.794667 794.752 1024 512.042667 1024z\" fill=\"#6D768D\"></path><path d=\"M619.946667 273.066667c46.976 0 83.754667 16.042667 110.250666 48.042666 31.573333 37.973333 47.36 100.864 47.36 188.672 0 87.722667-15.829333 150.698667-47.658666 189.056-26.325333 31.616-62.976 47.36-109.952 47.36-47.274667 0-85.418667-17.237333-114.346667-51.968-28.885333-34.602667-43.392-96.426667-43.392-185.386666 0-87.168 15.872-150.016 47.701333-188.416 26.282667-31.488 62.933333-47.36 110.037334-47.36z m-207.488 12.8v452.266666H325.504V411.690667A299.904 299.904 0 0 1 213.333333 476.373333V398.933333c22.656-7.296 47.36-21.12 73.856-41.514666 26.624-20.522667 44.842667-44.288 54.784-71.552h70.485334z m207.488 60.842666c-11.306667 0-21.461333 3.413333-30.336 10.24-8.874667 6.826667-15.786667 19.157333-20.693334 36.864-6.4 22.997333-9.642667 61.653333-9.642666 115.968 0 54.442667 2.944 91.733333 8.661333 112.128 5.802667 20.352 13.098667 33.877333 21.845333 40.618667 8.789333 6.741333 18.858667 10.154667 30.165334 10.154667 11.349333 0 21.376-3.498667 30.250666-10.325334 8.874667-6.826667 15.786667-19.157333 20.693334-36.778666 6.4-22.826667 9.642667-61.354667 9.642666-115.797334 0-54.314667-2.858667-91.648-8.661333-112.042666-5.802667-20.352-13.013333-33.962667-21.76-40.789334a47.616 47.616 0 0 0-30.165333-10.24z\" fill=\"#FFFFFF\"></path></svg>`\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    name: '',\r\n    type: 'progress',\r\n    list: [\r\n      {\r\n        name: '1',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z\" fill=\"#12BB37\"></path><path d=\"M512 928c-229.76 0-416-186.24-416-416S282.24 96 512 96V512l294.144-294.144A414.72 414.72 0 0 1 928 512c0 229.76-186.24 416-416 416z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '2',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z\" fill=\"#12BB37\"></path><path d=\"M512 928c-229.76 0-416-186.24-416-416S282.24 96 512 96V512h416c0 229.76-186.24 416-416 416z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '3',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z\" fill=\"#12BB37\"></path><path d=\"M512 928c-229.76 0-416-186.24-416-416S282.24 96 512 96V512l294.144 294.144A414.72 414.72 0 0 1 512 928z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '4',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z\" fill=\"#12BB37\"></path><path d=\"M512 928c-229.76 0-416-186.24-416-416S282.24 96 512 96v832z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '5',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z\" fill=\"#12BB37\"></path><path d=\"M512 512l-294.144 294.144A414.72 414.72 0 0 1 96 512c0-229.76 186.24-416 416-416V512z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '6',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z\" fill=\"#12BB37\"></path><path d=\"M512 512H96c0-229.76 186.24-416 416-416V512z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '7',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0z\" fill=\"#12BB37\"></path><path d=\"M512 512L217.856 217.856A414.72 414.72 0 0 1 512 96V512z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '8',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M0 512c0 282.752 229.248 512 512 512s512-229.248 512-512S794.752 0 512 0 0 229.248 0 512z\" fill=\"#12BB37\"></path><path d=\"M716.629333 341.333333h-51.328a35.072 35.072 0 0 0-28.330666 14.293334l-171.989334 233.984-77.909333-106.026667a35.2 35.2 0 0 0-28.330667-14.293333H307.413333c-7.082667 0-11.264 7.936-7.082666 13.653333l136.32 185.472a35.2 35.2 0 0 0 56.533333 0l230.4-313.429333a8.533333 8.533333 0 0 0-6.954667-13.653334z\" fill=\"#FFFFFF\"></path></svg>`\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    name: '',\r\n    type: 'expression',\r\n    list: [\r\n      {\r\n        name: '1',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1026 1024\"><path d=\"M1.097856 1.097642h1021.804717v1021.804716H1.097856z\" fill=\"#F09495\" ></path><path d=\"M1024.000214 1024H0.000214V0h1024v1024z m-1021.804716-2.195284h1019.609433V2.195284H2.195498v1019.609432z\" fill=\"#FFFFFF\" ></path><path d=\"M234.695985 335.179887m-27.341259 0a27.341259 27.341259 0 1 0 54.682518 0 27.341259 27.341259 0 1 0-54.682518 0Z\" fill=\"#040000\" ></path><path d=\"M234.695985 363.519002c-15.666342 0-28.339115-12.772559-28.339115-28.339115 0-15.666342 12.772559-28.339115 28.339115-28.339115s28.339115 12.772559 28.339115 28.339115c0.099786 15.666342-12.672773 28.339115-28.339115 28.339115z m0-54.582732c-14.468914 0-26.243617 11.774703-26.243617 26.243617s11.774703 26.243617 26.243617 26.243617 26.243617-11.774703 26.243617-26.243617-11.774703-26.243617-26.243617-26.243617z\" fill=\"#FFFFFF\" ></path><path d=\"M776.232528 335.179887m-27.341259 0a27.341259 27.341259 0 1 0 54.682518 0 27.341259 27.341259 0 1 0-54.682518 0Z\" fill=\"#040000\" ></path><path d=\"M776.232528 363.519002c-15.666342 0-28.339115-12.772559-28.339115-28.339115 0-15.666342 12.772559-28.339115 28.339115-28.339115 15.666342 0 28.339115 12.772559 28.339115 28.339115 0 15.666342-12.772559 28.339115-28.339115 28.339115z m0-54.582732c-14.468914 0-26.243617 11.774703-26.243617 26.243617s11.774703 26.243617 26.243617 26.243617 26.243617-11.774703 26.243617-26.243617c-0.099786-14.468914-11.874488-26.243617-26.243617-26.243617z\" fill=\"#FFFFFF\" ></path><path d=\"M512.000214 671.656987c-52.58702 0-105.872539-17.961411-105.872539-52.387449S459.413194 566.882089 512.000214 566.882089s105.872539 17.961411 105.87254 52.387449S564.587234 671.656987 512.000214 671.656987z m0-74.240499c-21.952836 0-43.207172 3.592282-58.2748 9.77899-13.870201 5.68778-17.06334 11.275775-17.06334 12.07406s3.19314 6.386279 17.06334 12.07406c15.067628 6.186708 36.321965 9.77899 58.2748 9.77899s43.207172-3.592282 58.274801-9.77899c13.870201-5.68778 17.06334-11.275775 17.06334-12.07406s-3.19314-6.386279-17.06334-12.07406c-15.067628-6.286494-36.321965-9.77899-58.274801-9.77899z\" fill=\"#040000\" ></path></svg>`\r\n      },\r\n      {\r\n        name: '2',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M0 0h1024v1024H0z\" fill=\"#E6A6C9\" ></path><path d=\"M315.1 368.1c-23.9 0-43.3-19.4-43.3-43.3s19.4-43.3 43.3-43.3 43.3 19.4 43.3 43.3-19.4 43.3-43.3 43.3z m0-74.7c-17.3 0-31.3 14.1-31.3 31.3 0 17.3 14.1 31.3 31.3 31.3 17.3 0 31.3-14.1 31.3-31.3 0-17.2-14-31.3-31.3-31.3zM738.7 368.1c-23.9 0-43.3-19.4-43.3-43.3s19.4-43.3 43.3-43.3 43.3 19.4 43.3 43.3-19.4 43.3-43.3 43.3z m0-74.7c-17.3 0-31.3 14.1-31.3 31.3 0 17.3 14.1 31.3 31.3 31.3 17.3 0 31.3-14.1 31.3-31.3 0-17.2-14-31.3-31.3-31.3zM293.5 698.8l-14.5-1.3c0.1-0.6 1.5-14.6 15.1-27.9 17.2-16.7 45-24.8 82.7-24 4.9-0.1 10.9-10.5 16.1-19.6 8.4-14.7 19-33.1 37.9-34.3 19.4-1.2 42.2 16.4 71.5 55.4 9.9 5.2 16.5 11.2 21.8 16.1 8.4 7.7 13.1 11.9 25.1 10.8 14.9-1.4 38.9-11.1 77.5-31.4 26.8-28.4 56.4-41.4 83.5-36.6 27.9 4.9 50.6 27.6 67.5 67.5l-13.4 5.7c-14.7-34.5-34.3-54.9-56.7-58.8-22.3-3.9-47.6 7.8-71.2 33.1l-0.8 0.9-1.1 0.6c-85.6 45.1-99.4 38-120.2 19.1-5.5-5-11.2-10.2-20.1-14.7l-1.5-0.8-1-1.4c-32.2-43.2-50.4-51.6-60-51-11.1 0.7-18.8 14-26.2 27-7.6 13.2-15.4 26.9-28.8 26.9h-0.2c-78.4-1.6-83 38.3-83 38.7z\" fill=\"#040000\" ></path></svg>`\r\n      },\r\n      {\r\n        name: '3',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1026 1024\" ><path d=\"M1.1 1.097642h1021.804716v1021.804716H1.1z\" fill=\"#F7E983\" ></path><path d=\"M1024.002358 1024H0.002358V0h1024v1024z m-1021.804716-2.195284h1019.609433V2.195284H2.197642v1019.609432z\" fill=\"#FFFFFF\" ></path><path d=\"M329.174412 344.491728a38.118106 10.277919 57.6 1 0 17.355867-11.014369 38.118106 10.277919 57.6 1 0-17.355867 11.014369Z\" fill=\"#040000\" ></path><path d=\"M644.769475 355.956059a11.175989 36.321965 30 1 0 36.321965-62.911488 11.175989 36.321965 30 1 0-36.321965 62.911488Z\" fill=\"#040000\" ></path><path d=\"M569.678445 671.158059c-26.343403 0-51.190021-5.288638-70.049503-14.967843-20.755408-10.577275-32.230754-25.445332-32.230755-41.710388 0-16.265056 11.475346-31.133112 32.230755-41.710387 18.859482-9.579419 43.805886-14.967843 70.049503-14.967843s51.190021 5.288638 70.049503 14.967843c20.755408 10.577275 32.230754 25.445332 32.230754 41.710387 0 16.265056-11.475346 31.133112-32.230754 41.710388-18.859482 9.679205-43.805886 14.967843-70.049503 14.967843z m0-95.095693c-49.693237 0-84.318846 20.356266-84.318846 38.517248s34.625609 38.517248 84.318846 38.517248 84.318846-20.356266 84.318846-38.517248-34.725395-38.517248-84.318846-38.517248z\" fill=\"#040000\" ></path></svg>`\r\n      },\r\n      {\r\n        name: '4',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1026 1024\" ><path d=\"M1.1 1.097642h1021.804716v1021.804716H1.1z\" fill=\"#A6D9E2\" ></path><path d=\"M1024.002358 1024H0.002358V0h1024v1024z m-1021.804716-2.195284h1019.609433V2.195284H2.197642v1019.609432z\" fill=\"#FFFFFF\" ></path><path d=\"M376.194134 348.950302m-23.44962 0a23.44962 23.44962 0 1 0 46.89924 0 23.44962 23.44962 0 1 0-46.89924 0Z\" fill=\"#040000\" ></path><path d=\"M629.150672 348.950302m-24.647047 0a24.647047 24.647047 0 1 0 49.294095 0 24.647047 24.647047 0 1 0-49.294095 0Z\" fill=\"#040000\" ></path><path d=\"M397.847613 603.503411c13.471058 8.282206 28.738258 14.468914 43.7061 19.458195 29.835899 9.978562 62.266225 14.169558 93.299551 7.483921 21.054765-4.490353 40.213604-14.369129 56.778016-28.039758 6.785422-5.587995-2.893783-15.167414-9.579419-9.579419-46.999026 38.916391-112.258819 31.033327-163.847983 6.086922-4.590138-2.195284-9.080491-4.490353-13.371272-7.184564-7.583707-4.590138-14.468914 7.184564-6.984993 11.774703z\" fill=\"#040000\" ></path><path d=\"M627.753674 534.052621c-31.033327 24.048334-58.474371 68.253362-37.419607 106.970182 10.577275 19.35841 29.835899 32.629897 48.795167 42.708244 7.982849 4.190996 15.067628-7.883064 7.084779-12.07406-25.245761-13.271487-53.485091-35.324108-49.094524-66.557006 2.793997-20.156695 15.766127-37.319821 29.736114-51.190022 3.392711-3.392711 6.984993-6.785422 10.776847-9.77899 2.993569-2.295069 2.394855-7.483921 0-9.878776-2.893783-3.19314-6.885208-2.49464-9.878776-0.199572z\" fill=\"#040000\" ></path></svg>`\r\n      },\r\n      {\r\n        name: '5',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1026 1024\" ><path d=\"M1.1 1.097642h1021.804716v1021.804716H1.1z\" fill=\"#AD6F59\" ></path><path d=\"M1024.002358 1024H0.002358V0h1024v1024z m-1021.804716-2.195284h1019.609433V2.195284H2.197642v1019.609432z\" fill=\"#FFFFFF\" ></path><path d=\"M411.829832 330.730879a38.118106 10.277919 57.6 1 0 17.355867-11.014368 38.118106 10.277919 57.6 1 0-17.355867 11.014368Z\" fill=\"#040000\" ></path><path d=\"M480.669675 609.989476c11.774703-25.844475 27.740401-51.788735 44.60417-73.342429 13.770415-17.462483 29.237186-33.92711 47.897096-44.803742 17.262912-10.078347 35.324108-13.67063 54.283376-6.58585 11.974274 4.390567 23.948548 14.468914 33.128825 24.547261 14.369129 15.865913 25.145975 34.625609 34.725394 53.684662 4.290782 8.581563 17.262912 0.997856 12.972131-7.583707-15.167414-30.334828-35.224323-63.763009-66.157864-80.327421-21.054765-11.37556-44.504385-11.475346-66.157864-1.895927-21.054765 9.280062-38.617034 25.644904-53.485091 42.907815-14.468914 16.863769-27.041902 35.324108-38.217891 54.582733-5.887351 10.178133-11.674917 20.555837-16.464627 31.232898-1.696355 3.692068-0.997856 7.982849 2.694212 10.277918 3.19314 1.895927 8.581563 0.898071 10.178133-2.694211z\" fill=\"#040000\" ></path><path d=\"M663.863649 338.091735a14.468914 33.727538 30 1 0 33.727538-58.417811 14.468914 33.727538 30 1 0-33.727538 58.417811Z\" fill=\"#040000\" ></path></svg>`\r\n      },\r\n      {\r\n        name: '6',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\" ><path d=\"M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z\" fill=\"#83CEE3\" ></path><path d=\"M369 375.8m-34.6 0a34.6 34.6 0 1 0 69.2 0 34.6 34.6 0 1 0-69.2 0Z\" fill=\"#040000\" ></path><path d=\"M369 411.7c-19.8 0-36-16.1-36-36s16.1-36 36-36 36 16.1 36 36-16.1 36-36 36z m0-69.1c-18.3 0-33.2 14.9-33.2 33.2S350.7 409 369 409s33.2-14.9 33.2-33.2-14.9-33.2-33.2-33.2z\" fill=\"#FFFFFF\" ></path><path d=\"M672.2 333.6c-15.1 7.6-30.2 15.6-44.3 25-5.9 3.9-17 10.4-14.6 19.1 1.8 6.5 12 11.2 17.3 14.3 15.7 9.3 32.1 17.6 48.3 25.9 8.6 4.4 16.2-8.5 7.6-13-14.1-7.3-28.3-14.5-42.1-22.3-3.9-2.2-7.9-4.5-11.7-6.9-1.2-0.8-2.4-1.5-3.5-2.4-0.6-0.4-1.1-0.8-1.6-1.2 2.2 1.7-0.3-0.3-0.3-0.3-0.9 0.1-1.5-3.2-0.2 0.5 0.9 2.4 1.1 3.8 0.3 5.8 0.6-1.5-0.9 0.8-0.1 0 0.5-0.5 1-1.1 1.6-1.6 0.5-0.5 1-0.9 1.6-1.3 0.6-0.5 0 0 1.2-0.9 1.7-1.3 3.5-2.5 5.3-3.6 8.4-5.5 17.2-10.4 26-15.2 5.6-3 11.2-6 16.8-8.9 8.6-4.4 1-17.3-7.6-13zM578.2 720.9c-12.5-96.7-33.3-154.7-55.6-155.6-8.8 3.9-22.3 17.5-37.7 60.1-10.8 29.8-18.4 62.2-23 81.6-1.2 5.1-2.1 9.1-2.9 11.8l-9.3-2.4c0.7-2.6 1.6-6.6 2.8-11.6 14.9-63 36-136.8 67.5-148.8l0.8-0.3h0.8c18.2-0.4 33.2 19.5 45.8 60.8 10.2 33.3 16.7 74.6 20.5 103.3l-9.7 1.1z\" fill=\"#040000\" ></path></svg>`\r\n      },\r\n      {\r\n        name: '7',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\" ><path d=\"M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z\" fill=\"#8CC66D\" ></path><path d=\"M375.778679 404.47473a14.5 33.8 30 1 0 33.8-58.543317 14.5 33.8 30 1 0-33.8 58.543317Z\" fill=\"#040000\" ></path><path d=\"M627.220263 374.211388a43.1 11.6 57.6 1 0 19.588408-12.431182 43.1 11.6 57.6 1 0-19.588408 12.431182Z\" fill=\"#040000\" ></path><path d=\"M451.1 548.5c17.6-9.3 63.9-30 105.3-16.2 17 20.3 32.7 98.8 28.8 138.1-27.5 10.2-82.5 10.2-106.1 5.8-8.3-10.5-32.7-81.8-35.3-114.6-0.4-5.5 2.5-10.6 7.3-13.1z\" fill=\"#040000\" ></path></svg>`\r\n      },\r\n      {\r\n        name: '8',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\" ><path d=\"M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z\" fill=\"#5A74B8\" ></path><path d=\"M357.7 400m-34.6 0a34.6 34.6 0 1 0 69.2 0 34.6 34.6 0 1 0-69.2 0Z\" fill=\"#040000\" ></path><path d=\"M357.7 436c-19.8 0-36-16.1-36-36s16.1-36 36-36 36 16.1 36 36-16.2 36-36 36z m0-69.2c-18.3 0-33.2 14.9-33.2 33.2s14.9 33.2 33.2 33.2 33.2-14.9 33.2-33.2-14.9-33.2-33.2-33.2z\" fill=\"#FFFFFF\" ></path><path d=\"M676 400m-34.6 0a34.6 34.6 0 1 0 69.2 0 34.6 34.6 0 1 0-69.2 0Z\" fill=\"#040000\" ></path><path d=\"M676 436c-19.8 0-36-16.1-36-36s16.1-36 36-36 36 16.1 36 36-16.2 36-36 36z m0-69.2c-18.3 0-33.2 14.9-33.2 33.2s14.9 33.2 33.2 33.2c18.3 0 33.2-14.9 33.2-33.2s-14.9-33.2-33.2-33.2z\" fill=\"#FFFFFF\" ></path><path d=\"M347.6 684.1c0.3-0.9 0.6-1.7 0.9-2.6 0.2-0.5 1.4-3.2 0.3-0.8 0.6-1.4 1.3-2.9 2-4.3 3.2-6.3 6-10.7 10.9-15.3 4.3-4 10.8-7.5 17.1-6.1 3.9 0.9 7.9 4.9 11.1 7.2 3.1 2.2 6.3 4.5 9.7 6.2 7.5 3.8 15.3 4.4 23.4 1.9 4.7-1.5 9.2-3.6 13.6-5.9 5-2.6 10.7-5 14.2-9.5 4.5-5.7 6.1-8.5 11.4-14.1 1-1 2-2 3.1-3 0.2-0.2 2.2-1.7 0.6-0.5 0.6-0.4 1.2-0.9 1.8-1.3 1-0.6 2.1-1.3 3.2-1.7-2 0.8 0.2 0 0.6-0.1 2.3-0.7-0.3-0.2 1.2-0.3 2.8-0.1 3.6 0 5.5 1 3.8 1.9 6.6 4.7 9.5 7.8 4.5 5 7.5 11.1 11.7 16.2 1.8 2.2 3.7 4.3 5.4 6.5 8.1 10.3 17.7 22.2 32.2 22 8.8-0.1 16.6-5.2 22.6-11.2 4.2-4.1 7.7-8.9 11-13.7 2.9-4.2 4.6-9.9 6.2-13.5 3.2-7.1 7.2-13.1 13-18.1 4.8-4.2 11.1-6.5 16.7-5.3 10.5 2.4 17.2 12.1 23.1 20.2 4.7 6.5 9.8 13 16 18.2 7.8 6.4 17.1 11.4 27.5 11.1 14.1-0.4 25.5-9.5 34.2-19.9 3-3.6 3.6-8.8 0-12.4-3.1-3.1-9.4-3.7-12.4 0-6.3 7.6-14.7 15.9-24.9 14.7-2.2-0.3-5.3-1.5-7.9-3.1-3.5-2.1-6.1-4.4-9.1-7.5-4.9-5.1-6.8-8.1-10.9-13.8-7.3-10.1-16.1-19.6-28.2-23.7-18.5-6.3-35.7 5.6-46 20.1-2.4 3.3-4.4 6.9-6.1 10.6-1.8 3.9-2.7 8.5-5.2 11.9-3.1 4.4-6.2 8.8-10.2 12.5-3 2.8-5.7 4.4-8.6 5.1-0.4 0.1-1.7 0.1 0.1 0h-2.2c2.1 0.1 0 0-0.5-0.1-0.7-0.2-1.4-0.4-2-0.6 1.8 0.7-1.8-1.1-2.4-1.5l-1.2-0.9c1.5 1.2-0.9-0.9-1.2-1.1-4.7-4.3-8.4-9.5-12.3-14.4-10.9-13.6-20.9-34-41-34.9-14.2-0.6-24.5 10.6-32.4 20.8-1.2 1.6-2.5 3.2-3.7 4.8-1.5 1.9 1.1-1.4-0.4 0.5-0.4 0.5-0.8 1.2-1.3 1.6-1.7 1.4-4.6 2.6-6.6 3.6-2.9 1.6-5.9 3.2-9 4.5-1.6 0.7-3.4 1.2-5.1 1.7-2.2 0.6-0.7 0.5-2.8 0.4-2.8 0-3.9-0.4-6.6-1.9-3.9-2.2-7.5-4.9-11.1-7.5-5.6-4-10-6.9-17-7.5-10.5-0.9-20.3 3.2-28.2 9.9-9.4 8.1-16.4 20.2-20.1 32-3.6 11.2 13.3 15.8 16.8 5.1z\" fill=\"#040000\" ></path></svg>`\r\n      },\r\n      {\r\n        name: '9',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\" ><path d=\"M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z\" fill=\"#F0884F\" ></path><path d=\"M287.2 382c6.4 2.3 11.6-3.7 15.4-7.9 5.1-5.5 10.2-11 16-15.9 0.8-0.7 1.7-1.4 2.5-2.1 1.2-0.9-1.7 1.3 0.2-0.2l1.2-0.9c2.1-1.5 4.3-2.9 6.5-4.3 2-1.2 4-2.2 6.1-3.2 0.6-0.3 1.2-0.6 1.9-0.9-0.3 0.2-1.5 0.6 0.2-0.1 1.3-0.5 2.6-1 4-1.5 11.2-3.7 21.8-4 33.4-1.1 19.5 4.9 36.4 17 51.2 30.2 8.6 7.7 21.4-5 12.7-12.7-25.2-22.6-57.1-42.1-92.2-36.2-20.4 3.4-37.7 16.1-51.6 30.9-2.3 2.4-4.5 5-6.8 7.4-0.7 0.7-1.9 1.5-2.4 2.4-0.5 0.8 2.3-1.5 0.8-0.7 1.3-0.7 3.9-1.4 5.8-0.7-11.1-3.7-15.8 13.7-4.9 17.5zM598 382c6.4 2.3 11.6-3.7 15.4-7.9 5.1-5.5 10.2-11 16-15.9 0.8-0.7 1.7-1.4 2.5-2.1 1.2-0.9-1.7 1.3 0.2-0.2l1.2-0.9c2.1-1.5 4.3-2.9 6.5-4.3 2-1.2 4-2.2 6.1-3.2 0.6-0.3 1.2-0.6 1.9-0.9-0.3 0.2-1.5 0.6 0.2-0.1 1.3-0.5 2.6-1 4-1.5 11.2-3.7 21.8-4 33.4-1.1 19.5 4.9 36.4 17 51.2 30.2 8.6 7.7 21.4-5 12.7-12.7-25.2-22.6-57.1-42.1-92.2-36.2-20.4 3.4-37.7 16.1-51.6 30.9-2.3 2.4-4.5 5-6.8 7.4-0.7 0.7-1.9 1.5-2.4 2.4-0.5 0.8 2.3-1.5 0.8-0.7 1.3-0.7 3.9-1.4 5.8-0.7-11.1-3.7-15.8 13.7-4.9 17.5zM505.9 527.1c3.4 0.7 6.8 1.7 10.2 2.8 6.7 2.2 10.4 3.5 16.6 7.7 1.6 1.1-0.5-0.5 0.6 0.5 0.6 0.5 1.1 1.1 1.7 1.6 1.5 1.4-0.1-0.4 0.5 0.6 0.4 0.6 0.7 1.2 1 1.8-1-2 0.1 0 0 0.5 0.1-2-0.1 0-0.1 0-0.1 0.8 0 0.7 0.1-0.5-0.1 0.4-0.1 0.7-0.3 1.1-0.6 1 0.7-0.9-0.4 1-1.6 2.5-4.6 5.4-8.1 7.8-6.8 4.6-14.4 8.2-22 11.4-7 3-7.4 11.9 0 14.8 7.4 2.8 15 5.3 22.4 8.1 3.1 1.1 4.2 1.5 6.9 2.9 1.1 0.6 2.1 1.2 3.2 1.8 1.2 0.8-0.7-0.5 0.1 0 0.4 0.3 0.8 0.7 1.1 1.1 0.6 0.8-1.1-1.2-0.2-0.2 0.8 0.9-0.3-1.4-0.1-0.2 0.1 0.9 0.2-1.9 0-0.9-0.1 0.5-0.8 1.8 0 0.2-0.2 0.5-0.5 1-0.8 1.4-0.3 0.3-0.9 1.3-0.3 0.5-0.5 0.7-1.1 1.3-1.7 1.9-6.9 7.3-15.9 12.8-24.4 18.1-8.3 5.3-0.6 18.5 7.7 13.2 9.9-6.3 20.9-12.8 28.6-21.8 4.8-5.5 8.1-12.9 4.2-19.9-3.4-6-10.5-8.9-16.6-11.4-8.6-3.5-17.5-6.2-26.2-9.5v14.8c14.4-6.1 47.2-18.8 41.2-40.3-3.5-12.9-19.4-18.9-30.8-22.6-3.4-1.1-6.9-2.1-10.5-2.9-9.1-2.2-13.3 12.5-3.6 14.6z\" fill=\"#040000\" ></path></svg>`\r\n      },\r\n      {\r\n        name: '10',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\" ><path d=\"M762.9 77.4H261.1L10.2 512l250.9 434.6h501.8L1013.8 512z\" fill=\"#F6F180\" ></path><path d=\"M342.9 400.6m-29.5 0a29.5 29.5 0 1 0 59 0 29.5 29.5 0 1 0-59 0Z\" fill=\"#040000\" ></path><path d=\"M342.9 431.3c-16.9 0-30.7-13.8-30.7-30.7s13.8-30.7 30.7-30.7 30.7 13.8 30.7 30.7-13.7 30.7-30.7 30.7z m0-59c-15.6 0-28.3 12.7-28.3 28.3s12.7 28.3 28.3 28.3 28.3-12.7 28.3-28.3-12.6-28.3-28.3-28.3z\" fill=\"#FFFFFF\" ></path><path d=\"M702 400.6m-29.5 0a29.5 29.5 0 1 0 59 0 29.5 29.5 0 1 0-59 0Z\" fill=\"#040000\" ></path><path d=\"M702 431.3c-16.9 0-30.7-13.8-30.7-30.7s13.8-30.7 30.7-30.7 30.7 13.8 30.7 30.7-13.8 30.7-30.7 30.7z m0-59c-15.6 0-28.3 12.7-28.3 28.3s12.7 28.3 28.3 28.3 28.3-12.7 28.3-28.3-12.7-28.3-28.3-28.3z\" fill=\"#FFFFFF\" ></path><path d=\"M358.7 519.9c20 22 45.5 40.4 71.3 54.8 51.2 28.5 111.7 39.9 168 19.5 44.3-16.1 80.7-47.8 110.2-83.9 3-3.7 3.6-8.9 0-12.5-3.1-3.1-9.5-3.7-12.5 0-25.5 31.4-56.2 59.7-93.7 76-27.1 11.7-56.6 15.7-85.8 12.2-24.7-2.9-49.5-11.8-71.5-23.4-18.7-9.8-36.6-22.2-51.1-34.3-7.8-6.5-15.5-13.3-22.4-20.9-7.7-8.5-20.1 4.1-12.5 12.5z\" ></path></svg>`\r\n      },\r\n      {\r\n        name: '11',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\" ><path d=\"M48.2 844.9c-68.5-210.6 186-782.1 409.1-795.4 6.3-0.4 12.5 0.2 18.6 1.6C665.1 94.6 985.4 515 987.1 821.3c0.1 20-12.9 37.9-22.4 43.1-162.7 89.8-605.8 179.7-884.4 30.9-15-7.9-24.2-26.1-32.1-50.4z\" fill=\"#F0884F\" ></path><path d=\"M401 352.1m-52.4 0a52.4 52.4 0 1 0 104.8 0 52.4 52.4 0 1 0-104.8 0Z\" fill=\"#FFFFFF\" ></path><path d=\"M408.7 329m-29.3 0a29.3 29.3 0 1 0 58.6 0 29.3 29.3 0 1 0-58.6 0Z\" fill=\"#040000\" ></path><path d=\"M527.5 352.1m-52.4 0a52.4 52.4 0 1 0 104.8 0 52.4 52.4 0 1 0-104.8 0Z\" fill=\"#FFFFFF\" ></path><path d=\"M527.5 329m-29.3 0a29.3 29.3 0 1 0 58.6 0 29.3 29.3 0 1 0-58.6 0Z\" fill=\"#040000\" ></path><path d=\"M450.7 517c1.1-8.2 3.2-16.4 6.1-24.1 0.1-0.3 1-2.5 0.5-1.4s0.3-0.7 0.5-1c0.7-1.4 1.4-2.8 2.2-4.1 0.4-0.8 2.8-3.9 1.3-2.1 0.8-1 1.7-1.9 2.6-2.8 1-1-1.5 1 0.1 0 0.5-0.3 1-0.6 1.5-0.8-1.3 0.7-1.2 0.3 0 0.1 1.9-0.3-1.8 0.3 0.1 0 1.2-0.2 1.5 0.3 0-0.1 0.6 0.2 1.3 0.3 1.9 0.5 0.3 0.1-1.3-0.7 0.2 0.1 0.8 0.5 1.6 0.9 2.4 1.4 1.4 1 0-0.1 1.4 1.1 0.9 0.8 1.8 1.7 2.6 2.6 1.8 1.9 3.5 3.9 5 6.1 5.1 7.1 9.3 14.8 13.2 22.6 3.5 6.9 13.7 4.7 15.8-2.1 2.6-8.7 4.8-17.4 7.4-26.1 0.9-3.2 1.9-6.4 3.2-9.4-0.7 1.6 0.8-1.6 1.2-2.2l0.9-1.5c0.7-1.2-1.4 0.7 0.1-0.1 1.7-0.9-1.2 0.3-0.3 0.1 0.8-0.2 1-1.2 0.3-0.3-0.6 0.8 0.6 0-0.5 0.2-2 0.3 2.4 0.5-1.1 0 0.5 0.1 1.2 0.2 1.6 0.4-1.1-0.8-0.8-0.4 0.2 0.2 0.7 0.4 3.4 2.3 2.7 1.8 8.9 7.1 15.9 16.9 22.5 26 2.8 3.8 7.5 5.6 11.8 3.1 3.7-2.2 5.9-8 3.1-11.8-8.2-11.1-16.6-23-27.7-31.4-6.3-4.7-14.5-7.6-21.7-3-6.7 4.2-9.6 12.5-11.9 19.6-3.2 9.9-5.5 20-8.6 29.9 5.3-0.7 10.5-1.4 15.8-2.1-7.8-15.5-24.8-50.1-48-41.7-14.1 5.1-19.7 23-22.9 36.2-0.9 3.8-1.8 7.7-2.3 11.6-0.6 4.6 1.1 9.3 6 10.6 4.2 1 10.2-1.5 10.8-6.1z\" fill=\"#040000\" ></path></svg>`\r\n      },\r\n      {\r\n        name: '12',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\" ><path d=\"M485.538528 993.072489a362.00362 481.804818 3.149 1 0 52.933731-962.15464 362.00362 481.804818 3.149 1 0-52.933731 962.15464Z\" fill=\"#AADCF0\" ></path><path d=\"M688.2 334.1c-15.1 7.6-30.2 15.6-44.3 25-5.9 3.9-17 10.4-14.6 19.1 1.8 6.5 12 11.2 17.3 14.3 15.7 9.3 32.1 17.6 48.3 25.9 8.6 4.4 16.2-8.5 7.6-13-14.1-7.3-28.3-14.5-42.1-22.3-3.9-2.2-7.9-4.5-11.7-6.9-1.2-0.8-2.4-1.5-3.5-2.4-0.6-0.4-1.1-0.8-1.6-1.2 2.2 1.7-0.3-0.3-0.3-0.3-0.9 0.1-1.5-3.2-0.2 0.5 0.9 2.4 1.1 3.8 0.3 5.8 0.6-1.5-0.9 0.8-0.1 0 0.5-0.5 1-1.1 1.6-1.6 0.5-0.5 1-0.9 1.6-1.3 0.6-0.5 0 0 1.2-0.9 1.7-1.3 3.5-2.5 5.3-3.6 8.4-5.5 17.2-10.4 26-15.2 5.6-3 11.2-6 16.8-8.9 8.6-4.4 1-17.4-7.6-13zM375.8 347c13.4 6.8 26.7 14 39.5 21.9 1.8 1.2 3.7 2.3 5.5 3.5 0.9 0.6 1.7 1.2 2.6 1.8 0.9 0.6 1.9 1.4 1.6 1.1 1.1 0.9 2.1 1.9 3.1 2.8 1.2 1 0-0.3 0.1 0 0-0.2-0.8-2.4-0.3-4.1 1.5-5.5 2.3-2.7 0.8-2-0.4 0.2-0.9 0.8-1.3 1.1 1.7-1.4-1.6 1.1-2.3 1.6-3.4 2.3-6.9 4.4-10.4 6.4-14.9 8.6-30.3 16.4-45.6 24.3-8.6 4.4-1 17.4 7.6 13 15-7.7 30.1-15.4 44.8-23.8 6.2-3.6 13.8-7.3 18.7-12.7 7.6-8.3-3.8-16.6-9.9-20.9-8.7-6.1-18-11.3-27.3-16.4-6.5-3.6-13-7.1-19.6-10.4-8.6-4.5-16.3 8.5-7.6 12.8zM412.8 570.9c13.5 7.7 28.5 13.3 43.3 17.9 29.8 9.2 61.7 13.1 92.6 7.3 20.6-3.9 40-12.5 56.6-25.2 2.8-2.2 4.3-5.6 2.3-9-1.6-2.8-6.2-4.5-9-2.3-48.3 36.9-113.3 30-165.6 6.7-4.6-2.1-9.2-4.2-13.7-6.7-7.3-4.2-13.9 7.2-6.5 11.3z\" fill=\"#040000\" ></path><path d=\"M644.6 505.2c-30.1 21.5-60.6 62.5-39.1 99.8 10.7 18.6 30.3 30.9 49.1 40.1 7.8 3.8 14.6-7.9 6.8-11.7-23.6-11.5-53.7-31.4-49.4-60.9 2.8-18.9 15.8-34.6 29.5-47.2 2.5-2.3 5.1-4.6 7.8-6.7 0.5-0.4 0.9-0.7 1.4-1.1-0.4 0.3-1.2 0.9-0.1 0.1l0.9-0.6c6.9-5.1 0.2-16.8-6.9-11.8z\" fill=\"#040000\" ></path></svg>`\r\n      },\r\n      {\r\n        name: '13',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\" ><path d=\"M235.1 76.9c75.6-26.5 297.3-90.1 514.2-16.6 16.3 5.5 29.8 17.4 37.1 33 57.5 122.4 127.1 602.1 62.1 785.6a62.58 62.58 0 0 1-32.5 35.8c-109.5 51.8-428.1 136.7-609.3 37.2-14.4-7.9-25-21.3-29.7-37.1-41.9-140.6-37-627.7 19.1-798 6.1-18.7 20.5-33.4 39-39.9z\" fill=\"#F9DABD\" ></path><path d=\"M392.2 360.2m-35.2 0a35.2 35.2 0 1 0 70.4 0 35.2 35.2 0 1 0-70.4 0Z\" fill=\"#040000\" ></path><path d=\"M618.6 360.2m-35.2 0a35.2 35.2 0 1 0 70.4 0 35.2 35.2 0 1 0-70.4 0Z\" fill=\"#040000\" ></path><path d=\"M512 562.6c-36 0-65.3-29.3-65.3-65.3S476 432 512 432s65.3 29.3 65.3 65.3-29.3 65.3-65.3 65.3z m0-122.9c-31.7 0-57.6 25.8-57.6 57.6s25.8 57.6 57.6 57.6c31.7 0 57.6-25.8 57.6-57.6s-25.9-57.6-57.6-57.6z\" fill=\"#040000\" ></path></svg>`\r\n      },\r\n      {\r\n        name: '14',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\" ><path d=\"M178.1 971.5c38.1 15.9 98.7 26.6 171.3-12.3 3.7-2 8.4-1.6 11.6 1.1 43.3 35.9 123.3 80.8 236 10.9 3.8-2.4 8.7-2.4 12.6-0.2 41.8 23.9 191.6 58.2 246.6 14.2 4.4-3.5 9.1-6.6 14.5-8.5C1065 909.5 678.2-652 194.3 351c-37.5 77.8-38.4 94.1-71.9 211.3-27.6 96.3-29.1 231.3 1.4 348.1 7.2 27.3 27.3 49.9 54.3 61.1z\" fill=\"#ABAAAA\" ></path><path d=\"M468.9 349H418c-6.1 0-11.1-5-11.1-11.1V336c0-6.1 5-11.1 11.1-11.1h50.9c6.1 0 11.1 5 11.1 11.1v1.9c0 6.1-5 11.1-11.1 11.1zM643 471.9H390c-6.6 0-12-5.4-12-12s5.4-12 12-12h253c6.6 0 12 5.4 12 12s-5.4 12-12 12zM609 349h-61.2c-6 0-11-4.9-11-11v-2.1c0-6 4.9-11 11-11H609c6 0 11 4.9 11 11v2.1c0 6.1-4.9 11-11 11z\" fill=\"#040000\" ></path></svg>`\r\n      },\r\n      {\r\n        name: '15',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\" ><path d=\"M673.1 318.7c3.7-17.5 5.6-35.7 5.6-54.4 0-137.9-105.5-249.7-235.6-249.7S207.4 126.4 207.4 264.3c0 55.4 17.1 106.7 45.9 148.1-55.2 63.3-88.6 145.9-88.6 236.3 0 199.2 162.1 360.6 362.1 360.6 200 0 362.1-161.5 362.1-360.6 0.1-147.3-88.7-274-215.8-330z\" fill=\"#4F8A54\" ></path><path d=\"M392 246.2m-47.1 0a47.1 47.1 0 1 0 94.2 0 47.1 47.1 0 1 0-94.2 0Z\" fill=\"#FFFFFF\" ></path><path d=\"M386 252.8m-26.4 0a26.4 26.4 0 1 0 52.8 0 26.4 26.4 0 1 0-52.8 0Z\" fill=\"#040000\" ></path><path d=\"M505.6 246.2m-47.1 0a47.1 47.1 0 1 0 94.2 0 47.1 47.1 0 1 0-94.2 0Z\" fill=\"#FFFFFF\" ></path><path d=\"M501.4 252.8m-26.4 0a26.4 26.4 0 1 0 52.8 0 26.4 26.4 0 1 0-52.8 0Z\" fill=\"#040000\" ></path><path d=\"M474.3 364.8h-50.9c-6.1 0-11.1-5-11.1-11.1v-1.9c0-6.1 5-11.1 11.1-11.1h50.9c6.1 0 11.1 5 11.1 11.1v1.9c0 6.2-5 11.1-11.1 11.1z\" fill=\"#040000\" ></path></svg>`\r\n      },\r\n      {\r\n        name: '16',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\" ><path d=\"M246.4 227.6c-166.9 101.1-461.9 344 87 564.1 1.5 0.6 2.9 1.1 4.4 1.6 80.7 27.7 392.8 165.4 641-198.1 40-58.6 38.5-136.2-3.7-193.3C892 289.5 727 201.1 429.1 182.7c-64.1-4-127.8 11.6-182.7 44.9z\" fill=\"#CF92BE\" ></path><path d=\"M617.1 393.4c-17.4 8.8-34.9 18.1-51.2 28.9-6.9 4.6-20.3 12.3-17.4 22.6 1.2 4.3 5.6 7 9 9.5 3.7 2.7 7.6 5 11.5 7.3 18.2 10.8 37.1 20.3 55.9 30 10 5.1 18.9-10 8.8-15.1-16.4-8.4-32.9-16.9-49-26-4.5-2.6-9.1-5.2-13.5-8l-4.5-3c-0.7-0.5-1.3-1-2-1.5 1.6 1.2 0.7 0.4-0.2-0.2-1.3-0.9-0.3-0.9-0.5-0.3 0.2 0.2 0.4 0.5 0.6 0.7 1 1.9 1.3 3.7 0.8 5.7 0.1-0.6 0.7-1.4-0.6 1.3 0.7-1.5-0.1 0-0.2 0.1 0.6-0.6 1.2-1.3 1.9-1.9l1.8-1.5c1.8-1.6-0.6 0.3 1.2-0.9 2-1.5 4.1-2.9 6.2-4.3 10-6.5 20.4-12.4 30.9-18 6.5-3.5 13.1-7 19.7-10.4 9.6-5 0.8-20.1-9.2-15zM323.1 408.5c15.9 8.1 31.7 16.5 46.8 26 2.2 1.4 4.3 2.8 6.5 4.2 1 0.7 1.9 1.3 2.8 2 0.5 0.3 1 0.7 1.4 1.1-1.1-0.9-0.3-0.3 0.3 0.3 1.1 1 2.2 2.2 3.3 3.1 1.4 1.1-1-1.7-0.1-0.1-0.6-1.1-0.9-4.1 0.3-6.7 2.2-4.8 0.7 0.1 0-0.5 0 0-1.1 0.9-1.3 1 2.3-1.9 0 0-0.5 0.4-0.8 0.5-1.5 1.1-2.3 1.6-4 2.7-8.1 5.1-12.3 7.5-17.3 10-35.1 19.1-52.8 28.2-10 5.1-1.2 20.2 8.8 15.1 17.5-9 35-17.9 52-27.7 7.3-4.2 15.9-8.6 21.8-14.7 9.3-9.7-4.3-19.7-11.5-24.7-10.1-7.1-20.9-13.1-31.7-19-7.6-4.2-15.2-8.2-22.9-12.1-9.7-5.2-18.6 9.9-8.6 15zM513 592.1c-12.2 0-24.6-1.4-36.3-4.3-8-2-13.9-8.2-15.4-16.2s1.7-15.8 8.4-20.5c23.2-16.3 60.5-31.9 106.2-13 6.4 2.6 11 8.3 12.3 15.1 1.3 6.7-0.8 13.6-5.7 18.3-13.5 13.1-40.9 20.6-69.5 20.6z m-37.4-32.5c-3.4 2.4-4.9 6.2-4.2 10.2 0.8 4.1 3.6 7.1 7.7 8.1 39.1 9.7 81.2 0.7 96.1-13.7 2.4-2.3 3.4-5.6 2.7-8.9-0.7-3.4-2.9-6.2-6.1-7.5-41.2-17.2-75.1-3.1-96.2 11.8z\" fill=\"#040000\" ></path></svg>`\r\n      },\r\n      {\r\n        name: '17',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\" ><path d=\"M1008.6 465.7c0-124.9-95.5-226.2-213.4-226.2-12 0-23.8 1.1-35.2 3.1v-3.1c0-124.9-95.5-226.2-213.4-226.2S333.4 114.6 333.4 239.5c0 2.4 0 4.8 0.1 7.2-17.1-4.7-35-7.2-53.4-7.2-117.8 0-213.4 101.3-213.4 226.2 0 92.1 51.9 171.3 126.3 206.6-13.7 29.9-21.4 63.4-21.4 98.8 0 124.9 95.5 226.2 213.4 226.2 68.8 0 130-34.5 169-88.1 39 53.6 100.2 88.1 169 88.1 117.8 0 213.4-101.3 213.4-226.2 0-41.2-10.4-79.9-28.6-113.1 60.5-39.9 100.8-111.1 100.8-192.3z\" fill=\"#8CC66D\" ></path><path d=\"M437.8 400.7m-24.7 0a24.7 24.7 0 1 0 49.4 0 24.7 24.7 0 1 0-49.4 0Z\" fill=\"#040000\" ></path><path d=\"M649.7 400.7m-24.7 0a24.7 24.7 0 1 0 49.4 0 24.7 24.7 0 1 0-49.4 0Z\" fill=\"#040000\" ></path><path d=\"M527.3 625.9c6.3-14.2 13.1-28.3 17.9-43 6.2-19 8.3-38.6 10.5-58.3l2.1-19.2c0.7-6.2-9-6.1-9.7 0-1.7 16.3-2.8 32.8-5.7 48.9-4.2 23.7-13.8 45-23.5 66.7-2.5 5.6 5.9 10.5 8.4 4.9z\" fill=\"#252525\" ></path><path d=\"M447.7 522.3c20.3-0.1 40.6-0.2 61-0.4l96.6-0.6c7.5 0 14.9-0.1 22.4-0.1 16.6-0.1 16.7-25.9 0-25.8-20.3 0.1-40.6 0.2-61 0.4l-96.6 0.6c-7.5 0-14.9 0.1-22.4 0.1-16.6 0.1-16.7 25.9 0 25.8z\" fill=\"#040000\" ></path><path d=\"M495.4 508.2c-10.3 3.8-9.2 20.9-9.2 29.5 0.1 16 2.1 32.3 6.1 47.8 3.5 13.7 8.7 29.9 20.6 38.7 12.9 9.5 27.6 2.1 37.6-7.9 10.2-10.3 17.8-23 24.7-35.6 11.6-21.3 20.9-43.8 29.7-66.4 3-7.8-9.5-11.1-12.5-3.4-7.4 19.1-15.3 38.1-24.7 56.4-5.9 11.5-12.2 23-20.3 33.1-2.8 3.5-5.8 6.9-9.2 9.8-1.9 1.7-1.4 1.3-3.3 2.5-1.3 0.8-2.6 1.6-3.9 2.2-0.7 0.3 1-0.2-0.8 0.3-0.6 0.2-1.2 0.3-1.8 0.5-1.1 0.3-1.2 0.2-0.5 0.1-0.6 0-1.3 0-1.9 0.1-2.2 0.1 0.6 0.5-1.8-0.2l-1.8-0.6c1.5 0.5 0.2 0.1-0.5-0.3-0.8-0.5-2.9-2.1-1.7-1.1-1-0.9-2-1.7-2.8-2.7-0.4-0.5-0.9-1-1.3-1.5 0.4 0.5 0.1 0.2-0.5-0.7-0.8-1.3-1.7-2.5-2.4-3.9-0.7-1.3-1.4-2.5-2-3.8-0.4-0.8-0.8-1.6-1.1-2.4-0.1-0.2-0.5-1.1 0 0l-0.6-1.5a86.8 86.8 0 0 1-3.3-9.8c-4.4-14.9-6.2-27.9-6.8-42.8-0.3-6.6-0.3-13.1 0.4-19.7 0.2-1.5-0.3 1.5 0.1-0.5l0.3-1.8c0.2-0.9 0.5-1.8 0.7-2.8 0.4-1.9-0.7 1.1 0.3-0.7 0.5-1-1.3 1.2-0.3 0.5-0.3 0.3-1.1 0.8-2 1.1 7.7-2.9 4.3-15.4-3.5-12.5z\" fill=\"#040000\" ></path></svg>`\r\n      },\r\n      {\r\n        name: '18',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\" ><path d=\"M75.4 739.8c-78.7-134.4-194-455.7 401.4-579.6 9.8-2 19.2-6.2 29.2-7.5C656.8 133 947.3 205 1000.1 578.4c42.6 223.8 29.7 392.1-822 233.6-43.1-8-80.6-34.4-102.7-72.2z\" fill=\"#F09495\" ></path><path d=\"M704.6 875.4c-129 0-301.8-20.5-526.6-62.3-43.5-8.1-81.2-34.6-103.5-72.7-19.3-32.9-44.8-84.3-57.1-142.5-13.9-65.1-8.8-125.3 15.1-179.2 54.3-122.3 203.7-209.6 444-259.6 4.1-0.9 8.3-2.1 12.3-3.4 5.5-1.7 11.1-3.4 16.9-4.2 29-3.8 75.7-5.9 133.8 5.7 54.5 10.9 105.3 31 150.8 59.9C843.7 251 888.2 296 922.7 351c39.7 63.1 66.1 139.6 78.5 227.3 8.1 42.4 15.2 87.3 12.5 127.9-2.8 42.6-16.4 75.5-41.5 100.7-42.5 42.7-120.3 65-237.8 68.1-9.6 0.2-19.6 0.4-29.8 0.4zM76.3 739.3c22 37.6 59.2 63.7 102.1 71.7 242.5 45.1 424.4 65.3 556.1 61.9 116.9-3.1 194.1-25.2 236.3-67.5 55.4-55.6 44.4-142.5 28.3-226.7C976 415.8 903.4 291.5 789.2 219c-124-78.7-248.1-69.9-283.2-65.3-5.6 0.7-11.2 2.4-16.6 4.1-4.1 1.2-8.3 2.5-12.5 3.4C237.3 211.1 88.5 298 34.5 419.6c-54.6 122.8 2.8 253 41.8 319.7z\" fill=\"#FFFFFF\" ></path><path d=\"M424.1 442.5m-24.7 0a24.7 24.7 0 1 0 49.4 0 24.7 24.7 0 1 0-49.4 0Z\" fill=\"#040000\" ></path><path d=\"M635.9 442.5m-24.7 0a24.7 24.7 0 1 0 49.4 0 24.7 24.7 0 1 0-49.4 0Z\" fill=\"#040000\" ></path><path d=\"M426.2 543.3c17.1 7.9 36.6 26 25.5 46.1-6.9 12.5-19.8 21.2-31.7 28.4-4.5 2.7-0.4 9.8 4.1 7.1 17.4-10.5 41.6-27.6 39-51.1-1.6-14-12.4-24.8-23.5-32.3-3-2-6.1-3.9-9.3-5.4-4.8-2.1-8.9 5-4.1 7.2zM629.5 535.4c-21.8 11.7-40.6 37-25.7 61.3 8.2 13.4 22.2 22.7 35.7 30.3 4.7 2.7 8.9-4.6 4.2-7.2-15.5-8.7-39.9-23.9-36.9-45.2 1.6-11.4 10.7-20.7 19.6-27.2 2.4-1.7 4.8-3.4 7.4-4.8 4.7-2.5 0.4-9.8-4.3-7.2z\" fill=\"#040000\" ></path><path d=\"M457.2 584.6c25.6 25.6 66.7 41 101.8 28.3 18.2-6.6 33.2-19.1 45.5-33.8 4.2-5.1-3-12.4-7.3-7.3-18.5 22-43.3 38.1-73 35-18.6-1.9-36.2-10.8-50.9-22-2.9-2.2-6.1-4.8-8.8-7.5-4.7-4.7-12 2.6-7.3 7.3z\" fill=\"#040000\" ></path></svg>`\r\n      },\r\n      {\r\n        name: '19',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\" ><path d=\"M915.9 510.5c8.4-19 13.1-39.8 13.1-61.7 0-90-78.9-162.9-176.2-162.9-3.2 0-6.3 0.1-9.5 0.2v-0.2c0-94.8-116.2-171.6-259.6-171.6S224 191.2 224 286v2c-96.2 0-174.1 72-174.1 160.9 0 38 14.3 73 38.2 100.5-41.8 29.4-68.8 75.9-68.8 128.2 0 88.9 78 160.9 174.1 160.9 17.1 0 33.6-2.3 49.3-6.5 28.9 46.1 88.7 77.7 157.6 77.7 49.4 0 94-16.2 126-42.3 32 26.1 76.6 42.3 126 42.3 77.3 0 143-39.7 166.7-95 3.1 0.2 6.3 0.2 9.5 0.2 97.3 0 176.2-72.9 176.2-162.9 0-60.6-35.7-113.4-88.8-141.5z\" fill=\"#5A74B8\" ></path><path d=\"M357.6 449.5a46.6 73.2 0 1 0 93.2 0 46.6 73.2 0 1 0-93.2 0Z\" fill=\"#FEFEFD\" ></path><path d=\"M357.5 449.5a25.1 39.4 0 1 0 50.2 0 25.1 39.4 0 1 0-50.2 0Z\" fill=\"#040000\" ></path><path d=\"M531.3 449.5a46.6 73.2 0 1 0 93.2 0 46.6 73.2 0 1 0-93.2 0Z\" fill=\"#FEFEFD\" ></path><path d=\"M531.2 449.5a25.1 39.4 0 1 0 50.2 0 25.1 39.4 0 1 0-50.2 0Z\" fill=\"#040000\" ></path><path d=\"M426.7 574.6c20.9 29.9 59.7 52.2 96.2 38.6 19.2-7.2 34.7-21.2 47.6-36.9 2.8-3.5 3.4-8.3 0-11.7-2.9-2.9-8.9-3.5-11.7 0-16.5 20.2-40.9 40.9-68.1 35.5-17.3-3.4-31-13.2-42.9-25.9-2-2.2-3.9-4.4-5.8-6.7-1.6-1.9 1.1 1.5-0.4-0.6-0.2-0.2-0.3-0.5-0.5-0.7-6.2-8.7-20.6-0.4-14.4 8.4z\" fill=\"#040000\" ></path></svg>`\r\n      },\r\n      {\r\n        name: '20',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\" ><path d=\"M792.8 301.4c-8.2 0-16.2 0.4-24.2 1.3-12.3-81.8-129.2-145.9-271.8-145.9-137.1 0-250.5 59.3-269.9 136.6C105.3 295.5 7.4 391.2 7.4 508.9c0 119.1 100.2 215.6 223.7 215.6 5.3 0 10.6-0.2 15.8-0.5 14.4 80.5 130.4 143.2 271.3 143.2 135.9 0 248.6-58.3 269.4-134.6 1.7 0 3.4 0.1 5.1 0.1 123.6 0 223.7-96.5 223.7-215.6s-100-215.7-223.6-215.7z\" fill=\"#F6CD50\" ></path><path d=\"M435.9 431.5m-52.2 0a52.2 52.2 0 1 0 104.4 0 52.2 52.2 0 1 0-104.4 0Z\" fill=\"#FAFAFA\" ></path><path d=\"M588.1 431.5m-52.2 0a52.2 52.2 0 1 0 104.4 0 52.2 52.2 0 1 0-104.4 0Z\" fill=\"#FAFAFA\" ></path><path d=\"M435.9 431.5m-27.8 0a27.8 27.8 0 1 0 55.6 0 27.8 27.8 0 1 0-55.6 0Z\" fill=\"#040000\" ></path><path d=\"M601.9 407.4c-5.7 2.9-11.3 5.9-16.9 9-6.8 3.8-15.3 7.8-20.5 13.8-5.6 6.5 1.6 11.1 6.7 14.4 11.2 7.1 23.3 13 35.1 19 5.7 2.9 10.8-5.7 5.1-8.6-10.9-5.6-21.9-11.1-32.4-17.4-2.4-1.4-4.6-3.1-7-4.6 1 0.6-0.4-0.4-0.4-0.4-1.9-0.3-0.5 4.2 0.5 4.1-0.1 0-0.6 0.3 0.3-0.3 0.5-0.3 1-0.9 1.5-1.3 9.7-7.9 21.9-13.5 33.1-19.2 5.7-2.7 0.6-11.4-5.1-8.5zM406.6 547.6c11.5 14.4 27 26.7 42.7 36.3 32.2 19.8 71.2 27.2 107.6 15.4 29.5-9.6 54.6-29.1 75.5-51.6 10.8-11.6-6.6-29.1-17.5-17.5-9.4 10.1-19.5 19.7-30.8 27.7-4.6 3.2-9.3 6.2-14.2 8.9-5 2.8-9.9 5.1-14.1 6.7-4.6 1.7-9.3 3.2-14.1 4.4-2.2 0.5-4.4 1-6.6 1.4-1 0.2-2 0.3-2.9 0.5 2.6-0.4-2.1 0.2-2.5 0.3-4.1 0.4-8.3 0.5-12.5 0.4-2.2-0.1-4.4-0.2-6.6-0.4-1.1-0.1-2.2-0.2-3.2-0.3-1.5-0.2-1.4-0.2 0.1 0l-2.1-0.3c-7.8-1.3-15.4-3.4-22.8-6.2-0.9-0.4-1.8-0.7-2.8-1.1-3.1-1.2 2.3 1.1-0.7-0.3-1.5-0.7-2.9-1.3-4.4-2-3.7-1.8-7.2-3.7-10.8-5.8-5.7-3.4-11.1-7.1-16.4-11.1 3 2.3-1.1-0.9-1.8-1.5-1.1-0.9-2.1-1.7-3.1-2.6-2.1-1.8-4.2-3.7-6.3-5.6-4.4-4.1-8.7-8.4-12.4-13.1-4.2-5.2-13.1-4.3-17.5 0-5 5.1-4 12.2 0.2 17.4z\" fill=\"#040000\" ></path></svg>`\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    name: '',\r\n    type: 'sign',\r\n    list: [\r\n      {\r\n        name: '1',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#6D768D\"></path><path d=\"M809.728 429.696a18.901333 18.901333 0 0 0-15.274667-12.885333l-183.466666-26.624-81.92-166.272a18.901333 18.901333 0 0 0-34.005334 0l-81.92 166.272-183.594666 26.624a19.029333 19.029333 0 0 0-10.496 32.298666l132.693333 129.536-31.274667 182.741334a18.816 18.816 0 0 0 27.477334 19.84l164.138666-86.186667 164.096 86.058667a18.773333 18.773333 0 1 0 27.434667-19.84l-31.36-182.741334 132.693333-129.408a18.901333 18.901333 0 0 0 4.778667-19.413333z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '2',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#6D768D\"></path><path d=\"M644.565333 306.901333c32.128 0 65.834667-5.76 101.077334-17.237333a17.066667 17.066667 0 0 1 22.357333 16.213333v328.32c-1.109333 0.768 10.325333 27.093333-99.370667 19.84-109.653333-7.210667-181.76-45.098667-246.869333-45.098666-65.152 0-49.322667 2.688-74.154667 8.405333v168.064a24.746667 24.746667 0 0 1-24.490666 25.258667 22.528 22.528 0 0 1-17.28-7.253334 24.149333 24.149333 0 0 1-7.168-18.005333V281.258667C299.776 280.490667 328.106667 256 421.76 256s164.437333 50.901333 222.805333 50.901333z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '3',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#6D768D\"></path><path d=\"M524.074667 225.408l274.517333 274.517333a17.066667 17.066667 0 0 1 0 24.149334l-274.517333 274.517333a17.066667 17.066667 0 0 1-24.149334 0l-274.517333-274.517333a17.066667 17.066667 0 0 1 0-24.149334l274.517333-274.517333a17.066667 17.066667 0 0 1 24.149334 0z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '4',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#6D768D\"></path><path d=\"M317.866667 300.8h388.266666c9.386667 0 17.066667 7.68 17.066667 17.066667v388.266666a17.066667 17.066667 0 0 1-17.066667 17.066667h-388.266666a17.066667 17.066667 0 0 1-17.066667-17.066667v-388.266666c0-9.386667 7.68-17.066667 17.066667-17.066667z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '5',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#6D768D\"></path><path d=\"M498.346667 279.082667L248.789333 701.44a15.829333 15.829333 0 0 0 13.653334 23.893333h499.114666a15.829333 15.829333 0 0 0 13.653334-23.893333l-249.6-422.357333a15.829333 15.829333 0 0 0-27.264 0z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '6',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#6D768D\"></path><path d=\"M497.749333 798.549333l-31.445333-28.501333C313.941333 631.722667 213.333333 540.501333 213.333333 428.8a160.981333 160.981333 0 0 1 162.730667-162.730667c51.498667 0 100.906667 23.978667 133.12 61.696a177.536 177.536 0 0 1 133.162667-61.696 160.981333 160.981333 0 0 1 162.730666 162.730667c0 111.701333-100.608 202.965333-252.970666 341.333333l-31.445334 28.458667a17.066667 17.066667 0 0 1-22.912 0z\" fill=\"#FFFFFF\"></path><path d=\"M634.538667 487.808L555.050667 426.24 507.306667 256a201.002667 201.002667 0 0 0-23.594667 20.394667l-0.256-0.256L525.653333 426.666667l-133.290666 59.946666a14.08 14.08 0 0 0-8.021334 15.957334l28.757334 126.378666a14.208 14.208 0 0 0 27.733333-6.229333l-26.24-115.114667 126.037333-56.704 76.416 59.136a14.250667 14.250667 0 0 0 19.968-2.474666 14.08 14.08 0 0 0-2.474666-19.797334z\" fill=\"#6D768D\"></path></svg>`\r\n      },\r\n      {\r\n        name: '7',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#6D768D\"></path><path d=\"M497.749333 798.549333l-31.445333-28.501333C313.941333 631.722667 213.333333 540.501333 213.333333 428.8a160.981333 160.981333 0 0 1 162.730667-162.730667c51.498667 0 100.906667 23.978667 133.12 61.696a177.536 177.536 0 0 1 133.162667-61.696 160.981333 160.981333 0 0 1 162.730666 162.730667c0 111.701333-100.608 202.965333-252.970666 341.333333l-31.445334 28.458667a17.066667 17.066667 0 0 1-22.912 0z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '8',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#6D768D\"></path><path d=\"M374.656 273.194667c5.973333 4.48 12.117333 9.6 18.346667 15.36 6.272 5.717333 11.904 12.373333 16.896 19.84 2.517333 4.010667 5.504 8.490667 9.002666 13.482666a529.493333 529.493333 0 0 1 20.266667 32.213334h155.221333a169.813333 169.813333 0 0 0 9.770667-15.744c2.474667-4.48 5.248-8.96 8.234667-13.482667a460.842667 460.842667 0 0 1 23.253333-31.829333c4.992-6.229333 12.245333-12.373333 21.76-18.346667a34.261333 34.261333 0 0 0 10.112-9.728 31.274667 31.274667 0 0 0 5.248-11.989333 18.56 18.56 0 0 0-1.536-11.605334 17.664 17.664 0 0 0-10.112-8.618666c-4.48-1.493333-8.362667-2.005333-11.605333-1.493334a46.933333 46.933333 0 0 0-9.770667 2.602667c-3.242667 1.28-6.613333 2.645333-10.112 4.138667a32.426667 32.426667 0 0 1-12.757333 2.261333 26.026667 26.026667 0 0 1-12.373334-2.645333 45.653333 45.653333 0 0 1-8.96-6.357334l-8.661333-7.850666a30.336 30.336 0 0 0-11.989333-6.4c-9.984-3.968-18.005333-4.693333-24.021334-2.218667-5.973333 2.474667-11.946667 6.485333-17.962666 11.946667a88.618667 88.618667 0 0 1-11.989334 10.496 7.338667 7.338667 0 0 1-3.754666 1.493333 46.165333 46.165333 0 0 1-8.277334-5.205333 71.808 71.808 0 0 1-7.125333-4.906667 37.973333 37.973333 0 0 1-6.4-6.357333c-3.968-3.968-9.941333-6.613333-17.92-7.850667a31.061333 31.061333 0 0 0-21.76 4.138667c-8.533333 5.461333-14.506667 10.069333-18.048 13.824a29.354667 29.354667 0 0 1-15.744 7.893333 23.978667 23.978667 0 0 1-13.098667-0.768 987.733333 987.733333 0 0 0-14.634666-4.48 80.725333 80.725333 0 0 0-14.250667-2.986667 16.768 16.768 0 0 0-11.989333 2.986667c-6.997333 5.461333-9.258667 12.074667-6.741334 19.84a34.56 34.56 0 0 0 13.482667 18.346667z\" fill=\"#FFFFFF\"></path><path d=\"M780.757333 545.152a219.306667 219.306667 0 0 0-19.882666-65.536 224.981333 224.981333 0 0 0-33.365334-49.792 430.336 430.336 0 0 0-37.12-37.12c-14.506667-11.946667-27.264-23.296-38.272-34.048a544.512 544.512 0 0 1-27.733333-28.842667 305.28 305.28 0 0 1-22.485333-26.197333h-168.746667c-6.485333 8.490667-13.994667 17.493333-22.485333 26.965333a360.96 360.96 0 0 1-26.24 28.074667c-10.538667 10.24-22.272 21.12-35.285334 32.597333a305.493333 305.493333 0 0 0-41.6 44.16 250.026667 250.026667 0 0 0-49.493333 117.589334 216.106667 216.106667 0 0 0 1.877333 70.4 220.586667 220.586667 0 0 0 75.349334 126.549333c21.248 18.005333 47.146667 32.597333 77.653333 43.818667 30.464 11.264 65.493333 16.853333 104.96 16.853333 38.528 0 72.874667-4.864 103.125333-14.592a265.045333 265.045333 0 0 0 78.378667-39.338667c21.973333-16.469333 39.594667-35.797333 52.864-58.026666 13.226667-22.186667 22.101333-45.824 26.624-70.784 4.992-30.421333 5.632-58.026667 1.877333-82.773334z\" fill=\"#FFFFFF\"></path><path d=\"M593.322667 647.509333a20.48 20.48 0 0 1-11.861334 3.2h-50.133333v14.165334c0 4.266667-1.792 8.362667-5.376 12.373333a15.914667 15.914667 0 0 1-13.952 5.333333 24.917333 24.917333 0 0 1-14.336-3.882666c-3.84-2.602667-5.973333-7.210667-6.4-13.824v-14.165334h-48.725333a17.792 17.792 0 0 1-11.818667-3.882666 10.24 10.24 0 0 1-3.968-9.6c0-4.266667 1.578667-7.68 4.693333-10.24a16.768 16.768 0 0 1 11.093334-3.925334h48.682666v-24.789333h-48.682666a15.573333 15.573333 0 0 1-11.52-4.266667 13.525333 13.525333 0 0 1-4.266667-9.941333 15.36 15.36 0 0 1 4.693333-10.624 14.72 14.72 0 0 1 11.093334-4.949333h48.682666l0.725334-14.890667a1053.568 1053.568 0 0 1-40.832-42.538667l-10.752-9.898666a41.216 41.216 0 0 1-6.442667-11.690667c-1.92-4.992-0.938667-10.069333 2.858667-15.274667a13.653333 13.653333 0 0 1 15.786666-3.84c6.186667 2.090667 11.221333 4.821333 15.018667 8.106667 1.92 2.389333 5.248 5.888 10.026667 10.666667l15.061333 14.848 19.328 19.157333 22.186667-20.565333a987.605333 987.605333 0 0 1 29.397333-25.514667 21.162667 21.162667 0 0 1 14.293333-5.674667c5.290667 0 9.557333 2.133333 12.928 6.4 6.186667 7.082667 3.84 15.36-7.168 24.789334a179.072 179.072 0 0 0-12.885333 12.373333c-5.76 5.973333-11.52 11.733333-17.194667 17.408-6.698667 7.082667-14.08 14.378667-22.186666 21.973333v13.44h46.506666c6.698667 0 11.605333 1.536 14.72 4.608a14.165333 14.165333 0 0 1 4.650667 10.282667c0 4.266667-1.450667 7.936-4.309333 11.008-2.858667 3.029333-7.637333 4.352-14.336 3.84l-46.506667 0.768-0.768 24.064h45.866667c13.354667 0 20.053333 4.992 20.053333 14.933333 0.469333 4.693333-0.853333 8.106667-3.925333 10.24z\" fill=\"#6D768D\"></path></svg>`\r\n      },\r\n      {\r\n        name: '9',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#6D768D\"></path><path d=\"M512 213.333333l234.666667 341.333334h-128v213.333333h-213.333334v-213.333333h-128L512 213.333333z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '10',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#6D768D\"></path><path d=\"M533.333333 810.666667L298.666667 469.333333h128V256h213.333333v213.333333h128l-234.666667 341.333334z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '11',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#6D768D\"></path><path d=\"M213.333333 533.333333L554.666667 298.666667v128h213.333333v213.333333h-213.333333v128l-341.333334-234.666667z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '12',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#6D768D\"></path><path d=\"M810.666667 533.333333L469.333333 768v-128H256v-213.333333h213.333333V298.666667l341.333334 234.666666z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '13',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M0 512c0 282.752 229.248 512 512 512s512-229.248 512-512S794.752 0 512 0 0 229.248 0 512z\" fill=\"#6D768D\"></path><path d=\"M571.349333 508.586667l162.389334-162.346667a44.330667 44.330667 0 1 0-62.72-62.72l-162.389334 162.389333-162.517333-162.389333a44.330667 44.330667 0 1 0-62.72 62.72l162.389333 162.389333-162.389333 162.474667a44.330667 44.330667 0 1 0 62.72 62.72l162.389333-162.346667 162.389334 162.389334a44.330667 44.330667 0 1 0 62.72-62.72l-162.261334-162.56z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '14',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 0C233.386667 0 0 225.877333 0 512s225.877333 512 512 512 512-225.877333 512-512S790.613333 0 512 0z\" fill=\"#6D768D\"></path><path d=\"M726.144 311.210667l-277.333333 305.066666-124.8-124.8c-13.866667-13.866667-41.6-13.866667-55.466667 0-13.866667 13.866667-13.866667 41.6 0 55.466667l159.445333 152.533333c13.866667 13.866667 41.6 13.866667 55.466667 0l305.066667-332.8c13.866667-13.866667 13.866667-41.6 0-55.466666-20.778667-13.866667-48.512-13.866667-62.378667 0z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '15',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#6D768D\"></path><path d=\"M541.952 755.626667a40.618667 40.618667 0 0 1-29.824 12.373333 41.344 41.344 0 0 1-30.122667-12.373333 40.106667 40.106667 0 0 1-12.672-30.122667c0-11.605333 4.096-21.845333 12.672-30.122667a40.405333 40.405333 0 0 1 30.122667-12.714666c11.605333 0 21.546667 4.138667 29.824 12.714666a40.32 40.32 0 0 1 12.714667 30.122667c0 11.861333-4.096 21.76-12.714667 30.122667zM450.986667 241.28A77.866667 77.866667 0 0 1 512.256 213.333333c24.874667 0 45.354667 8.917333 61.354667 27.946667 15.488 18.432 23.722667 41.685333 23.722666 69.674667 0 23.765333-33.152 200.533333-44.672 329.045333h-80.128C463.146667 511.402667 426.666667 334.677333 426.666667 310.954667c0-27.392 8.277333-50.645333 24.32-69.674667z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '16',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.794667 0 512 0z\" fill=\"#6D768D\"></path><path d=\"M490.666667 682.666667a64 64 0 1 1 0 128 64 64 0 0 1 0-128z m13.994666-490.752c61.397333 0 112.341333 14.634667 153.002667 43.946666 40.533333 29.269333 60.885333 72.618667 60.885333 130.133334 0 35.242667-12.373333 64.938667-29.952 89.045333-10.282667 14.677333-33.664 33.408-62.890666 56.192l-32.426667 22.357333c-15.701333 12.202667-29.696 26.453333-34.858667 42.666667-1.706667 5.546667-3.072 14.677333-3.968 24.533333-0.426667 4.949333-4.864 15.018667-15.232 15.018667h-83.328c-13.568 0-15.957333-10.581333-15.744-15.786667 1.493333-34.005333 4.608-64.213333 18.474667-80.469333 28.074667-32.896 91.904-73.813333 91.904-73.813333a104.106667 104.106667 0 0 0 23.552-24.021334c10.837333-14.933333 19.797333-31.317333 19.797333-49.237333 0-20.565333-6.016-39.338667-18.090666-56.32-12.032-16.938667-34.090667-25.386667-66.005334-25.386667-31.445333 0-53.76 10.410667-66.901333 31.274667-9.685333 15.445333-15.786667 29.610667-18.346667 45.013333-0.853333 5.461333-4.394667 16.981333-16.042666 16.981334H327.210667c-17.322667 0-21.12-11.221333-20.650667-16.64 6.272-68.138667 32.896-114.688 80-144.597334 32-20.565333 71.381333-30.890667 118.101333-30.890666z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '17',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#6D768D\"></path><path d=\"M336.256 410.026667H253.312a40.021333 40.021333 0 0 0-39.850667 43.264l23.296 278.101333c1.706667 20.693333 19.072 36.608 39.850667 36.608h59.648c11.050667 0 20.010667-8.96 20.010667-19.968v-318.037333a19.968 19.968 0 0 0-20.010667-19.968z m434.432 0h-178.944C653.312 182.314667 548.949333 170.666667 548.949333 170.666667c-44.288 0-35.114667 34.986667-38.442666 40.832 0 84.48-68.010667 155.093333-101.034667 184.362666a39.552 39.552 0 0 0-13.226667 29.653334v322.56c0 11.008 8.96 19.925333 20.010667 19.925333h233.728c30.378667 0 58.154667-17.152 71.68-44.373333 18.176-36.736 40.448-90.112 54.656-133.973334 13.781333-42.410667 26.24-94.976 33.578667-131.968a39.850667 39.850667 0 0 0-39.253334-47.658666z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '18',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#6D768D\"></path><path d=\"M796.16 413.909333c-31.146667-0.298667-115.626667-0.085333-146.858667-0.085333h-158.464c8.533333-7.68 15.914667-14.506667 23.594667-20.906667 29.781333-24.874667 25.813333-71.082667-14.208-88.874666-22.954667-10.24-44.970667-5.632-64 11.52-34.944 31.274667-69.632 62.677333-104.277333 93.994666a15.488 15.488 0 0 1-11.178667 4.437334c-11.221333-0.085333-26.88-0.128-46.933333-0.170667a17.066667 17.066667 0 0 0-17.109334 17.066667L256 719.701333a17.066667 17.066667 0 0 0 17.066667 17.152l49.578666-0.085333c3.968 0 7.466667 0.768 10.88 2.602667 15.829333 8.832 31.701333 17.493333 47.616 26.24a18.133333 18.133333 0 0 0 9.301334 2.346666h168.405333c6.186667 0 11.946667-0.981333 17.834667-2.56 29.44-7.253333 40.021333-30.293333 38.528-52.565333-0.768-9.728-4.266667-18.346667-9.984-26.24 19.626667-5.76 35.114667-16.213333 42.112-36.096 7.125333-20.394667 1.621333-38.4-12.672-53.333333 28.16-19.754667 34.858667-44.672 18.645333-75.648h140.458667c6.570667 0 13.013333-0.597333 19.370666-2.645334 31.957333-9.813333 48.810667-42.88 35.626667-71.552-10.154667-22.186667-28.629333-33.152-52.608-33.450666z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '19',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#6D768D\"></path><path d=\"M270.506667 413.909333c31.146667-0.298667 115.626667-0.085333 146.858666-0.085333h158.464c-8.533333-7.68-15.914667-14.506667-23.594666-20.906667-29.781333-24.874667-25.813333-71.082667 14.208-88.874666 22.954667-10.24 44.970667-5.632 64 11.52 34.944 31.274667 69.632 62.677333 104.277333 93.994666 3.413333 2.986667 6.528 4.437333 11.178667 4.437334 11.221333-0.085333 26.88-0.128 46.933333-0.170667a17.066667 17.066667 0 0 1 17.109333 17.066667l0.682667 288.853333a17.066667 17.066667 0 0 1-17.066667 17.152l-49.578666-0.085333a22.101333 22.101333 0 0 0-10.88 2.602666c-15.829333 8.832-31.701333 17.493333-47.616 26.24a18.133333 18.133333 0 0 1-9.301334 2.346667h-168.405333a68.693333 68.693333 0 0 1-17.834667-2.56c-29.44-7.253333-40.021333-30.293333-38.528-52.565333 0.768-9.728 4.266667-18.346667 9.984-26.24-19.626667-5.76-35.114667-16.213333-42.112-36.096-7.125333-20.394667-1.621333-38.4 12.672-53.333334-28.16-19.754667-34.858667-44.672-18.645333-75.648H272.853333c-6.570667 0-13.013333-0.597333-19.370666-2.645333-31.957333-9.813333-48.810667-42.88-35.626667-71.552 10.154667-22.186667 28.629333-33.152 52.608-33.450667z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '20',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#6D768D\"></path><path d=\"M667.733333 480.128H400v-111.36a97.706667 97.706667 0 0 1 97.621333-97.621333 97.706667 97.706667 0 0 1 97.578667 97.621333 28.885333 28.885333 0 0 0 57.813333 0A155.605333 155.605333 0 0 0 497.621333 213.333333a155.605333 155.605333 0 0 0-155.392 155.434667v111.36h-14.677333A28.885333 28.885333 0 0 0 298.666667 509.013333v292.010667a28.885333 28.885333 0 0 0 28.885333 28.885333h340.138667a28.885333 28.885333 0 0 0 28.928-28.885333V509.013333a28.885333 28.885333 0 0 0-28.928-28.885333z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '21',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#6D768D\"></path><path d=\"M400.042667 437.461333v-111.36a97.706667 97.706667 0 0 1 97.621333-97.621333 97.706667 97.706667 0 0 1 97.578667 97.621333 28.885333 28.885333 0 0 0 57.813333 0A155.605333 155.605333 0 0 0 497.621333 170.666667a155.605333 155.605333 0 0 0-155.392 155.434666v111.36h-14.677333A28.885333 28.885333 0 0 0 298.666667 466.346667v292.010666a28.885333 28.885333 0 0 0 28.885333 28.885334h340.138667a28.885333 28.885333 0 0 0 28.928-28.885334V466.346667a28.885333 28.885333 0 0 0-28.928-28.885334H400.042667z\" fill=\"#FFFFFF\"></path><path d=\"M595.242667 437.461333v-111.36a97.706667 97.706667 0 0 0-97.621334-97.621333 97.706667 97.706667 0 0 0-97.578666 97.621333 28.885333 28.885333 0 0 1-57.813334 0A155.605333 155.605333 0 0 1 497.621333 170.666667a155.605333 155.605333 0 0 1 155.434667 155.434666v111.36h14.634667c16 0 28.928 12.928 28.928 28.885334v292.010666a28.885333 28.885333 0 0 1-28.928 28.885334H327.552A28.885333 28.885333 0 0 1 298.666667 758.357333V466.346667c0-15.957333 12.928-28.885333 28.885333-28.885334h267.690667z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '22',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M511.999787 512.000213m-511.999787 0a511.999787 511.999787 0 1 0 1023.999573 0 511.999787 511.999787 0 1 0-1023.999573 0Z\" fill=\"#6D768D\"></path><path d=\"M381.354508 364.586941c0 54.015977 29.013321 103.935957 75.946635 130.986613a152.53327 152.53327 0 0 0 151.935936 0 151.12527 151.12527 0 0 0 75.946636-130.986613A151.594604 151.594604 0 0 0 533.333111 213.333671a151.594604 151.594604 0 0 0-151.89327 151.25327zM660.479725 498.901552a185.258589 185.258589 0 0 1-127.146614 50.346646c-49.066646 0-93.866628-19.199992-127.06128-50.346646C317.141201 544.853533 255.999893 637.440161 255.999893 744.106783c0 13.183995 10.709329 23.850657 23.978657 23.850657h506.709122a23.893323 23.893323 0 0 0 23.978657-23.893323c0-106.538622-61.098641-199.25325-150.186604-245.205232z\" fill=\"#FFFFFF\"></path></svg>`\r\n      },\r\n      {\r\n        name: '23',\r\n        icon: `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 1024 1024\"><path d=\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\" fill=\"#6D768D\"></path><path d=\"M445.610667 401.578667a129.322667 129.322667 0 1 0 258.645333 0 129.322667 129.322667 0 0 0-258.645333 0z m237.568 114.901333a157.354667 157.354667 0 0 1-216.362667 0 236.373333 236.373333 0 0 0-127.957333 209.706667c0 11.264 9.130667 20.394667 20.394666 20.394666h431.402667a20.394667 20.394667 0 0 0 20.394667-20.394666 236.373333 236.373333 0 0 0-127.872-209.706667zM409.813333 401.578667c0-40.362667 14.592-77.397333 38.698667-106.112a112.725333 112.725333 0 0 0-29.013333-3.925334 112.64 112.64 0 0 0-112.426667 112.469334 112.64 112.64 0 0 0 144.853333 107.648 164.693333 164.693333 0 0 1-42.112-110.08z m-18.602666 136.704a136.533333 136.533333 0 0 1-65.706667-34.474667 205.44 205.44 0 0 0-111.232 182.4c0 9.813333 7.936 17.706667 17.706667 17.706667H303.36a273.621333 273.621333 0 0 1 87.893333-165.632z\" fill=\"#FFFFFF\"></path></svg>`\r\n      }\r\n    ]\r\n  }\r\n]\r\n\r\n//  nodeIconList icon\r\nconst getNodeIconListIcon = (name, extendIconList = []) => {\r\n  let arr = name.split('_')\r\n  const iconList = mergerIconList([...nodeIconList, ...extendIconList])\r\n  let typeData = iconList.find(item => {\r\n    return item.type === arr[0]\r\n  })\r\n  if (typeData) {\r\n    let typeName = typeData.list.find(item => {\r\n      return item.name === arr[1]\r\n    })\r\n    if (typeName) {\r\n      return typeName.icon\r\n    }\r\n    return ''\r\n  } else {\r\n    return ''\r\n  }\r\n}\r\n\r\nexport default {\r\n  hyperlink,\r\n  note,\r\n  attachment,\r\n  nodeIconList,\r\n  getNodeIconListIcon\r\n}\r\n","import {\r\n  resizeImgSize,\r\n  removeRichTextStyes,\r\n  checkIsRichText,\r\n  isUndef,\r\n  createForeignObjectNode,\r\n  addXmlns,\r\n  generateColorByContent,\r\n  camelCaseToHyphen,\r\n  getNodeRichTextStyles\r\n} from '../../../utils'\r\nimport { Image as SVGImage, SVG, A, G, Rect, Text } from '@svgdotjs/svg.js'\r\nimport iconsSvg from '../../../svg/icons'\r\nimport { noneRichTextNodeLineHeight } from '../../../constants/constant'\r\n\r\n// svg\r\nconst measureText = (text, style) => {\r\n  const g = new G()\r\n  const node = new Text().text(text)\r\n  style.text(node)\r\n  g.add(node)\r\n  return g.bbox()\r\n}\r\n\r\n// \r\nconst defaultTagStyle = {\r\n  radius: 3, // \r\n  fontSize: 12, // height\r\n  fill: '', // \r\n  height: 20, // \r\n  paddingX: 8 // width\r\n  //width: 30 // +paddingX*2\r\n}\r\n\r\n//  \r\nfunction createImgNode() {\r\n  let img = this.getData('image')\r\n  if (!img) {\r\n    return\r\n  }\r\n  img = (this.mindMap.renderer.renderTree.data.imgMap || {})[img] || img\r\n  const imgSize = this.getImgShowSize()\r\n  const node = new SVGImage().load(img).size(...imgSize)\r\n  // \r\n  const { defaultNodeImage } = this.mindMap.opt\r\n  if (defaultNodeImage) {\r\n    const imgEl = new Image()\r\n    imgEl.onerror = () => {\r\n      node.load(defaultNodeImage)\r\n    }\r\n    imgEl.src = img\r\n  }\r\n  if (this.getData('imageTitle')) {\r\n    node.attr('title', this.getData('imageTitle'))\r\n  }\r\n  node.on('click', e => {\r\n    this.mindMap.emit('node_img_click', this, node, e)\r\n  })\r\n  node.on('dblclick', e => {\r\n    this.mindMap.emit('node_img_dblclick', this, e, node)\r\n  })\r\n  node.on('mouseenter', e => {\r\n    this.mindMap.emit('node_img_mouseenter', this, node, e)\r\n  })\r\n  node.on('mouseleave', e => {\r\n    this.mindMap.emit('node_img_mouseleave', this, node, e)\r\n  })\r\n  node.on('mousemove', e => {\r\n    this.mindMap.emit('node_img_mousemove', this, node, e)\r\n  })\r\n  return {\r\n    node,\r\n    width: imgSize[0],\r\n    height: imgSize[1]\r\n  }\r\n}\r\n\r\n//  \r\nfunction getImgShowSize() {\r\n  const { custom, width, height } = this.getData('imageSize')\r\n  // \r\n  if (custom) return [width, height]\r\n  return resizeImgSize(\r\n    width,\r\n    height,\r\n    this.mindMap.themeConfig.imgMaxWidth,\r\n    this.mindMap.themeConfig.imgMaxHeight\r\n  )\r\n}\r\n\r\n//  icon\r\nfunction createIconNode() {\r\n  let _data = this.getData()\r\n  if (!_data.icon || _data.icon.length <= 0) {\r\n    return []\r\n  }\r\n  let iconSize = this.mindMap.themeConfig.iconSize\r\n  return _data.icon.map(item => {\r\n    let src = iconsSvg.getNodeIconListIcon(\r\n      item,\r\n      this.mindMap.opt.iconList || []\r\n    )\r\n    let node = null\r\n    // svg\r\n    if (/^<svg/.test(src)) {\r\n      node = SVG(src)\r\n    } else {\r\n      // \r\n      node = new SVGImage().load(src)\r\n    }\r\n    node.size(iconSize, iconSize)\r\n    node.on('click', e => {\r\n      this.mindMap.emit('node_icon_click', this, item, e, node)\r\n    })\r\n    node.on('mouseenter', e => {\r\n      this.mindMap.emit('node_icon_mouseenter', this, item, e, node)\r\n    })\r\n    node.on('mouseleave', e => {\r\n      this.mindMap.emit('node_icon_mouseleave', this, item, e, node)\r\n    })\r\n    return {\r\n      node,\r\n      width: iconSize,\r\n      height: iconSize\r\n    }\r\n  })\r\n}\r\n\r\n// \r\nfunction createRichTextNode(specifyText) {\r\n  const hasCustomWidth = this.hasCustomWidth()\r\n  let text =\r\n    typeof specifyText === 'string' ? specifyText : this.getData('text')\r\n  let { textAutoWrapWidth, emptyTextMeasureHeightText } = this.mindMap.opt\r\n  textAutoWrapWidth = hasCustomWidth ? this.customTextWidth : textAutoWrapWidth\r\n  const g = new G()\r\n  // \r\n  let recoverText = false\r\n  if (this.getData('resetRichText')) {\r\n    delete this.nodeData.data.resetRichText\r\n    recoverText = true\r\n  }\r\n  if (recoverText && !isUndef(text)) {\r\n    if (checkIsRichText(text)) {\r\n      // \r\n      text = removeRichTextStyes(text)\r\n    } else {\r\n      // \r\n      text = `<p>${text}</p>`\r\n    }\r\n    this.setData({\r\n      text\r\n    })\r\n  }\r\n  // \r\n  const nodeTextStyleList = []\r\n  const nodeRichTextStyles = getNodeRichTextStyles(this)\r\n  Object.keys(nodeRichTextStyles).forEach(prop => {\r\n    nodeTextStyleList.push([prop, nodeRichTextStyles[prop]])\r\n  })\r\n  // \r\n  if (!this.mindMap.commonCaches.measureRichtextNodeTextSizeEl) {\r\n    this.mindMap.commonCaches.measureRichtextNodeTextSizeEl =\r\n      document.createElement('div')\r\n    this.mindMap.commonCaches.measureRichtextNodeTextSizeEl.style.position =\r\n      'fixed'\r\n    this.mindMap.commonCaches.measureRichtextNodeTextSizeEl.style.left =\r\n      '-999999px'\r\n    this.mindMap.el.appendChild(\r\n      this.mindMap.commonCaches.measureRichtextNodeTextSizeEl\r\n    )\r\n  }\r\n  const div = this.mindMap.commonCaches.measureRichtextNodeTextSizeEl\r\n  // \r\n  nodeTextStyleList.forEach(([prop, value]) => {\r\n    div.style[prop] = value\r\n  })\r\n  div.style.lineHeight = 1.2\r\n  const html = `<div>${text}</div>`\r\n  div.innerHTML = html\r\n  const el = div.children[0]\r\n  el.classList.add('smm-richtext-node-wrap')\r\n  addXmlns(el)\r\n  el.style.maxWidth = textAutoWrapWidth + 'px'\r\n  if (hasCustomWidth) {\r\n    el.style.width = this.customTextWidth + 'px'\r\n  } else {\r\n    el.style.width = ''\r\n  }\r\n  let { width, height } = el.getBoundingClientRect()\r\n  // \r\n  if (height <= 0) {\r\n    div.innerHTML = `<p>${emptyTextMeasureHeightText}</p>`\r\n    let elTmp = div.children[0]\r\n    elTmp.classList.add('smm-richtext-node-wrap')\r\n    height = elTmp.getBoundingClientRect().height\r\n    div.innerHTML = html\r\n  }\r\n  width = Math.min(Math.ceil(width) + 1, textAutoWrapWidth) // getBoundingClientRect\r\n  height = Math.ceil(height)\r\n  g.attr('data-width', width)\r\n  g.attr('data-height', height)\r\n  const foreignObject = createForeignObjectNode({\r\n    el: div.children[0],\r\n    width,\r\n    height\r\n  })\r\n  // \r\n  // \r\n  const foreignObjectStyle = {\r\n    'line-height': 1.2\r\n  }\r\n  nodeTextStyleList.forEach(([prop, value]) => {\r\n    foreignObjectStyle[camelCaseToHyphen(prop)] = value\r\n  })\r\n  foreignObject.css(foreignObjectStyle)\r\n  g.add(foreignObject)\r\n  return {\r\n    node: g,\r\n    nodeContent: foreignObject,\r\n    width,\r\n    height\r\n  }\r\n}\r\n\r\n//  \r\nfunction createTextNode(specifyText) {\r\n  if (this.getData('needUpdate')) {\r\n    delete this.nodeData.data.needUpdate\r\n  }\r\n  // \r\n  if (this.getData('richText')) {\r\n    return this.createRichTextNode(specifyText)\r\n  }\r\n  const text =\r\n    typeof specifyText === 'string' ? specifyText : this.getData('text')\r\n  if (this.getData('resetRichText')) {\r\n    delete this.nodeData.data.resetRichText\r\n  }\r\n  const g = new G()\r\n  const fontSize = this.getStyle('fontSize', false)\r\n  const textAlign = this.getStyle('textAlign', false)\r\n  // \r\n  let textArr = []\r\n  if (!isUndef(text)) {\r\n    textArr = String(text).split(/\\n/gim)\r\n  }\r\n  const { textAutoWrapWidth: maxWidth, emptyTextMeasureHeightText } =\r\n    this.mindMap.opt\r\n  let isMultiLine = textArr.length > 1\r\n  textArr.forEach((item, index) => {\r\n    let arr = item.split('')\r\n    let lines = []\r\n    let line = []\r\n    while (arr.length) {\r\n      let str = arr.shift()\r\n      let text = [...line, str].join('')\r\n      if (measureText(text, this.style).width <= maxWidth) {\r\n        line.push(str)\r\n      } else {\r\n        lines.push(line.join(''))\r\n        line = [str]\r\n      }\r\n    }\r\n    if (line.length > 0) {\r\n      lines.push(line.join(''))\r\n    }\r\n    if (lines.length > 1) {\r\n      isMultiLine = true\r\n    }\r\n    textArr[index] = lines.join('\\n')\r\n  })\r\n  textArr = textArr.join('\\n').replace(/\\n$/g, '').split(/\\n/gim)\r\n  textArr.forEach((item, index) => {\r\n    // \r\n    // https://github.com/wanglin2/mind-map/issues/1037\r\n    if (item === '') {\r\n      item = ''\r\n    }\r\n    const node = new Text().text(item)\r\n    node.addClass('smm-text-node-wrap')\r\n    node.attr(\r\n      'text-anchor',\r\n      {\r\n        left: 'start',\r\n        center: 'middle',\r\n        right: 'end'\r\n      }[textAlign] || 'start'\r\n    )\r\n    this.style.text(node)\r\n    node.y(\r\n      fontSize * noneRichTextNodeLineHeight * index +\r\n        ((noneRichTextNodeLineHeight - 1) * fontSize) / 2\r\n    )\r\n    g.add(node)\r\n  })\r\n  let { width, height } = g.bbox()\r\n  // \r\n  if (height <= 0) {\r\n    const tmpNode = new Text().text(emptyTextMeasureHeightText)\r\n    this.style.text(tmpNode)\r\n    const tmpBbox = tmpNode.bbox()\r\n    height = tmpBbox.height\r\n  }\r\n  width = Math.min(Math.ceil(width), maxWidth)\r\n  height = Math.ceil(height)\r\n  g.attr('data-width', width)\r\n  g.attr('data-height', height)\r\n  g.attr('data-ismultiLine', isMultiLine || textArr.length > 1)\r\n  return {\r\n    node: g,\r\n    width,\r\n    height\r\n  }\r\n}\r\n\r\n//  \r\nfunction createHyperlinkNode() {\r\n  const { hyperlink, hyperlinkTitle } = this.getData()\r\n  if (!hyperlink) {\r\n    return\r\n  }\r\n  const { customHyperlinkJump, hyperlinkIcon } = this.mindMap.opt\r\n  const { icon, style } = hyperlinkIcon\r\n  const iconSize = this.getNodeIconSize('hyperlinkIcon')\r\n  const node = new SVG().size(iconSize, iconSize)\r\n  // \r\n  const a = new A().to(hyperlink).target('_blank')\r\n  a.node.addEventListener('click', e => {\r\n    if (typeof customHyperlinkJump === 'function') {\r\n      e.preventDefault()\r\n      customHyperlinkJump(hyperlink, this)\r\n    }\r\n  })\r\n  if (hyperlinkTitle) {\r\n    node.add(SVG(`<title>${hyperlinkTitle}</title>`))\r\n  }\r\n  // \r\n  a.rect(iconSize, iconSize).fill({ color: 'transparent' })\r\n  // \r\n  const iconNode = SVG(icon || iconsSvg.hyperlink).size(iconSize, iconSize)\r\n  this.style.iconNode(iconNode, style.color)\r\n  a.add(iconNode)\r\n  node.add(a)\r\n  return {\r\n    node,\r\n    width: iconSize,\r\n    height: iconSize\r\n  }\r\n}\r\n\r\n//  \r\nfunction createTagNode() {\r\n  const tagData = this.getData('tag')\r\n  if (!tagData || tagData.length <= 0) {\r\n    return []\r\n  }\r\n  let { maxTag, tagsColorMap } = this.mindMap.opt\r\n  tagsColorMap = tagsColorMap || {}\r\n  const nodes = []\r\n  tagData.slice(0, maxTag).forEach((item, index) => {\r\n    let str = ''\r\n    let style = {\r\n      ...defaultTagStyle\r\n    }\r\n    // \r\n    if (typeof item === 'string') {\r\n      str = item\r\n    } else {\r\n      // v0.10.3+\r\n      str = item.text\r\n      style = { ...defaultTagStyle, ...item.style }\r\n    }\r\n    // \r\n    const hasCustomWidth = typeof style.width !== 'undefined'\r\n    // \r\n    const tag = new G()\r\n    tag.on('click', () => {\r\n      this.mindMap.emit('node_tag_click', this, item, index, tag)\r\n    })\r\n    // \r\n    const text = new Text().text(str)\r\n    this.style.tagText(text, style)\r\n    // \r\n    const { width: textWidth, height: textHeight } = text.bbox()\r\n    // \r\n    const rectWidth = hasCustomWidth\r\n      ? style.width\r\n      : textWidth + style.paddingX * 2\r\n    // \r\n    const maxWidth = hasCustomWidth ? Math.max(rectWidth, textWidth) : rectWidth\r\n    const maxHeight = Math.max(style.height, textHeight)\r\n    // \r\n    if (hasCustomWidth) {\r\n      text.x((maxWidth - textWidth) / 2)\r\n    } else {\r\n      text.x(hasCustomWidth ? 0 : style.paddingX)\r\n    }\r\n    text.cy(-maxHeight / 2)\r\n    // \r\n    const rect = new Rect().size(rectWidth, style.height).cy(-maxHeight / 2)\r\n    if (hasCustomWidth) {\r\n      rect.x((maxWidth - rectWidth) / 2)\r\n    }\r\n    this.style.tagRect(rect, {\r\n      ...style,\r\n      fill:\r\n        style.fill || // \r\n        tagsColorMap[text.node.textContent] || // tagsColorMap\r\n        generateColorByContent(text.node.textContent) // \r\n    })\r\n    tag.add(rect).add(text)\r\n    nodes.push({\r\n      node: tag,\r\n      width: maxWidth,\r\n      height: maxHeight\r\n    })\r\n  })\r\n  return nodes\r\n}\r\n\r\n//  \r\nfunction createNoteNode() {\r\n  if (!this.getData('note')) {\r\n    return null\r\n  }\r\n  const { icon, style } = this.mindMap.opt.noteIcon\r\n  const iconSize = this.getNodeIconSize('noteIcon')\r\n  const node = new SVG()\r\n    .attr('cursor', 'pointer')\r\n    .addClass('smm-node-note')\r\n    .size(iconSize, iconSize)\r\n  // \r\n  node.add(new Rect().size(iconSize, iconSize).fill({ color: 'transparent' }))\r\n  // \r\n  const iconNode = SVG(icon || iconsSvg.note).size(iconSize, iconSize)\r\n  this.style.iconNode(iconNode, style.color)\r\n  node.add(iconNode)\r\n  // tooltip\r\n  if (!this.mindMap.opt.customNoteContentShow) {\r\n    if (!this.noteEl) {\r\n      this.noteEl = document.createElement('div')\r\n      this.noteEl.style.cssText = `\r\n          position: fixed;\r\n          padding: 10px;\r\n          border-radius: 5px;\r\n          box-shadow: 0 2px 5px rgb(0 0 0 / 10%);\r\n          display: none;\r\n          background-color: #fff;\r\n          z-index: ${this.mindMap.opt.nodeNoteTooltipZIndex}\r\n      `\r\n      const targetNode =\r\n        this.mindMap.opt.customInnerElsAppendTo || document.body\r\n      targetNode.appendChild(this.noteEl)\r\n    }\r\n    this.noteEl.innerText = this.getData('note')\r\n  }\r\n  node.on('mouseover', () => {\r\n    const { left, top } = this.getNoteContentPosition()\r\n    if (!this.mindMap.opt.customNoteContentShow) {\r\n      this.noteEl.style.left = left + 'px'\r\n      this.noteEl.style.top = top + 'px'\r\n      this.noteEl.style.display = 'block'\r\n    } else {\r\n      this.mindMap.opt.customNoteContentShow.show(\r\n        this.getData('note'),\r\n        left,\r\n        top,\r\n        this\r\n      )\r\n    }\r\n  })\r\n  node.on('mouseout', () => {\r\n    if (!this.mindMap.opt.customNoteContentShow) {\r\n      this.noteEl.style.display = 'none'\r\n    } else {\r\n      this.mindMap.opt.customNoteContentShow.hide()\r\n    }\r\n  })\r\n  node.on('click', e => {\r\n    this.mindMap.emit('node_note_click', this, e, node)\r\n  })\r\n  node.on('dblclick', e => {\r\n    this.mindMap.emit('node_note_dblclick', this, e, node)\r\n  })\r\n  return {\r\n    node,\r\n    width: iconSize,\r\n    height: iconSize\r\n  }\r\n}\r\n\r\n//  \r\nfunction createAttachmentNode() {\r\n  const { attachmentUrl, attachmentName } = this.getData()\r\n  if (!attachmentUrl) {\r\n    return\r\n  }\r\n  const iconSize = this.getNodeIconSize('attachmentIcon')\r\n  const { icon, style } = this.mindMap.opt.attachmentIcon\r\n  const node = new SVG().attr('cursor', 'pointer').size(iconSize, iconSize)\r\n  if (attachmentName) {\r\n    node.add(SVG(`<title>${attachmentName}</title>`))\r\n  }\r\n  // \r\n  node.add(new Rect().size(iconSize, iconSize).fill({ color: 'transparent' }))\r\n  // \r\n  const iconNode = SVG(icon || iconsSvg.attachment).size(iconSize, iconSize)\r\n  this.style.iconNode(iconNode, style.color)\r\n  node.add(iconNode)\r\n  node.on('click', e => {\r\n    this.mindMap.emit('node_attachmentClick', this, e, node)\r\n  })\r\n  node.on('contextmenu', e => {\r\n    this.mindMap.emit('node_attachmentContextmenu', this, e, node)\r\n  })\r\n  return {\r\n    node,\r\n    width: iconSize,\r\n    height: iconSize\r\n  }\r\n}\r\n\r\n// \r\nfunction getNodeIconSize(prop) {\r\n  const { style } = this.mindMap.opt[prop]\r\n  return isUndef(style.size) ? this.mindMap.themeConfig.iconSize : style.size\r\n}\r\n\r\n// \r\nfunction getNoteContentPosition() {\r\n  const iconSize = this.getNodeIconSize('noteIcon')\r\n  const { scaleY } = this.mindMap.view.getTransformData().transform\r\n  const iconSizeAddScale = iconSize * scaleY\r\n  let { left, top } = this._noteData.node.node.getBoundingClientRect()\r\n  top += iconSizeAddScale\r\n  return {\r\n    left,\r\n    top\r\n  }\r\n}\r\n\r\n// \r\nfunction measureCustomNodeContentSize(content) {\r\n  if (!this.mindMap.commonCaches.measureCustomNodeContentSizeEl) {\r\n    this.mindMap.commonCaches.measureCustomNodeContentSizeEl =\r\n      document.createElement('div')\r\n    this.mindMap.commonCaches.measureCustomNodeContentSizeEl.style.cssText = `\r\n      position: fixed;\r\n      left: -99999px;\r\n      top: -99999px;\r\n    `\r\n    this.mindMap.el.appendChild(\r\n      this.mindMap.commonCaches.measureCustomNodeContentSizeEl\r\n    )\r\n  }\r\n  this.mindMap.commonCaches.measureCustomNodeContentSizeEl.innerHTML = ''\r\n  this.mindMap.commonCaches.measureCustomNodeContentSizeEl.appendChild(content)\r\n  let rect =\r\n    this.mindMap.commonCaches.measureCustomNodeContentSizeEl.getBoundingClientRect()\r\n  return {\r\n    width: rect.width,\r\n    height: rect.height\r\n  }\r\n}\r\n\r\n// \r\nfunction isUseCustomNodeContent() {\r\n  return !!this._customNodeContent\r\n}\r\n\r\nexport default {\r\n  createImgNode,\r\n  getImgShowSize,\r\n  createIconNode,\r\n  createRichTextNode,\r\n  createTextNode,\r\n  createHyperlinkNode,\r\n  createTagNode,\r\n  createNoteNode,\r\n  createAttachmentNode,\r\n  getNoteContentPosition,\r\n  getNodeIconSize,\r\n  measureCustomNodeContentSize,\r\n  isUseCustomNodeContent\r\n}\r\n","import { Rect } from '@svgdotjs/svg.js'\r\n\r\n// \r\nfunction renderExpandBtnPlaceholderRect() {\r\n  // \r\n  if (this.getChildrenLength() <= 0 || this.isRoot) {\r\n    return\r\n  }\r\n  // \r\n  const { alwaysShowExpandBtn, notShowExpandBtn, expandBtnSize } =\r\n    this.mindMap.opt\r\n  if (!alwaysShowExpandBtn && !notShowExpandBtn) {\r\n    let { width, height } = this\r\n    if (!this._unVisibleRectRegionNode) {\r\n      this._unVisibleRectRegionNode = new Rect()\r\n      this._unVisibleRectRegionNode.fill({\r\n        color: 'transparent'\r\n      })\r\n    }\r\n    this.group.add(this._unVisibleRectRegionNode)\r\n    this.renderer.layout.renderExpandBtnRect(\r\n      this._unVisibleRectRegionNode,\r\n      expandBtnSize,\r\n      width,\r\n      height,\r\n      this\r\n    )\r\n  }\r\n}\r\n\r\n// \r\nfunction clearExpandBtnPlaceholderRect() {\r\n  if (!this._unVisibleRectRegionNode) {\r\n    return\r\n  }\r\n  this._unVisibleRectRegionNode.remove()\r\n  this._unVisibleRectRegionNode = null\r\n}\r\n\r\n// \r\nfunction updateExpandBtnPlaceholderRect() {\r\n  // \r\n  if (this.needRerenderExpandBtnPlaceholderRect) {\r\n    this.needRerenderExpandBtnPlaceholderRect = false\r\n    this.renderExpandBtnPlaceholderRect()\r\n  }\r\n  // \r\n  if (this.getChildrenLength() > 0) {\r\n    if (!this._unVisibleRectRegionNode) {\r\n      this.renderExpandBtnPlaceholderRect()\r\n    }\r\n  } else {\r\n    // \r\n    if (this._unVisibleRectRegionNode) {\r\n      this.clearExpandBtnPlaceholderRect()\r\n    }\r\n  }\r\n}\r\n\r\nexport default {\r\n  renderExpandBtnPlaceholderRect,\r\n  clearExpandBtnPlaceholderRect,\r\n  updateExpandBtnPlaceholderRect\r\n}\r\n","import { Rect } from '@svgdotjs/svg.js'\r\n\r\n// \r\nfunction initDragHandle() {\r\n  if (!this.checkEnableDragModifyNodeWidth()) {\r\n    return\r\n  }\r\n  // \r\n  this._dragHandleNodes = null\r\n  // \r\n  this.dragHandleWidth = 4\r\n  // x\r\n  this.dragHandleMousedownX = 0\r\n  // \r\n  this.isDragHandleMousedown = false\r\n  // \r\n  this.dragHandleIndex = 0\r\n  // customTextWidth\r\n  this.dragHandleMousedownCustomTextWidth = 0\r\n  // \r\n  this.dragHandleMousedownBodyCursor = ''\r\n  // left\r\n  this.dragHandleMousedownLeft = 0\r\n\r\n  this.onDragMousemoveHandle = this.onDragMousemoveHandle.bind(this)\r\n  window.addEventListener('mousemove', this.onDragMousemoveHandle)\r\n  this.onDragMouseupHandle = this.onDragMouseupHandle.bind(this)\r\n  window.addEventListener('mouseup', this.onDragMouseupHandle)\r\n  this.mindMap.on('node_mouseup', this.onDragMouseupHandle)\r\n}\r\n\r\n// \r\nfunction onDragMousemoveHandle(e) {\r\n  if (!this.isDragHandleMousedown) return\r\n  e.stopPropagation()\r\n  e.preventDefault()\r\n  let {\r\n    minNodeTextModifyWidth,\r\n    maxNodeTextModifyWidth,\r\n    isUseCustomNodeContent,\r\n    customCreateNodeContent\r\n  } = this.mindMap.opt\r\n  const useCustomContent =\r\n    isUseCustomNodeContent && customCreateNodeContent && this._customNodeContent\r\n  document.body.style.cursor = 'ew-resize'\r\n  this.group.css({\r\n    cursor: 'ew-resize'\r\n  })\r\n  const { scaleX } = this.mindMap.draw.transform()\r\n  const ox = e.clientX - this.dragHandleMousedownX\r\n  let newWidth =\r\n    this.dragHandleMousedownCustomTextWidth +\r\n    (this.dragHandleIndex === 0 ? -ox : ox) / scaleX\r\n  newWidth = Math.max(newWidth, minNodeTextModifyWidth)\r\n  if (maxNodeTextModifyWidth !== -1) {\r\n    newWidth = Math.min(newWidth, maxNodeTextModifyWidth)\r\n  }\r\n  // \r\n  if (!useCustomContent && this.getData('image')) {\r\n    const imgSize = this.getImgShowSize()\r\n    if (\r\n      this._rectInfo.textContentWidth - this.customTextWidth + newWidth <=\r\n      imgSize[0]\r\n    ) {\r\n      newWidth =\r\n        imgSize[0] + this.customTextWidth - this._rectInfo.textContentWidth\r\n    }\r\n  }\r\n  this.customTextWidth = newWidth\r\n  if (this.dragHandleIndex === 0) {\r\n    this.left = this.dragHandleMousedownLeft + ox / scaleX\r\n  }\r\n  // \r\n  this.reRender(useCustomContent ? [] : ['text'], {\r\n    ignoreUpdateCustomTextWidth: true\r\n  })\r\n}\r\n\r\n// \r\nfunction onDragMouseupHandle() {\r\n  if (!this.isDragHandleMousedown) return\r\n  document.body.style.cursor = this.dragHandleMousedownBodyCursor\r\n  this.group.css({\r\n    cursor: 'default'\r\n  })\r\n  this.isDragHandleMousedown = false\r\n  this.dragHandleMousedownX = 0\r\n  this.dragHandleIndex = 0\r\n  this.dragHandleMousedownCustomTextWidth = 0\r\n  this.setData({\r\n    customTextWidth: this.customTextWidth\r\n  })\r\n  this.mindMap.render()\r\n  this.mindMap.emit('dragModifyNodeWidthEnd', this)\r\n}\r\n\r\n// \r\nfunction createDragHandleNode() {\r\n  const list = [new Rect(), new Rect()]\r\n  list.forEach((node, index) => {\r\n    node\r\n      .size(this.dragHandleWidth, this.height)\r\n      .fill({\r\n        color: 'transparent'\r\n      })\r\n      .css({\r\n        cursor: 'ew-resize'\r\n      })\r\n    node.on('mousedown', e => {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      this.dragHandleMousedownX = e.clientX\r\n      this.dragHandleIndex = index\r\n      this.dragHandleMousedownCustomTextWidth =\r\n        this.customTextWidth === undefined\r\n          ? this._textData\r\n            ? this._textData.width\r\n            : this.width\r\n          : this.customTextWidth\r\n      this.dragHandleMousedownBodyCursor = document.body.style.cursor\r\n      this.dragHandleMousedownLeft = this.left\r\n      this.isDragHandleMousedown = true\r\n    })\r\n  })\r\n  return list\r\n}\r\n\r\n// \r\nfunction updateDragHandle() {\r\n  if (!this.checkEnableDragModifyNodeWidth()) return\r\n  if (!this._dragHandleNodes) {\r\n    this._dragHandleNodes = this.createDragHandleNode()\r\n  }\r\n  if (this.getData('isActive')) {\r\n    this._dragHandleNodes.forEach(node => {\r\n      node.height(this.height)\r\n      this.group.add(node)\r\n    })\r\n    this._dragHandleNodes[1].x(this.width - this.dragHandleWidth)\r\n  } else {\r\n    this._dragHandleNodes.forEach(node => {\r\n      node.remove()\r\n    })\r\n  }\r\n}\r\n\r\nexport default {\r\n  initDragHandle,\r\n  onDragMousemoveHandle,\r\n  onDragMouseupHandle,\r\n  createDragHandleNode,\r\n  updateDragHandle\r\n}\r\n","import { Circle, G, Text, Image } from '@svgdotjs/svg.js'\r\nimport { generateColorByContent } from '../../../utils/index'\r\n\r\n// \r\n\r\n// \r\nfunction createUserListNode() {\r\n  // \r\n  if (!this.mindMap.cooperate) return\r\n  this._userListGroup = new G()\r\n  this.group.add(this._userListGroup)\r\n}\r\n\r\n// \r\nfunction createTextAvatar(item) {\r\n  const { avatarSize, fontSize } = this.mindMap.opt.cooperateStyle\r\n  const g = new G()\r\n  const str = item.isMore ? item.name : String(item.name)[0]\r\n  // \r\n  const circle = new Circle().size(avatarSize, avatarSize)\r\n  circle.fill({\r\n    color: item.color || generateColorByContent(str)\r\n  })\r\n  // \r\n  const text = new Text()\r\n    .text(str)\r\n    .fill({\r\n      color: '#fff'\r\n    })\r\n    .css({\r\n      'font-size': fontSize + 'px'\r\n    })\r\n    .dx(-fontSize / 2)\r\n    .dy((avatarSize - fontSize) / 2)\r\n  g.add(circle).add(text)\r\n  return g\r\n}\r\n\r\n// \r\nfunction createImageAvatar(item) {\r\n  const { avatarSize } = this.mindMap.opt.cooperateStyle\r\n  return new Image().load(item.avatar).size(avatarSize, avatarSize)\r\n}\r\n\r\n// \r\nfunction updateUserListNode() {\r\n  if (!this._userListGroup) return\r\n  const { avatarSize } = this.mindMap.opt.cooperateStyle\r\n  this._userListGroup.clear()\r\n  // \r\n  const length = this.userList.length\r\n  const maxShowCount = Math.floor(this.width / avatarSize)\r\n  const list = []\r\n  if (length > maxShowCount) {\r\n    // \r\n    list.push(...this.userList.slice(0, maxShowCount - 1), {\r\n      isMore: true,\r\n      name: '+' + (length - maxShowCount + 1)\r\n    })\r\n  } else {\r\n    list.push(...this.userList)\r\n  }\r\n  list.forEach((item, index) => {\r\n    let node = null\r\n    if (item.avatar) {\r\n      node = this.createImageAvatar(item)\r\n    } else {\r\n      node = this.createTextAvatar(item)\r\n    }\r\n    node.on('click', (e) => {\r\n      this.mindMap.emit('node_cooperate_avatar_click', item, this, node, e)\r\n    })\r\n    node.on('mouseenter', (e) => {\r\n      this.mindMap.emit('node_cooperate_avatar_mouseenter', item, this, node, e)\r\n    })\r\n    node.on('mouseleave', (e) => {\r\n      this.mindMap.emit('node_cooperate_avatar_mouseleave', item, this, node, e)\r\n    })\r\n    node.x(index * avatarSize).cy(-avatarSize / 2)\r\n    this._userListGroup.add(node)\r\n  })\r\n}\r\n\r\n// \r\nfunction addUser(userInfo) {\r\n  if (\r\n    this.userList.find(item => {\r\n      return item.id == userInfo.id\r\n    })\r\n  )\r\n    return\r\n  this.userList.push(userInfo)\r\n  this.updateUserListNode()\r\n}\r\n\r\n// \r\nfunction removeUser(userInfo) {\r\n  const index = this.userList.findIndex(item => {\r\n    return item.id == userInfo.id\r\n  })\r\n  if (index === -1) return\r\n  this.userList.splice(index, 1)\r\n  this.updateUserListNode()\r\n}\r\n\r\n// \r\nfunction emptyUser() {\r\n  this.userList = []\r\n  this.updateUserListNode()\r\n}\r\n\r\nexport default {\r\n  createUserListNode,\r\n  updateUserListNode,\r\n  createTextAvatar,\r\n  createImageAvatar,\r\n  addUser,\r\n  removeUser,\r\n  emptyUser\r\n}\r\n","import btnsSvg from '../../../svg/btns'\r\nimport { SVG, Circle, G } from '@svgdotjs/svg.js'\r\n\r\nfunction initQuickCreateChildBtn() {\r\n  if (this.isGeneralization) return\r\n  this._quickCreateChildBtn = null\r\n  this._showQuickCreateChildBtn = false\r\n}\r\n\r\n// \r\nfunction showQuickCreateChildBtn() {\r\n  if (this.isGeneralization || this.getChildrenLength() > 0) return\r\n  // \r\n  if (this._quickCreateChildBtn) {\r\n    this.group.add(this._quickCreateChildBtn)\r\n  } else {\r\n    const { quickCreateChildBtnIcon, expandBtnStyle, expandBtnSize } =\r\n      this.mindMap.opt\r\n    const { icon, style } = quickCreateChildBtnIcon\r\n    let { color, fill } = expandBtnStyle || {\r\n      color: '#808080',\r\n      fill: '#fff'\r\n    }\r\n    color = style.color || color\r\n    // \r\n    const iconNode = SVG(icon || btnsSvg.quickCreateChild).size(\r\n      expandBtnSize,\r\n      expandBtnSize\r\n    )\r\n    iconNode.css({\r\n      cursor: 'pointer'\r\n    })\r\n    iconNode.x(0).y(-expandBtnSize / 2)\r\n    this.style.iconNode(iconNode, color)\r\n    // \r\n    const fillNode = new Circle().size(expandBtnSize)\r\n    fillNode.x(0).y(-expandBtnSize / 2)\r\n    fillNode.fill({ color: fill }).css({\r\n      cursor: 'pointer'\r\n    })\r\n    // \r\n    this._quickCreateChildBtn = new G()\r\n    this._quickCreateChildBtn.add(fillNode).add(iconNode)\r\n    this._quickCreateChildBtn.on('click', e => {\r\n      e.stopPropagation()\r\n      this.mindMap.emit('quick_create_btn_click', this)\r\n      const { customQuickCreateChildBtnClick } = this.mindMap.opt\r\n      if (typeof customQuickCreateChildBtnClick === 'function') {\r\n        customQuickCreateChildBtnClick(this)\r\n        return\r\n      }\r\n      this.mindMap.execCommand('INSERT_CHILD_NODE', true, [this])\r\n    })\r\n    this._quickCreateChildBtn.on('dblclick', e => {\r\n      e.stopPropagation()\r\n    })\r\n    this._quickCreateChildBtn.addClass('smm-quick-create-child-btn')\r\n    this.group.add(this._quickCreateChildBtn)\r\n  }\r\n  this._showQuickCreateChildBtn = true\r\n  // \r\n  this.renderer.layout.renderExpandBtn(this, this._quickCreateChildBtn)\r\n}\r\n\r\n//  \r\nfunction removeQuickCreateChildBtn() {\r\n  if (this.isGeneralization) return\r\n  if (this._quickCreateChildBtn && this._showQuickCreateChildBtn) {\r\n    this._quickCreateChildBtn.remove()\r\n    this._showQuickCreateChildBtn = false\r\n  }\r\n}\r\n\r\n// \r\nfunction hideQuickCreateChildBtn() {\r\n  if (this.isGeneralization) return\r\n  const { isActive } = this.getData()\r\n  if (!isActive) {\r\n    this.removeQuickCreateChildBtn()\r\n  }\r\n}\r\n\r\nexport default {\r\n  initQuickCreateChildBtn,\r\n  showQuickCreateChildBtn,\r\n  removeQuickCreateChildBtn,\r\n  hideQuickCreateChildBtn\r\n}\r\n","import { CONSTANTS } from '../../../constants/constant'\r\nimport { G, Rect } from '@svgdotjs/svg.js'\r\nimport { createForeignObjectNode } from '../../../utils/index'\r\n\r\n// \r\nfunction getImgTextMarin(dir, imgWidth, textWidth, imgHeight, textHeight) {\r\n  // \r\n  const { imgTextMargin } = this.mindMap.opt\r\n  if (dir === 'v') {\r\n    // \r\n    return imgHeight > 0 && textHeight > 0 ? imgTextMargin : 0\r\n  } else {\r\n    // \r\n    return imgWidth > 0 && textWidth > 0 ? imgTextMargin : 0\r\n  }\r\n}\r\n\r\n// \r\nfunction getTagContentSize(space) {\r\n  let maxTagHeight = 0\r\n  let width = this._tagData.reduce((sum, cur) => {\r\n    maxTagHeight = Math.max(maxTagHeight, cur.height)\r\n    return (sum += cur.width)\r\n  }, 0)\r\n  width += (this._tagData.length - 1) * space\r\n  return {\r\n    width,\r\n    height: maxTagHeight\r\n  }\r\n}\r\n\r\n//  \r\nfunction getNodeRect() {\r\n  // \r\n  if (this.isUseCustomNodeContent()) {\r\n    const rect = this.measureCustomNodeContentSize(this._customNodeContent)\r\n    return {\r\n      width: this.hasCustomWidth() ? this.customTextWidth : rect.width,\r\n      height: rect.height\r\n    }\r\n  }\r\n  const { TAG_PLACEMENT, IMG_PLACEMENT } = CONSTANTS\r\n  const { textContentMargin } = this.mindMap.opt\r\n  const tagPlacement = this.getStyle('tagPlacement') || TAG_PLACEMENT.RIGHT\r\n  const tagIsBottom = tagPlacement === TAG_PLACEMENT.BOTTOM\r\n  const imgPlacement = this.getStyle('imgPlacement') || IMG_PLACEMENT.TOP\r\n  // \r\n  let imgContentWidth = 0\r\n  let imgContentHeight = 0\r\n  let textContentWidth = 0\r\n  let textContentHeight = 0\r\n  let tagContentWidth = 0\r\n  let tagContentHeight = 0\r\n  let spaceCount = 0\r\n  // \r\n  if (this._imgData) {\r\n    imgContentWidth = this._imgData.width\r\n    imgContentHeight = this._imgData.height\r\n  }\r\n  // \r\n  this.mindMap.nodeInnerPrefixList.forEach(item => {\r\n    const itemData = this[`_${item.name}Data`]\r\n    if (itemData) {\r\n      textContentWidth += itemData.width\r\n      textContentHeight = Math.max(textContentHeight, itemData.height)\r\n      spaceCount++\r\n    }\r\n  })\r\n  // \r\n  if (this._prefixData) {\r\n    textContentWidth += this._prefixData.width\r\n    textContentHeight = Math.max(textContentHeight, this._prefixData.height)\r\n    spaceCount++\r\n  }\r\n  // \r\n  if (this._iconData.length > 0) {\r\n    textContentWidth +=\r\n      this._iconData.reduce((sum, cur) => {\r\n        textContentHeight = Math.max(textContentHeight, cur.height)\r\n        return (sum += cur.width)\r\n      }, 0) +\r\n      (this._iconData.length - 1) * textContentMargin\r\n    spaceCount++\r\n  }\r\n  // \r\n  if (this._textData) {\r\n    textContentWidth += this._textData.width\r\n    textContentHeight = Math.max(textContentHeight, this._textData.height)\r\n    spaceCount++\r\n  }\r\n  // \r\n  if (this._hyperlinkData) {\r\n    textContentWidth += this._hyperlinkData.width\r\n    textContentHeight = Math.max(textContentHeight, this._hyperlinkData.height)\r\n    spaceCount++\r\n  }\r\n  // \r\n  if (this._tagData.length > 0) {\r\n    const { width: totalTagWidth, height: maxTagHeight } =\r\n      this.getTagContentSize(textContentMargin)\r\n    if (tagIsBottom) {\r\n      // \r\n      tagContentWidth = totalTagWidth\r\n      tagContentHeight = maxTagHeight\r\n    } else {\r\n      // \r\n      textContentWidth += totalTagWidth\r\n      textContentHeight = Math.max(textContentHeight, maxTagHeight)\r\n      spaceCount++\r\n    }\r\n  }\r\n  // \r\n  if (this._noteData) {\r\n    textContentWidth += this._noteData.width\r\n    textContentHeight = Math.max(textContentHeight, this._noteData.height)\r\n    spaceCount++\r\n  }\r\n  // \r\n  if (this._attachmentData) {\r\n    textContentWidth += this._attachmentData.width\r\n    textContentHeight = Math.max(textContentHeight, this._attachmentData.height)\r\n    spaceCount++\r\n  }\r\n  // \r\n  if (this._postfixData) {\r\n    textContentWidth += this._postfixData.width\r\n    textContentHeight = Math.max(textContentHeight, this._postfixData.height)\r\n    spaceCount++\r\n  }\r\n  // \r\n  this.mindMap.nodeInnerPostfixList.forEach(item => {\r\n    const itemData = this[`_${item.name}Data`]\r\n    if (itemData) {\r\n      textContentWidth += itemData.width\r\n      textContentHeight = Math.max(textContentHeight, itemData.height)\r\n      spaceCount++\r\n    }\r\n  })\r\n  textContentWidth += (spaceCount - 1) * textContentMargin\r\n  // \r\n  if (tagIsBottom && textContentWidth > 0 && tagContentHeight > 0) {\r\n    this._rectInfo.textContentWidthWithoutTag = textContentWidth\r\n    textContentWidth = Math.max(textContentWidth, tagContentWidth)\r\n    textContentHeight = textContentHeight + textContentMargin + tagContentHeight\r\n  }\r\n  this._rectInfo.textContentWidth = textContentWidth\r\n  this._rectInfo.textContentHeight = textContentHeight\r\n\r\n  // \r\n  let _width = 0\r\n  let _height = 0\r\n  if ([IMG_PLACEMENT.TOP, IMG_PLACEMENT.BOTTOM].includes(imgPlacement)) {\r\n    // \r\n    _width = Math.max(imgContentWidth, textContentWidth)\r\n    _height =\r\n      imgContentHeight +\r\n      textContentHeight +\r\n      this.getImgTextMarin('v', 0, 0, imgContentHeight, textContentHeight)\r\n  } else {\r\n    // \r\n    _width =\r\n      imgContentWidth +\r\n      textContentWidth +\r\n      this.getImgTextMarin('h', imgContentWidth, textContentWidth)\r\n    _height = Math.max(imgContentHeight, textContentHeight)\r\n  }\r\n  const { paddingX, paddingY } = this.getPaddingVale()\r\n  // \r\n  const { paddingX: shapePaddingX, paddingY: shapePaddingY } =\r\n    this.shapeInstance.getShapePadding(_width, _height, paddingX, paddingY)\r\n  this.shapePadding.paddingX = shapePaddingX\r\n  this.shapePadding.paddingY = shapePaddingY\r\n  // \r\n  const borderWidth = this.getBorderWidth()\r\n  return {\r\n    width: _width + paddingX * 2 + shapePaddingX * 2 + borderWidth,\r\n    height: _height + paddingY * 2 + shapePaddingY * 2 + borderWidth\r\n  }\r\n}\r\n\r\n//  \r\nfunction layout() {\r\n  if (!this.group) return\r\n  // \r\n  this.group.clear()\r\n  const {\r\n    hoverRectPadding,\r\n    openRealtimeRenderOnNodeTextEdit,\r\n    textContentMargin,\r\n    addCustomContentToNode\r\n  } = this.mindMap.opt\r\n  // \r\n  // \r\n  // if (\r\n  //   openRealtimeRenderOnNodeTextEdit &&\r\n  //   this._expandBtn &&\r\n  //   this.getChildrenLength() > 0\r\n  // ) {\r\n  //   this.group.add(this._expandBtn)\r\n  // }\r\n  const { width, height } = this\r\n  let { paddingX, paddingY } = this.getPaddingVale()\r\n  const halfBorderWidth = this.getBorderWidth() / 2\r\n  paddingX += this.shapePadding.paddingX + halfBorderWidth\r\n  paddingY += this.shapePadding.paddingY + halfBorderWidth\r\n  // \r\n  this.shapeNode = this.shapeInstance.createShape()\r\n  this.shapeNode.addClass('smm-node-shape')\r\n  this.shapeNode.translate(halfBorderWidth, halfBorderWidth)\r\n  this.style.shape(this.shapeNode)\r\n  this.group.add(this.shapeNode)\r\n  // \r\n  this.renderExpandBtnPlaceholderRect()\r\n  // \r\n  if (this.createUserListNode) this.createUserListNode()\r\n  // id\r\n  if (this.isGeneralization && this.generalizationBelongNode) {\r\n    this.group.addClass('generalization_' + this.generalizationBelongNode.uid)\r\n  }\r\n  // hover\r\n  const addHoverNode = () => {\r\n    this.hoverNode = new Rect()\r\n      .size(width + hoverRectPadding * 2, height + hoverRectPadding * 2)\r\n      .x(-hoverRectPadding)\r\n      .y(-hoverRectPadding)\r\n    this.hoverNode.addClass('smm-hover-node')\r\n    this.style.hoverNode(this.hoverNode, width, height)\r\n    this.group.add(this.hoverNode)\r\n  }\r\n  // \r\n  if (this.isUseCustomNodeContent()) {\r\n    const foreignObject = createForeignObjectNode({\r\n      el: this._customNodeContent,\r\n      width,\r\n      height\r\n    })\r\n    this.group.add(foreignObject)\r\n    addHoverNode()\r\n    return\r\n  }\r\n  const { IMG_PLACEMENT, TAG_PLACEMENT } = CONSTANTS\r\n  const imgPlacement = this.getStyle('imgPlacement') || IMG_PLACEMENT.TOP\r\n  const tagPlacement = this.getStyle('tagPlacement') || TAG_PLACEMENT.RIGHT\r\n  const tagIsBottom = tagPlacement === TAG_PLACEMENT.BOTTOM\r\n  let { textContentWidth, textContentHeight, textContentWidthWithoutTag } =\r\n    this._rectInfo\r\n  const textContentHeightWithTag = textContentHeight\r\n  // \r\n  let totalTagWidth = 0\r\n  let maxTagHeight = 0\r\n  const hasTagContent = this._tagData && this._tagData.length > 0\r\n  if (hasTagContent) {\r\n    const res = this.getTagContentSize(textContentMargin)\r\n    totalTagWidth = res.width\r\n    maxTagHeight = res.height\r\n    if (tagIsBottom) {\r\n      textContentHeight -= maxTagHeight + textContentMargin\r\n    }\r\n  }\r\n  // \r\n  let imgWidth = 0\r\n  let imgHeight = 0\r\n  if (this._imgData) {\r\n    imgWidth = this._imgData.width\r\n    imgHeight = this._imgData.height\r\n    this.group.add(this._imgData.node)\r\n    switch (imgPlacement) {\r\n      case IMG_PLACEMENT.TOP:\r\n        this._imgData.node.cx(width / 2).y(paddingY)\r\n        break\r\n      case IMG_PLACEMENT.BOTTOM:\r\n        this._imgData.node.cx(width / 2).y(height - paddingY - imgHeight)\r\n        break\r\n      case IMG_PLACEMENT.LEFT:\r\n        this._imgData.node.x(paddingX).cy(height / 2)\r\n        break\r\n      case IMG_PLACEMENT.RIGHT:\r\n        this._imgData.node.x(width - paddingX - imgWidth).cy(height / 2)\r\n        break\r\n      default:\r\n        break\r\n    }\r\n  }\r\n  // \r\n  let textContentNested = new G()\r\n  let textContentOffsetX = 0\r\n  if (hasTagContent && tagIsBottom) {\r\n    textContentOffsetX =\r\n      textContentWidthWithoutTag < textContentWidth\r\n        ? (textContentWidth - textContentWidthWithoutTag) / 2\r\n        : 0\r\n  }\r\n  // \r\n  this.mindMap.nodeInnerPrefixList.forEach(item => {\r\n    const itemData = this[`_${item.name}Data`]\r\n    if (itemData) {\r\n      itemData.node\r\n        .x(textContentOffsetX)\r\n        .y((textContentHeight - itemData.height) / 2)\r\n      textContentNested.add(itemData.node)\r\n      textContentOffsetX += itemData.width + textContentMargin\r\n    }\r\n  })\r\n  // \r\n  if (this._prefixData) {\r\n    const foreignObject = createForeignObjectNode({\r\n      el: this._prefixData.el,\r\n      width: this._prefixData.width,\r\n      height: this._prefixData.height\r\n    })\r\n    foreignObject\r\n      .x(textContentOffsetX)\r\n      .y((textContentHeight - this._prefixData.height) / 2)\r\n    textContentNested.add(foreignObject)\r\n    textContentOffsetX += this._prefixData.width + textContentMargin\r\n  }\r\n  // icon\r\n  let iconNested = new G()\r\n  if (this._iconData && this._iconData.length > 0) {\r\n    let iconLeft = 0\r\n    this._iconData.forEach(item => {\r\n      item.node\r\n        .x(textContentOffsetX + iconLeft)\r\n        .y((textContentHeight - item.height) / 2)\r\n      iconNested.add(item.node)\r\n      iconLeft += item.width + textContentMargin\r\n    })\r\n    textContentNested.add(iconNested)\r\n    textContentOffsetX += iconLeft\r\n  }\r\n  // \r\n  if (this._textData) {\r\n    const oldX = this._textData.node.attr('data-offsetx') || 0\r\n    this._textData.node.attr('data-offsetx', textContentOffsetX)\r\n    // safari\r\n    ;(this._textData.nodeContent || this._textData.node)\r\n      .x(-oldX) // \r\n      .x(textContentOffsetX)\r\n      .y((textContentHeight - this._textData.height) / 2)\r\n    // 0\r\n    if (openRealtimeRenderOnNodeTextEdit) {\r\n      this._textData.node.opacity(\r\n        this.mindMap.renderer.textEdit.getCurrentEditNode() === this ? 0 : 1\r\n      )\r\n    }\r\n    textContentNested.add(this._textData.node)\r\n    textContentOffsetX += this._textData.width + textContentMargin\r\n  }\r\n  // \r\n  if (this._hyperlinkData) {\r\n    this._hyperlinkData.node\r\n      .x(textContentOffsetX)\r\n      .y((textContentHeight - this._hyperlinkData.height) / 2)\r\n    textContentNested.add(this._hyperlinkData.node)\r\n    textContentOffsetX += this._hyperlinkData.width + textContentMargin\r\n  }\r\n  // \r\n  let tagNested = new G()\r\n  if (hasTagContent) {\r\n    if (tagIsBottom) {\r\n      // \r\n      let tagLeft = 0\r\n      this._tagData.forEach(item => {\r\n        item.node.x(tagLeft).y((maxTagHeight - item.height) / 2)\r\n        tagNested.add(item.node)\r\n        tagLeft += item.width + textContentMargin\r\n      })\r\n      tagNested\r\n        .x((textContentWidth - totalTagWidth) / 2)\r\n        .y(textContentHeightWithTag - maxTagHeight)\r\n      textContentNested.add(tagNested)\r\n    } else {\r\n      // \r\n      let tagLeft = 0\r\n      this._tagData.forEach(item => {\r\n        item.node\r\n          .x(textContentOffsetX + tagLeft)\r\n          .y((textContentHeight - item.height) / 2)\r\n        tagNested.add(item.node)\r\n        tagLeft += item.width + textContentMargin\r\n      })\r\n      textContentNested.add(tagNested)\r\n      textContentOffsetX += tagLeft\r\n    }\r\n  }\r\n  // \r\n  if (this._noteData) {\r\n    this._noteData.node\r\n      .x(textContentOffsetX)\r\n      .y((textContentHeight - this._noteData.height) / 2)\r\n    textContentNested.add(this._noteData.node)\r\n    textContentOffsetX += this._noteData.width + textContentMargin\r\n  }\r\n  // \r\n  if (this._attachmentData) {\r\n    this._attachmentData.node\r\n      .x(textContentOffsetX)\r\n      .y((textContentHeight - this._attachmentData.height) / 2)\r\n    textContentNested.add(this._attachmentData.node)\r\n    textContentOffsetX += this._attachmentData.width + textContentMargin\r\n  }\r\n  // \r\n  if (this._postfixData) {\r\n    const foreignObject = createForeignObjectNode({\r\n      el: this._postfixData.el,\r\n      width: this._postfixData.width,\r\n      height: this._postfixData.height\r\n    })\r\n    foreignObject\r\n      .x(textContentOffsetX)\r\n      .y((textContentHeight - this._postfixData.height) / 2)\r\n    textContentNested.add(foreignObject)\r\n    textContentOffsetX += this._postfixData.width + textContentMargin\r\n  }\r\n  // \r\n  this.mindMap.nodeInnerPostfixList.forEach(item => {\r\n    const itemData = this[`_${item.name}Data`]\r\n    if (itemData) {\r\n      itemData.node\r\n        .x(textContentOffsetX)\r\n        .y((textContentHeight - itemData.height) / 2)\r\n      textContentNested.add(itemData.node)\r\n      textContentOffsetX += itemData.width + textContentMargin\r\n    }\r\n  })\r\n  this.group.add(textContentNested)\r\n  // \r\n  const { width: bboxWidth, height: bboxHeight } = textContentNested.bbox()\r\n  let translateX = 0\r\n  let translateY = 0\r\n  switch (imgPlacement) {\r\n    case IMG_PLACEMENT.TOP:\r\n      translateX = width / 2 - bboxWidth / 2\r\n      translateY =\r\n        paddingY + // \r\n        imgHeight + // \r\n        this.getImgTextMarin('v', 0, 0, imgHeight, textContentHeightWithTag) // \r\n      break\r\n    case IMG_PLACEMENT.BOTTOM:\r\n      translateX = width / 2 - bboxWidth / 2\r\n      translateY = paddingY\r\n      break\r\n    case IMG_PLACEMENT.LEFT:\r\n      translateX =\r\n        imgWidth +\r\n        paddingX +\r\n        this.getImgTextMarin('h', imgWidth, textContentWidth)\r\n      translateY = height / 2 - bboxHeight / 2\r\n      break\r\n    case IMG_PLACEMENT.RIGHT:\r\n      translateX = paddingX\r\n      translateY = height / 2 - bboxHeight / 2\r\n      break\r\n  }\r\n  textContentNested.translate(translateX, translateY)\r\n  addHoverNode()\r\n  if (this._customContentAddToNodeAdd && this._customContentAddToNodeAdd.el) {\r\n    const foreignObject = createForeignObjectNode(\r\n      this._customContentAddToNodeAdd\r\n    )\r\n    this.group.add(foreignObject)\r\n    if (\r\n      addCustomContentToNode &&\r\n      typeof addCustomContentToNode.handle === 'function'\r\n    ) {\r\n      addCustomContentToNode.handle({\r\n        content: this._customContentAddToNodeAdd,\r\n        element: foreignObject,\r\n        node: this\r\n      })\r\n    }\r\n  }\r\n  this.mindMap.emit('node_layout_end', this)\r\n}\r\n\r\nexport default {\r\n  getImgTextMarin,\r\n  getTagContentSize,\r\n  getNodeRect,\r\n  layout\r\n}\r\n","import Style from './Style'\r\nimport Shape from './Shape'\r\nimport { G, Rect, Text, SVG } from '@svgdotjs/svg.js'\r\nimport nodeGeneralizationMethods from './nodeGeneralization'\r\nimport nodeExpandBtnMethods from './nodeExpandBtn'\r\nimport nodeCommandWrapsMethods from './nodeCommandWraps'\r\nimport nodeCreateContentsMethods from './nodeCreateContents'\r\nimport nodeExpandBtnPlaceholderRectMethods from './nodeExpandBtnPlaceholderRect'\r\nimport nodeModifyWidthMethods from './nodeModifyWidth'\r\nimport nodeCooperateMethods from './nodeCooperate'\r\nimport quickCreateChildBtnMethods from './quickCreateChildBtn'\r\nimport nodeLayoutMethods from './nodeLayout'\r\nimport { CONSTANTS } from '../../../constants/constant'\r\nimport { copyNodeTree, createUid, addXmlns } from '../../../utils/index'\r\n\r\n//  \r\nclass MindMapNode {\r\n  //  \r\n  constructor(opt = {}) {\r\n    this.opt = opt\r\n    // \r\n    this.nodeData = this.handleData(opt.data || {})\r\n    // \r\n    this.nodeDataSnapshot = ''\r\n    // uid\r\n    this.uid = opt.uid\r\n    // \r\n    this.mindMap = opt.mindMap\r\n    // \r\n    this.renderer = opt.renderer\r\n    // \r\n    this.draw = this.mindMap.draw\r\n    this.nodeDraw = this.mindMap.nodeDraw\r\n    this.lineDraw = this.mindMap.lineDraw\r\n    // \r\n    this.style = new Style(this)\r\n    // \r\n    this.effectiveStyles = {}\r\n    // \r\n    this.shapeInstance = new Shape(this)\r\n    this.shapePadding = {\r\n      paddingX: 0,\r\n      paddingY: 0\r\n    }\r\n    // \r\n    this.isRoot = opt.isRoot === undefined ? false : opt.isRoot\r\n    // \r\n    this.isGeneralization =\r\n      opt.isGeneralization === undefined ? false : opt.isGeneralization\r\n    this.generalizationBelongNode = null\r\n    // \r\n    this.layerIndex = opt.layerIndex === undefined ? 0 : opt.layerIndex\r\n    // \r\n    this.width = opt.width || 0\r\n    // \r\n    this.height = opt.height || 0\r\n    // \r\n    this.customTextWidth = opt.data.data.customTextWidth || undefined\r\n    // left\r\n    this._left = opt.left || 0\r\n    // top\r\n    this._top = opt.top || 0\r\n    // \r\n    this.customLeft = opt.data.data.customLeft || undefined\r\n    this.customTop = opt.data.data.customTop || undefined\r\n    // \r\n    this.isDrag = false\r\n    // \r\n    this.parent = opt.parent || null\r\n    // \r\n    this.children = opt.children || []\r\n    // \r\n    this.userList = []\r\n    // \r\n    this.group = null\r\n    this.shapeNode = null // \r\n    this.hoverNode = null // hover\r\n    // \r\n    this._customNodeContent = null\r\n    this._imgData = null\r\n    this._iconData = null\r\n    this._textData = null\r\n    this._hyperlinkData = null\r\n    this._tagData = null\r\n    this._noteData = null\r\n    this.noteEl = null\r\n    this.noteContentIsShow = false\r\n    this._attachmentData = null\r\n    this._prefixData = null\r\n    this._postfixData = null\r\n    this._expandBtn = null\r\n    this._lastExpandBtnType = null\r\n    this._showExpandBtn = false\r\n    this._openExpandNode = null\r\n    this._closeExpandNode = null\r\n    this._fillExpandNode = null\r\n    this._userListGroup = null\r\n    this._lines = []\r\n    this._generalizationList = []\r\n    this._unVisibleRectRegionNode = null\r\n    this._isMouseenter = false\r\n    this._customContentAddToNodeAdd = null\r\n    // \r\n    this._rectInfo = {\r\n      textContentWidth: 0,\r\n      textContentHeight: 0,\r\n      textContentWidthWithoutTag: 0\r\n    }\r\n    // \r\n    this._generalizationNodeWidth = 0\r\n    this._generalizationNodeHeight = 0\r\n    // \r\n    this.expandBtnSize = this.mindMap.opt.expandBtnSize\r\n    // \r\n    this.isMultipleChoice = false\r\n    // layout\r\n    this.needLayout = false\r\n    // \r\n    this.isHide = false\r\n    const proto = Object.getPrototypeOf(this)\r\n    if (!proto.bindEvent) {\r\n      // \r\n      Object.keys(nodeLayoutMethods).forEach(item => {\r\n        proto[item] = nodeLayoutMethods[item]\r\n      })\r\n      // \r\n      Object.keys(nodeGeneralizationMethods).forEach(item => {\r\n        proto[item] = nodeGeneralizationMethods[item]\r\n      })\r\n      // \r\n      Object.keys(nodeExpandBtnMethods).forEach(item => {\r\n        proto[item] = nodeExpandBtnMethods[item]\r\n      })\r\n      // \r\n      Object.keys(nodeExpandBtnPlaceholderRectMethods).forEach(item => {\r\n        proto[item] = nodeExpandBtnPlaceholderRectMethods[item]\r\n      })\r\n      // \r\n      Object.keys(nodeCommandWrapsMethods).forEach(item => {\r\n        proto[item] = nodeCommandWrapsMethods[item]\r\n      })\r\n      // \r\n      Object.keys(nodeCreateContentsMethods).forEach(item => {\r\n        proto[item] = nodeCreateContentsMethods[item]\r\n      })\r\n      // \r\n      if (this.mindMap.cooperate) {\r\n        Object.keys(nodeCooperateMethods).forEach(item => {\r\n          proto[item] = nodeCooperateMethods[item]\r\n        })\r\n      }\r\n      // \r\n      Object.keys(nodeModifyWidthMethods).forEach(item => {\r\n        proto[item] = nodeModifyWidthMethods[item]\r\n      })\r\n      // \r\n      if (this.mindMap.opt.isShowCreateChildBtnIcon) {\r\n        Object.keys(quickCreateChildBtnMethods).forEach(item => {\r\n          proto[item] = quickCreateChildBtnMethods[item]\r\n        })\r\n        this.initQuickCreateChildBtn()\r\n      }\r\n      proto.bindEvent = true\r\n    }\r\n    // \r\n    this.getSize()\r\n    // \r\n    this.updateGeneralization()\r\n    this.initDragHandle()\r\n  }\r\n\r\n  // \r\n  get left() {\r\n    return this.customLeft || this._left\r\n  }\r\n\r\n  set left(val) {\r\n    this._left = val\r\n  }\r\n\r\n  get top() {\r\n    return this.customTop || this._top\r\n  }\r\n\r\n  set top(val) {\r\n    this._top = val\r\n  }\r\n\r\n  //  \r\n  reset() {\r\n    this.children = []\r\n    this.parent = null\r\n    this.isRoot = false\r\n    this.layerIndex = 0\r\n    this.left = 0\r\n    this.top = 0\r\n  }\r\n\r\n  // \r\n  resetWhenDelete() {\r\n    this._isMouseenter = false\r\n  }\r\n\r\n  //  \r\n  handleData(data) {\r\n    data.data.expand = data.data.expand === false ? false : true\r\n    data.data.isActive = data.data.isActive === true ? true : false\r\n    data.children = data.children || []\r\n    return data\r\n  }\r\n\r\n  //  \r\n  // recreateTypes[] customimageicontexthyperlinktagnoteattachmentnumbersprefixpostfixcheckbox\r\n  createNodeData(recreateTypes) {\r\n    // \r\n    const {\r\n      isUseCustomNodeContent,\r\n      customCreateNodeContent,\r\n      createNodePrefixContent,\r\n      createNodePostfixContent,\r\n      addCustomContentToNode\r\n    } = this.mindMap.opt\r\n    // \r\n    const typeList = [\r\n      'custom',\r\n      'image',\r\n      'icon',\r\n      'text',\r\n      'hyperlink',\r\n      'tag',\r\n      'note',\r\n      'attachment',\r\n      'prefix',\r\n      'postfix',\r\n      ...this.mindMap.nodeInnerPrefixList.map(item => {\r\n        return item.name\r\n      }),\r\n      ...this.mindMap.nodeInnerPostfixList.map(item => {\r\n        return item.name\r\n      })\r\n    ]\r\n    const createTypes = {}\r\n    if (Array.isArray(recreateTypes)) {\r\n      // \r\n      typeList.forEach(item => {\r\n        if (recreateTypes.includes(item)) {\r\n          createTypes[item] = true\r\n        }\r\n      })\r\n    } else {\r\n      // \r\n      typeList.forEach(item => {\r\n        createTypes[item] = true\r\n      })\r\n    }\r\n    if (\r\n      isUseCustomNodeContent &&\r\n      customCreateNodeContent &&\r\n      createTypes.custom\r\n    ) {\r\n      this._customNodeContent = customCreateNodeContent(this)\r\n    }\r\n    // \r\n    if (this._customNodeContent) {\r\n      addXmlns(this._customNodeContent)\r\n      return\r\n    }\r\n    if (createTypes.image) this._imgData = this.createImgNode()\r\n    if (createTypes.icon) this._iconData = this.createIconNode()\r\n    if (createTypes.text) this._textData = this.createTextNode()\r\n    if (createTypes.hyperlink) this._hyperlinkData = this.createHyperlinkNode()\r\n    if (createTypes.tag) this._tagData = this.createTagNode()\r\n    if (createTypes.note) this._noteData = this.createNoteNode()\r\n    if (createTypes.attachment)\r\n      this._attachmentData = this.createAttachmentNode()\r\n    this.mindMap.nodeInnerPrefixList.forEach(item => {\r\n      if (createTypes[item.name]) {\r\n        this[`_${item.name}Data`] = item.createContent(this)\r\n      }\r\n    })\r\n    if (createTypes.prefix) {\r\n      this._prefixData = createNodePrefixContent\r\n        ? createNodePrefixContent(this)\r\n        : null\r\n      if (this._prefixData && this._prefixData.el) {\r\n        addXmlns(this._prefixData.el)\r\n      }\r\n    }\r\n    if (createTypes.postfix) {\r\n      this._postfixData = createNodePostfixContent\r\n        ? createNodePostfixContent(this)\r\n        : null\r\n      if (this._postfixData && this._postfixData.el) {\r\n        addXmlns(this._postfixData.el)\r\n      }\r\n    }\r\n    this.mindMap.nodeInnerPostfixList.forEach(item => {\r\n      if (createTypes[item.name]) {\r\n        this[`_${item.name}Data`] = item.createContent(this)\r\n      }\r\n    })\r\n    if (\r\n      addCustomContentToNode &&\r\n      typeof addCustomContentToNode.create === 'function'\r\n    ) {\r\n      this._customContentAddToNodeAdd = addCustomContentToNode.create(this)\r\n      if (\r\n        this._customContentAddToNodeAdd &&\r\n        this._customContentAddToNodeAdd.el\r\n      ) {\r\n        addXmlns(this._customContentAddToNodeAdd.el)\r\n      }\r\n    }\r\n  }\r\n\r\n  //  \r\n  getSize(recreateTypes, opt = {}) {\r\n    const ignoreUpdateCustomTextWidth = opt.ignoreUpdateCustomTextWidth || false\r\n    if (!ignoreUpdateCustomTextWidth) {\r\n      this.customTextWidth = this.getData('customTextWidth') || undefined\r\n    }\r\n    this.customLeft = this.getData('customLeft') || undefined\r\n    this.customTop = this.getData('customTop') || undefined\r\n    // \r\n    // this.updateGeneralization()\r\n    this.createNodeData(recreateTypes)\r\n    const { width, height } = this.getNodeRect()\r\n    // \r\n    const changed = this.width !== width || this.height !== height\r\n    this.width = width\r\n    this.height = height\r\n    return changed\r\n  }\r\n\r\n  // \r\n  bindGroupEvent() {\r\n    // \r\n    this.group.on('click', e => {\r\n      this.mindMap.emit('node_click', this, e)\r\n      if (this.isMultipleChoice) {\r\n        e.stopPropagation()\r\n        this.isMultipleChoice = false\r\n        return\r\n      }\r\n      if (\r\n        this.mindMap.opt.onlyOneEnableActiveNodeOnCooperate &&\r\n        this.userList.length > 0\r\n      ) {\r\n        return\r\n      }\r\n      this.active(e)\r\n    })\r\n    this.group.on('mousedown', e => {\r\n      const {\r\n        readonly,\r\n        enableCtrlKeyNodeSelection,\r\n        useLeftKeySelectionRightKeyDrag,\r\n        mousedownEventPreventDefault\r\n      } = this.mindMap.opt\r\n      if (mousedownEventPreventDefault) {\r\n        e.preventDefault()\r\n      }\r\n      // \r\n      if (!readonly) {\r\n        if (this.isRoot) {\r\n          // \r\n          if (e.which === 3 && !useLeftKeySelectionRightKeyDrag) {\r\n            e.stopPropagation()\r\n          }\r\n        } else {\r\n          // \r\n          if (e.which !== 2) {\r\n            e.stopPropagation()\r\n          }\r\n        }\r\n      }\r\n      // \r\n      if (!readonly && (e.ctrlKey || e.metaKey) && enableCtrlKeyNodeSelection) {\r\n        this.isMultipleChoice = true\r\n        const isActive = this.getData('isActive')\r\n        if (!isActive)\r\n          this.mindMap.emit(\r\n            'before_node_active',\r\n            this,\r\n            this.renderer.activeNodeList\r\n          )\r\n        this.mindMap.renderer[\r\n          isActive ? 'removeNodeFromActiveList' : 'addNodeToActiveList'\r\n        ](this, true)\r\n        this.renderer.emitNodeActiveEvent(isActive ? null : this)\r\n      }\r\n      this.mindMap.emit('node_mousedown', this, e)\r\n    })\r\n    this.group.on('mouseup', e => {\r\n      if (!this.isRoot && e.which !== 2 && !this.mindMap.opt.readonly) {\r\n        e.stopPropagation()\r\n      }\r\n      this.mindMap.emit('node_mouseup', this, e)\r\n    })\r\n    this.group.on('mouseenter', e => {\r\n      if (this.isDrag) return\r\n      this._isMouseenter = true\r\n      // \r\n      this.showExpandBtn()\r\n      if (this.isGeneralization) {\r\n        this.handleGeneralizationMouseenter()\r\n      }\r\n      this.mindMap.emit('node_mouseenter', this, e)\r\n    })\r\n    this.group.on('mouseleave', e => {\r\n      if (!this._isMouseenter) return\r\n      this._isMouseenter = false\r\n      this.hideExpandBtn()\r\n      if (this.isGeneralization) {\r\n        this.handleGeneralizationMouseleave()\r\n      }\r\n      this.mindMap.emit('node_mouseleave', this, e)\r\n    })\r\n    // \r\n    this.group.on('dblclick', e => {\r\n      const { readonly, onlyOneEnableActiveNodeOnCooperate } = this.mindMap.opt\r\n      if (readonly || e.ctrlKey || e.metaKey) {\r\n        return\r\n      }\r\n      e.stopPropagation()\r\n      if (onlyOneEnableActiveNodeOnCooperate && this.userList.length > 0) {\r\n        return\r\n      }\r\n      this.mindMap.emit('node_dblclick', this, e)\r\n    })\r\n    // \r\n    this.group.on('contextmenu', e => {\r\n      const { readonly, useLeftKeySelectionRightKeyDrag } = this.mindMap.opt\r\n      // Macctrlcontextmenu\r\n      if (readonly || e.ctrlKey) {\r\n        return\r\n      }\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      // \r\n      if (\r\n        this.mindMap.select &&\r\n        !useLeftKeySelectionRightKeyDrag &&\r\n        this.mindMap.select.hasSelectRange()\r\n      ) {\r\n        return\r\n      }\r\n      // \r\n      if (\r\n        !(this.getData('isActive') && this.renderer.activeNodeList.length === 1)\r\n      ) {\r\n        this.renderer.clearActiveNodeList()\r\n        this.active(e)\r\n      }\r\n      this.mindMap.emit('node_contextmenu', e, this)\r\n    })\r\n  }\r\n\r\n  //  \r\n  active(e) {\r\n    if (this.mindMap.opt.readonly) {\r\n      return\r\n    }\r\n    e && e.stopPropagation()\r\n    if (this.getData('isActive')) {\r\n      return\r\n    }\r\n    this.mindMap.emit('before_node_active', this, this.renderer.activeNodeList)\r\n    this.renderer.clearActiveNodeList()\r\n    this.renderer.addNodeToActiveList(this, true)\r\n    this.renderer.emitNodeActiveEvent(this)\r\n  }\r\n\r\n  // \r\n  deactivate() {\r\n    this.mindMap.renderer.removeNodeFromActiveList(this)\r\n    this.mindMap.renderer.emitNodeActiveEvent()\r\n  }\r\n\r\n  //  \r\n  update(forceRender) {\r\n    if (!this.group) {\r\n      return\r\n    }\r\n    this.updateNodeActiveClass()\r\n    const {\r\n      alwaysShowExpandBtn,\r\n      notShowExpandBtn,\r\n      isShowCreateChildBtnIcon,\r\n      readonly\r\n    } = this.mindMap.opt\r\n    const childrenLength = this.getChildrenLength()\r\n    // \r\n    if (!notShowExpandBtn) {\r\n      if (alwaysShowExpandBtn) {\r\n        // \r\n        if (this._expandBtn && childrenLength <= 0) {\r\n          this.removeExpandBtn()\r\n        } else {\r\n          // \r\n          this.renderExpandBtn()\r\n        }\r\n      } else {\r\n        const { isActive, expand } = this.getData()\r\n        // \r\n        if (childrenLength <= 0) {\r\n          this.removeExpandBtn()\r\n        } else if (expand && !isActive && !this._isMouseenter) {\r\n          this.hideExpandBtn()\r\n        } else {\r\n          this.showExpandBtn()\r\n        }\r\n      }\r\n    }\r\n    // \r\n    if (isShowCreateChildBtnIcon) {\r\n      if (childrenLength > 0) {\r\n        this.removeQuickCreateChildBtn()\r\n      } else {\r\n        const { isActive } = this.getData()\r\n        if (isActive) {\r\n          this.showQuickCreateChildBtn()\r\n        } else {\r\n          this.hideQuickCreateChildBtn()\r\n        }\r\n      }\r\n    }\r\n    // \r\n    this.updateDragHandle()\r\n    // \r\n    this.renderGeneralization(forceRender)\r\n    // \r\n    if (this.updateUserListNode) this.updateUserListNode()\r\n    // \r\n    const t = this.group.transform()\r\n    // \r\n    this.nodeDataSnapshot = readonly ? '' : JSON.stringify(this.getData())\r\n    // \r\n    if (this.left !== t.translateX || this.top !== t.translateY) {\r\n      this.group.translate(this.left - t.translateX, this.top - t.translateY)\r\n    }\r\n  }\r\n\r\n  // \r\n  getNodePosInClient(_left, _top) {\r\n    const drawTransform = this.mindMap.draw.transform()\r\n    const { scaleX, scaleY, translateX, translateY } = drawTransform\r\n    const left = _left * scaleX + translateX\r\n    const top = _top * scaleY + translateY\r\n    return {\r\n      left,\r\n      top\r\n    }\r\n  }\r\n\r\n  // \r\n  checkIsInClient(padding = 0) {\r\n    const { left: nx, top: ny } = this.getNodePosInClient(this.left, this.top)\r\n    return (\r\n      nx + this.width > 0 - padding &&\r\n      ny + this.height > 0 - padding &&\r\n      nx < this.mindMap.width + padding &&\r\n      ny < this.mindMap.height + padding\r\n    )\r\n  }\r\n\r\n  // \r\n  reRender(recreateTypes, opt) {\r\n    const sizeChange = this.getSize(recreateTypes, opt)\r\n    this.layout()\r\n    this.update()\r\n    return sizeChange\r\n  }\r\n\r\n  // \r\n  updateNodeActiveClass() {\r\n    if (!this.group) return\r\n    const isActive = this.getData('isActive')\r\n    this.group[isActive ? 'addClass' : 'removeClass']('active')\r\n  }\r\n\r\n  // \r\n  updateNodeByActive(active) {\r\n    if (this.group) {\r\n      const { isShowCreateChildBtnIcon } = this.mindMap.opt\r\n      // \r\n      if (active) {\r\n        this.showExpandBtn()\r\n        if (isShowCreateChildBtnIcon) {\r\n          this.showQuickCreateChildBtn()\r\n        }\r\n      } else {\r\n        this.hideExpandBtn()\r\n        if (isShowCreateChildBtnIcon) {\r\n          this.hideQuickCreateChildBtn()\r\n        }\r\n      }\r\n      this.updateNodeActiveClass()\r\n      this.updateDragHandle()\r\n    }\r\n  }\r\n\r\n  // \r\n  // forceRender\r\n  // async\r\n  render(callback = () => {}, forceRender = false, async = false) {\r\n    // \r\n    // \r\n    this.renderLine()\r\n    const { openPerformance, performanceConfig } = this.mindMap.opt\r\n    // \r\n    // \r\n    if (\r\n      forceRender ||\r\n      !openPerformance ||\r\n      this.checkIsInClient(performanceConfig.padding) ||\r\n      this.isRoot\r\n    ) {\r\n      if (!this.group) {\r\n        // \r\n        this.group = new G()\r\n        this.group.addClass('smm-node')\r\n        this.group.css({\r\n          cursor: 'default'\r\n        })\r\n        this.bindGroupEvent()\r\n        this.nodeDraw.add(this.group)\r\n        this.layout()\r\n        this.update(forceRender)\r\n      } else {\r\n        if (!this.nodeDraw.has(this.group)) {\r\n          this.nodeDraw.add(this.group)\r\n        }\r\n        if (this.needLayout) {\r\n          this.needLayout = false\r\n          this.layout()\r\n        }\r\n        this.updateExpandBtnPlaceholderRect()\r\n        this.update(forceRender)\r\n      }\r\n    } else if (openPerformance && performanceConfig.removeNodeWhenOutCanvas) {\r\n      this.removeSelf()\r\n    }\r\n    // \r\n    if (\r\n      this.children &&\r\n      this.children.length &&\r\n      this.getData('expand') !== false\r\n    ) {\r\n      let index = 0\r\n      this.children.forEach(item => {\r\n        const renderChild = () => {\r\n          item.render(\r\n            () => {\r\n              index++\r\n              if (index >= this.children.length) {\r\n                callback()\r\n              }\r\n            },\r\n            forceRender,\r\n            async\r\n          )\r\n        }\r\n        if (async) {\r\n          setTimeout(renderChild, 0)\r\n        } else {\r\n          renderChild()\r\n        }\r\n      })\r\n    } else {\r\n      callback()\r\n    }\r\n    // \r\n    if (this.nodeData.inserting) {\r\n      delete this.nodeData.inserting\r\n      this.active()\r\n      // setTimeout(() => {\r\n      this.mindMap.emit('node_dblclick', this, null, true)\r\n      // }, 0)\r\n    }\r\n  }\r\n\r\n  // \r\n  removeSelf() {\r\n    if (!this.group) return\r\n    this.group.remove()\r\n    this.removeGeneralization()\r\n  }\r\n\r\n  //  \r\n  remove() {\r\n    if (!this.group) return\r\n    this.group.remove()\r\n    this.removeGeneralization()\r\n    this.removeLine()\r\n    // \r\n    if (this.children && this.children.length) {\r\n      this.children.forEach(item => {\r\n        item.remove()\r\n      })\r\n    }\r\n  }\r\n\r\n  // \r\n  destroy() {\r\n    this.removeLine()\r\n    if (this.parent) {\r\n      this.parent.removeLine()\r\n    }\r\n    if (!this.group) return\r\n    if (this.emptyUser) {\r\n      this.emptyUser()\r\n    }\r\n    this.resetWhenDelete()\r\n    this.group.remove()\r\n    this.removeGeneralization()\r\n    this.group = null\r\n    this.style.onRemove()\r\n  }\r\n\r\n  //  \r\n  hide() {\r\n    if (this.group) this.group.hide()\r\n    this.hideGeneralization()\r\n    if (this.parent) {\r\n      const index = this.parent.children.indexOf(this)\r\n      this.parent._lines[index] && this.parent._lines[index].hide()\r\n      this._lines.forEach(item => {\r\n        item.hide()\r\n      })\r\n    }\r\n    // \r\n    if (this.children && this.children.length) {\r\n      this.children.forEach(item => {\r\n        item.hide()\r\n      })\r\n    }\r\n  }\r\n\r\n  //  \r\n  show() {\r\n    if (!this.group) {\r\n      return\r\n    }\r\n    this.group.show()\r\n    this.showGeneralization()\r\n    if (this.parent) {\r\n      const index = this.parent.children.indexOf(this)\r\n      this.parent._lines[index] && this.parent._lines[index].show()\r\n      this._lines.forEach(item => {\r\n        item.show()\r\n      })\r\n    }\r\n    // \r\n    if (this.children && this.children.length) {\r\n      this.children.forEach(item => {\r\n        item.show()\r\n      })\r\n    }\r\n  }\r\n\r\n  // \r\n  // \r\n  setOpacity(val) {\r\n    // \r\n    if (this.group) this.group.opacity(val)\r\n    this._lines.forEach(line => {\r\n      line.opacity(val)\r\n    })\r\n    // \r\n    this.children.forEach(item => {\r\n      item.setOpacity(val)\r\n    })\r\n    // \r\n    this.setGeneralizationOpacity(val)\r\n  }\r\n\r\n  // \r\n  hideChildren() {\r\n    this._lines.forEach(item => {\r\n      item.hide()\r\n    })\r\n    if (this.children && this.children.length) {\r\n      this.children.forEach(item => {\r\n        item.hide()\r\n      })\r\n    }\r\n  }\r\n\r\n  // \r\n  showChildren() {\r\n    this._lines.forEach(item => {\r\n      item.show()\r\n    })\r\n    if (this.children && this.children.length) {\r\n      this.children.forEach(item => {\r\n        item.show()\r\n      })\r\n    }\r\n  }\r\n\r\n  // \r\n  startDrag() {\r\n    this.isDrag = true\r\n    if (this.group) this.group.addClass('smm-node-dragging')\r\n  }\r\n\r\n  // \r\n  endDrag() {\r\n    this.isDrag = false\r\n    if (this.group) this.group.removeClass('smm-node-dragging')\r\n  }\r\n\r\n  //  \r\n  renderLine(deep = false) {\r\n    if (this.getData('expand') === false) {\r\n      return\r\n    }\r\n    let childrenLen = this.getChildrenLength()\r\n    // \r\n    if (this.mindMap.renderer.layout.nodeIsRemoveAllLines) {\r\n      if (this.mindMap.renderer.layout.nodeIsRemoveAllLines(this)) {\r\n        childrenLen = 0\r\n      }\r\n    }\r\n    if (childrenLen > this._lines.length) {\r\n      // \r\n      new Array(childrenLen - this._lines.length).fill(0).forEach(() => {\r\n        this._lines.push(this.lineDraw.path())\r\n      })\r\n    } else if (childrenLen < this._lines.length) {\r\n      // \r\n      this._lines.slice(childrenLen).forEach(line => {\r\n        line.remove()\r\n      })\r\n      this._lines = this._lines.slice(0, childrenLen)\r\n    }\r\n    // \r\n    this.renderer.layout.renderLine(\r\n      this,\r\n      this._lines,\r\n      (...args) => {\r\n        // \r\n        this.styleLine(...args)\r\n      },\r\n      this.style.getStyle('lineStyle', true)\r\n    )\r\n    // \r\n    if (deep && this.children && this.children.length > 0) {\r\n      this.children.forEach(item => {\r\n        item.renderLine(deep)\r\n      })\r\n    }\r\n  }\r\n\r\n  //  \r\n  getShape() {\r\n    // \r\n    return this.mindMap.themeConfig.nodeUseLineStyle\r\n      ? CONSTANTS.SHAPE.RECTANGLE\r\n      : this.style.getStyle('shape', false, false)\r\n  }\r\n\r\n  //  \r\n  hasCustomPosition() {\r\n    return this.customLeft !== undefined && this.customTop !== undefined\r\n  }\r\n\r\n  //  \r\n  ancestorHasCustomPosition() {\r\n    let node = this\r\n    while (node) {\r\n      if (node.hasCustomPosition()) {\r\n        return true\r\n      }\r\n      node = node.parent\r\n    }\r\n    return false\r\n  }\r\n\r\n  //  \r\n  ancestorHasGeneralization() {\r\n    let node = this.parent\r\n    while (node) {\r\n      if (node.checkHasGeneralization()) {\r\n        return true\r\n      }\r\n      node = node.parent\r\n    }\r\n    return false\r\n  }\r\n\r\n  //  \r\n  addChildren(node) {\r\n    this.children.push(node)\r\n  }\r\n\r\n  //  \r\n  styleLine(line, childNode, enableMarker) {\r\n    const { enableInheritAncestorLineStyle } = this.mindMap.opt\r\n    const getName = enableInheritAncestorLineStyle\r\n      ? 'getSelfInhertStyle'\r\n      : 'getSelfStyle'\r\n    const width =\r\n      childNode[getName]('lineWidth') || childNode.getStyle('lineWidth', true)\r\n    const color =\r\n      childNode[getName]('lineColor') ||\r\n      this.getRainbowLineColor(childNode) ||\r\n      childNode.getStyle('lineColor', true)\r\n    const dasharray =\r\n      childNode[getName]('lineDasharray') ||\r\n      childNode.getStyle('lineDasharray', true)\r\n    this.style.line(\r\n      line,\r\n      {\r\n        width,\r\n        color,\r\n        dasharray\r\n      },\r\n      enableMarker,\r\n      childNode\r\n    )\r\n  }\r\n\r\n  // \r\n  getRainbowLineColor(node) {\r\n    return this.mindMap.rainbowLines\r\n      ? this.mindMap.rainbowLines.getNodeColor(node)\r\n      : ''\r\n  }\r\n\r\n  //  \r\n  removeLine() {\r\n    this._lines.forEach(line => {\r\n      line.remove()\r\n    })\r\n    this._lines = []\r\n  }\r\n\r\n  //  \r\n  isAncestor(node) {\r\n    if (this.uid === node.uid) {\r\n      return false\r\n    }\r\n    let parent = node.parent\r\n    while (parent) {\r\n      if (this.uid === parent.uid) {\r\n        return true\r\n      }\r\n      parent = parent.parent\r\n    }\r\n    return false\r\n  }\r\n\r\n  // \r\n  isParent(node) {\r\n    if (this.uid === node.uid) {\r\n      return false\r\n    }\r\n    const parent = node.parent\r\n    if (parent && this.uid === parent.uid) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  //  \r\n  isBrother(node) {\r\n    if (!this.parent || this.uid === node.uid) {\r\n      return false\r\n    }\r\n    return this.parent.children.find(item => {\r\n      return item.uid === node.uid\r\n    })\r\n  }\r\n\r\n  // \r\n  getIndexInBrothers() {\r\n    return this.parent && this.parent.children\r\n      ? this.parent.children.findIndex(item => {\r\n          return item.uid === this.uid\r\n        })\r\n      : -1\r\n  }\r\n\r\n  //  padding\r\n  getPaddingVale() {\r\n    return {\r\n      paddingX: this.getStyle('paddingX'),\r\n      paddingY: this.getStyle('paddingY')\r\n    }\r\n  }\r\n\r\n  //  \r\n  getStyle(prop, root) {\r\n    const v = this.style.merge(prop, root)\r\n    return v === undefined ? '' : v\r\n  }\r\n\r\n  //  \r\n  getSelfStyle(prop) {\r\n    return this.style.getSelfStyle(prop)\r\n  }\r\n\r\n  //   \r\n  getParentSelfStyle(prop) {\r\n    if (this.parent) {\r\n      return (\r\n        this.parent.getSelfStyle(prop) || this.parent.getParentSelfStyle(prop)\r\n      )\r\n    }\r\n    return null\r\n  }\r\n\r\n  //  \r\n  getSelfInhertStyle(prop) {\r\n    return (\r\n      this.getSelfStyle(prop) || // \r\n      this.getParentSelfStyle(prop)\r\n    ) // \r\n  }\r\n\r\n  // \r\n  getBorderWidth() {\r\n    return this.style.merge('borderWidth', false) || 0\r\n  }\r\n\r\n  //  \r\n  getData(key) {\r\n    return key ? this.nodeData.data[key] : this.nodeData.data\r\n  }\r\n\r\n  // \r\n  getPureData(removeActiveState = true, removeId = false) {\r\n    return copyNodeTree({}, this, removeActiveState, removeId)\r\n  }\r\n\r\n  // \r\n  getAncestorNodes() {\r\n    const list = []\r\n    let parent = this.parent\r\n    while (parent) {\r\n      list.unshift(parent)\r\n      parent = parent.parent\r\n    }\r\n    return list\r\n  }\r\n\r\n  // \r\n  hasCustomStyle() {\r\n    return this.style.hasCustomStyle()\r\n  }\r\n\r\n  // \r\n  getRect() {\r\n    return this.group ? this.group.rbox() : null\r\n  }\r\n\r\n  // \r\n  getRectInSvg() {\r\n    const { scaleX, scaleY, translateX, translateY } =\r\n      this.mindMap.draw.transform()\r\n    let { left, top, width, height } = this\r\n    const right = (left + width) * scaleX + translateX\r\n    const bottom = (top + height) * scaleY + translateY\r\n    left = left * scaleX + translateX\r\n    top = top * scaleY + translateY\r\n    return {\r\n      left,\r\n      right,\r\n      top,\r\n      bottom,\r\n      width: width * scaleX,\r\n      height: height * scaleY\r\n    }\r\n  }\r\n\r\n  // \r\n  highlight() {\r\n    if (this.group) this.group.addClass('smm-node-highlight')\r\n  }\r\n\r\n  // \r\n  closeHighlight() {\r\n    if (this.group) this.group.removeClass('smm-node-highlight')\r\n  }\r\n\r\n  // \r\n  // \r\n  fakeClone() {\r\n    const newNode = new MindMapNode({\r\n      ...this.opt,\r\n      uid: createUid()\r\n    })\r\n    Object.keys(this).forEach(item => {\r\n      newNode[item] = this[item]\r\n    })\r\n    return newNode\r\n  }\r\n\r\n  // SVG\r\n  createSvgTextNode(text = '') {\r\n    return new Text().text(text)\r\n  }\r\n\r\n  // SVG.js\r\n  getSvgObjects() {\r\n    return {\r\n      SVG,\r\n      G,\r\n      Rect\r\n    }\r\n  }\r\n\r\n  // \r\n  // 1.\r\n  // 2.\r\n  checkEnableDragModifyNodeWidth() {\r\n    const {\r\n      enableDragModifyNodeWidth,\r\n      isUseCustomNodeContent,\r\n      customCreateNodeContent\r\n    } = this.mindMap.opt\r\n    return (\r\n      enableDragModifyNodeWidth &&\r\n      (this.mindMap.richText ||\r\n        (isUseCustomNodeContent && customCreateNodeContent))\r\n    )\r\n  }\r\n\r\n  // \r\n  hasCustomWidth() {\r\n    return (\r\n      this.checkEnableDragModifyNodeWidth() &&\r\n      this.customTextWidth !== undefined\r\n    )\r\n  }\r\n\r\n  // \r\n  getChildrenLength() {\r\n    return this.nodeData.children ? this.nodeData.children.length : 0\r\n  }\r\n}\r\n\r\nexport default MindMapNode\r\n","// LRU\r\nexport default class Lru {\r\n  constructor(max) {\r\n    this.max = max || 1000\r\n    this.size = 0\r\n    this.pool = new Map()\r\n  }\r\n\r\n  add(key, value) {\r\n    const isExist = this.has(key)\r\n    // key\r\n    if (!isExist && this.size >= this.max) {\r\n      return false\r\n    }\r\n    // \r\n    // key\r\n    this.delete(key)\r\n    // \r\n    this.pool.set(key, value)\r\n    this.size++\r\n    // https://github.com/wanglin2/mind-map/issues/467\r\n    // if (this.size > this.max) {\r\n    //   let keys = this.pool.keys()\r\n    //   let last = keys.next()\r\n    //   this.delete(last.value)\r\n    // }\r\n    return true\r\n  }\r\n\r\n  delete(key) {\r\n    if (this.pool.has(key)) {\r\n      this.pool.delete(key)\r\n      this.size--\r\n    }\r\n  }\r\n\r\n  has(key) {\r\n    return this.pool.has(key)\r\n  }\r\n\r\n  get(key) {\r\n    if (this.pool.has(key)) {\r\n      return this.pool.get(key)\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.size = 0\r\n    this.pool = new Map()\r\n  }\r\n}\r\n","import MindMapNode from '../core/render/node/MindMapNode'\r\nimport { CONSTANTS, initRootNodePositionMap } from '../constants/constant'\r\nimport Lru from '../utils/Lru'\r\nimport { createUid } from '../utils/index'\r\n\r\n//  \r\nclass Base {\r\n  //  \r\n  constructor(renderer) {\r\n    // \r\n    this.renderer = renderer\r\n    // \r\n    this.mindMap = renderer.mindMap\r\n    // \r\n    this.draw = this.mindMap.draw\r\n    this.lineDraw = this.mindMap.lineDraw\r\n    // \r\n    this.root = null\r\n    this.lru = new Lru(this.mindMap.opt.maxNodeCacheCount)\r\n    // initRootNodePosition\r\n    this.rootNodeCenterOffset = null\r\n  }\r\n\r\n  //  \r\n  doLayout() {\r\n    throw new Error('computed')\r\n  }\r\n\r\n  //  \r\n  renderLine() {\r\n    throw new Error('renderLine')\r\n  }\r\n\r\n  //  \r\n  renderExpandBtn() {\r\n    throw new Error('renderExpandBtn')\r\n  }\r\n\r\n  //  \r\n  renderGeneralization() {}\r\n\r\n  // uid\r\n  cacheNode(uid, node) {\r\n    // \r\n    this.renderer.nodeCache[uid] = node\r\n    // \r\n    this.lru.add(uid, node)\r\n  }\r\n\r\n  // \r\n  checkIsNeedResizeSources() {\r\n    return this.renderer.checkHasRenderSource(CONSTANTS.CHANGE_THEME)\r\n  }\r\n\r\n  // \r\n  checkIsLayerTypeChange(oldIndex, newIndex) {\r\n    if (oldIndex >= 2 && newIndex >= 2) return false\r\n    if (oldIndex >= 2 && newIndex < 2) return true\r\n    if (oldIndex < 2 && newIndex >= 2) return true\r\n  }\r\n\r\n  // \r\n  checkIsLayoutChangeRerenderExpandBtnPlaceholderRect(node) {\r\n    if (this.renderer.checkHasRenderSource(CONSTANTS.CHANGE_LAYOUT)) {\r\n      node.needRerenderExpandBtnPlaceholderRect = true\r\n    }\r\n  }\r\n\r\n  // \r\n  checkIsNodeDataChange(lastData, curData) {\r\n    if (lastData) {\r\n      // \r\n      lastData = typeof lastData === 'string' ? JSON.parse(lastData) : lastData\r\n      lastData.isActive = curData.isActive\r\n      lastData.expand = curData.expand\r\n      lastData = JSON.stringify(lastData)\r\n    } else {\r\n      // \r\n      return false\r\n    }\r\n    return lastData !== JSON.stringify(curData)\r\n  }\r\n\r\n  // \r\n  checkNodeFixChange(newNode, nodeInnerPrefixData, nodeInnerPostfixData) {\r\n    // \r\n    let isNodeInnerPrefixChange = false\r\n    this.mindMap.nodeInnerPrefixList.forEach(item => {\r\n      if (item.updateNodeData) {\r\n        const isChange = item.updateNodeData(newNode, nodeInnerPrefixData)\r\n        if (isChange) {\r\n          isNodeInnerPrefixChange = isChange\r\n        }\r\n      }\r\n    })\r\n    // \r\n    let isNodeInnerPostfixChange = false\r\n    this.mindMap.nodeInnerPostfixList.forEach(item => {\r\n      if (item.updateNodeData) {\r\n        const isChange = item.updateNodeData(newNode, nodeInnerPostfixData)\r\n        if (isChange) {\r\n          isNodeInnerPostfixChange = isChange\r\n        }\r\n      }\r\n    })\r\n    return isNodeInnerPrefixChange || isNodeInnerPostfixChange\r\n  }\r\n\r\n  //  \r\n  createNode(data, parent, isRoot, layerIndex, index, ancestors) {\r\n    // \r\n    // \r\n    const nodeInnerPrefixData = {}\r\n    this.mindMap.nodeInnerPrefixList.forEach(item => {\r\n      if (item.createNodeData) {\r\n        const [key, value] = item.createNodeData({\r\n          data,\r\n          parent,\r\n          ancestors,\r\n          layerIndex,\r\n          index\r\n        })\r\n        nodeInnerPrefixData[key] = value\r\n      }\r\n    })\r\n    // \r\n    const nodeInnerPostfixData = {}\r\n    this.mindMap.nodeInnerPostfixList.forEach(item => {\r\n      if (item.createNodeData) {\r\n        const [key, value] = item.createNodeData({\r\n          data,\r\n          parent,\r\n          ancestors,\r\n          layerIndex,\r\n          index\r\n        })\r\n        nodeInnerPostfixData[key] = value\r\n      }\r\n    })\r\n    const uid = data.data.uid\r\n    let newNode = null\r\n    // \r\n    if (data && data._node && !this.renderer.reRender) {\r\n      newNode = data._node\r\n      // \r\n      const isLayerTypeChange = this.checkIsLayerTypeChange(\r\n        newNode.layerIndex,\r\n        layerIndex\r\n      )\r\n      newNode.reset()\r\n      newNode.layerIndex = layerIndex\r\n      if (isRoot) {\r\n        newNode.isRoot = true\r\n      } else {\r\n        newNode.parent = parent._node\r\n      }\r\n      this.cacheNode(data._node.uid, newNode)\r\n      this.checkIsLayoutChangeRerenderExpandBtnPlaceholderRect(newNode)\r\n      // \r\n      const isNodeInnerFixChange = this.checkNodeFixChange(\r\n        newNode,\r\n        nodeInnerPrefixData,\r\n        nodeInnerPostfixData\r\n      )\r\n      // \r\n      const isResizeSource = this.checkIsNeedResizeSources()\r\n      // \r\n      const isNodeDataChange = this.checkIsNodeDataChange(\r\n        data._node.nodeDataSnapshot,\r\n        data.data\r\n      )\r\n      // \r\n      if (\r\n        isResizeSource ||\r\n        isNodeDataChange ||\r\n        isLayerTypeChange ||\r\n        newNode.getData('resetRichText') ||\r\n        newNode.getData('needUpdate') ||\r\n        isNodeInnerFixChange\r\n      ) {\r\n        newNode.getSize()\r\n        newNode.needLayout = true\r\n      }\r\n      this.checkGetGeneralizationChange(newNode, isResizeSource)\r\n    } else if (\r\n      (this.lru.has(uid) || this.renderer.lastNodeCache[uid]) &&\r\n      !this.renderer.reRender\r\n    ) {\r\n      // \r\n      // uid\r\n      // \r\n      // \r\n      newNode = this.lru.get(uid) || this.renderer.lastNodeCache[uid]\r\n      // \r\n      const lastData = JSON.stringify(newNode.getData())\r\n      // \r\n      const isLayerTypeChange = this.checkIsLayerTypeChange(\r\n        newNode.layerIndex,\r\n        layerIndex\r\n      )\r\n      newNode.reset()\r\n      newNode.nodeData = newNode.handleData(data || {})\r\n      newNode.layerIndex = layerIndex\r\n      if (isRoot) {\r\n        newNode.isRoot = true\r\n      } else {\r\n        newNode.parent = parent._node\r\n      }\r\n      this.cacheNode(uid, newNode)\r\n      this.checkIsLayoutChangeRerenderExpandBtnPlaceholderRect(newNode)\r\n      data._node = newNode\r\n      // \r\n      const isResizeSource = this.checkIsNeedResizeSources()\r\n      // \r\n      const isNodeDataChange = this.checkIsNodeDataChange(lastData, data.data)\r\n      // \r\n      const isNodeInnerFixChange = this.checkNodeFixChange(\r\n        newNode,\r\n        nodeInnerPrefixData,\r\n        nodeInnerPostfixData\r\n      )\r\n      // \r\n      if (\r\n        isResizeSource ||\r\n        isNodeDataChange ||\r\n        isLayerTypeChange ||\r\n        newNode.getData('resetRichText') ||\r\n        newNode.getData('needUpdate') ||\r\n        isNodeInnerFixChange\r\n      ) {\r\n        newNode.getSize()\r\n        newNode.needLayout = true\r\n      }\r\n      this.checkGetGeneralizationChange(newNode, isResizeSource)\r\n    } else {\r\n      // \r\n      const newUid = uid || createUid()\r\n      newNode = new MindMapNode({\r\n        data,\r\n        uid: newUid,\r\n        renderer: this.renderer,\r\n        mindMap: this.mindMap,\r\n        draw: this.draw,\r\n        layerIndex,\r\n        isRoot,\r\n        parent: !isRoot ? parent._node : null,\r\n        ...nodeInnerPrefixData\r\n      })\r\n      // uid\r\n      data.data.uid = newUid\r\n      this.cacheNode(newUid, newNode)\r\n      // \r\n      data._node = newNode\r\n    }\r\n    // \r\n    if (data.data.isActive) {\r\n      this.renderer.addNodeToActiveList(newNode)\r\n    }\r\n    // \r\n    if (this.mindMap.renderer.findActiveNodeIndex(newNode) !== -1) {\r\n      newNode.setData({\r\n        isActive: true\r\n      })\r\n    }\r\n    // \r\n    if (isRoot) {\r\n      this.root = newNode\r\n    } else {\r\n      // \r\n      parent._node.addChildren(newNode)\r\n    }\r\n    return newNode\r\n  }\r\n\r\n  // \r\n  checkGetGeneralizationChange(node, isResizeSource) {\r\n    const generalizationList = node.getData('generalization')\r\n    if (\r\n      generalizationList &&\r\n      node._generalizationList &&\r\n      node._generalizationList.length > 0\r\n    ) {\r\n      node._generalizationList.forEach((item, index) => {\r\n        const gNode = item.generalizationNode\r\n        const oldData = gNode.getData()\r\n        const newData = generalizationList[index]\r\n        if (\r\n          isResizeSource ||\r\n          (newData && JSON.stringify(oldData) !== JSON.stringify(newData))\r\n        ) {\r\n          if (newData) {\r\n            gNode.nodeData.data = newData\r\n          }\r\n          gNode.getSize()\r\n          gNode.needLayout = true\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  // \r\n  formatPosition(value, size, nodeSize) {\r\n    if (typeof value === 'number') {\r\n      return value\r\n    } else if (initRootNodePositionMap[value] !== undefined) {\r\n      return size * initRootNodePositionMap[value]\r\n    } else if (/^\\d\\d*%$/.test(value)) {\r\n      return (Number.parseFloat(value) / 100) * size\r\n    } else {\r\n      return (size - nodeSize) / 2\r\n    }\r\n  }\r\n\r\n  // initRootNodePosition\r\n  formatInitRootNodePosition(pos) {\r\n    const { CENTER } = CONSTANTS.INIT_ROOT_NODE_POSITION\r\n    if (!pos || !Array.isArray(pos) || pos.length < 2) {\r\n      pos = [CENTER, CENTER]\r\n    }\r\n    return pos\r\n  }\r\n\r\n  //  \r\n  setNodeCenter(node, position) {\r\n    let { initRootNodePosition } = this.mindMap.opt\r\n    initRootNodePosition = this.formatInitRootNodePosition(\r\n      position || initRootNodePosition\r\n    )\r\n    node.left = this.formatPosition(\r\n      initRootNodePosition[0],\r\n      this.mindMap.width,\r\n      node.width\r\n    )\r\n    node.top = this.formatPosition(\r\n      initRootNodePosition[1],\r\n      this.mindMap.height,\r\n      node.height\r\n    )\r\n  }\r\n\r\n  // initRootNodePosition['center','center']\r\n  getRootCenterOffset(width, height) {\r\n    // \r\n    if (this.rootNodeCenterOffset) return this.rootNodeCenterOffset\r\n    let { initRootNodePosition } = this.mindMap.opt\r\n    const { CENTER } = CONSTANTS.INIT_ROOT_NODE_POSITION\r\n    initRootNodePosition = this.formatInitRootNodePosition(initRootNodePosition)\r\n    if (\r\n      initRootNodePosition[0] === CENTER &&\r\n      initRootNodePosition[1] === CENTER\r\n    ) {\r\n      // initRootNodePosition\r\n      this.rootNodeCenterOffset = {\r\n        x: 0,\r\n        y: 0\r\n      }\r\n    } else {\r\n      // \r\n      const tmpNode = {\r\n        width: width,\r\n        height: height\r\n      }\r\n      const tmpNode2 = {\r\n        width: width,\r\n        height: height\r\n      }\r\n      this.setNodeCenter(tmpNode, [CENTER, CENTER])\r\n      this.setNodeCenter(tmpNode2)\r\n      this.rootNodeCenterOffset = {\r\n        x: tmpNode2.left - tmpNode.left,\r\n        y: tmpNode2.top - tmpNode.top\r\n      }\r\n    }\r\n    return this.rootNodeCenterOffset\r\n  }\r\n\r\n  //  \r\n  updateChildren(children, prop, offset) {\r\n    children.forEach(item => {\r\n      item[prop] += offset\r\n      if (item.children && item.children.length && !item.hasCustomPosition()) {\r\n        // \r\n        this.updateChildren(item.children, prop, offset)\r\n      }\r\n    })\r\n  }\r\n\r\n  //  \r\n  updateChildrenPro(children, props) {\r\n    children.forEach(item => {\r\n      Object.keys(props).forEach(prop => {\r\n        item[prop] += props[prop]\r\n      })\r\n      if (item.children && item.children.length && !item.hasCustomPosition()) {\r\n        // \r\n        this.updateChildrenPro(item.children, props)\r\n      }\r\n    })\r\n  }\r\n\r\n  //  \r\n  getNodeAreaWidth(node, withGeneralization = false) {\r\n    let widthArr = []\r\n    let totalGeneralizationNodeWidth = 0\r\n    let loop = (node, width) => {\r\n      if (withGeneralization && node.checkHasGeneralization()) {\r\n        totalGeneralizationNodeWidth += node._generalizationNodeWidth\r\n      }\r\n      if (node.children.length) {\r\n        width += node.width / 2\r\n        node.children.forEach(item => {\r\n          loop(item, width)\r\n        })\r\n      } else {\r\n        width += node.width\r\n        widthArr.push(width)\r\n      }\r\n    }\r\n    loop(node, 0)\r\n    return Math.max(...widthArr) + totalGeneralizationNodeWidth\r\n  }\r\n\r\n  //  \r\n  quadraticCurvePath(x1, y1, x2, y2, v = false) {\r\n    let cx, cy\r\n    if (v) {\r\n      cx = x1 + (x2 - x1) * 0.8\r\n      cy = y1 + (y2 - y1) * 0.2\r\n    } else {\r\n      cx = x1 + (x2 - x1) * 0.2\r\n      cy = y1 + (y2 - y1) * 0.8\r\n    }\r\n    return `M ${x1},${y1} Q ${cx},${cy} ${x2},${y2}`\r\n  }\r\n\r\n  //  \r\n  cubicBezierPath(x1, y1, x2, y2, v = false) {\r\n    let cx1, cy1, cx2, cy2\r\n    if (v) {\r\n      cx1 = x1\r\n      cy1 = y1 + (y2 - y1) / 2\r\n      cx2 = x2\r\n      cy2 = cy1\r\n    } else {\r\n      cx1 = x1 + (x2 - x1) / 2\r\n      cy1 = y1\r\n      cx2 = cx1\r\n      cy2 = y2\r\n    }\r\n    return `M ${x1},${y1} C ${cx1},${cy1} ${cx2},${cy2} ${x2},${y2}`\r\n  }\r\n\r\n  // a,bb\r\n  computeNewPoint(a, b, radius = 0) {\r\n    // x\r\n    if (a[0] === b[0]) {\r\n      // ba\r\n      if (b[1] > a[1]) {\r\n        return [b[0], b[1] - radius]\r\n      } else {\r\n        // ba\r\n        return [b[0], b[1] + radius]\r\n      }\r\n    } else if (a[1] === b[1]) {\r\n      // y\r\n      // ba\r\n      if (b[0] > a[0]) {\r\n        return [b[0] - radius, b[1]]\r\n      } else {\r\n        return [b[0] + radius, b[1]]\r\n      }\r\n    }\r\n  }\r\n\r\n  // \r\n  // \r\n  createFoldLine(list) {\r\n    const { lineRadius } = this.mindMap.themeConfig\r\n    const len = list.length\r\n    let path = ''\r\n    let radiusPath = ''\r\n    if (len >= 3 && lineRadius > 0) {\r\n      const start = list[len - 3]\r\n      const center = list[len - 2]\r\n      const end = list[len - 1]\r\n      // \r\n      const isOneLine =\r\n        (start[0].toFixed(0) === center[0].toFixed(0) &&\r\n          center[0].toFixed(0) === end[0].toFixed(0)) ||\r\n        (start[1].toFixed(0) === center[1].toFixed(0) &&\r\n          center[1].toFixed(0) === end[1].toFixed(0))\r\n      if (!isOneLine) {\r\n        const cStart = this.computeNewPoint(start, center, lineRadius)\r\n        const cEnd = this.computeNewPoint(end, center, lineRadius)\r\n        radiusPath = `Q ${center[0]},${center[1]} ${cEnd[0]},${cEnd[1]}`\r\n        list.splice(len - 2, 1, cStart, radiusPath)\r\n      }\r\n    }\r\n    list.forEach((item, index) => {\r\n      if (typeof item === 'string') {\r\n        path += item\r\n      } else {\r\n        const [x, y] = item\r\n        if (index === 0) {\r\n          path += `M ${x},${y}`\r\n        } else {\r\n          path += `L ${x},${y}`\r\n        }\r\n      }\r\n    })\r\n    return path\r\n  }\r\n\r\n  //   marginX\r\n  getMarginX(layerIndex) {\r\n    const { themeConfig, opt } = this.mindMap\r\n    const { second, node } = themeConfig\r\n    const hoverRectPadding = opt.hoverRectPadding * 2\r\n    return layerIndex === 1\r\n      ? second.marginX + hoverRectPadding\r\n      : node.marginX + hoverRectPadding\r\n  }\r\n\r\n  //  marginY\r\n  getMarginY(layerIndex) {\r\n    const { themeConfig, opt } = this.mindMap\r\n    const { second, node } = themeConfig\r\n    const hoverRectPadding = opt.hoverRectPadding * 2\r\n    return layerIndex === 1\r\n      ? second.marginY + hoverRectPadding\r\n      : node.marginY + hoverRectPadding\r\n  }\r\n\r\n  //  \r\n  getNodeWidthWithGeneralization(node) {\r\n    return Math.max(\r\n      node.width,\r\n      node.checkHasGeneralization() ? node._generalizationNodeWidth : 0\r\n    )\r\n  }\r\n\r\n  //  \r\n  getNodeHeightWithGeneralization(node) {\r\n    return Math.max(\r\n      node.height,\r\n      node.checkHasGeneralization() ? node._generalizationNodeHeight : 0\r\n    )\r\n  }\r\n\r\n  //  \r\n  /**\r\n   * dirhv\r\n   * isLeft\r\n   */\r\n  getNodeBoundaries(node, dir) {\r\n    let { generalizationLineMargin, generalizationNodeMargin } =\r\n      this.mindMap.themeConfig\r\n    let walk = root => {\r\n      let _left = Infinity\r\n      let _right = -Infinity\r\n      let _top = Infinity\r\n      let _bottom = -Infinity\r\n      if (root.children && root.children.length > 0) {\r\n        root.children.forEach(child => {\r\n          let { left, right, top, bottom } = walk(child)\r\n          // \r\n          let generalizationWidth =\r\n            child.checkHasGeneralization() && child.getData('expand')\r\n              ? child._generalizationNodeWidth + generalizationNodeMargin\r\n              : 0\r\n          // \r\n          let generalizationHeight =\r\n            child.checkHasGeneralization() && child.getData('expand')\r\n              ? child._generalizationNodeHeight + generalizationNodeMargin\r\n              : 0\r\n          if (left - (dir === 'h' ? generalizationWidth : 0) < _left) {\r\n            _left = left - (dir === 'h' ? generalizationWidth : 0)\r\n          }\r\n          if (right + (dir === 'h' ? generalizationWidth : 0) > _right) {\r\n            _right = right + (dir === 'h' ? generalizationWidth : 0)\r\n          }\r\n          if (top < _top) {\r\n            _top = top\r\n          }\r\n          if (bottom + (dir === 'v' ? generalizationHeight : 0) > _bottom) {\r\n            _bottom = bottom + (dir === 'v' ? generalizationHeight : 0)\r\n          }\r\n        })\r\n      }\r\n      let cur = {\r\n        left: root.left,\r\n        right: root.left + root.width,\r\n        top: root.top,\r\n        bottom: root.top + root.height\r\n      }\r\n      return {\r\n        left: cur.left < _left ? cur.left : _left,\r\n        right: cur.right > _right ? cur.right : _right,\r\n        top: cur.top < _top ? cur.top : _top,\r\n        bottom: cur.bottom > _bottom ? cur.bottom : _bottom\r\n      }\r\n    }\r\n    let { left, right, top, bottom } = walk(node)\r\n    return {\r\n      left,\r\n      right,\r\n      top,\r\n      bottom,\r\n      generalizationLineMargin,\r\n      generalizationNodeMargin\r\n    }\r\n  }\r\n\r\n  // \r\n  getChildrenBoundaries(node, dir, startIndex = 0, endIndex) {\r\n    let { generalizationLineMargin, generalizationNodeMargin } =\r\n      this.mindMap.themeConfig\r\n    const children = node.children.slice(startIndex, endIndex + 1)\r\n    let left = Infinity\r\n    let right = -Infinity\r\n    let top = Infinity\r\n    let bottom = -Infinity\r\n    children.forEach(item => {\r\n      const cur = this.getNodeBoundaries(item, dir)\r\n      left = cur.left < left ? cur.left : left\r\n      right = cur.right > right ? cur.right : right\r\n      top = cur.top < top ? cur.top : top\r\n      bottom = cur.bottom > bottom ? cur.bottom : bottom\r\n    })\r\n    return {\r\n      left,\r\n      right,\r\n      top,\r\n      bottom,\r\n      generalizationLineMargin,\r\n      generalizationNodeMargin\r\n    }\r\n  }\r\n\r\n  // \r\n  getNodeGeneralizationRenderBoundaries(item, dir) {\r\n    let res = null\r\n    // \r\n    if (item.range) {\r\n      res = this.getChildrenBoundaries(\r\n        item.node,\r\n        dir,\r\n        item.range[0],\r\n        item.range[1]\r\n      )\r\n    } else {\r\n      // \r\n      res = this.getNodeBoundaries(item.node, dir)\r\n    }\r\n    return res\r\n  }\r\n\r\n  // \r\n  getNodeActChildrenLength(node) {\r\n    return node.nodeData.children && node.nodeData.children.length\r\n  }\r\n\r\n  // \r\n  setLineStyle(style, line, path, childNode) {\r\n    line.plot(this.transformPath(path))\r\n    style && style(line, childNode, true)\r\n  }\r\n\r\n  // \r\n  transformPath(path) {\r\n    const { customTransformNodeLinePath } = this.mindMap.opt\r\n    if (customTransformNodeLinePath) {\r\n      return customTransformNodeLinePath(path)\r\n    } else {\r\n      return path\r\n    }\r\n  }\r\n}\r\n\r\nexport default Base\r\n","import Base from './Base'\r\nimport { walk, asyncRun, getNodeIndexInNodeList } from '../utils'\r\nimport { CONSTANTS } from '../constants/constant'\r\n\r\n//  \r\nclass LogicalStructure extends Base {\r\n  //  \r\n  constructor(opt = {}, layout) {\r\n    super(opt)\r\n    this.isUseLeft = layout === CONSTANTS.LAYOUT.LOGICAL_STRUCTURE_LEFT\r\n  }\r\n\r\n  //  \r\n  doLayout(callback) {\r\n    let task = [\r\n      () => {\r\n        this.computedBaseValue()\r\n      },\r\n      () => {\r\n        this.computedTopValue()\r\n      },\r\n      () => {\r\n        this.adjustTopValue()\r\n      },\r\n      () => {\r\n        callback(this.root)\r\n      }\r\n    ]\r\n    asyncRun(task)\r\n  }\r\n\r\n  //  leftwidthheight\r\n  computedBaseValue() {\r\n    let sortIndex = 0\r\n    walk(\r\n      this.renderer.renderTree,\r\n      null,\r\n      (cur, parent, isRoot, layerIndex, index, ancestors) => {\r\n        let newNode = this.createNode(cur, parent, isRoot, layerIndex, index, ancestors)\r\n        newNode.sortIndex = sortIndex\r\n        sortIndex++\r\n        // \r\n        if (isRoot) {\r\n          this.setNodeCenter(newNode)\r\n        } else {\r\n          // \r\n          // \r\n          if (this.isUseLeft) {\r\n            newNode.left =\r\n              parent._node.left - newNode.width - this.getMarginX(layerIndex)\r\n          } else {\r\n            newNode.left =\r\n              parent._node.left +\r\n              parent._node.width +\r\n              this.getMarginX(layerIndex)\r\n          }\r\n        }\r\n        if (!cur.data.expand) {\r\n          return true\r\n        }\r\n      },\r\n      (cur, parent, isRoot, layerIndex) => {\r\n        // areaHeight\r\n        let len = cur.data.expand === false ? 0 : cur._node.children.length\r\n        cur._node.childrenAreaHeight = len\r\n          ? cur._node.children.reduce((h, item) => {\r\n              return h + item.height\r\n            }, 0) +\r\n            (len + 1) * this.getMarginY(layerIndex + 1)\r\n          : 0\r\n        // \r\n        let generalizationNodeHeight = cur._node.checkHasGeneralization()\r\n          ? cur._node._generalizationNodeHeight +\r\n            this.getMarginY(layerIndex + 1)\r\n          : 0\r\n        cur._node.childrenAreaHeight2 = Math.max(\r\n          cur._node.childrenAreaHeight,\r\n          generalizationNodeHeight\r\n        )\r\n      },\r\n      true,\r\n      0\r\n    )\r\n  }\r\n\r\n  //  top\r\n  computedTopValue() {\r\n    walk(\r\n      this.root,\r\n      null,\r\n      (node, parent, isRoot, layerIndex) => {\r\n        if (node.getData('expand') && node.children && node.children.length) {\r\n          let marginY = this.getMarginY(layerIndex + 1)\r\n          // top = top - \r\n          let top = node.top + node.height / 2 - node.childrenAreaHeight / 2\r\n          let totalTop = top + marginY\r\n          node.children.forEach(cur => {\r\n            cur.top = totalTop\r\n            totalTop += cur.height + marginY\r\n          })\r\n        }\r\n      },\r\n      null,\r\n      true\r\n    )\r\n  }\r\n\r\n  //  top\r\n  adjustTopValue() {\r\n    walk(\r\n      this.root,\r\n      null,\r\n      (node, parent, isRoot, layerIndex) => {\r\n        if (!node.getData('expand')) {\r\n          return\r\n        }\r\n        // \r\n        let difference =\r\n          node.childrenAreaHeight2 -\r\n          this.getMarginY(layerIndex + 1) * 2 -\r\n          node.height\r\n        if (difference > 0) {\r\n          this.updateBrothers(node, difference / 2)\r\n        }\r\n      },\r\n      null,\r\n      true\r\n    )\r\n  }\r\n\r\n  //  top\r\n  updateBrothers(node, addHeight) {\r\n    if (node.parent) {\r\n      let childrenList = node.parent.children\r\n      let index = getNodeIndexInNodeList(node, childrenList)\r\n      childrenList.forEach((item, _index) => {\r\n        if (item.uid === node.uid || item.hasCustomPosition()) {\r\n          // \r\n          return\r\n        }\r\n        let _offset = 0\r\n        // \r\n        if (_index < index) {\r\n          _offset = -addHeight\r\n        } else if (_index > index) {\r\n          // \r\n          _offset = addHeight\r\n        }\r\n        item.top += _offset\r\n        // \r\n        if (item.children && item.children.length) {\r\n          this.updateChildren(item.children, 'top', _offset)\r\n        }\r\n      })\r\n      // \r\n      this.updateBrothers(node.parent, addHeight)\r\n    }\r\n  }\r\n\r\n  //  \r\n  renderLine(node, lines, style, lineStyle) {\r\n    if (lineStyle === 'curve') {\r\n      this.renderLineCurve(node, lines, style)\r\n    } else if (lineStyle === 'direct') {\r\n      this.renderLineDirect(node, lines, style)\r\n    } else {\r\n      this.renderLineStraight(node, lines, style)\r\n    }\r\n  }\r\n\r\n  //  \r\n  renderLineStraight(node, lines, style) {\r\n    if (node.children.length <= 0) {\r\n      return []\r\n    }\r\n    let { left, top, width, height, expandBtnSize } = node\r\n    const { alwaysShowExpandBtn, notShowExpandBtn } = this.mindMap.opt\r\n    if (!alwaysShowExpandBtn || notShowExpandBtn) {\r\n      expandBtnSize = 0\r\n    }\r\n    let marginX = this.getMarginX(node.layerIndex + 1)\r\n    let s1 = (marginX - expandBtnSize) * 0.6\r\n    if (this.isUseLeft) {\r\n      s1 *= -1\r\n    }\r\n    let nodeUseLineStyle = this.mindMap.themeConfig.nodeUseLineStyle\r\n    node.children.forEach((item, index) => {\r\n      let x1\r\n      if (this.isUseLeft) {\r\n        x1 = node.layerIndex === 0 ? left : left - expandBtnSize\r\n      } else {\r\n        x1 = node.layerIndex === 0 ? left + width : left + width + expandBtnSize\r\n      }\r\n      let y1 = top + height / 2\r\n      let x2 = this.isUseLeft ? item.left + item.width : item.left\r\n      let y2 = item.top + item.height / 2\r\n      // \r\n      let nodeUseLineStyleOffset = nodeUseLineStyle\r\n        ? item.width * (this.isUseLeft ? -1 : 1)\r\n        : 0\r\n      y1 = nodeUseLineStyle && !node.isRoot ? y1 + height / 2 : y1\r\n      y2 = nodeUseLineStyle ? y2 + item.height / 2 : y2\r\n      let path = this.createFoldLine([\r\n        [x1, y1],\r\n        [x1 + s1, y1],\r\n        [x1 + s1, y2],\r\n        [x2 + nodeUseLineStyleOffset, y2]\r\n      ])\r\n      this.setLineStyle(style, lines[index], path, item)\r\n    })\r\n  }\r\n\r\n  //  \r\n  renderLineDirect(node, lines, style) {\r\n    if (node.children.length <= 0) {\r\n      return []\r\n    }\r\n    let { left, top, width, height, expandBtnSize } = node\r\n    const { alwaysShowExpandBtn, notShowExpandBtn } = this.mindMap.opt\r\n    if (!alwaysShowExpandBtn || notShowExpandBtn) {\r\n      expandBtnSize = 0\r\n    }\r\n    const { nodeUseLineStyle } = this.mindMap.themeConfig\r\n    node.children.forEach((item, index) => {\r\n      if (node.layerIndex === 0) {\r\n        expandBtnSize = 0\r\n      }\r\n      let x1 = this.isUseLeft\r\n        ? left - expandBtnSize\r\n        : left + width + expandBtnSize\r\n      let y1 = top + height / 2\r\n      let x2 = this.isUseLeft ? item.left + item.width : item.left\r\n      let y2 = item.top + item.height / 2\r\n      y1 = nodeUseLineStyle && !node.isRoot ? y1 + height / 2 : y1\r\n      y2 = nodeUseLineStyle ? y2 + item.height / 2 : y2\r\n      // \r\n      let nodeUseLineStylePath = nodeUseLineStyle\r\n        ? ` L ${this.isUseLeft ? item.left : item.left + item.width},${y2}`\r\n        : ''\r\n      let path = `M ${x1},${y1} L ${x2},${y2}` + nodeUseLineStylePath\r\n      this.setLineStyle(style, lines[index], path, item)\r\n    })\r\n  }\r\n\r\n  //  \r\n  renderLineCurve(node, lines, style) {\r\n    if (node.children.length <= 0) {\r\n      return []\r\n    }\r\n    let { left, top, width, height, expandBtnSize } = node\r\n    const { alwaysShowExpandBtn, notShowExpandBtn } = this.mindMap.opt\r\n    if (!alwaysShowExpandBtn || notShowExpandBtn) {\r\n      expandBtnSize = 0\r\n    }\r\n    const {\r\n      nodeUseLineStyle,\r\n      rootLineStartPositionKeepSameInCurve,\r\n      rootLineKeepSameInCurve\r\n    } = this.mindMap.themeConfig\r\n    node.children.forEach((item, index) => {\r\n      if (node.layerIndex === 0) {\r\n        expandBtnSize = 0\r\n      }\r\n      let x1\r\n      if (this.isUseLeft) {\r\n        x1 =\r\n          node.layerIndex === 0 && !rootLineStartPositionKeepSameInCurve\r\n            ? left + width / 2\r\n            : left - expandBtnSize\r\n      } else {\r\n        x1 =\r\n          node.layerIndex === 0 && !rootLineStartPositionKeepSameInCurve\r\n            ? left + width / 2\r\n            : left + width + expandBtnSize\r\n      }\r\n      let y1 = top + height / 2\r\n      let x2 = this.isUseLeft ? item.left + item.width : item.left\r\n      let y2 = item.top + item.height / 2\r\n      let path = ''\r\n      y1 = nodeUseLineStyle && !node.isRoot ? y1 + height / 2 : y1\r\n      y2 = nodeUseLineStyle ? y2 + item.height / 2 : y2\r\n      // \r\n      let nodeUseLineStylePath\r\n      if (this.isUseLeft) {\r\n        nodeUseLineStylePath = nodeUseLineStyle ? ` L ${item.left},${y2}` : ''\r\n      } else {\r\n        nodeUseLineStylePath = nodeUseLineStyle\r\n          ? ` L ${item.left + item.width},${y2}`\r\n          : ''\r\n      }\r\n      if (node.isRoot && !rootLineKeepSameInCurve) {\r\n        path = this.quadraticCurvePath(x1, y1, x2, y2) + nodeUseLineStylePath\r\n      } else {\r\n        path = this.cubicBezierPath(x1, y1, x2, y2) + nodeUseLineStylePath\r\n      }\r\n      this.setLineStyle(style, lines[index], path, item)\r\n    })\r\n  }\r\n\r\n  //  \r\n  renderExpandBtn(node, btn) {\r\n    let { width, height, expandBtnSize, layerIndex } = node\r\n    if (layerIndex === 0) {\r\n      expandBtnSize = 0\r\n    }\r\n    let { translateX, translateY } = btn.transform()\r\n    // \r\n    let nodeUseLineStyleOffset = this.mindMap.themeConfig.nodeUseLineStyle\r\n      ? height / 2\r\n      : 0\r\n    // \r\n    let _x = this.isUseLeft ? 0 - expandBtnSize : width\r\n    let _y = height / 2 + nodeUseLineStyleOffset\r\n    if (_x === translateX && _y === translateY) {\r\n      return\r\n    }\r\n    btn.translate(_x - translateX, _y - translateY)\r\n  }\r\n\r\n  //  \r\n  renderGeneralization(list) {\r\n    list.forEach(item => {\r\n      let {\r\n        left,\r\n        top,\r\n        bottom,\r\n        right,\r\n        generalizationLineMargin,\r\n        generalizationNodeMargin\r\n      } = this.getNodeGeneralizationRenderBoundaries(item, 'h')\r\n      let x = this.isUseLeft\r\n        ? left - generalizationLineMargin\r\n        : right + generalizationLineMargin\r\n      let x1 = x\r\n      let y1 = top\r\n      let x2 = x\r\n      let y2 = bottom\r\n      let cx = x1 + (this.isUseLeft ? -20 : 20)\r\n      let cy = y1 + (y2 - y1) / 2\r\n      let path = `M ${x1},${y1} Q ${cx},${cy} ${x2},${y2}`\r\n      item.generalizationLine.plot(path)\r\n      item.generalizationNode.left =\r\n        x +\r\n        (this.isUseLeft\r\n          ? -generalizationNodeMargin\r\n          : generalizationNodeMargin) -\r\n        (this.isUseLeft ? item.generalizationNode.width : 0)\r\n      item.generalizationNode.top =\r\n        top + (bottom - top - item.generalizationNode.height) / 2\r\n    })\r\n  }\r\n\r\n  // \r\n  renderExpandBtnRect(rect, expandBtnSize, width, height) {\r\n    if (this.isUseLeft) {\r\n      rect.size(expandBtnSize, height).x(-expandBtnSize).y(0)\r\n    } else {\r\n      rect.size(expandBtnSize, height).x(width).y(0)\r\n    }\r\n  }\r\n}\r\n\r\nexport default LogicalStructure\r\n","import Base from './Base'\r\nimport { walk, asyncRun, getNodeIndexInNodeList } from '../utils'\r\nimport { CONSTANTS } from '../constants/constant'\r\n\r\n//  \r\nclass MindMap extends Base {\r\n  //  \r\n  // lefttop\r\n  constructor(opt = {}) {\r\n    super(opt)\r\n  }\r\n\r\n  //  \r\n  doLayout(callback) {\r\n    let task = [\r\n      () => {\r\n        this.computedBaseValue()\r\n      },\r\n      () => {\r\n        this.computedTopValue()\r\n      },\r\n      () => {\r\n        this.adjustTopValue()\r\n      },\r\n      () => {\r\n        callback(this.root)\r\n      }\r\n    ]\r\n    asyncRun(task)\r\n  }\r\n\r\n  //  leftwidthheight\r\n  computedBaseValue() {\r\n    walk(\r\n      this.renderer.renderTree,\r\n      null,\r\n      (cur, parent, isRoot, layerIndex, index, ancestors) => {\r\n        let newNode = this.createNode(\r\n          cur,\r\n          parent,\r\n          isRoot,\r\n          layerIndex,\r\n          index,\r\n          ancestors\r\n        )\r\n        // \r\n        if (isRoot) {\r\n          this.setNodeCenter(newNode)\r\n        } else {\r\n          // \r\n          // \r\n          if (parent._node.dir) {\r\n            newNode.dir = parent._node.dir\r\n          } else {\r\n            // \r\n            newNode.dir =\r\n              newNode.getData('dir') ||\r\n              (index % 2 === 0\r\n                ? CONSTANTS.LAYOUT_GROW_DIR.RIGHT\r\n                : CONSTANTS.LAYOUT_GROW_DIR.LEFT)\r\n          }\r\n          // \r\n          newNode.left =\r\n            newNode.dir === CONSTANTS.LAYOUT_GROW_DIR.RIGHT\r\n              ? parent._node.left +\r\n                parent._node.width +\r\n                this.getMarginX(layerIndex)\r\n              : parent._node.left - this.getMarginX(layerIndex) - newNode.width\r\n        }\r\n        if (!cur.data.expand) {\r\n          return true\r\n        }\r\n      },\r\n      (cur, parent, isRoot, layerIndex) => {\r\n        // leftChildrenAreaHeightrightChildrenAreaHeight\r\n        if (!cur.data.expand) {\r\n          cur._node.leftChildrenAreaHeight = 0\r\n          cur._node.rightChildrenAreaHeight = 0\r\n          return\r\n        }\r\n        // \r\n        let leftLen = 0\r\n        let rightLen = 0\r\n        let leftChildrenAreaHeight = 0\r\n        let rightChildrenAreaHeight = 0\r\n        cur._node.children.forEach(item => {\r\n          if (item.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT) {\r\n            leftLen++\r\n            leftChildrenAreaHeight += item.height\r\n          } else {\r\n            rightLen++\r\n            rightChildrenAreaHeight += item.height\r\n          }\r\n        })\r\n        cur._node.leftChildrenAreaHeight =\r\n          leftChildrenAreaHeight +\r\n          (leftLen + 1) * this.getMarginY(layerIndex + 1)\r\n        cur._node.rightChildrenAreaHeight =\r\n          rightChildrenAreaHeight +\r\n          (rightLen + 1) * this.getMarginY(layerIndex + 1)\r\n\r\n        // \r\n        let generalizationNodeHeight = cur._node.checkHasGeneralization()\r\n          ? cur._node._generalizationNodeHeight +\r\n            this.getMarginY(layerIndex + 1)\r\n          : 0\r\n        cur._node.leftChildrenAreaHeight2 = Math.max(\r\n          cur._node.leftChildrenAreaHeight,\r\n          generalizationNodeHeight\r\n        )\r\n        cur._node.rightChildrenAreaHeight2 = Math.max(\r\n          cur._node.rightChildrenAreaHeight,\r\n          generalizationNodeHeight\r\n        )\r\n      },\r\n      true,\r\n      0\r\n    )\r\n  }\r\n\r\n  //  top\r\n  computedTopValue() {\r\n    walk(\r\n      this.root,\r\n      null,\r\n      (node, parent, isRoot, layerIndex) => {\r\n        if (node.getData('expand') && node.children && node.children.length) {\r\n          let marginY = this.getMarginY(layerIndex + 1)\r\n          let baseTop = node.top + node.height / 2 + marginY\r\n          // top = top - \r\n          let leftTotalTop = baseTop - node.leftChildrenAreaHeight / 2\r\n          let rightTotalTop = baseTop - node.rightChildrenAreaHeight / 2\r\n          node.children.forEach(cur => {\r\n            if (cur.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT) {\r\n              cur.top = leftTotalTop\r\n              leftTotalTop += cur.height + marginY\r\n            } else {\r\n              cur.top = rightTotalTop\r\n              rightTotalTop += cur.height + marginY\r\n            }\r\n          })\r\n        }\r\n      },\r\n      null,\r\n      true\r\n    )\r\n  }\r\n\r\n  //  top\r\n  adjustTopValue() {\r\n    walk(\r\n      this.root,\r\n      null,\r\n      (node, parent, isRoot, layerIndex) => {\r\n        if (!node.getData('expand')) {\r\n          return\r\n        }\r\n        // \r\n        let base = this.getMarginY(layerIndex + 1) * 2 + node.height\r\n        let leftDifference = node.leftChildrenAreaHeight2 - base\r\n        let rightDifference = node.rightChildrenAreaHeight2 - base\r\n        if (leftDifference > 0 || rightDifference > 0) {\r\n          this.updateBrothers(node, leftDifference / 2, rightDifference / 2)\r\n        }\r\n      },\r\n      null,\r\n      true\r\n    )\r\n  }\r\n\r\n  //  top\r\n  updateBrothers(node, leftAddHeight, rightAddHeight) {\r\n    if (node.parent) {\r\n      // \r\n      let childrenList = node.parent.children.filter(item => {\r\n        return item.dir === node.dir\r\n      })\r\n      let index = getNodeIndexInNodeList(node, childrenList)\r\n      childrenList.forEach((item, _index) => {\r\n        if (item.hasCustomPosition()) {\r\n          // \r\n          return\r\n        }\r\n        let _offset = 0\r\n        let addHeight =\r\n          item.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT\r\n            ? leftAddHeight\r\n            : rightAddHeight\r\n        // \r\n        if (_index < index) {\r\n          _offset = -addHeight\r\n        } else if (_index > index) {\r\n          // \r\n          _offset = addHeight\r\n        }\r\n        item.top += _offset\r\n        // \r\n        if (item.children && item.children.length) {\r\n          this.updateChildren(item.children, 'top', _offset)\r\n        }\r\n      })\r\n      // \r\n      this.updateBrothers(node.parent, leftAddHeight, rightAddHeight)\r\n    }\r\n  }\r\n\r\n  //  \r\n  renderLine(node, lines, style, lineStyle) {\r\n    if (lineStyle === 'curve') {\r\n      this.renderLineCurve(node, lines, style)\r\n    } else if (lineStyle === 'direct') {\r\n      this.renderLineDirect(node, lines, style)\r\n    } else {\r\n      this.renderLineStraight(node, lines, style)\r\n    }\r\n  }\r\n\r\n  //  \r\n  renderLineStraight(node, lines, style) {\r\n    if (node.children.length <= 0) {\r\n      return []\r\n    }\r\n    let { left, top, width, height, expandBtnSize } = node\r\n    const { alwaysShowExpandBtn, notShowExpandBtn } = this.mindMap.opt\r\n    if (!alwaysShowExpandBtn || notShowExpandBtn) {\r\n      expandBtnSize = 0\r\n    }\r\n    let marginX = this.getMarginX(node.layerIndex + 1)\r\n    let s1 = (marginX - expandBtnSize) * 0.6\r\n    let nodeUseLineStyle = this.mindMap.themeConfig.nodeUseLineStyle\r\n    node.children.forEach((item, index) => {\r\n      let x1 = 0\r\n      let _s = 0\r\n      // \r\n      let nodeUseLineStyleOffset = nodeUseLineStyle ? item.width : 0\r\n      if (item.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT) {\r\n        _s = -s1\r\n        x1 = node.layerIndex === 0 ? left : left - expandBtnSize\r\n        nodeUseLineStyleOffset = -nodeUseLineStyleOffset\r\n      } else {\r\n        _s = s1\r\n        x1 = node.layerIndex === 0 ? left + width : left + width + expandBtnSize\r\n      }\r\n      let y1 = top + height / 2\r\n      let x2 =\r\n        item.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT\r\n          ? item.left + item.width\r\n          : item.left\r\n      let y2 = item.top + item.height / 2\r\n      y1 = nodeUseLineStyle && !node.isRoot ? y1 + height / 2 : y1\r\n      y2 = nodeUseLineStyle ? y2 + item.height / 2 : y2\r\n      let path = this.createFoldLine([\r\n        [x1, y1],\r\n        [x1 + _s, y1],\r\n        [x1 + _s, y2],\r\n        [x2 + nodeUseLineStyleOffset, y2]\r\n      ])\r\n      this.setLineStyle(style, lines[index], path, item)\r\n    })\r\n  }\r\n\r\n  //  \r\n  renderLineDirect(node, lines, style) {\r\n    if (node.children.length <= 0) {\r\n      return []\r\n    }\r\n    let { left, top, width, height, expandBtnSize } = node\r\n    const { alwaysShowExpandBtn, notShowExpandBtn } = this.mindMap.opt\r\n    if (!alwaysShowExpandBtn || notShowExpandBtn) {\r\n      expandBtnSize = 0\r\n    }\r\n    const { nodeUseLineStyle } = this.mindMap.themeConfig\r\n    node.children.forEach((item, index) => {\r\n      if (node.layerIndex === 0) {\r\n        expandBtnSize = 0\r\n      }\r\n      let x1 =\r\n        item.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT\r\n          ? left - expandBtnSize\r\n          : left + width + expandBtnSize\r\n      let y1 = top + height / 2\r\n      let x2 =\r\n        item.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT\r\n          ? item.left + item.width\r\n          : item.left\r\n      let y2 = item.top + item.height / 2\r\n      y1 = nodeUseLineStyle && !node.isRoot ? y1 + height / 2 : y1\r\n      y2 = nodeUseLineStyle ? y2 + item.height / 2 : y2\r\n      // \r\n      let nodeUseLineStylePath = ''\r\n      if (nodeUseLineStyle) {\r\n        if (item.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT) {\r\n          nodeUseLineStylePath = ` L ${item.left},${y2}`\r\n        } else {\r\n          nodeUseLineStylePath = ` L ${item.left + item.width},${y2}`\r\n        }\r\n      }\r\n      let path = `M ${x1},${y1} L ${x2},${y2}` + nodeUseLineStylePath\r\n      this.setLineStyle(style, lines[index], path, item)\r\n    })\r\n  }\r\n\r\n  //  \r\n  renderLineCurve(node, lines, style) {\r\n    if (node.children.length <= 0) {\r\n      return []\r\n    }\r\n    let { left, top, width, height, expandBtnSize } = node\r\n    const { alwaysShowExpandBtn, notShowExpandBtn } = this.mindMap.opt\r\n    if (!alwaysShowExpandBtn || notShowExpandBtn) {\r\n      expandBtnSize = 0\r\n    }\r\n    const {\r\n      nodeUseLineStyle,\r\n      rootLineKeepSameInCurve,\r\n      rootLineStartPositionKeepSameInCurve\r\n    } = this.mindMap.themeConfig\r\n    node.children.forEach((item, index) => {\r\n      if (node.layerIndex === 0) {\r\n        expandBtnSize = 0\r\n      }\r\n      let x1 =\r\n        node.layerIndex === 0 && !rootLineStartPositionKeepSameInCurve\r\n          ? left + width / 2\r\n          : item.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT\r\n          ? left - expandBtnSize\r\n          : left + width + expandBtnSize\r\n      let y1 = top + height / 2\r\n      let x2 =\r\n        item.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT\r\n          ? item.left + item.width\r\n          : item.left\r\n      let y2 = item.top + item.height / 2\r\n      let path = ''\r\n      y1 = nodeUseLineStyle && !node.isRoot ? y1 + height / 2 : y1\r\n      y2 = nodeUseLineStyle ? y2 + item.height / 2 : y2\r\n      // \r\n      let nodeUseLineStylePath = ''\r\n      if (nodeUseLineStyle) {\r\n        if (item.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT) {\r\n          nodeUseLineStylePath = ` L ${item.left},${y2}`\r\n        } else {\r\n          nodeUseLineStylePath = ` L ${item.left + item.width},${y2}`\r\n        }\r\n      }\r\n      if (node.isRoot && !rootLineKeepSameInCurve) {\r\n        path = this.quadraticCurvePath(x1, y1, x2, y2) + nodeUseLineStylePath\r\n      } else {\r\n        path = this.cubicBezierPath(x1, y1, x2, y2) + nodeUseLineStylePath\r\n      }\r\n      this.setLineStyle(style, lines[index], path, item)\r\n    })\r\n  }\r\n\r\n  //  \r\n  renderExpandBtn(node, btn) {\r\n    let { width, height, expandBtnSize } = node\r\n    let { translateX, translateY } = btn.transform()\r\n    // \r\n    let nodeUseLineStyleOffset = this.mindMap.themeConfig.nodeUseLineStyle\r\n      ? height / 2\r\n      : 0\r\n    // \r\n    let _x =\r\n      node.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT ? 0 - expandBtnSize : width\r\n    let _y = height / 2 + nodeUseLineStyleOffset\r\n    if (_x === translateX && _y === translateY) {\r\n      return\r\n    }\r\n    let x = _x - translateX\r\n    let y = _y - translateY\r\n    btn.translate(x, y)\r\n  }\r\n\r\n  //  \r\n  renderGeneralization(list) {\r\n    list.forEach(item => {\r\n      let isLeft = item.node.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT\r\n      let {\r\n        top,\r\n        bottom,\r\n        left,\r\n        right,\r\n        generalizationLineMargin,\r\n        generalizationNodeMargin\r\n      } = this.getNodeGeneralizationRenderBoundaries(item, 'h')\r\n      let x = isLeft\r\n        ? left - generalizationLineMargin\r\n        : right + generalizationLineMargin\r\n      let x1 = x\r\n      let y1 = top\r\n      let x2 = x\r\n      let y2 = bottom\r\n      let cx = x1 + (isLeft ? -20 : 20)\r\n      let cy = y1 + (y2 - y1) / 2\r\n      let path = `M ${x1},${y1} Q ${cx},${cy} ${x2},${y2}`\r\n      item.generalizationLine.plot(path)\r\n      item.generalizationNode.left =\r\n        x +\r\n        (isLeft ? -generalizationNodeMargin : generalizationNodeMargin) -\r\n        (isLeft ? item.generalizationNode.width : 0)\r\n      item.generalizationNode.top =\r\n        top + (bottom - top - item.generalizationNode.height) / 2\r\n    })\r\n  }\r\n\r\n  // \r\n  renderExpandBtnRect(rect, expandBtnSize, width, height, node) {\r\n    if (node.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT) {\r\n      rect.size(expandBtnSize, height).x(-expandBtnSize).y(0)\r\n    } else {\r\n      rect.size(expandBtnSize, height).x(width).y(0)\r\n    }\r\n  }\r\n}\r\n\r\nexport default MindMap\r\n","import Base from './Base'\r\nimport { walk, asyncRun, getNodeIndexInNodeList } from '../utils'\r\n\r\n//  \r\nclass CatalogOrganization extends Base {\r\n  //  \r\n  constructor(opt = {}) {\r\n    super(opt)\r\n  }\r\n\r\n  //  \r\n  doLayout(callback) {\r\n    let task = [\r\n      () => {\r\n        this.computedBaseValue()\r\n      },\r\n      () => {\r\n        this.computedLeftTopValue()\r\n      },\r\n      () => {\r\n        this.adjustLeftTopValue()\r\n      },\r\n      () => {\r\n        callback(this.root)\r\n      }\r\n    ]\r\n    asyncRun(task)\r\n  }\r\n\r\n  //  leftwidthheight\r\n  computedBaseValue() {\r\n    walk(\r\n      this.renderer.renderTree,\r\n      null,\r\n      (cur, parent, isRoot, layerIndex, index, ancestors) => {\r\n        let newNode = this.createNode(cur, parent, isRoot, layerIndex, index, ancestors)\r\n        // \r\n        if (isRoot) {\r\n          this.setNodeCenter(newNode)\r\n        } else {\r\n          // \r\n          if (parent._node.isRoot) {\r\n            newNode.top =\r\n              parent._node.top +\r\n              parent._node.height +\r\n              this.getMarginX(layerIndex)\r\n          }\r\n        }\r\n        if (!cur.data.expand) {\r\n          return true\r\n        }\r\n      },\r\n      (cur, parent, isRoot, layerIndex) => {\r\n        if (isRoot) {\r\n          let len = cur.data.expand === false ? 0 : cur._node.children.length\r\n          cur._node.childrenAreaWidth = len\r\n            ? cur._node.children.reduce((h, item) => {\r\n                return h + item.width\r\n              }, 0) +\r\n              (len + 1) * this.getMarginX(layerIndex + 1)\r\n            : 0\r\n        }\r\n      },\r\n      true,\r\n      0\r\n    )\r\n  }\r\n\r\n  //  lefttop\r\n  computedLeftTopValue() {\r\n    walk(\r\n      this.root,\r\n      null,\r\n      (node, parent, isRoot, layerIndex) => {\r\n        if (node.getData('expand') && node.children && node.children.length) {\r\n          let marginX = this.getMarginX(layerIndex + 1)\r\n          let marginY = this.getMarginY(layerIndex + 1)\r\n          if (isRoot) {\r\n            let left = node.left + node.width / 2 - node.childrenAreaWidth / 2\r\n            let totalLeft = left + marginX\r\n            node.children.forEach(cur => {\r\n              cur.left = totalLeft\r\n              totalLeft += cur.width + marginX\r\n            })\r\n          } else {\r\n            let totalTop =\r\n              node.top +\r\n              this.getNodeHeightWithGeneralization(node) +\r\n              marginY +\r\n              (this.getNodeActChildrenLength(node) > 0 ? node.expandBtnSize : 0)\r\n            node.children.forEach(cur => {\r\n              cur.left = node.left + node.width * 0.5\r\n              cur.top = totalTop\r\n              totalTop +=\r\n                this.getNodeHeightWithGeneralization(cur) +\r\n                marginY +\r\n                (this.getNodeActChildrenLength(cur) > 0 ? cur.expandBtnSize : 0)\r\n            })\r\n          }\r\n        }\r\n      },\r\n      null,\r\n      true\r\n    )\r\n  }\r\n\r\n  //  lefttop\r\n  adjustLeftTopValue() {\r\n    walk(\r\n      this.root,\r\n      null,\r\n      (node, parent, isRoot, layerIndex) => {\r\n        if (!node.getData('expand')) {\r\n          return\r\n        }\r\n        // left\r\n        if (parent && parent.isRoot) {\r\n          let areaWidth = this.getNodeAreaWidth(node, true)\r\n          let difference = areaWidth - node.width\r\n          if (difference > 0) {\r\n            this.updateBrothersLeft(node, difference)\r\n          }\r\n        }\r\n        // top\r\n        let len = node.children.length\r\n        if (parent && !parent.isRoot && len > 0) {\r\n          let marginY = this.getMarginY(layerIndex + 1)\r\n          let totalHeight =\r\n            node.children.reduce((h, item) => {\r\n              return (\r\n                h +\r\n                this.getNodeHeightWithGeneralization(item) +\r\n                (this.getNodeActChildrenLength(item) > 0\r\n                  ? item.expandBtnSize\r\n                  : 0)\r\n              )\r\n            }, 0) +\r\n            len * marginY\r\n          this.updateBrothersTop(node, totalHeight)\r\n        }\r\n      },\r\n      (node, parent, isRoot) => {\r\n        if (isRoot) {\r\n          let { right, left } = this.getNodeBoundaries(node, 'h')\r\n          let childrenWidth = right - left\r\n          let offset = node.left - left - (childrenWidth - node.width) / 2\r\n          this.updateChildren(node.children, 'left', offset)\r\n        }\r\n      },\r\n      true\r\n    )\r\n  }\r\n\r\n  //  left\r\n  updateBrothersLeft(node, addWidth) {\r\n    if (node.parent) {\r\n      let childrenList = node.parent.children\r\n      let index = getNodeIndexInNodeList(node, childrenList)\r\n      childrenList.forEach((item, _index) => {\r\n        if (item.hasCustomPosition() || _index <= index) {\r\n          // \r\n          return\r\n        }\r\n        item.left += addWidth\r\n        // \r\n        if (item.children && item.children.length) {\r\n          this.updateChildren(item.children, 'left', addWidth)\r\n        }\r\n      })\r\n      // \r\n      this.updateBrothersLeft(node.parent, addWidth)\r\n    }\r\n  }\r\n\r\n  //  top\r\n  updateBrothersTop(node, addHeight) {\r\n    if (node.parent && !node.parent.isRoot) {\r\n      let childrenList = node.parent.children\r\n      let index = getNodeIndexInNodeList(node, childrenList)\r\n      childrenList.forEach((item, _index) => {\r\n        if (item.hasCustomPosition()) {\r\n          // \r\n          return\r\n        }\r\n        let _offset = 0\r\n        // \r\n        if (_index > index) {\r\n          _offset = addHeight\r\n        }\r\n        item.top += _offset\r\n        // \r\n        if (item.children && item.children.length) {\r\n          this.updateChildren(item.children, 'top', _offset)\r\n        }\r\n      })\r\n      // \r\n      this.updateBrothersTop(node.parent, addHeight)\r\n    }\r\n  }\r\n\r\n  //  \r\n  renderLine(node, lines, style) {\r\n    if (node.children.length <= 0) {\r\n      return []\r\n    }\r\n    let { left, top, width, height, expandBtnSize } = node\r\n    const { alwaysShowExpandBtn, notShowExpandBtn } = this.mindMap.opt\r\n    if (!alwaysShowExpandBtn || notShowExpandBtn) {\r\n      expandBtnSize = 0\r\n    }\r\n    let len = node.children.length\r\n    let marginX = this.getMarginX(node.layerIndex + 1)\r\n    if (node.isRoot) {\r\n      // \r\n      let x1 = left + width / 2\r\n      let y1 = top + height\r\n      let s1 = marginX * 0.7\r\n      let minx = Infinity\r\n      let maxx = -Infinity\r\n      node.children.forEach((item, index) => {\r\n        let x2 = item.left + item.width / 2\r\n        let y2 = item.top\r\n        if (x2 < minx) {\r\n          minx = x2\r\n        }\r\n        if (x2 > maxx) {\r\n          maxx = x2\r\n        }\r\n        // \r\n        let nodeUseLineStylePath = this.mindMap.themeConfig.nodeUseLineStyle\r\n          ? ` L ${item.left},${y2} L ${item.left + item.width},${y2}`\r\n          : ''\r\n        let path =\r\n          `M ${x2},${y1 + s1} L ${x2},${y1 + s1 > y2 ? y2 + item.height : y2}` +\r\n          nodeUseLineStylePath\r\n        // \r\n        this.setLineStyle(style, lines[index], path, item)\r\n      })\r\n      minx = Math.min(minx, x1)\r\n      maxx = Math.max(maxx, x1)\r\n      // \r\n      let line1 = this.lineDraw.path()\r\n      node.style.line(line1)\r\n      line1.plot(this.transformPath(`M ${x1},${y1} L ${x1},${y1 + s1}`))\r\n      node._lines.push(line1)\r\n      style && style(line1, node)\r\n      // \r\n      if (len > 0) {\r\n        let lin2 = this.lineDraw.path()\r\n        node.style.line(lin2)\r\n        lin2.plot(this.transformPath(`M ${minx},${y1 + s1} L ${maxx},${y1 + s1}`))\r\n        node._lines.push(lin2)\r\n        style && style(lin2, node)\r\n      }\r\n    } else {\r\n      // \r\n      let y1 = top + height\r\n      let maxy = -Infinity\r\n      let x2 = node.left + node.width * 0.3\r\n      node.children.forEach((item, index) => {\r\n        // \r\n        let y2 = item.top + item.height / 2\r\n        if (y2 > maxy) {\r\n          maxy = y2\r\n        }\r\n        // \r\n        let path = ''\r\n        let _left = item.left\r\n        let _isLeft = item.left + item.width < x2\r\n        let _isXCenter = false\r\n        if (_isLeft) {\r\n          // \r\n          _left = item.left + item.width\r\n        } else if (item.left < x2 && item.left + item.width > x2) {\r\n          // \r\n          _isXCenter = true\r\n          y2 = item.top\r\n          maxy = y2\r\n        }\r\n        if (y2 > top && y2 < y1) {\r\n          // \r\n          path = `M ${\r\n            _isLeft ? node.left : node.left + node.width\r\n          },${y2} L ${_left},${y2}`\r\n        } else if (y2 < y1) {\r\n          // \r\n          if (_isXCenter) {\r\n            y2 = item.top + item.height\r\n            _left = x2\r\n          }\r\n          path = `M ${x2},${top} L ${x2},${y2} L ${_left},${y2}`\r\n        } else {\r\n          if (_isXCenter) {\r\n            _left = x2\r\n          }\r\n          path = `M ${x2},${y2} L ${_left},${y2}`\r\n        }\r\n        // \r\n        let nodeUseLineStylePath = this.mindMap.themeConfig.nodeUseLineStyle\r\n          ? ` L ${_left},${y2 - item.height / 2} L ${_left},${\r\n              y2 + item.height / 2\r\n            }`\r\n          : ''\r\n        path += nodeUseLineStylePath\r\n        this.setLineStyle(style, lines[index], path, item)\r\n      })\r\n      // \r\n      if (len > 0) {\r\n        let lin2 = this.lineDraw.path()\r\n        expandBtnSize = len > 0 ? expandBtnSize : 0\r\n        node.style.line(lin2)\r\n        if (maxy < y1 + expandBtnSize) {\r\n          lin2.hide()\r\n        } else {\r\n          lin2.plot(\r\n            this.transformPath(`M ${x2},${y1 + expandBtnSize} L ${x2},${maxy}`)\r\n          )\r\n          lin2.show()\r\n        }\r\n        node._lines.push(lin2)\r\n        style && style(lin2, node)\r\n      }\r\n    }\r\n  }\r\n\r\n  //  \r\n  renderExpandBtn(node, btn) {\r\n    let { width, height, expandBtnSize, isRoot } = node\r\n    if (!isRoot) {\r\n      let { translateX, translateY } = btn.transform()\r\n      btn.translate(\r\n        width * 0.3 - expandBtnSize / 2 - translateX,\r\n        height + expandBtnSize / 2 - translateY\r\n      )\r\n    }\r\n  }\r\n\r\n  //  \r\n  renderGeneralization(list) {\r\n    list.forEach(item => {\r\n      let {\r\n        top,\r\n        bottom,\r\n        right,\r\n        generalizationLineMargin,\r\n        generalizationNodeMargin\r\n      } = this.getNodeGeneralizationRenderBoundaries(item, 'h')\r\n      let x1 = right + generalizationLineMargin\r\n      let y1 = top\r\n      let x2 = right + generalizationLineMargin\r\n      let y2 = bottom\r\n      let cx = x1 + 20\r\n      let cy = y1 + (y2 - y1) / 2\r\n      let path = `M ${x1},${y1} Q ${cx},${cy} ${x2},${y2}`\r\n      item.generalizationLine.plot(this.transformPath(path))\r\n      item.generalizationNode.left = right + generalizationNodeMargin\r\n      item.generalizationNode.top =\r\n        top + (bottom - top - item.generalizationNode.height) / 2\r\n    })\r\n  }\r\n\r\n  // \r\n  renderExpandBtnRect(rect, expandBtnSize, width, height, node) {\r\n    rect.size(width, expandBtnSize).x(0).y(height)\r\n  }\r\n}\r\n\r\nexport default CatalogOrganization\r\n","import Base from './Base'\r\nimport { walk, asyncRun, getNodeIndexInNodeList } from '../utils'\r\n\r\n//  \r\n// topleftleft\r\nclass OrganizationStructure extends Base {\r\n  //  \r\n  constructor(opt = {}) {\r\n    super(opt)\r\n  }\r\n\r\n  //  \r\n  doLayout(callback) {\r\n    let task = [\r\n      () => {\r\n        this.computedBaseValue()\r\n      },\r\n      () => {\r\n        this.computedLeftValue()\r\n      },\r\n      () => {\r\n        this.adjustLeftValue()\r\n      },\r\n      () => {\r\n        callback(this.root)\r\n      }\r\n    ]\r\n    asyncRun(task)\r\n  }\r\n\r\n  //  leftwidthheight\r\n  computedBaseValue() {\r\n    walk(\r\n      this.renderer.renderTree,\r\n      null,\r\n      (cur, parent, isRoot, layerIndex, index, ancestors) => {\r\n        let newNode = this.createNode(\r\n          cur,\r\n          parent,\r\n          isRoot,\r\n          layerIndex,\r\n          index,\r\n          ancestors\r\n        )\r\n        // \r\n        if (isRoot) {\r\n          this.setNodeCenter(newNode)\r\n        } else {\r\n          // \r\n          // \r\n          newNode.top =\r\n            parent._node.top + parent._node.height + this.getMarginX(layerIndex)\r\n        }\r\n        if (!cur.data.expand) {\r\n          return true\r\n        }\r\n      },\r\n      (cur, parent, isRoot, layerIndex) => {\r\n        // areaWidth\r\n        let len = cur.data.expand === false ? 0 : cur._node.children.length\r\n        cur._node.childrenAreaWidth = len\r\n          ? cur._node.children.reduce((h, item) => {\r\n              return h + item.width\r\n            }, 0) +\r\n            (len + 1) * this.getMarginY(layerIndex + 1)\r\n          : 0\r\n\r\n        // \r\n        let generalizationNodeWidth = cur._node.checkHasGeneralization()\r\n          ? cur._node._generalizationNodeWidth + this.getMarginY(layerIndex + 1)\r\n          : 0\r\n        cur._node.childrenAreaWidth2 = Math.max(\r\n          cur._node.childrenAreaWidth,\r\n          generalizationNodeWidth\r\n        )\r\n      },\r\n      true,\r\n      0\r\n    )\r\n  }\r\n\r\n  //  left\r\n  computedLeftValue() {\r\n    walk(\r\n      this.root,\r\n      null,\r\n      (node, parent, isRoot, layerIndex) => {\r\n        if (node.getData('expand') && node.children && node.children.length) {\r\n          let marginX = this.getMarginY(layerIndex + 1)\r\n          // left = left - \r\n          let left = node.left + node.width / 2 - node.childrenAreaWidth / 2\r\n          let totalLeft = left + marginX\r\n          node.children.forEach(cur => {\r\n            cur.left = totalLeft\r\n            totalLeft += cur.width + marginX\r\n          })\r\n        }\r\n      },\r\n      null,\r\n      true\r\n    )\r\n  }\r\n\r\n  //  left\r\n  adjustLeftValue() {\r\n    walk(\r\n      this.root,\r\n      null,\r\n      (node, parent, isRoot, layerIndex) => {\r\n        if (!node.getData('expand')) {\r\n          return\r\n        }\r\n        // \r\n        let difference =\r\n          node.childrenAreaWidth2 -\r\n          this.getMarginY(layerIndex + 1) * 2 -\r\n          node.width\r\n        if (difference > 0) {\r\n          this.updateBrothers(node, difference / 2)\r\n        }\r\n      },\r\n      null,\r\n      true\r\n    )\r\n  }\r\n\r\n  //  left\r\n  updateBrothers(node, addWidth) {\r\n    if (node.parent) {\r\n      let childrenList = node.parent.children\r\n      let index = getNodeIndexInNodeList(node, childrenList)\r\n      childrenList.forEach((item, _index) => {\r\n        if (item.hasCustomPosition()) {\r\n          // \r\n          return\r\n        }\r\n        let _offset = 0\r\n        // \r\n        if (_index < index) {\r\n          _offset = -addWidth\r\n        } else if (_index > index) {\r\n          // \r\n          _offset = addWidth\r\n        }\r\n        item.left += _offset\r\n        // \r\n        if (item.children && item.children.length) {\r\n          this.updateChildren(item.children, 'left', _offset)\r\n        }\r\n      })\r\n      // \r\n      this.updateBrothers(node.parent, addWidth)\r\n    }\r\n  }\r\n\r\n  //  \r\n  renderLine(node, lines, style, lineStyle) {\r\n    if (lineStyle === 'curve') {\r\n      this.renderLineCurve(node, lines, style)\r\n    } else if (lineStyle === 'direct') {\r\n      this.renderLineDirect(node, lines, style)\r\n    } else {\r\n      this.renderLineStraight(node, lines, style)\r\n    }\r\n  }\r\n\r\n  //  \r\n  renderLineCurve(node, lines, style) {\r\n    if (node.children.length <= 0) {\r\n      return []\r\n    }\r\n    let { left, top, width, height, expandBtnSize } = node\r\n    const { alwaysShowExpandBtn, notShowExpandBtn } = this.mindMap.opt\r\n    if (!alwaysShowExpandBtn || notShowExpandBtn) {\r\n      expandBtnSize = 0\r\n    }\r\n    const {\r\n      nodeUseLineStyle,\r\n      rootLineStartPositionKeepSameInCurve,\r\n      rootLineKeepSameInCurve\r\n    } = this.mindMap.themeConfig\r\n    node.children.forEach((item, index) => {\r\n      if (node.layerIndex === 0) {\r\n        expandBtnSize = 0\r\n      }\r\n      let x1 = left + width / 2\r\n      let y1 =\r\n        node.layerIndex === 0 && !rootLineStartPositionKeepSameInCurve\r\n          ? top + height / 2\r\n          : top + height + expandBtnSize\r\n      let x2 = item.left + item.width / 2\r\n      let y2 = item.top\r\n      let path = ''\r\n      // \r\n      let nodeUseLineStylePath = nodeUseLineStyle\r\n        ? ` L ${item.left},${y2} L ${item.left + item.width},${y2}`\r\n        : ''\r\n      if (node.isRoot && !rootLineKeepSameInCurve) {\r\n        path =\r\n          this.quadraticCurvePath(x1, y1, x2, y2, true) + nodeUseLineStylePath\r\n      } else {\r\n        path = this.cubicBezierPath(x1, y1, x2, y2, true) + nodeUseLineStylePath\r\n      }\r\n      this.setLineStyle(style, lines[index], path, item)\r\n    })\r\n  }\r\n\r\n  //  \r\n  renderLineDirect(node, lines, style) {\r\n    if (node.children.length <= 0) {\r\n      return []\r\n    }\r\n    let { left, top, width, height } = node\r\n    const { nodeUseLineStyle } = this.mindMap.themeConfig\r\n    let x1 = left + width / 2\r\n    let y1 = top + height\r\n    node.children.forEach((item, index) => {\r\n      let x2 = item.left + item.width / 2\r\n      let y2 = item.top\r\n      // \r\n      let nodeUseLineStylePath = nodeUseLineStyle\r\n        ? ` L ${item.left},${y2} L ${item.left + item.width},${y2}`\r\n        : ''\r\n      let path = `M ${x1},${y1} L ${x2},${y2}` + nodeUseLineStylePath\r\n      this.setLineStyle(style, lines[index], path, item)\r\n    })\r\n  }\r\n\r\n  //  \r\n  renderLineStraight(node, lines, style) {\r\n    if (node.children.length <= 0) {\r\n      return []\r\n    }\r\n    let { left, top, width, height, expandBtnSize, isRoot } = node\r\n    const { alwaysShowExpandBtn, notShowExpandBtn } = this.mindMap.opt\r\n    if (!alwaysShowExpandBtn || notShowExpandBtn) {\r\n      expandBtnSize = 0\r\n    }\r\n    let x1 = left + width / 2\r\n    let y1 = top + height\r\n    let marginX = this.getMarginX(node.layerIndex + 1)\r\n    let s1 = marginX * 0.7\r\n    let minx = Infinity\r\n    let maxx = -Infinity\r\n    let len = node.children.length\r\n    node.children.forEach((item, index) => {\r\n      let x2 = item.left + item.width / 2\r\n      let y2 = y1 + s1 > item.top ? item.top + item.height : item.top\r\n      if (x2 < minx) {\r\n        minx = x2\r\n      }\r\n      if (x2 > maxx) {\r\n        maxx = x2\r\n      }\r\n      // \r\n      let nodeUseLineStylePath = this.mindMap.themeConfig.nodeUseLineStyle\r\n        ? ` L ${item.left},${y2} L ${item.left + item.width},${y2}`\r\n        : ''\r\n      let path = `M ${x2},${y1 + s1} L ${x2},${y2}` + nodeUseLineStylePath\r\n      this.setLineStyle(style, lines[index], path, item)\r\n    })\r\n    minx = Math.min(x1, minx)\r\n    maxx = Math.max(x1, maxx)\r\n    // \r\n    let line1 = this.lineDraw.path()\r\n    node.style.line(line1)\r\n    expandBtnSize = len > 0 && !isRoot ? expandBtnSize : 0\r\n    line1.plot(\r\n      this.transformPath(`M ${x1},${y1 + expandBtnSize} L ${x1},${y1 + s1}`)\r\n    )\r\n    node._lines.push(line1)\r\n    style && style(line1, node)\r\n    // \r\n    if (len > 0) {\r\n      let lin2 = this.lineDraw.path()\r\n      node.style.line(lin2)\r\n      lin2.plot(this.transformPath(`M ${minx},${y1 + s1} L ${maxx},${y1 + s1}`))\r\n      node._lines.push(lin2)\r\n      style && style(lin2, node)\r\n    }\r\n  }\r\n\r\n  //  \r\n  renderExpandBtn(node, btn) {\r\n    let { width, height, expandBtnSize } = node\r\n    let { translateX, translateY } = btn.transform()\r\n    btn.translate(\r\n      width / 2 - expandBtnSize / 2 - translateX,\r\n      height + expandBtnSize / 2 - translateY\r\n    )\r\n  }\r\n\r\n  //  \r\n  renderGeneralization(list) {\r\n    list.forEach(item => {\r\n      let {\r\n        bottom,\r\n        left,\r\n        right,\r\n        generalizationLineMargin,\r\n        generalizationNodeMargin\r\n      } = this.getNodeGeneralizationRenderBoundaries(item, 'v')\r\n      let x1 = left\r\n      let y1 = bottom + generalizationLineMargin\r\n      let x2 = right\r\n      let y2 = bottom + generalizationLineMargin\r\n      let cx = x1 + (x2 - x1) / 2\r\n      let cy = y1 + 20\r\n      let path = `M ${x1},${y1} Q ${cx},${cy} ${x2},${y2}`\r\n      item.generalizationLine.plot(this.transformPath(path))\r\n      item.generalizationNode.top = bottom + generalizationNodeMargin\r\n      item.generalizationNode.left =\r\n        left + (right - left - item.generalizationNode.width) / 2\r\n    })\r\n  }\r\n\r\n  // \r\n  renderExpandBtnRect(rect, expandBtnSize, width, height, node) {\r\n    rect.size(width, expandBtnSize).x(0).y(height)\r\n  }\r\n}\r\n\r\nexport default OrganizationStructure\r\n","import Base from './Base'\r\nimport { walk, asyncRun, getNodeIndexInNodeList } from '../utils'\r\nimport { CONSTANTS } from '../constants/constant'\r\n\r\n//  \r\nclass Timeline extends Base {\r\n  //  \r\n  constructor(opt = {}, layout) {\r\n    super(opt)\r\n    this.layout = layout\r\n  }\r\n\r\n  //  \r\n  doLayout(callback) {\r\n    let task = [\r\n      () => {\r\n        this.computedBaseValue()\r\n      },\r\n      () => {\r\n        this.computedLeftTopValue()\r\n      },\r\n      () => {\r\n        this.adjustLeftTopValue()\r\n      },\r\n      () => {\r\n        callback(this.root)\r\n      }\r\n    ]\r\n    asyncRun(task)\r\n  }\r\n\r\n  //  top\r\n  computedBaseValue() {\r\n    walk(\r\n      this.renderer.renderTree,\r\n      null,\r\n      (cur, parent, isRoot, layerIndex, index, ancestors) => {\r\n        let newNode = this.createNode(cur, parent, isRoot, layerIndex, index, ancestors)\r\n        // \r\n        if (isRoot) {\r\n          this.setNodeCenter(newNode)\r\n        } else {\r\n          // \r\n          // 2\r\n          if (this.layout === CONSTANTS.LAYOUT.TIMELINE2) {\r\n            // \r\n            if (parent._node.dir) {\r\n              newNode.dir = parent._node.dir\r\n            } else {\r\n              // \r\n              newNode.dir =\r\n                index % 2 === 0\r\n                  ? CONSTANTS.LAYOUT_GROW_DIR.BOTTOM\r\n                  : CONSTANTS.LAYOUT_GROW_DIR.TOP\r\n            }\r\n          } else {\r\n            newNode.dir = ''\r\n          }\r\n          if (parent._node.isRoot) {\r\n            newNode.top =\r\n              parent._node.top +\r\n              (cur._node.height > parent._node.height\r\n                ? -(cur._node.height - parent._node.height) / 2\r\n                : (parent._node.height - cur._node.height) / 2)\r\n          }\r\n        }\r\n        if (!cur.data.expand) {\r\n          return true\r\n        }\r\n      },\r\n      null,\r\n      true,\r\n      0\r\n    )\r\n  }\r\n\r\n  //  lefttop\r\n  computedLeftTopValue() {\r\n    walk(\r\n      this.root,\r\n      null,\r\n      (node, parent, isRoot, layerIndex, index) => {\r\n        if (node.getData('expand') && node.children && node.children.length) {\r\n          let marginX = this.getMarginX(layerIndex + 1)\r\n          let marginY = this.getMarginY(layerIndex + 1)\r\n          if (isRoot) {\r\n            let left = node.left + node.width\r\n            let totalLeft = left + marginX\r\n            node.children.forEach(cur => {\r\n              cur.left = totalLeft\r\n              totalLeft += cur.width + marginX\r\n            })\r\n          } else {\r\n            let totalTop =\r\n              node.top +\r\n              node.height +\r\n              marginY +\r\n              (this.getNodeActChildrenLength(node) > 0 ? node.expandBtnSize : 0)\r\n            node.children.forEach(cur => {\r\n              cur.left = node.left + node.width * 0.5\r\n              cur.top = totalTop\r\n              totalTop +=\r\n                cur.height +\r\n                marginY +\r\n                (this.getNodeActChildrenLength(cur) > 0 ? cur.expandBtnSize : 0)\r\n            })\r\n          }\r\n        }\r\n      },\r\n      null,\r\n      true\r\n    )\r\n  }\r\n\r\n  //  lefttop\r\n  adjustLeftTopValue() {\r\n    walk(\r\n      this.root,\r\n      null,\r\n      (node, parent, isRoot, layerIndex) => {\r\n        if (!node.getData('expand')) {\r\n          return\r\n        }\r\n        // left\r\n        if (node.isRoot) {\r\n          this.updateBrothersLeft(node)\r\n        }\r\n        // top\r\n        let len = node.children.length\r\n        if (parent && !parent.isRoot && len > 0) {\r\n          let marginY = this.getMarginY(layerIndex + 1)\r\n          let totalHeight =\r\n            node.children.reduce((h, item) => {\r\n              return (\r\n                h +\r\n                item.height +\r\n                (this.getNodeActChildrenLength(item) > 0\r\n                  ? item.expandBtnSize\r\n                  : 0)\r\n              )\r\n            }, 0) +\r\n            len * marginY\r\n          this.updateBrothersTop(node, totalHeight)\r\n        }\r\n      },\r\n      (node, parent, isRoot, layerIndex) => {\r\n        if (\r\n          parent &&\r\n          parent.isRoot &&\r\n          node.dir === CONSTANTS.LAYOUT_GROW_DIR.TOP\r\n        ) {\r\n          // \r\n          node.children.forEach(item => {\r\n            let totalHeight = this.getNodeAreaHeight(item)\r\n            let _top = item.top\r\n            item.top =\r\n              node.top - (item.top - node.top) - totalHeight + node.height\r\n            this.updateChildren(item.children, 'top', item.top - _top)\r\n          })\r\n        }\r\n      },\r\n      true\r\n    )\r\n  }\r\n\r\n  //  \r\n  getNodeAreaHeight(node) {\r\n    let totalHeight = 0\r\n    let loop = node => {\r\n      totalHeight +=\r\n        node.height +\r\n        (this.getNodeActChildrenLength(node) > 0 ? node.expandBtnSize : 0) +\r\n        this.getMarginY(node.layerIndex)\r\n      if (node.children.length) {\r\n        node.children.forEach(item => {\r\n          loop(item)\r\n        })\r\n      }\r\n    }\r\n    loop(node)\r\n    return totalHeight\r\n  }\r\n\r\n  //  left\r\n  updateBrothersLeft(node) {\r\n    let childrenList = node.children\r\n    let totalAddWidth = 0\r\n    childrenList.forEach(item => {\r\n      item.left += totalAddWidth\r\n      if (item.children && item.children.length) {\r\n        this.updateChildren(item.children, 'left', totalAddWidth)\r\n      }\r\n      // let areaWidth = this.getNodeAreaWidth(item)\r\n      let { left, right } = this.getNodeBoundaries(item, 'h')\r\n      let areaWidth = right - left\r\n      let difference = areaWidth - item.width\r\n      if (difference > 0) {\r\n        totalAddWidth += difference\r\n      }\r\n    })\r\n  }\r\n\r\n  //  top\r\n  updateBrothersTop(node, addHeight) {\r\n    if (node.parent && !node.parent.isRoot) {\r\n      let childrenList = node.parent.children\r\n      let index = getNodeIndexInNodeList(node, childrenList)\r\n      childrenList.forEach((item, _index) => {\r\n        if (item.hasCustomPosition()) {\r\n          // \r\n          return\r\n        }\r\n        let _offset = 0\r\n        // \r\n        if (_index > index) {\r\n          _offset = addHeight\r\n        }\r\n        item.top += _offset\r\n        // \r\n        if (item.children && item.children.length) {\r\n          this.updateChildren(item.children, 'top', _offset)\r\n        }\r\n      })\r\n      // \r\n      this.updateBrothersTop(node.parent, addHeight)\r\n    }\r\n  }\r\n\r\n  //  \r\n  renderLine(node, lines, style) {\r\n    if (node.children.length <= 0) {\r\n      return []\r\n    }\r\n    let { left, top, width, height, expandBtnSize } = node\r\n    const { alwaysShowExpandBtn, notShowExpandBtn } = this.mindMap.opt\r\n    if (!alwaysShowExpandBtn || notShowExpandBtn) {\r\n      expandBtnSize = 0\r\n    }\r\n    let len = node.children.length\r\n    if (node.isRoot) {\r\n      // \r\n      let prevBother = node\r\n      // \r\n      node.children.forEach((item, index) => {\r\n        let x1 = prevBother.left + prevBother.width\r\n        let x2 = item.left\r\n        let y = node.top + node.height / 2\r\n        let path = `M ${x1},${y} L ${x2},${y}`\r\n        this.setLineStyle(style, lines[index], path, item)\r\n        prevBother = item\r\n      })\r\n    } else {\r\n      // \r\n      let maxy = -Infinity\r\n      let miny = Infinity\r\n      let x = node.left + node.width * 0.3\r\n      node.children.forEach((item, index) => {\r\n        let y = item.top + item.height / 2\r\n        if (y > maxy) {\r\n          maxy = y\r\n        }\r\n        if (y < miny) {\r\n          miny = y\r\n        }\r\n        // \r\n        let path = `M ${x},${y} L ${item.left},${y}`\r\n        this.setLineStyle(style, lines[index], path, item)\r\n      })\r\n      // \r\n      if (len > 0) {\r\n        let line = this.lineDraw.path()\r\n        expandBtnSize = len > 0 ? expandBtnSize : 0\r\n        if (\r\n          node.parent &&\r\n          node.parent.isRoot &&\r\n          node.dir === CONSTANTS.LAYOUT_GROW_DIR.TOP\r\n        ) {\r\n          line.plot(this.transformPath(`M ${x},${top} L ${x},${miny}`))\r\n        } else {\r\n          line.plot(\r\n            this.transformPath(\r\n              `M ${x},${top + height + expandBtnSize} L ${x},${maxy}`\r\n            )\r\n          )\r\n        }\r\n        node.style.line(line)\r\n        node._lines.push(line)\r\n        style && style(line, node)\r\n      }\r\n    }\r\n  }\r\n\r\n  //  \r\n  renderExpandBtn(node, btn) {\r\n    let { width, height, expandBtnSize, isRoot } = node\r\n    if (!isRoot) {\r\n      let { translateX, translateY } = btn.transform()\r\n      if (\r\n        node.parent &&\r\n        node.parent.isRoot &&\r\n        node.dir === CONSTANTS.LAYOUT_GROW_DIR.TOP\r\n      ) {\r\n        btn.translate(\r\n          width * 0.3 - expandBtnSize / 2 - translateX,\r\n          -expandBtnSize / 2 - translateY\r\n        )\r\n      } else {\r\n        btn.translate(\r\n          width * 0.3 - expandBtnSize / 2 - translateX,\r\n          height + expandBtnSize / 2 - translateY\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  //  \r\n  renderGeneralization(list) {\r\n    list.forEach(item => {\r\n      let {\r\n        top,\r\n        bottom,\r\n        right,\r\n        generalizationLineMargin,\r\n        generalizationNodeMargin\r\n      } = this.getNodeGeneralizationRenderBoundaries(item, 'h')\r\n      let x1 = right + generalizationLineMargin\r\n      let y1 = top\r\n      let x2 = right + generalizationLineMargin\r\n      let y2 = bottom\r\n      let cx = x1 + 20\r\n      let cy = y1 + (y2 - y1) / 2\r\n      let path = `M ${x1},${y1} Q ${cx},${cy} ${x2},${y2}`\r\n      item.generalizationLine.plot(this.transformPath(path))\r\n      item.generalizationNode.left = right + generalizationNodeMargin\r\n      item.generalizationNode.top =\r\n        top + (bottom - top - item.generalizationNode.height) / 2\r\n    })\r\n  }\r\n\r\n  // \r\n  renderExpandBtnRect(rect, expandBtnSize, width, height, node) {\r\n    if (this.layout === CONSTANTS.LAYOUT.TIMELINE) {\r\n      rect.size(width, expandBtnSize).x(0).y(height)\r\n    } else {\r\n      let dir = ''\r\n      if (node.dir === CONSTANTS.LAYOUT_GROW_DIR.TOP) {\r\n        dir =\r\n          node.layerIndex === 1\r\n            ? CONSTANTS.LAYOUT_GROW_DIR.TOP\r\n            : CONSTANTS.LAYOUT_GROW_DIR.BOTTOM\r\n      } else {\r\n        dir = CONSTANTS.LAYOUT_GROW_DIR.BOTTOM\r\n      }\r\n      if (dir === CONSTANTS.LAYOUT_GROW_DIR.TOP) {\r\n        rect.size(width, expandBtnSize).x(0).y(-expandBtnSize)\r\n      } else {\r\n        rect.size(width, expandBtnSize).x(0).y(height)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default Timeline\r\n","import Base from './Base'\r\nimport { walk, asyncRun, getNodeIndexInNodeList } from '../utils'\r\nimport { CONSTANTS } from '../constants/constant'\r\n\r\n//  \r\nclass VerticalTimeline extends Base {\r\n  //  \r\n  constructor(opt = {}, layout) {\r\n    super(opt)\r\n    this.layout = layout\r\n  }\r\n\r\n  //  \r\n  doLayout(callback) {\r\n    let task = [\r\n      () => {\r\n        this.computedBaseValue()\r\n      },\r\n      () => {\r\n        this.computedTopValue()\r\n      },\r\n      () => {\r\n        this.adjustLeftTopValue()\r\n      },\r\n      () => {\r\n        callback(this.root)\r\n      }\r\n    ]\r\n    asyncRun(task)\r\n  }\r\n\r\n  //  top\r\n  computedBaseValue() {\r\n    walk(\r\n      this.renderer.renderTree,\r\n      null,\r\n      (cur, parent, isRoot, layerIndex, index, ancestors) => {\r\n        let newNode = this.createNode(\r\n          cur,\r\n          parent,\r\n          isRoot,\r\n          layerIndex,\r\n          index,\r\n          ancestors\r\n        )\r\n        // \r\n        if (isRoot) {\r\n          this.setNodeCenter(newNode)\r\n        } else {\r\n          // \r\n          // \r\n          // \r\n          if (parent._node.dir) {\r\n            newNode.dir = parent._node.dir\r\n          } else {\r\n            if (this.layout === CONSTANTS.LAYOUT.VERTICAL_TIMELINE2) {\r\n              newNode.dir = CONSTANTS.LAYOUT_GROW_DIR.LEFT\r\n            } else if (this.layout === CONSTANTS.LAYOUT.VERTICAL_TIMELINE3) {\r\n              newNode.dir = CONSTANTS.LAYOUT_GROW_DIR.RIGHT\r\n            } else {\r\n              newNode.dir =\r\n                index % 2 === 0\r\n                  ? CONSTANTS.LAYOUT_GROW_DIR.RIGHT\r\n                  : CONSTANTS.LAYOUT_GROW_DIR.LEFT\r\n            }\r\n          }\r\n          // left\r\n          if (parent._node.isRoot) {\r\n            newNode.left =\r\n              parent._node.left +\r\n              (cur._node.width > parent._node.width\r\n                ? -(cur._node.width - parent._node.width) / 2\r\n                : (parent._node.width - cur._node.width) / 2)\r\n          } else {\r\n            newNode.left =\r\n              newNode.dir === CONSTANTS.LAYOUT_GROW_DIR.RIGHT\r\n                ? parent._node.left +\r\n                  parent._node.width +\r\n                  this.getMarginX(layerIndex)\r\n                : parent._node.left -\r\n                  this.getMarginX(layerIndex) -\r\n                  newNode.width\r\n          }\r\n        }\r\n        if (!cur.data.expand) {\r\n          return true\r\n        }\r\n      },\r\n      (cur, parent, isRoot, layerIndex) => {\r\n        // areaHeight\r\n        if (isRoot) {\r\n          return\r\n        }\r\n        let len = cur.data.expand === false ? 0 : cur._node.children.length\r\n        cur._node.childrenAreaHeight = len\r\n          ? cur._node.children.reduce((h, item) => {\r\n              return h + item.height\r\n            }, 0) +\r\n            (len + 1) * this.getMarginY(layerIndex + 1)\r\n          : 0\r\n      },\r\n      true,\r\n      0\r\n    )\r\n  }\r\n\r\n  //  top\r\n  computedTopValue() {\r\n    walk(\r\n      this.root,\r\n      null,\r\n      (node, parent, isRoot, layerIndex, index) => {\r\n        if (node.getData('expand') && node.children && node.children.length) {\r\n          let marginY = this.getMarginY(layerIndex + 1)\r\n          // top\r\n          if (isRoot) {\r\n            let top = node.top + node.height\r\n            let totalTop = top + marginY\r\n            node.children.forEach(cur => {\r\n              cur.top = totalTop\r\n              totalTop += cur.height + marginY\r\n            })\r\n          } else {\r\n            // top\r\n            let marginY = this.getMarginY(layerIndex + 1)\r\n            let baseTop = node.top + node.height / 2 + marginY\r\n            // top = top - \r\n            let totalTop = baseTop - node.childrenAreaHeight / 2\r\n            node.children.forEach(cur => {\r\n              cur.top = totalTop\r\n              totalTop += cur.height + marginY\r\n            })\r\n          }\r\n        }\r\n      },\r\n      null,\r\n      true\r\n    )\r\n  }\r\n\r\n  //  lefttop\r\n  adjustLeftTopValue() {\r\n    walk(\r\n      this.root,\r\n      null,\r\n      (node, parent, isRoot, layerIndex) => {\r\n        if (!node.getData('expand')) {\r\n          return\r\n        }\r\n        if (isRoot) return\r\n        // \r\n        let base = this.getMarginY(layerIndex + 1) * 2 + node.height\r\n        let difference = node.childrenAreaHeight - base\r\n        if (difference > 0) {\r\n          this.updateBrothers(node, difference / 2)\r\n        }\r\n      },\r\n      null,\r\n      true\r\n    )\r\n  }\r\n\r\n  //  top\r\n  updateBrothers(node, addHeight) {\r\n    if (node.parent) {\r\n      let childrenList = node.parent.children\r\n      let index = getNodeIndexInNodeList(node, childrenList)\r\n      childrenList.forEach((item, _index) => {\r\n        // \r\n        if (item.hasCustomPosition()) return\r\n        // \r\n        if (!node.parent.isRoot && item.uid === node.uid) return\r\n        let _offset = 0\r\n        // \r\n        if (node.parent.isRoot) {\r\n          // \r\n          if (_index < index) {\r\n            _offset = 0\r\n          } else if (_index > index) {\r\n            // \r\n            _offset = addHeight * 2\r\n          } else {\r\n            // \r\n            _offset = addHeight\r\n          }\r\n        } else {\r\n          // \r\n          // \r\n          if (_index < index) {\r\n            _offset = -addHeight\r\n          } else if (_index > index) {\r\n            // \r\n            _offset = addHeight\r\n          }\r\n        }\r\n        item.top += _offset\r\n        // \r\n        if (item.children && item.children.length) {\r\n          this.updateChildren(item.children, 'top', _offset)\r\n        }\r\n      })\r\n      // \r\n      this.updateBrothers(node.parent, addHeight)\r\n    }\r\n  }\r\n\r\n  //  top\r\n  updateBrothersTop(node, addHeight) {\r\n    if (node.parent && !node.parent.isRoot) {\r\n      let childrenList = node.parent.children\r\n      let index = getNodeIndexInNodeList(node, childrenList)\r\n      childrenList.forEach((item, _index) => {\r\n        if (item.hasCustomPosition()) {\r\n          // \r\n          return\r\n        }\r\n        let _offset = 0\r\n        // \r\n        if (_index > index) {\r\n          _offset = addHeight\r\n        }\r\n        item.top += _offset\r\n        // \r\n        if (item.children && item.children.length) {\r\n          this.updateChildren(item.children, 'top', _offset)\r\n        }\r\n      })\r\n      // \r\n      this.updateBrothersTop(node.parent, addHeight)\r\n    }\r\n  }\r\n\r\n  //  \r\n  renderLine(node, lines, style, lineStyle) {\r\n    if (lineStyle === 'curve') {\r\n      this.renderLineCurve(node, lines, style)\r\n    } else if (lineStyle === 'direct') {\r\n      this.renderLineDirect(node, lines, style)\r\n    } else {\r\n      this.renderLineStraight(node, lines, style)\r\n    }\r\n  }\r\n\r\n  // \r\n  renderLineStraight(node, lines, style) {\r\n    if (node.children.length <= 0) {\r\n      return []\r\n    }\r\n    let { expandBtnSize } = node\r\n    const { alwaysShowExpandBtn, notShowExpandBtn } = this.mindMap.opt\r\n    if (!alwaysShowExpandBtn || notShowExpandBtn) {\r\n      expandBtnSize = 0\r\n    }\r\n    if (node.isRoot) {\r\n      // \r\n      let prevBother = node\r\n      // \r\n      node.children.forEach((item, index) => {\r\n        let y1 = prevBother.top + prevBother.height\r\n        let y2 = item.top\r\n        let x = node.left + node.width / 2\r\n        let path = `M ${x},${y1} L ${x},${y2}`\r\n        this.setLineStyle(style, lines[index], path, item)\r\n        prevBother = item\r\n      })\r\n    } else {\r\n      // \r\n      if (node.dir === CONSTANTS.LAYOUT_GROW_DIR.RIGHT) {\r\n        let nodeRight = node.left + node.width\r\n        let nodeYCenter = node.top + node.height / 2\r\n        let marginX = this.getMarginX(node.layerIndex + 1)\r\n        let offset = (marginX - expandBtnSize) * 0.6\r\n        node.children.forEach((item, index) => {\r\n          let itemLeft = item.left\r\n          let itemYCenter = item.top + item.height / 2\r\n          let path = this.createFoldLine([\r\n            [nodeRight, nodeYCenter],\r\n            [nodeRight + offset, nodeYCenter],\r\n            [nodeRight + offset, itemYCenter],\r\n            [itemLeft, itemYCenter]\r\n          ])\r\n          this.setLineStyle(style, lines[index], path, item)\r\n        })\r\n      } else {\r\n        let nodeLeft = node.left\r\n        let nodeYCenter = node.top + node.height / 2\r\n        let marginX = this.getMarginX(node.layerIndex + 1)\r\n        let offset = (marginX - expandBtnSize) * 0.6\r\n        node.children.forEach((item, index) => {\r\n          let itemRight = item.left + item.width\r\n          let itemYCenter = item.top + item.height / 2\r\n          let path = this.createFoldLine([\r\n            [nodeLeft, nodeYCenter],\r\n            [nodeLeft - offset, nodeYCenter],\r\n            [nodeLeft - offset, itemYCenter],\r\n            [itemRight, itemYCenter]\r\n          ])\r\n          this.setLineStyle(style, lines[index], path, item)\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  // \r\n  renderLineDirect(node, lines, style) {\r\n    if (node.children.length <= 0) {\r\n      return []\r\n    }\r\n    let { left, top, width, height, expandBtnSize } = node\r\n    const { alwaysShowExpandBtn, notShowExpandBtn } = this.mindMap.opt\r\n    if (!alwaysShowExpandBtn || notShowExpandBtn) {\r\n      expandBtnSize = 0\r\n    }\r\n    node.children.forEach((item, index) => {\r\n      if (node.isRoot) {\r\n        let prevBother = node\r\n        // \r\n        node.children.forEach((item, index) => {\r\n          let y1 = prevBother.top + prevBother.height\r\n          let y2 = item.top\r\n          let x = node.left + node.width / 2\r\n          let path = `M ${x},${y1} L ${x},${y2}`\r\n          this.setLineStyle(style, lines[index], path, item)\r\n          prevBother = item\r\n        })\r\n      } else {\r\n        let x1 =\r\n          item.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT\r\n            ? left - expandBtnSize\r\n            : left + width + expandBtnSize\r\n        let y1 = top + height / 2\r\n        let x2 =\r\n          item.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT\r\n            ? item.left + item.width\r\n            : item.left\r\n        let y2 = item.top + item.height / 2\r\n        let path = `M ${x1},${y1} L ${x2},${y2}`\r\n        this.setLineStyle(style, lines[index], path, item)\r\n      }\r\n    })\r\n  }\r\n\r\n  //  \r\n  renderLineCurve(node, lines, style) {\r\n    if (node.children.length <= 0) {\r\n      return []\r\n    }\r\n    let { left, top, width, height, expandBtnSize } = node\r\n    const { alwaysShowExpandBtn, notShowExpandBtn } = this.mindMap.opt\r\n    if (!alwaysShowExpandBtn || notShowExpandBtn) {\r\n      expandBtnSize = 0\r\n    }\r\n    node.children.forEach((item, index) => {\r\n      if (node.isRoot) {\r\n        let prevBother = node\r\n        // \r\n        node.children.forEach((item, index) => {\r\n          let y1 = prevBother.top + prevBother.height\r\n          let y2 = item.top\r\n          let x = node.left + node.width / 2\r\n          let path = `M ${x},${y1} L ${x},${y2}`\r\n          this.setLineStyle(style, lines[index], path, item)\r\n          prevBother = item\r\n        })\r\n      } else {\r\n        let x1 =\r\n          item.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT\r\n            ? left - expandBtnSize\r\n            : left + width + expandBtnSize\r\n        let y1 = top + height / 2\r\n        let x2 =\r\n          item.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT\r\n            ? item.left + item.width\r\n            : item.left\r\n        let y2 = item.top + item.height / 2\r\n        let path = this.cubicBezierPath(x1, y1, x2, y2)\r\n        this.setLineStyle(style, lines[index], path, item)\r\n      }\r\n    })\r\n  }\r\n\r\n  //  \r\n  renderExpandBtn(node, btn) {\r\n    let { width, height, expandBtnSize, isRoot } = node\r\n    if (!isRoot) {\r\n      let { translateX, translateY } = btn.transform()\r\n      if (node.dir === CONSTANTS.LAYOUT_GROW_DIR.RIGHT) {\r\n        btn.translate(width - translateX, height / 2 - translateY)\r\n      } else {\r\n        btn.translate(-expandBtnSize - translateX, height / 2 - translateY)\r\n      }\r\n    }\r\n  }\r\n\r\n  //  \r\n  renderGeneralization(list) {\r\n    list.forEach(item => {\r\n      let isLeft = item.node.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT\r\n      let {\r\n        top,\r\n        bottom,\r\n        left,\r\n        right,\r\n        generalizationLineMargin,\r\n        generalizationNodeMargin\r\n      } = this.getNodeGeneralizationRenderBoundaries(item, 'h')\r\n      let x = isLeft\r\n        ? left - generalizationLineMargin\r\n        : right + generalizationLineMargin\r\n      let x1 = x\r\n      let y1 = top\r\n      let x2 = x\r\n      let y2 = bottom\r\n      let cx = x1 + (isLeft ? -20 : 20)\r\n      let cy = y1 + (y2 - y1) / 2\r\n      let path = `M ${x1},${y1} Q ${cx},${cy} ${x2},${y2}`\r\n      item.generalizationLine.plot(this.transformPath(path))\r\n      item.generalizationNode.left =\r\n        x +\r\n        (isLeft ? -generalizationNodeMargin : generalizationNodeMargin) -\r\n        (isLeft ? item.generalizationNode.width : 0)\r\n      item.generalizationNode.top =\r\n        top + (bottom - top - item.generalizationNode.height) / 2\r\n    })\r\n  }\r\n\r\n  // \r\n  renderExpandBtnRect(rect, expandBtnSize, width, height, node) {\r\n    if (node.dir === CONSTANTS.LAYOUT_GROW_DIR.LEFT) {\r\n      rect.size(expandBtnSize, height).x(-expandBtnSize).y(0)\r\n    } else {\r\n      rect.size(expandBtnSize, height).x(width).y(0)\r\n    }\r\n  }\r\n}\r\n\r\nexport default VerticalTimeline\r\n","import { degToRad } from '../utils/'\r\n\r\nexport default {\r\n  top: {\r\n    renderExpandBtn({\r\n      node,\r\n      btn,\r\n      expandBtnSize,\r\n      translateX,\r\n      translateY,\r\n      width,\r\n      height\r\n    }) {\r\n      if (node.parent && node.parent.isRoot) {\r\n        btn.translate(\r\n          width * 0.3 - expandBtnSize / 2 - translateX,\r\n          -expandBtnSize / 2 - translateY\r\n        )\r\n      } else {\r\n        btn.translate(\r\n          width * 0.3 - expandBtnSize / 2 - translateX,\r\n          height + expandBtnSize / 2 - translateY\r\n        )\r\n      }\r\n    },\r\n    renderLine({\r\n      node,\r\n      line,\r\n      top,\r\n      x,\r\n      lineLength,\r\n      height,\r\n      expandBtnSize,\r\n      maxy,\r\n      ctx\r\n    }) {\r\n      if (node.parent && node.parent.isRoot) {\r\n        line.plot(\r\n          ctx.transformPath(\r\n            `M ${x},${top} L ${x + lineLength},${\r\n              top - Math.tan(degToRad(ctx.mindMap.opt.fishboneDeg)) * lineLength\r\n            }`\r\n          )\r\n        )\r\n      } else {\r\n        line.plot(\r\n          ctx.transformPath(\r\n            `M ${x},${top + height + expandBtnSize} L ${x},${maxy}`\r\n          )\r\n        )\r\n      }\r\n    },\r\n    computedLeftTopValue({ layerIndex, node, ctx }) {\r\n      if (layerIndex >= 1 && node.children) {\r\n        // \r\n        let marginY = ctx.getMarginY(layerIndex + 1)\r\n        let startLeft = node.left + node.width * ctx.childIndent\r\n        let totalTop =\r\n          node.top +\r\n          node.height +\r\n          (ctx.getNodeActChildrenLength(node) > 0 ? node.expandBtnSize : 0) +\r\n          marginY\r\n        node.children.forEach(item => {\r\n          item.left = startLeft\r\n          item.top += totalTop\r\n          totalTop +=\r\n            item.height +\r\n            (ctx.getNodeActChildrenLength(item) > 0 ? item.expandBtnSize : 0) +\r\n            marginY\r\n        })\r\n      }\r\n    },\r\n    adjustLeftTopValueBefore({ node, parent, ctx, layerIndex }) {\r\n      // top\r\n      let len = node.children.length\r\n      let marginY = ctx.getMarginY(layerIndex + 1)\r\n      // top\r\n      if (parent && !parent.isRoot && len > 0) {\r\n        let totalHeight = node.children.reduce((h, item) => {\r\n          return (\r\n            h +\r\n            item.height +\r\n            (ctx.getNodeActChildrenLength(item) > 0 ? item.expandBtnSize : 0) +\r\n            marginY\r\n          )\r\n        }, 0)\r\n        ctx.updateBrothersTop(node, totalHeight)\r\n      }\r\n    },\r\n    adjustLeftTopValueAfter({ parent, node, ctx }) {\r\n      // \r\n      if (parent && parent.isRoot) {\r\n        // \r\n        let marginY = ctx.getMarginY(node.layerIndex + 1)\r\n        let totalHeight = node.expandBtnSize + marginY\r\n        node.children.forEach(item => {\r\n          // top\r\n          let nodeTotalHeight = ctx.getNodeAreaHeight(item)\r\n          let _top = item.top\r\n          let _left = item.left\r\n          item.top =\r\n            node.top - (item.top - node.top) - nodeTotalHeight + node.height\r\n          // left\r\n          item.left =\r\n            node.left +\r\n            node.width * ctx.indent +\r\n            (nodeTotalHeight + totalHeight) /\r\n              Math.tan(degToRad(ctx.mindMap.opt.fishboneDeg))\r\n          totalHeight += nodeTotalHeight\r\n          // \r\n          ctx.updateChildrenPro(item.children, {\r\n            top: item.top - _top,\r\n            left: item.left - _left\r\n          })\r\n        })\r\n      }\r\n    }\r\n  },\r\n  bottom: {\r\n    renderExpandBtn({\r\n      node,\r\n      btn,\r\n      expandBtnSize,\r\n      translateX,\r\n      translateY,\r\n      width,\r\n      height\r\n    }) {\r\n      if (node.parent && node.parent.isRoot) {\r\n        btn.translate(\r\n          width * 0.3 - expandBtnSize / 2 - translateX,\r\n          height + expandBtnSize / 2 - translateY\r\n        )\r\n      } else {\r\n        btn.translate(\r\n          width * 0.3 - expandBtnSize / 2 - translateX,\r\n          -expandBtnSize / 2 - translateY\r\n        )\r\n      }\r\n    },\r\n    renderLine({ node, line, top, x, lineLength, height, miny, ctx }) {\r\n      if (node.parent && node.parent.isRoot) {\r\n        line.plot(\r\n          ctx.transformPath(\r\n            `M ${x},${top + height} L ${x + lineLength},${\r\n              top +\r\n              height +\r\n              Math.tan(degToRad(ctx.mindMap.opt.fishboneDeg)) * lineLength\r\n            }`\r\n          )\r\n        )\r\n      } else {\r\n        line.plot(ctx.transformPath(`M ${x},${top} L ${x},${miny}`))\r\n      }\r\n    },\r\n    computedLeftTopValue({ layerIndex, node, ctx }) {\r\n      let marginY = ctx.getMarginY(layerIndex + 1)\r\n      if (layerIndex === 1 && node.children) {\r\n        // \r\n        let startLeft = node.left + node.width * ctx.childIndent\r\n        let totalTop =\r\n          node.top +\r\n          node.height +\r\n          (ctx.getNodeActChildrenLength(node) > 0 ? node.expandBtnSize : 0) +\r\n          marginY\r\n\r\n        node.children.forEach(item => {\r\n          item.left = startLeft\r\n          item.top =\r\n            totalTop +\r\n            (ctx.getNodeActChildrenLength(item) > 0 ? item.expandBtnSize : 0)\r\n          totalTop +=\r\n            item.height +\r\n            (ctx.getNodeActChildrenLength(item) > 0 ? item.expandBtnSize : 0) +\r\n            marginY\r\n        })\r\n      }\r\n      if (layerIndex > 1 && node.children) {\r\n        // \r\n        let startLeft = node.left + node.width * ctx.childIndent\r\n        let totalTop =\r\n          node.top -\r\n          (ctx.getNodeActChildrenLength(node) > 0 ? node.expandBtnSize : 0) -\r\n          marginY\r\n        node.children.forEach(item => {\r\n          item.left = startLeft\r\n          item.top = totalTop - item.height\r\n          totalTop -=\r\n            item.height +\r\n            (ctx.getNodeActChildrenLength(item) > 0 ? item.expandBtnSize : 0) +\r\n            marginY\r\n        })\r\n      }\r\n    },\r\n    adjustLeftTopValueBefore({ node, ctx, layerIndex }) {\r\n      // top\r\n      let marginY = ctx.getMarginY(layerIndex + 1)\r\n      let len = node.children.length\r\n      if (layerIndex > 2 && len > 0) {\r\n        let totalHeight = node.children.reduce((h, item) => {\r\n          return (\r\n            h +\r\n            item.height +\r\n            (ctx.getNodeActChildrenLength(item) > 0 ? item.expandBtnSize : 0) +\r\n            marginY\r\n          )\r\n        }, 0)\r\n        ctx.updateBrothersTop(node, -totalHeight)\r\n      }\r\n    },\r\n    adjustLeftTopValueAfter({ parent, node, ctx }) {\r\n      // \r\n      if (parent && parent.isRoot) {\r\n        // \r\n        let marginY = ctx.getMarginY(node.layerIndex + 1)\r\n        let totalHeight = 0\r\n        let totalHeight2 = node.expandBtnSize\r\n        node.children.forEach(item => {\r\n          // top\r\n          let hasChildren = ctx.getNodeActChildrenLength(item) > 0\r\n          let nodeTotalHeight = ctx.getNodeAreaHeight(item)\r\n          let offset = hasChildren\r\n            ? nodeTotalHeight -\r\n              item.height -\r\n              (hasChildren ? item.expandBtnSize : 0)\r\n            : 0\r\n          offset -= hasChildren ? marginY : 0\r\n          let _top = totalHeight + offset\r\n          let _left = item.left\r\n          item.top += _top\r\n          // left\r\n          item.left =\r\n            node.left +\r\n            node.width * ctx.indent +\r\n            (nodeTotalHeight + totalHeight2) /\r\n              Math.tan(degToRad(ctx.mindMap.opt.fishboneDeg))\r\n          totalHeight += offset\r\n          totalHeight2 += nodeTotalHeight\r\n          // \r\n          ctx.updateChildrenPro(item.children, {\r\n            top: _top,\r\n            left: item.left - _left\r\n          })\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n","import Base from './Base'\r\nimport { walk, asyncRun, degToRad, getNodeIndexInNodeList } from '../utils'\r\nimport { CONSTANTS } from '../constants/constant'\r\nimport utils from './fishboneUtils'\r\nimport { SVG } from '@svgdotjs/svg.js'\r\nimport { shapeStyleProps } from '../core/render/node/Style'\r\n\r\n//  \r\nclass Fishbone extends Base {\r\n  //  \r\n  constructor(opt = {}, layout) {\r\n    super(opt)\r\n    this.layout = layout\r\n    this.indent = 0.3\r\n    this.childIndent = 0.5\r\n    this.fishTail = null\r\n    this.maxx = 0\r\n    this.headRatio = 1\r\n    this.tailRatio = 0.6\r\n    this.paddingXRatio = 0.3\r\n    this.fishHeadPathStr =\r\n      'M4,181 C4,181, 0,177, 4,173 Q 96.09523809523809,0, 288.2857142857143,0 L 288.2857142857143,354 Q 48.047619047619044,354, 8,218.18367346938777 C8,218.18367346938777, 6,214.18367346938777, 8,214.18367346938777 L 41.183673469387756,214.18367346938777 Z'\r\n    this.fishTailPathStr =\r\n      'M 606.9342905223708 0 Q 713.1342905223709 -177 819.3342905223708 -177 L 766.2342905223709 0 L 819.3342905223708 177 Q 713.1342905223709 177 606.9342905223708 0 z'\r\n    this.bindEvent()\r\n    this.extendShape()\r\n    this.beforeChange = this.beforeChange.bind(this)\r\n  }\r\n\r\n  // \r\n  // \r\n  nodeIsRemoveAllLines(node) {\r\n    return node.isRoot || node.layerIndex === 1\r\n  }\r\n\r\n  // \r\n  isFishbone2() {\r\n    return this.layout === CONSTANTS.LAYOUT.FISHBONE2\r\n  }\r\n\r\n  bindEvent() {\r\n    if (!this.isFishbone2()) return\r\n    this.onCheckUpdateFishTail = this.onCheckUpdateFishTail.bind(this)\r\n    this.mindMap.on('afterExecCommand', this.onCheckUpdateFishTail)\r\n  }\r\n\r\n  unBindEvent() {\r\n    this.mindMap.off('afterExecCommand', this.onCheckUpdateFishTail)\r\n  }\r\n\r\n  // \r\n  extendShape() {\r\n    if (!this.isFishbone2()) return\r\n    // \r\n    this.mindMap.addShape({\r\n      name: 'fishHead',\r\n      createShape: node => {\r\n        const rect = SVG(`<path d=\"${this.fishHeadPathStr}\"></path>`)\r\n        const { width, height } = node.shapeInstance.getNodeSize()\r\n        rect.size(width, height)\r\n        return rect\r\n      },\r\n      getPadding: ({ width, height, paddingX, paddingY }) => {\r\n        width += paddingX * 2\r\n        height += paddingY * 2\r\n        let shapePaddingX = this.paddingXRatio * width\r\n        let shapePaddingY = 0\r\n        width += shapePaddingX * 2\r\n        const newHeight = width / this.headRatio\r\n        shapePaddingY = (newHeight - height) / 2\r\n        return {\r\n          paddingX: shapePaddingX,\r\n          paddingY: shapePaddingY\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  //  \r\n  doLayout(callback) {\r\n    let task = [\r\n      () => {\r\n        this.computedBaseValue()\r\n        this.addFishTail()\r\n      },\r\n      () => {\r\n        this.computedLeftTopValue()\r\n      },\r\n      () => {\r\n        this.adjustLeftTopValue()\r\n        this.updateFishTailPosition()\r\n      },\r\n      () => {\r\n        callback(this.root)\r\n      }\r\n    ]\r\n    asyncRun(task)\r\n  }\r\n\r\n  // \r\n  addFishTail() {\r\n    if (!this.isFishbone2()) return\r\n    const exist = this.mindMap.lineDraw.findOne('.smm-layout-fishbone-tail')\r\n    if (!exist) {\r\n      this.fishTail = SVG(`<path d=\"${this.fishTailPathStr}\"></path>`)\r\n      this.fishTail.addClass('smm-layout-fishbone-tail')\r\n    } else {\r\n      this.fishTail = exist\r\n    }\r\n    const tailHeight = this.root.height\r\n    const tailWidth = tailHeight * this.tailRatio\r\n    this.fishTail.size(tailWidth, tailHeight)\r\n    this.styleFishTail()\r\n    this.mindMap.lineDraw.add(this.fishTail)\r\n  }\r\n\r\n  // \r\n  onCheckUpdateFishTail(name, node, data) {\r\n    if (name === 'SET_NODE_DATA') {\r\n      let hasShapeProp = false\r\n      Object.keys(data).forEach(key => {\r\n        if (shapeStyleProps.includes(key)) {\r\n          hasShapeProp = true\r\n        }\r\n      })\r\n      if (hasShapeProp) {\r\n        this.styleFishTail()\r\n      }\r\n    }\r\n  }\r\n\r\n  styleFishTail() {\r\n    this.root.style.shape(this.fishTail)\r\n  }\r\n\r\n  // \r\n  removeFishTail() {\r\n    const exist = this.mindMap.lineDraw.findOne('.smm-layout-fishbone-tail')\r\n    if (exist) {\r\n      exist.remove()\r\n    }\r\n  }\r\n\r\n  // \r\n  updateFishTailPosition() {\r\n    if (!this.isFishbone2()) return\r\n    this.fishTail.x(this.maxx).cy(this.root.top + this.root.height / 2)\r\n  }\r\n\r\n  //  top\r\n  computedBaseValue() {\r\n    walk(\r\n      this.renderer.renderTree,\r\n      null,\r\n      (node, parent, isRoot, layerIndex, index, ancestors) => {\r\n        if (isRoot && this.isFishbone2()) {\r\n          // \r\n          node.data.shape = 'fishHead'\r\n        }\r\n        // \r\n        let newNode = this.createNode(\r\n          node,\r\n          parent,\r\n          isRoot,\r\n          layerIndex,\r\n          index,\r\n          ancestors\r\n        )\r\n        // \r\n        if (isRoot) {\r\n          this.setNodeCenter(newNode)\r\n        } else {\r\n          // \r\n          // \r\n          if (parent._node.dir) {\r\n            newNode.dir = parent._node.dir\r\n          } else {\r\n            // \r\n            newNode.dir =\r\n              index % 2 === 0\r\n                ? CONSTANTS.LAYOUT_GROW_DIR.TOP\r\n                : CONSTANTS.LAYOUT_GROW_DIR.BOTTOM\r\n          }\r\n          // top\r\n          if (parent._node.isRoot) {\r\n            let marginY = this.getMarginY(layerIndex)\r\n            // \r\n            const topOffset = this.isFishbone2() ? parent._node.height / 4 : 0\r\n            if (this.checkIsTop(newNode)) {\r\n              newNode.top =\r\n                parent._node.top - newNode.height - marginY + topOffset\r\n            } else {\r\n              newNode.top =\r\n                parent._node.top + parent._node.height + marginY - topOffset\r\n            }\r\n          }\r\n        }\r\n        if (!node.data.expand) {\r\n          return true\r\n        }\r\n      },\r\n      null,\r\n      true,\r\n      0\r\n    )\r\n  }\r\n\r\n  //  lefttop\r\n  computedLeftTopValue() {\r\n    walk(\r\n      this.root,\r\n      null,\r\n      (node, parent, isRoot, layerIndex) => {\r\n        if (node.isRoot) {\r\n          let marginX = this.getMarginX(layerIndex + 1)\r\n          const heightOffsetRatio = this.isFishbone2() ? 2 : 1\r\n          let topTotalLeft =\r\n            node.left + node.width + node.height / heightOffsetRatio + marginX\r\n          let bottomTotalLeft =\r\n            node.left + node.width + node.height / heightOffsetRatio + marginX\r\n          node.children.forEach(item => {\r\n            if (this.checkIsTop(item)) {\r\n              item.left = topTotalLeft\r\n              topTotalLeft += item.width + marginX\r\n            } else {\r\n              item.left = bottomTotalLeft + 20\r\n              bottomTotalLeft += item.width + marginX\r\n            }\r\n          })\r\n        }\r\n        let params = { layerIndex, node, ctx: this }\r\n        if (this.checkIsTop(node)) {\r\n          utils.top.computedLeftTopValue(params)\r\n        } else {\r\n          utils.bottom.computedLeftTopValue(params)\r\n        }\r\n      },\r\n      null,\r\n      true\r\n    )\r\n  }\r\n\r\n  //  lefttop\r\n  adjustLeftTopValue() {\r\n    walk(\r\n      this.root,\r\n      null,\r\n      (node, parent, isRoot, layerIndex) => {\r\n        if (!node.getData('expand')) {\r\n          return\r\n        }\r\n        let params = { node, parent, layerIndex, ctx: this }\r\n        if (this.checkIsTop(node)) {\r\n          utils.top.adjustLeftTopValueBefore(params)\r\n        } else {\r\n          utils.bottom.adjustLeftTopValueBefore(params)\r\n        }\r\n      },\r\n      (node, parent) => {\r\n        let params = { parent, node, ctx: this }\r\n        if (this.checkIsTop(node)) {\r\n          utils.top.adjustLeftTopValueAfter(params)\r\n        } else {\r\n          utils.bottom.adjustLeftTopValueAfter(params)\r\n        }\r\n        // left\r\n        if (node.isRoot) {\r\n          let topTotalLeft = 0\r\n          let bottomTotalLeft = 0\r\n          let maxx = -Infinity\r\n          node.children.forEach(item => {\r\n            if (this.checkIsTop(item)) {\r\n              item.left += topTotalLeft\r\n              this.updateChildren(item.children, 'left', topTotalLeft)\r\n              let { left, right } = this.getNodeBoundaries(item, 'h')\r\n              if (right > maxx) {\r\n                maxx = right\r\n              }\r\n              topTotalLeft += right - left\r\n            } else {\r\n              item.left += bottomTotalLeft\r\n              this.updateChildren(item.children, 'left', bottomTotalLeft)\r\n              let { left, right } = this.getNodeBoundaries(item, 'h')\r\n              if (right > maxx) {\r\n                maxx = right\r\n              }\r\n              bottomTotalLeft += right - left\r\n            }\r\n          })\r\n          this.maxx = maxx\r\n        }\r\n      },\r\n      true\r\n    )\r\n  }\r\n\r\n  //  \r\n  getNodeAreaHeight(node) {\r\n    let totalHeight = 0\r\n    let loop = node => {\r\n      let marginY = this.getMarginY(node.layerIndex)\r\n      totalHeight +=\r\n        node.height +\r\n        (this.getNodeActChildrenLength(node) > 0 ? node.expandBtnSize : 0) +\r\n        marginY\r\n      if (node.children.length) {\r\n        node.children.forEach(item => {\r\n          loop(item)\r\n        })\r\n      }\r\n    }\r\n    loop(node)\r\n    return totalHeight\r\n  }\r\n\r\n  //  left\r\n  updateBrothersLeft(node) {\r\n    let childrenList = node.children\r\n    let totalAddWidth = 0\r\n    childrenList.forEach(item => {\r\n      item.left += totalAddWidth\r\n      if (item.children && item.children.length) {\r\n        this.updateChildren(item.children, 'left', totalAddWidth)\r\n      }\r\n      let { left, right } = this.getNodeBoundaries(item, 'h')\r\n      let areaWidth = right - left\r\n      let difference = areaWidth - item.width\r\n      if (difference > 0) {\r\n        totalAddWidth += difference\r\n      }\r\n    })\r\n  }\r\n\r\n  //  top\r\n  updateBrothersTop(node, addHeight) {\r\n    if (node.parent && !node.parent.isRoot) {\r\n      let childrenList = node.parent.children\r\n      let index = getNodeIndexInNodeList(node, childrenList)\r\n      childrenList.forEach((item, _index) => {\r\n        if (item.hasCustomPosition()) {\r\n          // \r\n          return\r\n        }\r\n        let _offset = 0\r\n        // \r\n        if (_index > index) {\r\n          _offset = addHeight\r\n        }\r\n        item.top += _offset\r\n        // \r\n        if (item.children && item.children.length) {\r\n          this.updateChildren(item.children, 'top', _offset)\r\n        }\r\n      })\r\n      // \r\n      if (this.checkIsTop(node)) {\r\n        this.updateBrothersTop(node.parent, addHeight)\r\n      } else {\r\n        this.updateBrothersTop(\r\n          node.parent,\r\n          node.layerIndex === 3 ? 0 : addHeight\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  // \r\n  checkIsTop(node) {\r\n    return node.dir === CONSTANTS.LAYOUT_GROW_DIR.TOP\r\n  }\r\n\r\n  //  \r\n  renderLine(node, lines, style) {\r\n    if (node.layerIndex !== 1 && node.children.length <= 0) {\r\n      return []\r\n    }\r\n    let { top, height, expandBtnSize } = node\r\n    const { alwaysShowExpandBtn, notShowExpandBtn } = this.mindMap.opt\r\n    if (!alwaysShowExpandBtn || notShowExpandBtn) {\r\n      expandBtnSize = 0\r\n    }\r\n    let len = node.children.length\r\n    if (node.isRoot) {\r\n      // \r\n      // \r\n      let maxx = -Infinity\r\n      node.children.forEach(item => {\r\n        if (item.left > maxx) {\r\n          maxx = item.left\r\n        }\r\n        // \r\n        let marginY = this.getMarginY(item.layerIndex)\r\n        let nodeLineX = item.left\r\n        let offset =\r\n          node.height / 2 + marginY - (this.isFishbone2() ? node.height / 4 : 0)\r\n        let offsetX = offset / Math.tan(degToRad(this.mindMap.opt.fishboneDeg))\r\n        let line = this.lineDraw.path()\r\n        if (this.checkIsTop(item)) {\r\n          line.plot(\r\n            this.transformPath(\r\n              `M ${nodeLineX - offsetX},${item.top + item.height + offset} L ${\r\n                item.left\r\n              },${item.top + item.height}`\r\n            )\r\n          )\r\n        } else {\r\n          line.plot(\r\n            this.transformPath(\r\n              `M ${nodeLineX - offsetX},${item.top - offset} L ${nodeLineX},${\r\n                item.top\r\n              }`\r\n            )\r\n          )\r\n        }\r\n        node.style.line(line)\r\n        node._lines.push(line)\r\n        style && style(line, node)\r\n      })\r\n      // \r\n      let nodeHalfTop = node.top + node.height / 2\r\n      let offset = node.height / 2 + this.getMarginY(node.layerIndex + 1)\r\n      let line = this.lineDraw.path()\r\n      const lineEndX = this.isFishbone2()\r\n        ? this.maxx\r\n        : maxx - offset / Math.tan(degToRad(this.mindMap.opt.fishboneDeg))\r\n      line.plot(\r\n        this.transformPath(\r\n          `M ${\r\n            node.left + node.width\r\n          },${nodeHalfTop} L ${lineEndX},${nodeHalfTop}`\r\n        )\r\n      )\r\n      node.style.line(line)\r\n      node._lines.push(line)\r\n      style && style(line, node)\r\n    } else {\r\n      // \r\n      let maxy = -Infinity\r\n      let miny = Infinity\r\n      let maxx = -Infinity\r\n      let x = node.left + node.width * this.indent\r\n      node.children.forEach((item, index) => {\r\n        if (item.left > maxx) {\r\n          maxx = item.left\r\n        }\r\n        let y = item.top + item.height / 2\r\n        if (y > maxy) {\r\n          maxy = y\r\n        }\r\n        if (y < miny) {\r\n          miny = y\r\n        }\r\n        // \r\n        if (node.layerIndex > 1) {\r\n          let path = `M ${x},${y} L ${item.left},${y}`\r\n          this.setLineStyle(style, lines[index], path, item)\r\n        }\r\n      })\r\n      // \r\n      if (len >= 0) {\r\n        let line = this.lineDraw.path()\r\n        expandBtnSize = len > 0 ? expandBtnSize : 0\r\n        let lineLength = maxx - node.left - node.width * this.indent\r\n        lineLength = Math.max(lineLength, 0)\r\n        let params = {\r\n          node,\r\n          line,\r\n          top,\r\n          x,\r\n          lineLength,\r\n          height,\r\n          expandBtnSize,\r\n          maxy,\r\n          miny,\r\n          ctx: this\r\n        }\r\n        if (this.checkIsTop(node)) {\r\n          utils.top.renderLine(params)\r\n        } else {\r\n          utils.bottom.renderLine(params)\r\n        }\r\n        node.style.line(line)\r\n        node._lines.push(line)\r\n        style && style(line, node)\r\n      }\r\n    }\r\n  }\r\n\r\n  //  \r\n  renderExpandBtn(node, btn) {\r\n    let { width, height, expandBtnSize, isRoot } = node\r\n    if (!isRoot) {\r\n      let { translateX, translateY } = btn.transform()\r\n      let params = {\r\n        node,\r\n        btn,\r\n        expandBtnSize,\r\n        translateX,\r\n        translateY,\r\n        width,\r\n        height\r\n      }\r\n      if (this.checkIsTop(node)) {\r\n        utils.top.renderExpandBtn(params)\r\n      } else {\r\n        utils.bottom.renderExpandBtn(params)\r\n      }\r\n    }\r\n  }\r\n\r\n  //  \r\n  renderGeneralization(list) {\r\n    list.forEach(item => {\r\n      let {\r\n        top,\r\n        bottom,\r\n        right,\r\n        generalizationLineMargin,\r\n        generalizationNodeMargin\r\n      } = this.getNodeGeneralizationRenderBoundaries(item, 'h')\r\n      let x1 = right + generalizationLineMargin\r\n      let y1 = top\r\n      let x2 = right + generalizationLineMargin\r\n      let y2 = bottom\r\n      let cx = x1 + 20\r\n      let cy = y1 + (y2 - y1) / 2\r\n      let path = `M ${x1},${y1} Q ${cx},${cy} ${x2},${y2}`\r\n      item.generalizationLine.plot(this.transformPath(path))\r\n      item.generalizationNode.left = right + generalizationNodeMargin\r\n      item.generalizationNode.top =\r\n        top + (bottom - top - item.generalizationNode.height) / 2\r\n    })\r\n  }\r\n\r\n  // \r\n  renderExpandBtnRect(rect, expandBtnSize, width, height, node) {\r\n    let dir = ''\r\n    if (node.dir === CONSTANTS.LAYOUT_GROW_DIR.TOP) {\r\n      dir =\r\n        node.layerIndex === 1\r\n          ? CONSTANTS.LAYOUT_GROW_DIR.TOP\r\n          : CONSTANTS.LAYOUT_GROW_DIR.BOTTOM\r\n    } else {\r\n      dir =\r\n        node.layerIndex === 1\r\n          ? CONSTANTS.LAYOUT_GROW_DIR.BOTTOM\r\n          : CONSTANTS.LAYOUT_GROW_DIR.TOP\r\n    }\r\n    if (dir === CONSTANTS.LAYOUT_GROW_DIR.TOP) {\r\n      rect.size(width, expandBtnSize).x(0).y(-expandBtnSize)\r\n    } else {\r\n      rect.size(width, expandBtnSize).x(0).y(height)\r\n    }\r\n  }\r\n\r\n  // \r\n  beforeChange() {\r\n    // \r\n    if (!this.isFishbone2()) return\r\n    this.root.nodeData.data.shape = CONSTANTS.SHAPE.RECTANGLE\r\n    this.removeFishTail()\r\n    this.unBindEvent()\r\n    this.mindMap.removeShape('fishHead')\r\n  }\r\n}\r\n\r\nexport default Fishbone\r\n","import {\r\n  getStrWithBrFromHtml,\r\n  checkNodeOuter,\r\n  focusInput,\r\n  selectAllInput,\r\n  htmlEscape,\r\n  handleInputPasteText,\r\n  checkSmmFormatData,\r\n  getTextFromHtml,\r\n  isWhite,\r\n  getVisibleColorFromTheme\r\n} from '../../utils'\r\nimport {\r\n  ERROR_TYPES,\r\n  CONSTANTS,\r\n  noneRichTextNodeLineHeight\r\n} from '../../constants/constant'\r\n\r\nconst SMM_NODE_EDIT_WRAP = 'smm-node-edit-wrap'\r\n\r\n//  \r\nexport default class TextEdit {\r\n  //  \r\n  constructor(renderer) {\r\n    this.renderer = renderer\r\n    this.mindMap = renderer.mindMap\r\n    // \r\n    this.currentNode = null\r\n    // \r\n    this.textEditNode = null\r\n    // \r\n    this.showTextEdit = false\r\n    // \r\n    this.cacheEditingText = ''\r\n    this.hasBodyMousedown = false\r\n    this.textNodePaddingX = 5\r\n    this.textNodePaddingY = 3\r\n    this.isNeedUpdateTextEditNode = false\r\n    this.mindMap.addEditNodeClass(SMM_NODE_EDIT_WRAP)\r\n    this.bindEvent()\r\n  }\r\n\r\n  //  \r\n  bindEvent() {\r\n    this.show = this.show.bind(this)\r\n    this.onScale = this.onScale.bind(this)\r\n    this.onKeydown = this.onKeydown.bind(this)\r\n    // \r\n    this.mindMap.on('node_dblclick', (node, e, isInserting) => {\r\n      this.show({ node, e, isInserting })\r\n    })\r\n    // \r\n    this.mindMap.on('draw_click', () => {\r\n      // \r\n      this.hideEditTextBox()\r\n    })\r\n    this.mindMap.on('body_mousedown', () => {\r\n      this.hasBodyMousedown = true\r\n    })\r\n    this.mindMap.on('body_click', () => {\r\n      if (!this.hasBodyMousedown) return\r\n      this.hasBodyMousedown = false\r\n      // \r\n      if (this.mindMap.opt.isEndNodeTextEditOnClickOuter) {\r\n        this.hideEditTextBox()\r\n      }\r\n    })\r\n    this.mindMap.on('svg_mousedown', () => {\r\n      // \r\n      this.hideEditTextBox()\r\n    })\r\n    // \r\n    this.mindMap.on('expand_btn_click', () => {\r\n      this.hideEditTextBox()\r\n    })\r\n    // \r\n    this.mindMap.on('before_node_active', () => {\r\n      this.hideEditTextBox()\r\n    })\r\n    // \r\n    this.mindMap.on('mousewheel', () => {\r\n      if (\r\n        this.mindMap.opt.mousewheelAction === CONSTANTS.MOUSE_WHEEL_ACTION.MOVE\r\n      ) {\r\n        this.hideEditTextBox()\r\n      }\r\n    })\r\n    // \r\n    this.mindMap.keyCommand.addShortcut('F2', () => {\r\n      if (this.renderer.activeNodeList.length <= 0) {\r\n        return\r\n      }\r\n      this.show({\r\n        node: this.renderer.activeNodeList[0]\r\n      })\r\n    })\r\n    this.mindMap.on('scale', this.onScale)\r\n    // \r\n    if (this.mindMap.opt.enableAutoEnterTextEditWhenKeydown) {\r\n      window.addEventListener('keydown', this.onKeydown)\r\n    }\r\n    this.mindMap.on('beforeDestroy', () => {\r\n      this.unBindEvent()\r\n    })\r\n    this.mindMap.on('after_update_config', (opt, lastOpt) => {\r\n      if (\r\n        opt.openRealtimeRenderOnNodeTextEdit !==\r\n        lastOpt.openRealtimeRenderOnNodeTextEdit\r\n      ) {\r\n        if (this.mindMap.richText) {\r\n          this.mindMap.richText.onOpenRealtimeRenderOnNodeTextEditConfigUpdate(\r\n            opt.openRealtimeRenderOnNodeTextEdit\r\n          )\r\n        } else {\r\n          this.onOpenRealtimeRenderOnNodeTextEditConfigUpdate(\r\n            opt.openRealtimeRenderOnNodeTextEdit\r\n          )\r\n        }\r\n      }\r\n      if (\r\n        opt.enableAutoEnterTextEditWhenKeydown !==\r\n        lastOpt.enableAutoEnterTextEditWhenKeydown\r\n      ) {\r\n        window[\r\n          opt.enableAutoEnterTextEditWhenKeydown\r\n            ? 'addEventListener'\r\n            : 'removeEventListener'\r\n        ]('keydown', this.onKeydown)\r\n      }\r\n    })\r\n    // \r\n    this.mindMap.on('afterExecCommand', () => {\r\n      if (!this.isShowTextEdit()) return\r\n      this.isNeedUpdateTextEditNode = true\r\n    })\r\n    this.mindMap.on('node_tree_render_end', () => {\r\n      if (!this.isShowTextEdit()) return\r\n      if (this.isNeedUpdateTextEditNode) {\r\n        this.isNeedUpdateTextEditNode = false\r\n        this.updateTextEditNode()\r\n      }\r\n    })\r\n  }\r\n\r\n  // \r\n  unBindEvent() {\r\n    window.removeEventListener('keydown', this.onKeydown)\r\n  }\r\n\r\n  // \r\n  onKeydown(e) {\r\n    if (e.target !== document.body) return\r\n    const activeNodeList = this.mindMap.renderer.activeNodeList\r\n    if (activeNodeList.length <= 0 || activeNodeList.length > 1) return\r\n    const node = activeNodeList[0]\r\n    // \r\n    if (node && this.checkIsAutoEnterTextEditKey(e)) {\r\n      // \r\n      // \r\n      e.preventDefault()\r\n      this.show({\r\n        node,\r\n        e,\r\n        isInserting: false,\r\n        isFromKeyDown: true\r\n      })\r\n    }\r\n  }\r\n\r\n  // \r\n  checkIsAutoEnterTextEditKey(e) {\r\n    const keyCode = e.keyCode\r\n    return (\r\n      (keyCode === 229 ||\r\n        (keyCode >= 65 && keyCode <= 90) ||\r\n        (keyCode >= 48 && keyCode <= 57)) &&\r\n      !this.mindMap.keyCommand.hasCombinationKey(e)\r\n    )\r\n  }\r\n\r\n  //  \r\n  registerTmpShortcut() {\r\n    this.mindMap.keyCommand.addShortcut('Enter', () => {\r\n      this.hideEditTextBox()\r\n    })\r\n    this.mindMap.keyCommand.addShortcut('Tab', () => {\r\n      this.hideEditTextBox()\r\n    })\r\n  }\r\n\r\n  // \r\n  isShowTextEdit() {\r\n    if (this.mindMap.richText) {\r\n      return this.mindMap.richText.showTextEdit\r\n    }\r\n    return this.showTextEdit\r\n  }\r\n\r\n  // \r\n  setIsShowTextEdit(val) {\r\n    this.showTextEdit = val\r\n    if (val) {\r\n      this.mindMap.keyCommand.stopCheckInSvg()\r\n    } else {\r\n      this.mindMap.keyCommand.recoveryCheckInSvg()\r\n    }\r\n  }\r\n\r\n  // \r\n  // isInserting\r\n  // isFromKeyDown\r\n  async show({\r\n    node,\r\n    isInserting = false,\r\n    isFromKeyDown = false,\r\n    isFromScale = false\r\n  }) {\r\n    // \r\n    if (node.isUseCustomNodeContent()) {\r\n      return\r\n    }\r\n    // \r\n    const currentEditNode = this.getCurrentEditNode()\r\n    if (currentEditNode) {\r\n      this.hideEditTextBox()\r\n    }\r\n    const { beforeTextEdit, openRealtimeRenderOnNodeTextEdit } =\r\n      this.mindMap.opt\r\n    if (typeof beforeTextEdit === 'function') {\r\n      let isShow = false\r\n      try {\r\n        isShow = await beforeTextEdit(node, isInserting)\r\n      } catch (error) {\r\n        isShow = false\r\n        this.mindMap.opt.errorHandler(ERROR_TYPES.BEFORE_TEXT_EDIT_ERROR, error)\r\n      }\r\n      if (!isShow) return\r\n    }\r\n    const { offsetLeft, offsetTop } = checkNodeOuter(this.mindMap, node)\r\n    this.mindMap.view.translateXY(offsetLeft, offsetTop)\r\n    const g = node._textData.node\r\n    // 0\r\n    if (openRealtimeRenderOnNodeTextEdit) {\r\n      g.show()\r\n    }\r\n    const rect = g.node.getBoundingClientRect()\r\n    // \r\n    if (openRealtimeRenderOnNodeTextEdit) {\r\n      g.hide()\r\n    }\r\n    const params = {\r\n      node,\r\n      rect,\r\n      isInserting,\r\n      isFromKeyDown,\r\n      isFromScale\r\n    }\r\n    if (this.mindMap.richText) {\r\n      this.mindMap.richText.showEditText(params)\r\n      return\r\n    }\r\n    this.currentNode = node\r\n    this.showEditTextBox(params)\r\n  }\r\n\r\n  // openRealtimeRenderOnNodeTextEdit\r\n  onOpenRealtimeRenderOnNodeTextEditConfigUpdate(\r\n    openRealtimeRenderOnNodeTextEdit\r\n  ) {\r\n    if (!this.textEditNode) return\r\n    this.textEditNode.style.background = openRealtimeRenderOnNodeTextEdit\r\n      ? 'transparent'\r\n      : this.currentNode\r\n      ? this.getBackground(this.currentNode)\r\n      : ''\r\n    this.textEditNode.style.boxShadow = openRealtimeRenderOnNodeTextEdit\r\n      ? 'none'\r\n      : '0 0 20px rgba(0,0,0,.5)'\r\n  }\r\n\r\n  // \r\n  onScale() {\r\n    const node = this.getCurrentEditNode()\r\n    if (!node) return\r\n    if (this.mindMap.richText) {\r\n      this.mindMap.richText.cacheEditingText =\r\n        this.mindMap.richText.getEditText()\r\n      this.mindMap.richText.showTextEdit = false\r\n    } else {\r\n      this.cacheEditingText = this.getEditText()\r\n      this.setIsShowTextEdit(false)\r\n    }\r\n    this.show({\r\n      node,\r\n      isFromScale: true\r\n    })\r\n  }\r\n\r\n  //  \r\n  showEditTextBox({ node, rect, isInserting, isFromKeyDown, isFromScale }) {\r\n    if (this.showTextEdit) return\r\n    const {\r\n      nodeTextEditZIndex,\r\n      textAutoWrapWidth,\r\n      selectTextOnEnterEditText,\r\n      openRealtimeRenderOnNodeTextEdit,\r\n      autoEmptyTextWhenKeydownEnterEdit\r\n    } = this.mindMap.opt\r\n    if (!isFromScale) {\r\n      this.mindMap.emit('before_show_text_edit')\r\n    }\r\n    this.registerTmpShortcut()\r\n    if (!this.textEditNode) {\r\n      this.textEditNode = document.createElement('div')\r\n      this.textEditNode.classList.add(SMM_NODE_EDIT_WRAP)\r\n      this.textEditNode.style.cssText = `\r\n        position: fixed;\r\n        box-sizing: border-box;\r\n        ${\r\n          openRealtimeRenderOnNodeTextEdit\r\n            ? ''\r\n            : `box-shadow: 0 0 20px rgba(0,0,0,.5);`\r\n        }\r\n        padding: ${this.textNodePaddingY}px ${this.textNodePaddingX}px;\r\n        margin-left: -${this.textNodePaddingX}px;\r\n        margin-top: -${this.textNodePaddingY}px;\r\n        outline: none; \r\n        word-break: break-all;\r\n        line-break: anywhere;\r\n      `\r\n      this.textEditNode.setAttribute('contenteditable', true)\r\n      this.textEditNode.addEventListener('keyup', e => {\r\n        e.stopPropagation()\r\n      })\r\n      this.textEditNode.addEventListener('click', e => {\r\n        e.stopPropagation()\r\n      })\r\n      this.textEditNode.addEventListener('mousedown', e => {\r\n        e.stopPropagation()\r\n      })\r\n      this.textEditNode.addEventListener('keydown', e => {\r\n        if (this.checkIsAutoEnterTextEditKey(e)) {\r\n          e.stopPropagation()\r\n        }\r\n      })\r\n      this.textEditNode.addEventListener('paste', e => {\r\n        const text = e.clipboardData.getData('text')\r\n        const { isSmm, data } = checkSmmFormatData(text)\r\n        if (isSmm && data[0] && data[0].data) {\r\n          // \r\n          handleInputPasteText(e, getTextFromHtml(data[0].data.text))\r\n        } else {\r\n          handleInputPasteText(e)\r\n        }\r\n        this.emitTextChangeEvent()\r\n      })\r\n      this.textEditNode.addEventListener('input', () => {\r\n        this.emitTextChangeEvent()\r\n      })\r\n      const targetNode =\r\n        this.mindMap.opt.customInnerElsAppendTo || document.body\r\n      targetNode.appendChild(this.textEditNode)\r\n    }\r\n    const scale = this.mindMap.view.scale\r\n    const fontSize = node.style.merge('fontSize')\r\n    const textLines = (this.cacheEditingText || node.getData('text'))\r\n      .split(/\\n/gim)\r\n      .map(item => {\r\n        return htmlEscape(item)\r\n      })\r\n    const isMultiLine = node._textData.node.attr('data-ismultiLine') === 'true'\r\n    node.style.domText(this.textEditNode, scale)\r\n    if (!openRealtimeRenderOnNodeTextEdit) {\r\n      this.textEditNode.style.background = this.getBackground(node)\r\n    }\r\n    this.textEditNode.style.zIndex = nodeTextEditZIndex\r\n    if (isFromKeyDown && autoEmptyTextWhenKeydownEnterEdit) {\r\n      this.textEditNode.innerHTML = ''\r\n    } else {\r\n      this.textEditNode.innerHTML = textLines.join('<br>')\r\n    }\r\n    this.textEditNode.style.minWidth =\r\n      rect.width + this.textNodePaddingX * 2 + 'px'\r\n    this.textEditNode.style.minHeight = rect.height + 'px'\r\n    this.textEditNode.style.left = Math.floor(rect.left) + 'px'\r\n    this.textEditNode.style.top = Math.floor(rect.top) + 'px'\r\n    this.textEditNode.style.display = 'block'\r\n    this.textEditNode.style.maxWidth = textAutoWrapWidth * scale + 'px'\r\n    if (isMultiLine) {\r\n      this.textEditNode.style.lineHeight = noneRichTextNodeLineHeight\r\n      this.textEditNode.style.transform = `translateY(${\r\n        (((noneRichTextNodeLineHeight - 1) * fontSize) / 2) * scale\r\n      }px)`\r\n    } else {\r\n      this.textEditNode.style.lineHeight = 'normal'\r\n    }\r\n    this.setIsShowTextEdit(true)\r\n    // \r\n    // if (!this.cacheEditingText) {\r\n    //   selectAllInput(this.textEditNode)\r\n    // }\r\n    if (isInserting || (selectTextOnEnterEditText && !isFromKeyDown)) {\r\n      selectAllInput(this.textEditNode)\r\n    } else {\r\n      focusInput(this.textEditNode)\r\n    }\r\n    this.cacheEditingText = ''\r\n  }\r\n\r\n  // \r\n  emitTextChangeEvent() {\r\n    this.mindMap.emit('node_text_edit_change', {\r\n      node: this.currentNode,\r\n      text: this.getEditText(),\r\n      richText: false\r\n    })\r\n  }\r\n\r\n  // \r\n  updateTextEditNode() {\r\n    if (this.mindMap.richText) {\r\n      this.mindMap.richText.updateTextEditNode()\r\n      return\r\n    }\r\n    if (!this.showTextEdit || !this.currentNode) {\r\n      return\r\n    }\r\n    const rect = this.currentNode._textData.node.node.getBoundingClientRect()\r\n    this.textEditNode.style.minWidth =\r\n      rect.width + this.textNodePaddingX * 2 + 'px'\r\n    this.textEditNode.style.minHeight =\r\n      rect.height + this.textNodePaddingY * 2 + 'px'\r\n    this.textEditNode.style.left = Math.floor(rect.left) + 'px'\r\n    this.textEditNode.style.top = Math.floor(rect.top) + 'px'\r\n  }\r\n\r\n  // \r\n  getBackground(node) {\r\n    const gradientStyle = node.style.merge('gradientStyle')\r\n    // \r\n    if (gradientStyle) {\r\n      const startColor = node.style.merge('startColor')\r\n      const endColor = node.style.merge('endColor')\r\n      return `linear-gradient(to right, ${startColor}, ${endColor})`\r\n    } else {\r\n      // \r\n      const bgColor = node.style.merge('fillColor')\r\n      const color = node.style.merge('color')\r\n      // \r\n      return bgColor === 'transparent'\r\n        ? isWhite(color)\r\n          ? getVisibleColorFromTheme(this.mindMap.themeConfig)\r\n          : '#fff'\r\n        : bgColor\r\n    }\r\n  }\r\n\r\n  // \r\n  removeTextEditEl() {\r\n    if (this.mindMap.richText) {\r\n      this.mindMap.richText.removeTextEditEl()\r\n      return\r\n    }\r\n    if (!this.textEditNode) return\r\n    const targetNode = this.mindMap.opt.customInnerElsAppendTo || document.body\r\n    targetNode.removeChild(this.textEditNode)\r\n  }\r\n\r\n  // \r\n  getEditText() {\r\n    return getStrWithBrFromHtml(this.textEditNode.innerHTML)\r\n  }\r\n\r\n  //  \r\n  hideEditTextBox() {\r\n    if (this.mindMap.richText) {\r\n      return this.mindMap.richText.hideEditText()\r\n    }\r\n    if (!this.showTextEdit) {\r\n      return\r\n    }\r\n    const currentNode = this.currentNode\r\n    const text = this.getEditText()\r\n    this.currentNode = null\r\n    this.textEditNode.style.display = 'none'\r\n    this.textEditNode.innerHTML = ''\r\n    this.textEditNode.style.fontFamily = 'inherit'\r\n    this.textEditNode.style.fontSize = 'inherit'\r\n    this.textEditNode.style.fontWeight = 'normal'\r\n    this.textEditNode.style.transform = 'translateY(0)'\r\n    this.setIsShowTextEdit(false)\r\n    this.mindMap.execCommand('SET_NODE_TEXT', currentNode, text)\r\n    // if (currentNode.isGeneralization) {\r\n    //   // \r\n    //   currentNode.generalizationBelongNode.updateGeneralization()\r\n    // }\r\n    this.mindMap.render()\r\n    this.mindMap.emit(\r\n      'hide_text_edit',\r\n      this.textEditNode,\r\n      this.renderer.activeNodeList,\r\n      currentNode\r\n    )\r\n  }\r\n\r\n  // \r\n  getCurrentEditNode() {\r\n    if (this.mindMap.richText) {\r\n      return this.mindMap.richText.node\r\n    }\r\n    return this.currentNode\r\n  }\r\n}\r\n","import merge from 'deepmerge'\r\nimport LogicalStructure from '../../layouts/LogicalStructure'\r\nimport MindMap from '../../layouts/MindMap'\r\nimport CatalogOrganization from '../../layouts/CatalogOrganization'\r\nimport OrganizationStructure from '../../layouts/OrganizationStructure'\r\nimport Timeline from '../../layouts/Timeline'\r\nimport VerticalTimeline from '../../layouts/VerticalTimeline'\r\nimport Fishbone from '../../layouts/Fishbone'\r\nimport TextEdit from './TextEdit'\r\nimport {\r\n  copyNodeTree,\r\n  simpleDeepClone,\r\n  walk,\r\n  bfsWalk,\r\n  loadImage,\r\n  isUndef,\r\n  getTopAncestorsFomNodeList,\r\n  addDataToAppointNodes,\r\n  createUidForAppointNodes,\r\n  formatDataToArray,\r\n  removeFromParentNodeData,\r\n  createUid,\r\n  getNodeDataIndex,\r\n  getNodeIndexInNodeList,\r\n  setDataToClipboard,\r\n  getDataFromClipboard,\r\n  htmlEscape,\r\n  parseAddGeneralizationNodeList,\r\n  checkNodeListIsEqual,\r\n  createSmmFormatData,\r\n  checkSmmFormatData,\r\n  checkIsNodeStyleDataKey,\r\n  formatGetNodeGeneralization,\r\n  sortNodeList,\r\n  throttle,\r\n  debounce,\r\n  checkClipboardReadEnable,\r\n  isNodeNotNeedRenderData\r\n} from '../../utils'\r\nimport { shapeList } from './node/Shape'\r\nimport { lineStyleProps } from '../../theme/default'\r\nimport { CONSTANTS, ERROR_TYPES } from '../../constants/constant'\r\nimport { Polygon } from '@svgdotjs/svg.js'\r\n\r\n// \r\nconst layouts = {\r\n  // \r\n  [CONSTANTS.LAYOUT.LOGICAL_STRUCTURE]: LogicalStructure,\r\n  // \r\n  [CONSTANTS.LAYOUT.LOGICAL_STRUCTURE_LEFT]: LogicalStructure,\r\n  // \r\n  [CONSTANTS.LAYOUT.MIND_MAP]: MindMap,\r\n  // \r\n  [CONSTANTS.LAYOUT.CATALOG_ORGANIZATION]: CatalogOrganization,\r\n  // \r\n  [CONSTANTS.LAYOUT.ORGANIZATION_STRUCTURE]: OrganizationStructure,\r\n  // \r\n  [CONSTANTS.LAYOUT.TIMELINE]: Timeline,\r\n  // 2\r\n  [CONSTANTS.LAYOUT.TIMELINE2]: Timeline,\r\n  // \r\n  [CONSTANTS.LAYOUT.VERTICAL_TIMELINE]: VerticalTimeline,\r\n  // 2\r\n  [CONSTANTS.LAYOUT.VERTICAL_TIMELINE2]: VerticalTimeline,\r\n  // 3\r\n  [CONSTANTS.LAYOUT.VERTICAL_TIMELINE3]: VerticalTimeline,\r\n  // \r\n  [CONSTANTS.LAYOUT.FISHBONE]: Fishbone,\r\n  // 2\r\n  [CONSTANTS.LAYOUT.FISHBONE2]: Fishbone\r\n}\r\n\r\n//  \r\nclass Render {\r\n  //  \r\n  constructor(opt = {}) {\r\n    this.opt = opt\r\n    this.mindMap = opt.mindMap\r\n    this.themeConfig = this.mindMap.themeConfig\r\n    // \r\n    this.renderTree = this.mindMap.opt.data\r\n      ? merge({}, this.mindMap.opt.data)\r\n      : null\r\n    // \r\n    this.reRender = false\r\n    // \r\n    this.isRendering = false\r\n    // \r\n    this.hasWaitRendering = false\r\n    // \r\n    this.nodeCache = {}\r\n    this.lastNodeCache = {}\r\n    // render\r\n    this.renderSourceList = []\r\n    // render\r\n    this.renderCallbackList = []\r\n    // \r\n    this.activeNodeList = []\r\n    // \r\n    this.emitNodeActiveEventTimer = null\r\n    this.renderTimer = null\r\n    // \r\n    this.root = null\r\n    // bindEvent\r\n    this.textEdit = new TextEdit(this)\r\n    // \r\n    this.beingCopyData = null\r\n    // \r\n    this.highlightBoxNode = null\r\n    this.highlightBoxNodeStyle = null\r\n    // \r\n    this.lastActiveNodeList = []\r\n    // \r\n    this.setLayout()\r\n    // \r\n    this.bindEvent()\r\n    // \r\n    this.registerCommands()\r\n    // \r\n    this.registerShortcutKeys()\r\n  }\r\n\r\n  //  \r\n  setLayout() {\r\n    if (this.layout && this.layout.beforeChange) {\r\n      this.layout.beforeChange()\r\n    }\r\n    const { layout } = this.mindMap.opt\r\n    let L = layouts[layout] || this.mindMap[layout]\r\n    if (!L) {\r\n      L = layouts[CONSTANTS.LAYOUT.LOGICAL_STRUCTURE]\r\n      this.mindMap.opt.layout = CONSTANTS.LAYOUT.LOGICAL_STRUCTURE\r\n    }\r\n    this.layout = new L(this, layout)\r\n  }\r\n\r\n  // \r\n  setData(data) {\r\n    this.renderTree = data || null\r\n  }\r\n\r\n  //   \r\n  bindEvent() {\r\n    const {\r\n      openPerformance,\r\n      performanceConfig,\r\n      openRealtimeRenderOnNodeTextEdit\r\n    } = this.mindMap.opt\r\n    // \r\n    this.mindMap.on('draw_click', e => {\r\n      this.clearActiveNodeListOnDrawClick(e, 'click')\r\n    })\r\n    // \r\n    this.mindMap.on('contextmenu', e => {\r\n      this.clearActiveNodeListOnDrawClick(e, 'contextmenu')\r\n    })\r\n    // \r\n    this.mindMap.svg.on('dblclick', () => {\r\n      if (!this.mindMap.opt.enableDblclickBackToRootNode) return\r\n      this.setRootNodeCenter()\r\n    })\r\n    // \r\n    const onViewDataChange = throttle(() => {\r\n      if (!this.renderTree) {\r\n        return\r\n      }\r\n      if (this.root) {\r\n        this.mindMap.emit('node_tree_render_start')\r\n        this.root.render(\r\n          () => {\r\n            this.mindMap.emit('node_tree_render_end')\r\n          },\r\n          false,\r\n          true\r\n        )\r\n      }\r\n    }, performanceConfig.time)\r\n    if (openPerformance) {\r\n      this.mindMap.on('view_data_change', onViewDataChange)\r\n    }\r\n    // \r\n    this.onNodeTextEditChange = debounce(this.onNodeTextEditChange, 100, this)\r\n    if (openRealtimeRenderOnNodeTextEdit) {\r\n      this.mindMap.on('node_text_edit_change', this.onNodeTextEditChange)\r\n    }\r\n    // \r\n    this.mindMap.on('after_update_config', (opt, lastOpt) => {\r\n      // openPerformance\r\n      if (opt.openPerformance !== lastOpt.openPerformance) {\r\n        this.mindMap[opt.openPerformance ? 'on' : 'off'](\r\n          'view_data_change',\r\n          onViewDataChange\r\n        )\r\n        this.forceLoadNode()\r\n      }\r\n      // openRealtimeRenderOnNodeTextEdit\r\n      if (\r\n        opt.openRealtimeRenderOnNodeTextEdit !==\r\n        lastOpt.openRealtimeRenderOnNodeTextEdit\r\n      ) {\r\n        this.mindMap[opt.openRealtimeRenderOnNodeTextEdit ? 'on' : 'off'](\r\n          'node_text_edit_change',\r\n          this.onNodeTextEditChange\r\n        )\r\n      }\r\n    })\r\n    // https\r\n    // \r\n    // if (!checkClipboardReadEnable()) {\r\n    //   this.handlePaste = this.handlePaste.bind(this)\r\n    //   window.addEventListener('paste', this.handlePaste)\r\n    //   this.mindMap.on('beforeDestroy', () => {\r\n    //     window.removeEventListener('paste', this.handlePaste)\r\n    //   })\r\n    // }\r\n  }\r\n\r\n  // \r\n  onNodeTextEditChange({ node, text }) {\r\n    node._textData = node.createTextNode(text)\r\n    const { width, height } = node.getNodeRect()\r\n    node.width = width\r\n    node.height = height\r\n    node.layout()\r\n    this.mindMap.render(() => {\r\n      this.textEdit.updateTextEditNode()\r\n    })\r\n  }\r\n\r\n  // \r\n  forceLoadNode(node) {\r\n    node = node || this.root\r\n    if (node) {\r\n      this.mindMap.emit('node_tree_render_start')\r\n      node.render(() => {\r\n        this.mindMap.emit('node_tree_render_end')\r\n      }, true)\r\n    }\r\n  }\r\n\r\n  //  \r\n  registerCommands() {\r\n    // \r\n    this.selectAll = this.selectAll.bind(this)\r\n    this.mindMap.command.add('SELECT_ALL', this.selectAll)\r\n    // \r\n    this.back = this.back.bind(this)\r\n    this.mindMap.command.add('BACK', this.back)\r\n    // \r\n    this.forward = this.forward.bind(this)\r\n    this.mindMap.command.add('FORWARD', this.forward)\r\n    // \r\n    this.insertNode = this.insertNode.bind(this)\r\n    this.mindMap.command.add('INSERT_NODE', this.insertNode)\r\n    // \r\n    this.insertMultiNode = this.insertMultiNode.bind(this)\r\n    this.mindMap.command.add('INSERT_MULTI_NODE', this.insertMultiNode)\r\n    // \r\n    this.insertChildNode = this.insertChildNode.bind(this)\r\n    this.mindMap.command.add('INSERT_CHILD_NODE', this.insertChildNode)\r\n    // \r\n    this.insertMultiChildNode = this.insertMultiChildNode.bind(this)\r\n    this.mindMap.command.add(\r\n      'INSERT_MULTI_CHILD_NODE',\r\n      this.insertMultiChildNode\r\n    )\r\n    // \r\n    this.insertParentNode = this.insertParentNode.bind(this)\r\n    this.mindMap.command.add('INSERT_PARENT_NODE', this.insertParentNode)\r\n    // \r\n    this.upNode = this.upNode.bind(this)\r\n    this.mindMap.command.add('UP_NODE', this.upNode)\r\n    // \r\n    this.downNode = this.downNode.bind(this)\r\n    this.mindMap.command.add('DOWN_NODE', this.downNode)\r\n    //  \r\n    this.moveUpOneLevel = this.moveUpOneLevel.bind(this)\r\n    this.mindMap.command.add('MOVE_UP_ONE_LEVEL', this.moveUpOneLevel)\r\n    // \r\n    this.insertAfter = this.insertAfter.bind(this)\r\n    this.mindMap.command.add('INSERT_AFTER', this.insertAfter)\r\n    this.insertBefore = this.insertBefore.bind(this)\r\n    this.mindMap.command.add('INSERT_BEFORE', this.insertBefore)\r\n    this.moveNodeTo = this.moveNodeTo.bind(this)\r\n    this.mindMap.command.add('MOVE_NODE_TO', this.moveNodeTo)\r\n    // \r\n    this.removeNode = this.removeNode.bind(this)\r\n    this.mindMap.command.add('REMOVE_NODE', this.removeNode)\r\n    // \r\n    this.removeCurrentNode = this.removeCurrentNode.bind(this)\r\n    this.mindMap.command.add('REMOVE_CURRENT_NODE', this.removeCurrentNode)\r\n    // \r\n    this.pasteNode = this.pasteNode.bind(this)\r\n    this.mindMap.command.add('PASTE_NODE', this.pasteNode)\r\n    // \r\n    this.cutNode = this.cutNode.bind(this)\r\n    this.mindMap.command.add('CUT_NODE', this.cutNode)\r\n    // \r\n    this.setNodeStyle = this.setNodeStyle.bind(this)\r\n    this.mindMap.command.add('SET_NODE_STYLE', this.setNodeStyle)\r\n    // \r\n    this.setNodeStyles = this.setNodeStyles.bind(this)\r\n    this.mindMap.command.add('SET_NODE_STYLES', this.setNodeStyles)\r\n    // \r\n    this.setNodeActive = this.setNodeActive.bind(this)\r\n    this.mindMap.command.add('SET_NODE_ACTIVE', this.setNodeActive)\r\n    // \r\n    this.clearActiveNode = this.clearActiveNode.bind(this)\r\n    this.mindMap.command.add('CLEAR_ACTIVE_NODE', this.clearActiveNode)\r\n    // \r\n    this.setNodeExpand = this.setNodeExpand.bind(this)\r\n    this.mindMap.command.add('SET_NODE_EXPAND', this.setNodeExpand)\r\n    // \r\n    this.expandAllNode = this.expandAllNode.bind(this)\r\n    this.mindMap.command.add('EXPAND_ALL', this.expandAllNode)\r\n    // \r\n    this.unexpandAllNode = this.unexpandAllNode.bind(this)\r\n    this.mindMap.command.add('UNEXPAND_ALL', this.unexpandAllNode)\r\n    // \r\n    this.expandToLevel = this.expandToLevel.bind(this)\r\n    this.mindMap.command.add('UNEXPAND_TO_LEVEL', this.expandToLevel)\r\n    // \r\n    this.setNodeData = this.setNodeData.bind(this)\r\n    this.mindMap.command.add('SET_NODE_DATA', this.setNodeData)\r\n    // \r\n    this.setNodeText = this.setNodeText.bind(this)\r\n    this.mindMap.command.add('SET_NODE_TEXT', this.setNodeText)\r\n    // \r\n    this.setNodeImage = this.setNodeImage.bind(this)\r\n    this.mindMap.command.add('SET_NODE_IMAGE', this.setNodeImage)\r\n    // \r\n    this.setNodeIcon = this.setNodeIcon.bind(this)\r\n    this.mindMap.command.add('SET_NODE_ICON', this.setNodeIcon)\r\n    // \r\n    this.setNodeHyperlink = this.setNodeHyperlink.bind(this)\r\n    this.mindMap.command.add('SET_NODE_HYPERLINK', this.setNodeHyperlink)\r\n    // \r\n    this.setNodeNote = this.setNodeNote.bind(this)\r\n    this.mindMap.command.add('SET_NODE_NOTE', this.setNodeNote)\r\n    // \r\n    this.setNodeAttachment = this.setNodeAttachment.bind(this)\r\n    this.mindMap.command.add('SET_NODE_ATTACHMENT', this.setNodeAttachment)\r\n    // \r\n    this.setNodeTag = this.setNodeTag.bind(this)\r\n    this.mindMap.command.add('SET_NODE_TAG', this.setNodeTag)\r\n    // \r\n    this.insertFormula = this.insertFormula.bind(this)\r\n    this.mindMap.command.add('INSERT_FORMULA', this.insertFormula)\r\n    // \r\n    this.addGeneralization = this.addGeneralization.bind(this)\r\n    this.mindMap.command.add('ADD_GENERALIZATION', this.addGeneralization)\r\n    // \r\n    this.removeGeneralization = this.removeGeneralization.bind(this)\r\n    this.mindMap.command.add('REMOVE_GENERALIZATION', this.removeGeneralization)\r\n    // \r\n    this.setNodeCustomPosition = this.setNodeCustomPosition.bind(this)\r\n    this.mindMap.command.add(\r\n      'SET_NODE_CUSTOM_POSITION',\r\n      this.setNodeCustomPosition\r\n    )\r\n    // \r\n    this.resetLayout = this.resetLayout.bind(this)\r\n    this.mindMap.command.add('RESET_LAYOUT', this.resetLayout)\r\n    // \r\n    this.setNodeShape = this.setNodeShape.bind(this)\r\n    this.mindMap.command.add('SET_NODE_SHAPE', this.setNodeShape)\r\n    // \r\n    this.goTargetNode = this.goTargetNode.bind(this)\r\n    this.mindMap.command.add('GO_TARGET_NODE', this.goTargetNode)\r\n    // \r\n    this.removeCustomStyles = this.removeCustomStyles.bind(this)\r\n    this.mindMap.command.add('REMOVE_CUSTOM_STYLES', this.removeCustomStyles)\r\n    // \r\n    this.removeAllNodeCustomStyles = this.removeAllNodeCustomStyles.bind(this)\r\n    this.mindMap.command.add(\r\n      'REMOVE_ALL_NODE_CUSTOM_STYLES',\r\n      this.removeAllNodeCustomStyles\r\n    )\r\n  }\r\n\r\n  //  \r\n  registerShortcutKeys() {\r\n    // \r\n    this.mindMap.keyCommand.addShortcut('Tab', () => {\r\n      this.mindMap.execCommand('INSERT_CHILD_NODE')\r\n    })\r\n    // \r\n    this.mindMap.keyCommand.addShortcut('Insert', () => {\r\n      this.mindMap.execCommand('INSERT_CHILD_NODE')\r\n    })\r\n    // \r\n    this.mindMap.keyCommand.addShortcut('Enter', () => {\r\n      this.mindMap.execCommand('INSERT_NODE')\r\n    })\r\n    // \r\n    this.mindMap.keyCommand.addShortcut('Shift+Tab', () => {\r\n      this.mindMap.execCommand('INSERT_PARENT_NODE')\r\n    })\r\n    // \r\n    this.mindMap.keyCommand.addShortcut('Control+g', () => {\r\n      this.mindMap.execCommand('ADD_GENERALIZATION')\r\n    })\r\n    // /\r\n    this.toggleActiveExpand = this.toggleActiveExpand.bind(this)\r\n    this.mindMap.keyCommand.addShortcut('/', this.toggleActiveExpand)\r\n    // \r\n    this.mindMap.keyCommand.addShortcut('Del|Backspace', () => {\r\n      this.mindMap.execCommand('REMOVE_NODE')\r\n    })\r\n    // \r\n    this.mindMap.keyCommand.addShortcut('Shift+Backspace', () => {\r\n      this.mindMap.execCommand('REMOVE_CURRENT_NODE')\r\n    })\r\n    // \r\n    this.mindMap.on('before_show_text_edit', () => {\r\n      this.startTextEdit()\r\n    })\r\n    this.mindMap.on('hide_text_edit', () => {\r\n      this.endTextEdit()\r\n    })\r\n    // \r\n    this.mindMap.keyCommand.addShortcut('Control+a', () => {\r\n      this.mindMap.execCommand('SELECT_ALL')\r\n    })\r\n    // \r\n    this.mindMap.keyCommand.addShortcut('Control+l', () => {\r\n      this.mindMap.execCommand('RESET_LAYOUT')\r\n    })\r\n    // \r\n    this.mindMap.keyCommand.addShortcut('Control+Up', () => {\r\n      this.mindMap.execCommand('UP_NODE')\r\n    })\r\n    // \r\n    this.mindMap.keyCommand.addShortcut('Control+Down', () => {\r\n      this.mindMap.execCommand('DOWN_NODE')\r\n    })\r\n    // \r\n    this.mindMap.keyCommand.addShortcut('Control+c', () => {\r\n      this.copy()\r\n    })\r\n    // \r\n    this.mindMap.keyCommand.addShortcut('Control+x', () => {\r\n      this.cut()\r\n    })\r\n    // \r\n    this.mindMap.keyCommand.addShortcut('Control+v', () => {\r\n      this.paste()\r\n    })\r\n    // \r\n    this.mindMap.keyCommand.addShortcut('Control+Enter', () => {\r\n      this.setRootNodeCenter()\r\n    })\r\n  }\r\n\r\n  // \r\n  emitNodeActiveEvent(node = null, activeNodeList = [...this.activeNodeList]) {\r\n    const isChange = !checkNodeListIsEqual(\r\n      this.lastActiveNodeList,\r\n      activeNodeList\r\n    )\r\n    if (!isChange) return\r\n    this.lastActiveNodeList = [...activeNodeList]\r\n    clearTimeout(this.emitNodeActiveEventTimer)\r\n    this.emitNodeActiveEventTimer = setTimeout(() => {\r\n      this.mindMap.emit('node_active', node, activeNodeList)\r\n    }, 0)\r\n  }\r\n\r\n  // \r\n  clearActiveNodeListOnDrawClick(e, eventType) {\r\n    if (this.activeNodeList.length <= 0) return\r\n    // \r\n    let isTrueClick = true\r\n    // \r\n    const { useLeftKeySelectionRightKeyDrag } = this.mindMap.opt\r\n    // \r\n    if (\r\n      eventType === 'contextmenu'\r\n        ? !useLeftKeySelectionRightKeyDrag\r\n        : useLeftKeySelectionRightKeyDrag\r\n    ) {\r\n      const mousedownPos = this.mindMap.event.mousedownPos\r\n      isTrueClick =\r\n        Math.abs(e.clientX - mousedownPos.x) <= 5 &&\r\n        Math.abs(e.clientY - mousedownPos.y) <= 5\r\n    }\r\n    if (isTrueClick) {\r\n      this.mindMap.execCommand('CLEAR_ACTIVE_NODE')\r\n    }\r\n  }\r\n\r\n  //  \r\n  startTextEdit() {\r\n    this.mindMap.keyCommand.save()\r\n  }\r\n\r\n  //  \r\n  endTextEdit() {\r\n    this.mindMap.keyCommand.restore()\r\n  }\r\n\r\n  // \r\n  clearCache() {\r\n    this.layout.lru.clear()\r\n    this.nodeCache = {}\r\n    this.lastNodeCache = {}\r\n  }\r\n\r\n  // \r\n  addRenderParams(callback, source) {\r\n    if (callback) {\r\n      const index = this.renderCallbackList.findIndex(fn => {\r\n        return fn === callback\r\n      })\r\n      if (index === -1) {\r\n        this.renderCallbackList.push(callback)\r\n      }\r\n    }\r\n    if (source) {\r\n      const index = this.renderSourceList.findIndex(s => {\r\n        return s === source\r\n      })\r\n      if (index === -1) {\r\n        this.renderSourceList.push(source)\r\n      }\r\n    }\r\n  }\r\n\r\n  // \r\n  checkHasRenderSource(val) {\r\n    val = Array.isArray(val) ? val : [val]\r\n    for (let i = 0; i < this.renderSourceList.length; i++) {\r\n      if (val.includes(this.renderSourceList[i])) {\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  // \r\n  onRenderEnd() {\r\n    this.renderCallbackList.forEach(fn => {\r\n      fn()\r\n    })\r\n    this.isRendering = false\r\n    this.reRender = false\r\n    this.renderCallbackList = []\r\n    this.renderSourceList = []\r\n    this.mindMap.emit('node_tree_render_end')\r\n  }\r\n\r\n  // \r\n  render(callback, source) {\r\n    this.addRenderParams(callback, source)\r\n    clearTimeout(this.renderTimer)\r\n    this.renderTimer = setTimeout(() => {\r\n      this._render()\r\n    }, 0)\r\n  }\r\n\r\n  // \r\n  _render() {\r\n    // \r\n    if (this.checkHasRenderSource(CONSTANTS.CHANGE_THEME)) {\r\n      this.resetUnExpandNodeStyle()\r\n    }\r\n    // \r\n    if (this.isRendering) {\r\n      // \r\n      this.hasWaitRendering = true\r\n      return\r\n    }\r\n    this.isRendering = true\r\n    // \r\n    this.lastNodeCache = this.nodeCache\r\n    this.nodeCache = {}\r\n    // \r\n    if (this.reRender) {\r\n      this.clearActiveNodeList()\r\n    }\r\n    // \r\n    if (!this.renderTree) {\r\n      this.onRenderEnd()\r\n      return\r\n    }\r\n    this.mindMap.emit('node_tree_render_start')\r\n    // \r\n    this.root = null\r\n    this.layout.doLayout(root => {\r\n      // \r\n      Object.keys(this.lastNodeCache).forEach(uid => {\r\n        if (!this.nodeCache[uid]) {\r\n          // \r\n          this.removeNodeFromActiveList(this.lastNodeCache[uid])\r\n          this.emitNodeActiveEvent()\r\n          // \r\n          this.lastNodeCache[uid].destroy()\r\n        }\r\n      })\r\n      // \r\n      this.root = root\r\n      // \r\n      this.root.render(() => {\r\n        this.isRendering = false\r\n        if (this.hasWaitRendering) {\r\n          this.hasWaitRendering = false\r\n          this.render()\r\n          return\r\n        }\r\n        this.onRenderEnd()\r\n      })\r\n    })\r\n    this.emitNodeActiveEvent()\r\n  }\r\n\r\n  // \r\n  resetUnExpandNodeStyle() {\r\n    if (!this.renderTree) return\r\n    walk(this.renderTree, null, node => {\r\n      if (!node.data.expand) {\r\n        walk(node, null, node2 => {\r\n          // \r\n          node2.data['needUpdate'] = true\r\n        })\r\n        return true\r\n      }\r\n    })\r\n  }\r\n\r\n  //  \r\n  clearActiveNode() {\r\n    if (this.activeNodeList.length <= 0) {\r\n      return\r\n    }\r\n    this.clearActiveNodeList()\r\n    this.emitNodeActiveEvent(null, [])\r\n  }\r\n\r\n  //  \r\n  clearActiveNodeList() {\r\n    this.activeNodeList.forEach(item => {\r\n      this.mindMap.execCommand('SET_NODE_ACTIVE', item, false)\r\n    })\r\n    this.activeNodeList = []\r\n  }\r\n\r\n  // \r\n  addNodeToActiveList(node, notEmitBeforeNodeActiveEvent = false) {\r\n    if (\r\n      this.mindMap.opt.onlyOneEnableActiveNodeOnCooperate &&\r\n      node.userList.length > 0\r\n    )\r\n      return\r\n    const index = this.findActiveNodeIndex(node)\r\n    if (index === -1) {\r\n      if (!notEmitBeforeNodeActiveEvent) {\r\n        this.mindMap.emit('before_node_active', node, this.activeNodeList)\r\n      }\r\n      this.mindMap.execCommand('SET_NODE_ACTIVE', node, true)\r\n      this.activeNodeList.push(node)\r\n    }\r\n  }\r\n\r\n  // \r\n  removeNodeFromActiveList(node) {\r\n    let index = this.findActiveNodeIndex(node)\r\n    if (index === -1) {\r\n      return\r\n    }\r\n    this.mindMap.execCommand('SET_NODE_ACTIVE', node, false)\r\n    this.activeNodeList.splice(index, 1)\r\n  }\r\n\r\n  // active()\r\n  activeMultiNode(nodeList = []) {\r\n    nodeList.forEach(node => {\r\n      // \r\n      this.mindMap.emit('before_node_active', node, this.activeNodeList)\r\n      // \r\n      this.addNodeToActiveList(node, true)\r\n      // \r\n      this.emitNodeActiveEvent(node)\r\n    })\r\n  }\r\n\r\n  // \r\n  cancelActiveMultiNode(nodeList = []) {\r\n    nodeList.forEach(node => {\r\n      this.removeNodeFromActiveList(node)\r\n      this.emitNodeActiveEvent(null)\r\n    })\r\n  }\r\n\r\n  //  \r\n  findActiveNodeIndex(node) {\r\n    return getNodeIndexInNodeList(node, this.activeNodeList)\r\n  }\r\n\r\n  //  \r\n  selectAll() {\r\n    if (this.mindMap.opt.readonly) return\r\n    walk(\r\n      this.root,\r\n      null,\r\n      node => {\r\n        if (!node.getData('isActive')) {\r\n          this.addNodeToActiveList(node)\r\n        }\r\n        // \r\n        if (node._generalizationList && node._generalizationList.length > 0) {\r\n          node._generalizationList.forEach(item => {\r\n            const gNode = item.generalizationNode\r\n            if (!gNode.getData('isActive')) {\r\n              this.addNodeToActiveList(gNode)\r\n            }\r\n          })\r\n        }\r\n      },\r\n      null,\r\n      true,\r\n      0,\r\n      0\r\n    )\r\n    this.emitNodeActiveEvent()\r\n  }\r\n\r\n  //  \r\n  back(step) {\r\n    this.backForward('back', step)\r\n  }\r\n\r\n  //  \r\n  forward(step) {\r\n    this.backForward('forward', step)\r\n  }\r\n\r\n  // \r\n  backForward(type, step) {\r\n    this.mindMap.execCommand('CLEAR_ACTIVE_NODE')\r\n    const data = this.mindMap.command[type](step)\r\n    if (data) {\r\n      this.renderTree = data\r\n      this.mindMap.render()\r\n    }\r\n    this.mindMap.emit('data_change', data)\r\n  }\r\n\r\n  // \r\n  getNewNodeBehavior(openEdit = false, handleMultiNodes = false) {\r\n    const { createNewNodeBehavior } = this.mindMap.opt\r\n    let focusNewNode = false // \r\n    let inserting = false // \r\n    switch (createNewNodeBehavior) {\r\n      // \r\n      case CONSTANTS.CREATE_NEW_NODE_BEHAVIOR.DEFAULT:\r\n        focusNewNode = handleMultiNodes || !openEdit\r\n        inserting = handleMultiNodes ? false : openEdit // \r\n        break\r\n      // \r\n      case CONSTANTS.CREATE_NEW_NODE_BEHAVIOR.NOT_ACTIVE:\r\n        focusNewNode = false\r\n        inserting = false\r\n        break\r\n      // \r\n      case CONSTANTS.CREATE_NEW_NODE_BEHAVIOR.ACTIVE_ONLY:\r\n        focusNewNode = true\r\n        inserting = false\r\n        break\r\n      default:\r\n        break\r\n    }\r\n    return {\r\n      focusNewNode,\r\n      inserting\r\n    }\r\n  }\r\n\r\n  //  \r\n  insertNode(\r\n    openEdit = true,\r\n    appointNodes = [],\r\n    appointData = null,\r\n    appointChildren = []\r\n  ) {\r\n    appointNodes = formatDataToArray(appointNodes)\r\n    if (this.activeNodeList.length <= 0 && appointNodes.length <= 0) {\r\n      return\r\n    }\r\n    this.textEdit.hideEditTextBox()\r\n    const {\r\n      defaultInsertSecondLevelNodeText,\r\n      defaultInsertBelowSecondLevelNodeText\r\n    } = this.mindMap.opt\r\n    const list = appointNodes.length > 0 ? appointNodes : this.activeNodeList\r\n    const handleMultiNodes = list.length > 1\r\n    const isRichText = this.hasRichTextPlugin()\r\n    const { focusNewNode, inserting } = this.getNewNodeBehavior(\r\n      openEdit,\r\n      handleMultiNodes\r\n    )\r\n    const params = {\r\n      expand: true,\r\n      richText: isRichText,\r\n      isActive: focusNewNode // \r\n    }\r\n    if (isRichText) params.resetRichText = true\r\n    // \r\n    appointChildren = addDataToAppointNodes(appointChildren, params)\r\n    const alreadyIsRichText = appointData && appointData.richText\r\n    let createNewId = false\r\n    list.forEach(node => {\r\n      if (node.isGeneralization || node.isRoot) {\r\n        return\r\n      }\r\n      appointChildren = simpleDeepClone(appointChildren)\r\n      const parent = node.parent\r\n      const isOneLayer = node.layerIndex === 1\r\n      // \r\n      const text = isOneLayer\r\n        ? defaultInsertSecondLevelNodeText\r\n        : defaultInsertBelowSecondLevelNodeText\r\n      // \r\n      const index = getNodeDataIndex(node)\r\n      // \r\n      if (alreadyIsRichText && params.resetRichText) {\r\n        delete params.resetRichText\r\n      }\r\n      const newNodeData = {\r\n        inserting,\r\n        data: {\r\n          text: text,\r\n          ...params,\r\n          uid: createUid(),\r\n          ...(appointData || {})\r\n        },\r\n        children: [...createUidForAppointNodes(appointChildren, createNewId)]\r\n      }\r\n      createNewId = true\r\n      parent.nodeData.children.splice(index + 1, 0, newNodeData)\r\n    })\r\n    // \r\n    if (focusNewNode) {\r\n      this.clearActiveNodeList()\r\n    }\r\n    this.mindMap.render()\r\n  }\r\n\r\n  // \r\n  insertMultiNode(appointNodes, nodeList) {\r\n    if (!nodeList || nodeList.length <= 0) return\r\n    appointNodes = formatDataToArray(appointNodes)\r\n    if (this.activeNodeList.length <= 0 && appointNodes.length <= 0) {\r\n      return\r\n    }\r\n    this.textEdit.hideEditTextBox()\r\n    const list = appointNodes.length > 0 ? appointNodes : this.activeNodeList\r\n    const isRichText = this.hasRichTextPlugin()\r\n    const { focusNewNode } = this.getNewNodeBehavior(false, true)\r\n    const params = {\r\n      expand: true,\r\n      richText: isRichText,\r\n      isActive: focusNewNode\r\n    }\r\n    if (isRichText) params.resetRichText = true\r\n    nodeList = addDataToAppointNodes(nodeList, params)\r\n    let createNewId = false\r\n    list.forEach(node => {\r\n      if (node.isGeneralization || node.isRoot) {\r\n        return\r\n      }\r\n      nodeList = simpleDeepClone(nodeList)\r\n      const parent = node.parent\r\n      // \r\n      const index = getNodeDataIndex(node)\r\n      const newNodeList = createUidForAppointNodes(nodeList, createNewId)\r\n      createNewId = true\r\n      parent.nodeData.children.splice(index + 1, 0, ...newNodeList)\r\n    })\r\n    if (focusNewNode) {\r\n      this.clearActiveNodeList()\r\n    }\r\n    this.mindMap.render()\r\n  }\r\n\r\n  //  \r\n  insertChildNode(\r\n    openEdit = true,\r\n    appointNodes = [],\r\n    appointData = null,\r\n    appointChildren = []\r\n  ) {\r\n    appointNodes = formatDataToArray(appointNodes)\r\n    if (this.activeNodeList.length <= 0 && appointNodes.length <= 0) {\r\n      return\r\n    }\r\n    this.textEdit.hideEditTextBox()\r\n    const {\r\n      defaultInsertSecondLevelNodeText,\r\n      defaultInsertBelowSecondLevelNodeText\r\n    } = this.mindMap.opt\r\n    const list = appointNodes.length > 0 ? appointNodes : this.activeNodeList\r\n    const handleMultiNodes = list.length > 1\r\n    const isRichText = this.hasRichTextPlugin()\r\n    const { focusNewNode, inserting } = this.getNewNodeBehavior(\r\n      openEdit,\r\n      handleMultiNodes\r\n    )\r\n    const params = {\r\n      expand: true,\r\n      richText: isRichText,\r\n      isActive: focusNewNode\r\n    }\r\n    if (isRichText) params.resetRichText = true\r\n    // \r\n    appointChildren = addDataToAppointNodes(appointChildren, params)\r\n    const alreadyIsRichText = appointData && appointData.richText\r\n    let createNewId = false\r\n    list.forEach(node => {\r\n      if (node.isGeneralization) {\r\n        return\r\n      }\r\n      appointChildren = simpleDeepClone(appointChildren)\r\n      if (!node.nodeData.children) {\r\n        node.nodeData.children = []\r\n      }\r\n      const text = node.isRoot\r\n        ? defaultInsertSecondLevelNodeText\r\n        : defaultInsertBelowSecondLevelNodeText\r\n      // \r\n      if (alreadyIsRichText && params.resetRichText) {\r\n        delete params.resetRichText\r\n      }\r\n      const newNode = {\r\n        inserting,\r\n        data: {\r\n          text: text,\r\n          uid: createUid(),\r\n          ...params,\r\n          ...(appointData || {})\r\n        },\r\n        children: [...createUidForAppointNodes(appointChildren, createNewId)]\r\n      }\r\n      createNewId = true\r\n      node.nodeData.children.push(newNode)\r\n      // \r\n      node.setData({\r\n        expand: true\r\n      })\r\n    })\r\n    // \r\n    if (focusNewNode) {\r\n      this.clearActiveNodeList()\r\n    }\r\n    this.mindMap.render()\r\n  }\r\n\r\n  // \r\n  insertMultiChildNode(appointNodes, childList) {\r\n    if (!childList || childList.length <= 0) return\r\n    appointNodes = formatDataToArray(appointNodes)\r\n    if (this.activeNodeList.length <= 0 && appointNodes.length <= 0) {\r\n      return\r\n    }\r\n    this.textEdit.hideEditTextBox()\r\n    const list = appointNodes.length > 0 ? appointNodes : this.activeNodeList\r\n    const isRichText = this.hasRichTextPlugin()\r\n    const { focusNewNode } = this.getNewNodeBehavior(false, true)\r\n    const params = {\r\n      expand: true,\r\n      richText: isRichText,\r\n      isActive: focusNewNode\r\n    }\r\n    if (isRichText) params.resetRichText = true\r\n    childList = addDataToAppointNodes(childList, params)\r\n    let createNewId = false\r\n    list.forEach(node => {\r\n      if (node.isGeneralization) {\r\n        return\r\n      }\r\n      childList = simpleDeepClone(childList)\r\n      if (!node.nodeData.children) {\r\n        node.nodeData.children = []\r\n      }\r\n      childList = createUidForAppointNodes(childList, createNewId)\r\n      // uidid\r\n      createNewId = true\r\n      node.nodeData.children.push(...childList)\r\n      // \r\n      node.setData({\r\n        expand: true\r\n      })\r\n    })\r\n    if (focusNewNode) {\r\n      this.clearActiveNodeList()\r\n    }\r\n    this.mindMap.render()\r\n  }\r\n\r\n  // \r\n  insertParentNode(openEdit = true, appointNodes, appointData) {\r\n    appointNodes = formatDataToArray(appointNodes)\r\n    if (this.activeNodeList.length <= 0 && appointNodes.length <= 0) {\r\n      return\r\n    }\r\n    this.textEdit.hideEditTextBox()\r\n    const {\r\n      defaultInsertSecondLevelNodeText,\r\n      defaultInsertBelowSecondLevelNodeText\r\n    } = this.mindMap.opt\r\n    const list = appointNodes.length > 0 ? appointNodes : this.activeNodeList\r\n    const handleMultiNodes = list.length > 1\r\n    const isRichText = this.hasRichTextPlugin()\r\n    const { focusNewNode, inserting } = this.getNewNodeBehavior(\r\n      openEdit,\r\n      handleMultiNodes\r\n    )\r\n    const params = {\r\n      expand: true,\r\n      richText: isRichText,\r\n      isActive: focusNewNode\r\n    }\r\n    if (isRichText) params.resetRichText = true\r\n    const alreadyIsRichText = appointData && appointData.richText\r\n    list.forEach(node => {\r\n      if (node.isGeneralization || node.isRoot) {\r\n        return\r\n      }\r\n      const text =\r\n        node.layerIndex === 1\r\n          ? defaultInsertSecondLevelNodeText\r\n          : defaultInsertBelowSecondLevelNodeText\r\n      // \r\n      if (alreadyIsRichText && params.resetRichText) {\r\n        delete params.resetRichText\r\n      }\r\n      const newNode = {\r\n        inserting,\r\n        data: {\r\n          text: text,\r\n          uid: createUid(),\r\n          ...params,\r\n          ...(appointData || {})\r\n        },\r\n        children: [node.nodeData]\r\n      }\r\n      const parent = node.parent\r\n      // \r\n      const index = getNodeDataIndex(node)\r\n      parent.nodeData.children.splice(index, 1, newNode)\r\n    })\r\n    // \r\n    if (focusNewNode) {\r\n      this.clearActiveNodeList()\r\n    }\r\n    this.mindMap.render()\r\n  }\r\n\r\n  //  \r\n  upNode(appointNode) {\r\n    if (this.activeNodeList.length <= 0 && !appointNode) {\r\n      return\r\n    }\r\n    const list = appointNode ? [appointNode] : this.activeNodeList\r\n    const node = list[0]\r\n    if (node.isRoot) {\r\n      return\r\n    }\r\n    let parent = node.parent\r\n    let childList = parent.children\r\n    let index = getNodeIndexInNodeList(node, childList)\r\n    if (index === -1 || index === 0) {\r\n      return\r\n    }\r\n    let insertIndex = index - 1\r\n    // \r\n    childList.splice(index, 1)\r\n    childList.splice(insertIndex, 0, node)\r\n    // \r\n    parent.nodeData.children.splice(index, 1)\r\n    parent.nodeData.children.splice(insertIndex, 0, node.nodeData)\r\n    this.mindMap.render()\r\n  }\r\n\r\n  //  \r\n  downNode(appointNode) {\r\n    if (this.activeNodeList.length <= 0 && !appointNode) {\r\n      return\r\n    }\r\n    const list = appointNode ? [appointNode] : this.activeNodeList\r\n    const node = list[0]\r\n    if (node.isRoot) {\r\n      return\r\n    }\r\n    let parent = node.parent\r\n    let childList = parent.children\r\n    let index = getNodeIndexInNodeList(node, childList)\r\n    if (index === -1 || index === childList.length - 1) {\r\n      return\r\n    }\r\n    let insertIndex = index + 1\r\n    // \r\n    childList.splice(index, 1)\r\n    childList.splice(insertIndex, 0, node)\r\n    // \r\n    parent.nodeData.children.splice(index, 1)\r\n    parent.nodeData.children.splice(insertIndex, 0, node.nodeData)\r\n    this.mindMap.render()\r\n  }\r\n\r\n  // \r\n  moveUpOneLevel(node) {\r\n    node = node || this.activeNodeList[0]\r\n    if (!node || node.isRoot || node.layerIndex <= 1) {\r\n      return\r\n    }\r\n    const parent = node.parent\r\n    const grandpa = parent.parent\r\n    const index = getNodeIndexInNodeList(node, parent.children)\r\n    const parentIndex = getNodeIndexInNodeList(parent, grandpa.children)\r\n    // \r\n    parent.nodeData.children.splice(index, 1)\r\n    grandpa.nodeData.children.splice(parentIndex + 1, 0, node.nodeData)\r\n    this.mindMap.render()\r\n  }\r\n\r\n  // \r\n  _handleRemoveCustomStyles(nodeData) {\r\n    let hasCustomStyles = false\r\n    Object.keys(nodeData).forEach(key => {\r\n      if (checkIsNodeStyleDataKey(key)) {\r\n        hasCustomStyles = true\r\n        delete nodeData[key]\r\n      }\r\n    })\r\n    // \r\n    if (this.hasRichTextPlugin()) {\r\n      hasCustomStyles = true\r\n      nodeData.resetRichText = true\r\n    }\r\n    return hasCustomStyles\r\n  }\r\n\r\n  // \r\n  removeCustomStyles(node) {\r\n    node = node || this.activeNodeList[0]\r\n    if (!node) {\r\n      return\r\n    }\r\n    const hasCustomStyles = this._handleRemoveCustomStyles(node.getData())\r\n    if (hasCustomStyles) {\r\n      this.reRenderNodeCheckChange(node)\r\n    }\r\n  }\r\n\r\n  // \r\n  removeAllNodeCustomStyles(appointNodes) {\r\n    appointNodes = formatDataToArray(appointNodes)\r\n    let hasCustomStyles = false\r\n    // \r\n    if (appointNodes.length > 0) {\r\n      appointNodes.forEach(node => {\r\n        const _hasCustomStyles = this._handleRemoveCustomStyles(node.getData())\r\n        if (_hasCustomStyles) hasCustomStyles = true\r\n      })\r\n    } else {\r\n      // \r\n      if (!this.renderTree) return\r\n      walk(this.renderTree, null, node => {\r\n        const _hasCustomStyles = this._handleRemoveCustomStyles(node.data)\r\n        if (_hasCustomStyles) hasCustomStyles = true\r\n        // \r\n        const generalizationList = formatGetNodeGeneralization(node.data)\r\n        if (generalizationList.length > 0) {\r\n          generalizationList.forEach(generalizationData => {\r\n            const _hasCustomStyles =\r\n              this._handleRemoveCustomStyles(generalizationData)\r\n            if (_hasCustomStyles) hasCustomStyles = true\r\n          })\r\n        }\r\n      })\r\n    }\r\n    if (hasCustomStyles) {\r\n      this.mindMap.reRender()\r\n    }\r\n  }\r\n\r\n  // \r\n  copy() {\r\n    this.beingCopyData = this.copyNode()\r\n    if (!this.beingCopyData) return\r\n    if (!this.mindMap.opt.disabledClipboard) {\r\n      setDataToClipboard(createSmmFormatData(this.beingCopyData))\r\n    }\r\n  }\r\n\r\n  // \r\n  cut() {\r\n    this.mindMap.execCommand('CUT_NODE', copyData => {\r\n      this.beingCopyData = copyData\r\n      if (!this.mindMap.opt.disabledClipboard) {\r\n        setDataToClipboard(createSmmFormatData(copyData))\r\n      }\r\n    })\r\n  }\r\n\r\n  // https\r\n  handlePaste(event) {\r\n    const { disabledClipboard } = this.mindMap.opt\r\n    if (disabledClipboard) return\r\n    const clipboardData =\r\n      event.clipboardData || event.originalEvent.clipboardData\r\n    const items = clipboardData.items\r\n    let img = null\r\n    let text = ''\r\n    Array.from(items).forEach(item => {\r\n      if (item.type.indexOf('image') > -1) {\r\n        img = item.getAsFile()\r\n      }\r\n      if (item.type.indexOf('text') > -1) {\r\n        text = clipboardData.getData('text')\r\n      }\r\n    })\r\n    this.paste()\r\n  }\r\n\r\n  // \r\n  async paste() {\r\n    const {\r\n      errorHandler,\r\n      handleIsSplitByWrapOnPasteCreateNewNode,\r\n      handleNodePasteImg,\r\n      disabledClipboard,\r\n      onlyPasteTextWhenHasImgAndText\r\n    } = this.mindMap.opt\r\n    // \r\n    if (!disabledClipboard && checkClipboardReadEnable()) {\r\n      try {\r\n        const res = await getDataFromClipboard()\r\n        let text = res.text || ''\r\n        let img = res.img || null\r\n        // \r\n        if (text) {\r\n          // simple-mind-map\r\n          let smmData = null\r\n          let useDefault = true\r\n          // \r\n          if (this.mindMap.opt.customHandleClipboardText) {\r\n            try {\r\n              const res = await this.mindMap.opt.customHandleClipboardText(text)\r\n              if (!isUndef(res)) {\r\n                useDefault = false\r\n                const checkRes = checkSmmFormatData(res)\r\n                if (checkRes.isSmm) {\r\n                  smmData = checkRes.data\r\n                } else {\r\n                  text = checkRes.data\r\n                }\r\n              }\r\n            } catch (error) {\r\n              errorHandler(\r\n                ERROR_TYPES.CUSTOM_HANDLE_CLIPBOARD_TEXT_ERROR,\r\n                error\r\n              )\r\n            }\r\n          }\r\n          // \r\n          if (useDefault) {\r\n            const checkRes = checkSmmFormatData(text)\r\n            if (checkRes.isSmm) {\r\n              smmData = checkRes.data\r\n            } else {\r\n              text = checkRes.data\r\n            }\r\n          }\r\n          if (smmData) {\r\n            this.mindMap.execCommand(\r\n              'INSERT_MULTI_CHILD_NODE',\r\n              [],\r\n              Array.isArray(smmData) ? smmData : [smmData]\r\n            )\r\n          } else {\r\n            // \r\n            if (this.hasRichTextPlugin()) {\r\n              text = htmlEscape(text)\r\n            }\r\n            const textArr = text\r\n              .split(new RegExp('\\r?\\n|(?<!\\n)\\r', 'g'))\r\n              .filter(item => {\r\n                return !!item\r\n              })\r\n            // \r\n            if (textArr.length > 1 && handleIsSplitByWrapOnPasteCreateNewNode) {\r\n              handleIsSplitByWrapOnPasteCreateNewNode()\r\n                .then(() => {\r\n                  this.mindMap.execCommand(\r\n                    'INSERT_MULTI_CHILD_NODE',\r\n                    [],\r\n                    textArr.map(item => {\r\n                      return {\r\n                        data: {\r\n                          text: item\r\n                        },\r\n                        children: []\r\n                      }\r\n                    })\r\n                  )\r\n                })\r\n                .catch(() => {\r\n                  this.mindMap.execCommand('INSERT_CHILD_NODE', false, [], {\r\n                    text\r\n                  })\r\n                })\r\n            } else {\r\n              this.mindMap.execCommand('INSERT_CHILD_NODE', false, [], {\r\n                text\r\n              })\r\n            }\r\n          }\r\n        }\r\n        // \r\n        if (img && (!text || !onlyPasteTextWhenHasImgAndText)) {\r\n          try {\r\n            let imgData = null\r\n            // \r\n            if (\r\n              handleNodePasteImg &&\r\n              typeof handleNodePasteImg === 'function'\r\n            ) {\r\n              imgData = await handleNodePasteImg(img)\r\n            } else {\r\n              imgData = await loadImage(img)\r\n            }\r\n            if (this.activeNodeList.length > 0) {\r\n              this.activeNodeList.forEach(node => {\r\n                this.mindMap.execCommand('SET_NODE_IMAGE', node, {\r\n                  url: imgData.url,\r\n                  title: '',\r\n                  width: imgData.size.width,\r\n                  height: imgData.size.height\r\n                })\r\n              })\r\n            }\r\n          } catch (error) {\r\n            errorHandler(ERROR_TYPES.LOAD_CLIPBOARD_IMAGE_ERROR, error)\r\n          }\r\n        }\r\n      } catch (error) {\r\n        errorHandler(ERROR_TYPES.READ_CLIPBOARD_ERROR, error)\r\n      }\r\n    } else {\r\n      // \r\n      // \r\n      if (this.beingCopyData) {\r\n        this.mindMap.execCommand('PASTE_NODE', this.beingCopyData)\r\n      }\r\n    }\r\n  }\r\n\r\n  //  \r\n  insertBefore(node, exist) {\r\n    this.insertTo(node, exist, 'before')\r\n  }\r\n\r\n  //  \r\n  insertAfter(node, exist) {\r\n    this.insertTo(node, exist, 'after')\r\n  }\r\n\r\n  // \r\n  insertTo(node, exist, dir = 'before') {\r\n    let nodeList = formatDataToArray(node)\r\n    nodeList = nodeList.filter(item => {\r\n      return !item.isRoot\r\n    })\r\n    if (dir === 'after') {\r\n      nodeList.reverse()\r\n    }\r\n    nodeList.forEach(item => {\r\n      // \r\n      let nodeParent = item.parent\r\n      let nodeBorthers = nodeParent.children\r\n      let nodeIndex = getNodeIndexInNodeList(item, nodeBorthers)\r\n      if (nodeIndex === -1) {\r\n        return\r\n      }\r\n      nodeBorthers.splice(nodeIndex, 1)\r\n      nodeParent.nodeData.children.splice(nodeIndex, 1)\r\n\r\n      // \r\n      let existParent = exist.parent\r\n      let existBorthers = existParent.children\r\n      let existIndex = getNodeIndexInNodeList(exist, existBorthers)\r\n      if (existIndex === -1) {\r\n        return\r\n      }\r\n      if (dir === 'after') {\r\n        existIndex++\r\n      }\r\n      existBorthers.splice(existIndex, 0, item)\r\n      existParent.nodeData.children.splice(existIndex, 0, item.nodeData)\r\n    })\r\n    this.mindMap.render()\r\n  }\r\n\r\n  //  \r\n  removeNode(appointNodes = []) {\r\n    appointNodes = formatDataToArray(appointNodes)\r\n    if (this.activeNodeList.length <= 0 && appointNodes.length <= 0) {\r\n      return\r\n    }\r\n    // \r\n    let needActiveNode = null\r\n    let isAppointNodes = appointNodes.length > 0\r\n    let list = isAppointNodes ? appointNodes : this.activeNodeList\r\n    let root = list.find(node => {\r\n      return node.isRoot\r\n    })\r\n    if (root) {\r\n      this.clearActiveNodeList()\r\n      root.children = []\r\n      root.nodeData.children = []\r\n    } else {\r\n      // \r\n      needActiveNode = this.getNextActiveNode(list)\r\n      for (let i = 0; i < list.length; i++) {\r\n        const node = list[i]\r\n        const currentEditNode = this.textEdit.getCurrentEditNode()\r\n        if (\r\n          currentEditNode &&\r\n          currentEditNode.getData('uid') === node.getData('uid')\r\n        ) {\r\n          // \r\n          this.textEdit.hideEditTextBox()\r\n        }\r\n        if (isAppointNodes) list.splice(i, 1)\r\n        if (node.isGeneralization) {\r\n          this.deleteNodeGeneralization(node)\r\n          this.removeNodeFromActiveList(node)\r\n          i--\r\n        } else {\r\n          this.removeNodeFromActiveList(node)\r\n          removeFromParentNodeData(node)\r\n          i--\r\n        }\r\n      }\r\n    }\r\n    this.activeNodeList = []\r\n    // \r\n    if (needActiveNode) {\r\n      this.addNodeToActiveList(needActiveNode)\r\n    }\r\n    this.emitNodeActiveEvent()\r\n    this.mindMap.render()\r\n  }\r\n\r\n  // \r\n  deleteNodeGeneralization(node) {\r\n    const targetNode = node.generalizationBelongNode\r\n    const index = targetNode.getGeneralizationNodeIndex(node)\r\n    let generalization = targetNode.getData('generalization')\r\n    if (Array.isArray(generalization)) {\r\n      generalization.splice(index, 1)\r\n    } else {\r\n      generalization = null\r\n    }\r\n    // \r\n    this.mindMap.execCommand('SET_NODE_DATA', targetNode, {\r\n      generalization\r\n    })\r\n    this.closeHighlightNode()\r\n  }\r\n\r\n  // \r\n  removeCurrentNode(appointNodes = []) {\r\n    appointNodes = formatDataToArray(appointNodes)\r\n    if (this.activeNodeList.length <= 0 && appointNodes.length <= 0) {\r\n      return\r\n    }\r\n    let isAppointNodes = appointNodes.length > 0\r\n    let list = isAppointNodes ? appointNodes : this.activeNodeList\r\n    list = list.filter(node => {\r\n      return !node.isRoot\r\n    })\r\n    // \r\n    let needActiveNode = this.getNextActiveNode(list)\r\n    for (let i = 0; i < list.length; i++) {\r\n      let node = list[i]\r\n      if (node.isGeneralization) {\r\n        // \r\n        this.deleteNodeGeneralization(node)\r\n      } else {\r\n        const parent = node.parent\r\n        const index = getNodeDataIndex(node)\r\n        parent.nodeData.children.splice(\r\n          index,\r\n          1,\r\n          ...(node.nodeData.children || [])\r\n        )\r\n      }\r\n    }\r\n    this.activeNodeList = []\r\n    // \r\n    if (needActiveNode) {\r\n      this.addNodeToActiveList(needActiveNode)\r\n    }\r\n    this.emitNodeActiveEvent()\r\n    this.mindMap.render()\r\n  }\r\n\r\n  // \r\n  getNextActiveNode(deleteList) {\r\n    // \r\n    if (deleteList.length !== 1) return null\r\n    // \r\n    if (this.findActiveNodeIndex(deleteList[0]) === -1) return null\r\n    let needActiveNode = null\r\n    if (\r\n      this.activeNodeList.length === 1 &&\r\n      !this.activeNodeList[0].isGeneralization &&\r\n      this.mindMap.opt.deleteNodeActive\r\n    ) {\r\n      const node = this.activeNodeList[0]\r\n      const broList = node.parent.children\r\n      const nodeIndex = getNodeIndexInNodeList(node, broList)\r\n      // \r\n      if (nodeIndex < broList.length - 1) {\r\n        needActiveNode = broList[nodeIndex + 1]\r\n      } else {\r\n        // \r\n        if (nodeIndex > 0) {\r\n          needActiveNode = broList[nodeIndex - 1]\r\n        } else {\r\n          // \r\n          needActiveNode = node.parent\r\n        }\r\n      }\r\n    }\r\n    return needActiveNode\r\n  }\r\n\r\n  //  \r\n  copyNode() {\r\n    if (this.activeNodeList.length <= 0) {\r\n      return null\r\n    }\r\n    let nodeList = getTopAncestorsFomNodeList(this.activeNodeList)\r\n    nodeList = sortNodeList(nodeList)\r\n    return nodeList.map(node => {\r\n      return copyNodeTree({}, node, true)\r\n    })\r\n  }\r\n\r\n  //  \r\n  cutNode(callback) {\r\n    if (this.activeNodeList.length <= 0) {\r\n      return\r\n    }\r\n    // \r\n    let nodeList = getTopAncestorsFomNodeList(this.activeNodeList).filter(\r\n      node => {\r\n        return !node.isRoot\r\n      }\r\n    )\r\n    nodeList = sortNodeList(nodeList)\r\n    // \r\n    const copyData = nodeList.map(node => {\r\n      return copyNodeTree({}, node, true)\r\n    })\r\n    // \r\n    nodeList.forEach(node => {\r\n      removeFromParentNodeData(node)\r\n    })\r\n    // \r\n    this.clearActiveNodeList()\r\n    this.mindMap.render()\r\n    if (callback && typeof callback === 'function') {\r\n      callback(copyData)\r\n    }\r\n  }\r\n\r\n  //  \r\n  moveNodeTo(node, toNode) {\r\n    let nodeList = formatDataToArray(node)\r\n    nodeList = nodeList.filter(item => {\r\n      return !item.isRoot\r\n    })\r\n    nodeList.forEach(item => {\r\n      this.removeNodeFromActiveList(item)\r\n      removeFromParentNodeData(item)\r\n      toNode.setData({\r\n        expand: true\r\n      })\r\n      toNode.nodeData.children.push(item.nodeData)\r\n    })\r\n    this.emitNodeActiveEvent()\r\n    this.mindMap.render()\r\n  }\r\n\r\n  //   \r\n  pasteNode(data) {\r\n    data = formatDataToArray(data)\r\n    this.mindMap.execCommand('INSERT_MULTI_CHILD_NODE', [], data)\r\n  }\r\n\r\n  //  \r\n  setNodeStyle(node, prop, value) {\r\n    const data = {\r\n      [prop]: value\r\n    }\r\n    this.setNodeDataRender(node, data)\r\n    // \r\n    if (lineStyleProps.includes(prop)) {\r\n      (node.parent || node).renderLine(true)\r\n    }\r\n  }\r\n\r\n  //  \r\n  setNodeStyles(node, style) {\r\n    const data = { ...style }\r\n    this.setNodeDataRender(node, data)\r\n    // \r\n    let props = Object.keys(style)\r\n    let hasLineStyleProps = false\r\n    props.forEach(key => {\r\n      if (lineStyleProps.includes(key)) {\r\n        hasLineStyleProps = true\r\n      }\r\n    })\r\n    if (hasLineStyleProps) {\r\n      (node.parent || node).renderLine(true)\r\n    }\r\n  }\r\n\r\n  //  \r\n  setNodeActive(node, active) {\r\n    this.mindMap.execCommand('SET_NODE_DATA', node, {\r\n      isActive: active\r\n    })\r\n    node.updateNodeByActive(active)\r\n  }\r\n\r\n  //  \r\n  setNodeExpand(node, expand) {\r\n    this.mindMap.execCommand('SET_NODE_DATA', node, {\r\n      expand\r\n    })\r\n    this.mindMap.render()\r\n  }\r\n\r\n  //  \r\n  expandAllNode(uid = '') {\r\n    if (!this.renderTree) return\r\n\r\n    const _walk = (node, enableExpand) => {\r\n      // \r\n      if (!enableExpand && node.data.uid === uid) {\r\n        enableExpand = true\r\n      }\r\n      if (enableExpand && !node.data.expand) {\r\n        node.data.expand = true\r\n      }\r\n      if (node.children && node.children.length > 0) {\r\n        node.children.forEach(child => {\r\n          _walk(child, enableExpand)\r\n        })\r\n      }\r\n    }\r\n    _walk(this.renderTree, !uid)\r\n\r\n    this.mindMap.render()\r\n  }\r\n\r\n  //  \r\n  unexpandAllNode(isSetRootNodeCenter = true, uid = '') {\r\n    if (!this.renderTree) return\r\n\r\n    const _walk = (node, isRoot, enableUnExpand) => {\r\n      // \r\n      if (!enableUnExpand && node.data.uid === uid) {\r\n        enableUnExpand = true\r\n      }\r\n      if (\r\n        enableUnExpand &&\r\n        !isRoot &&\r\n        node.children &&\r\n        node.children.length > 0\r\n      ) {\r\n        node.data.expand = false\r\n      }\r\n      if (node.children && node.children.length > 0) {\r\n        node.children.forEach(child => {\r\n          _walk(child, false, enableUnExpand)\r\n        })\r\n      }\r\n    }\r\n    _walk(this.renderTree, true, !uid)\r\n\r\n    this.mindMap.render(() => {\r\n      if (isSetRootNodeCenter) {\r\n        this.setRootNodeCenter()\r\n      }\r\n    })\r\n  }\r\n\r\n  //  \r\n  expandToLevel(level) {\r\n    if (!this.renderTree) return\r\n    walk(\r\n      this.renderTree,\r\n      null,\r\n      (node, parent, isRoot, layerIndex) => {\r\n        const expand = layerIndex < level\r\n        if (expand) {\r\n          node.data.expand = true\r\n        } else if (!isRoot && node.children && node.children.length > 0) {\r\n          node.data.expand = false\r\n        }\r\n      },\r\n      null,\r\n      true,\r\n      0,\r\n      0\r\n    )\r\n    this.mindMap.render()\r\n  }\r\n\r\n  //  \r\n  toggleActiveExpand() {\r\n    this.activeNodeList.forEach(node => {\r\n      if (node.nodeData.children.length <= 0 || node.isRoot) {\r\n        return\r\n      }\r\n      this.toggleNodeExpand(node)\r\n    })\r\n  }\r\n\r\n  //  \r\n  toggleNodeExpand(node) {\r\n    this.mindMap.execCommand('SET_NODE_EXPAND', node, !node.getData('expand'))\r\n  }\r\n\r\n  //  \r\n  setNodeText(node, text, richText, resetRichText) {\r\n    richText = richText === undefined ? node.getData('richText') : richText\r\n    this.setNodeDataRender(node, {\r\n      text,\r\n      richText,\r\n      resetRichText\r\n    })\r\n  }\r\n\r\n  //  \r\n  setNodeImage(node, data) {\r\n    const {\r\n      url,\r\n      title,\r\n      width,\r\n      height,\r\n      custom = false\r\n    } = data || { url: '', title: '', width: 0, height: 0, custom: false }\r\n    this.setNodeDataRender(node, {\r\n      image: url,\r\n      imageTitle: title || '',\r\n      imageSize: {\r\n        width,\r\n        height,\r\n        custom\r\n      }\r\n    })\r\n  }\r\n\r\n  //  \r\n  setNodeIcon(node, icons) {\r\n    this.setNodeDataRender(node, {\r\n      icon: icons\r\n    })\r\n  }\r\n\r\n  //  \r\n  setNodeHyperlink(node, link, title = '') {\r\n    this.setNodeDataRender(node, {\r\n      hyperlink: link,\r\n      hyperlinkTitle: title\r\n    })\r\n  }\r\n\r\n  //  \r\n  setNodeNote(node, note) {\r\n    this.setNodeDataRender(node, {\r\n      note\r\n    })\r\n  }\r\n\r\n  //  \r\n  setNodeAttachment(node, url, name = '') {\r\n    this.setNodeDataRender(node, {\r\n      attachmentUrl: url,\r\n      attachmentName: name\r\n    })\r\n  }\r\n\r\n  //  \r\n  setNodeTag(node, tag) {\r\n    this.setNodeDataRender(node, {\r\n      tag\r\n    })\r\n  }\r\n\r\n  // \r\n  insertFormula(formula, appointNodes = []) {\r\n    // Formula\r\n    if (!this.hasRichTextPlugin() || !this.mindMap.formula) return\r\n    appointNodes = formatDataToArray(appointNodes)\r\n    const list = appointNodes.length > 0 ? appointNodes : this.activeNodeList\r\n    list.forEach(node => {\r\n      this.mindMap.formula.insertFormulaToNode(node, formula)\r\n    })\r\n  }\r\n\r\n  //  \r\n  addGeneralization(data, openEdit = true) {\r\n    if (this.activeNodeList.length <= 0) {\r\n      return\r\n    }\r\n    const nodeList = this.activeNodeList.filter(node => {\r\n      return (\r\n        !node.isRoot &&\r\n        !node.isGeneralization &&\r\n        !node.checkHasSelfGeneralization()\r\n      )\r\n    })\r\n    const list = parseAddGeneralizationNodeList(nodeList)\r\n    if (list.length <= 0) return\r\n    const isRichText = this.hasRichTextPlugin()\r\n    const { focusNewNode, inserting } = this.getNewNodeBehavior(\r\n      openEdit,\r\n      list.length > 1\r\n    )\r\n    let needRender = false\r\n    const alreadyIsRichText = data && data.richText\r\n    list.forEach(item => {\r\n      const newData = {\r\n        inserting,\r\n        ...(data || {\r\n          text: this.mindMap.opt.defaultGeneralizationText\r\n        }),\r\n        range: item.range || null,\r\n        uid: createUid(),\r\n        richText: isRichText,\r\n        isActive: focusNewNode\r\n      }\r\n      if (isRichText && !alreadyIsRichText) newData.resetRichText = isRichText\r\n      let generalization = item.node.getData('generalization')\r\n      generalization = generalization\r\n        ? Array.isArray(generalization)\r\n          ? generalization\r\n          : [generalization]\r\n        : []\r\n      // \r\n      if (item.range) {\r\n        const isExist = !!generalization.find(item2 => {\r\n          return (\r\n            item2.range &&\r\n            item2.range[0] === item.range[0] &&\r\n            item2.range[1] === item.range[1]\r\n          )\r\n        })\r\n        if (isExist) {\r\n          return\r\n        }\r\n        // \r\n        generalization.push(newData)\r\n      } else {\r\n        // \r\n        generalization.push(newData)\r\n      }\r\n      needRender = true\r\n      this.mindMap.execCommand('SET_NODE_DATA', item.node, {\r\n        generalization\r\n      })\r\n      // \r\n      item.node.setData({\r\n        expand: true\r\n      })\r\n    })\r\n    if (!needRender) return\r\n    // \r\n    if (focusNewNode) {\r\n      this.clearActiveNodeList()\r\n    }\r\n    this.mindMap.render(() => {\r\n      // \r\n      // \r\n      this.mindMap.render()\r\n    })\r\n  }\r\n\r\n  //  \r\n  removeGeneralization() {\r\n    if (this.activeNodeList.length <= 0) {\r\n      return\r\n    }\r\n    this.activeNodeList.forEach(node => {\r\n      if (!node.checkHasGeneralization()) {\r\n        return\r\n      }\r\n      this.mindMap.execCommand('SET_NODE_DATA', node, {\r\n        generalization: null\r\n      })\r\n    })\r\n    this.mindMap.render()\r\n    this.closeHighlightNode()\r\n  }\r\n\r\n  //  \r\n  setNodeCustomPosition(node, left = undefined, top = undefined) {\r\n    let nodeList = [node] || this.activeNodeList\r\n    nodeList.forEach(item => {\r\n      this.mindMap.execCommand('SET_NODE_DATA', item, {\r\n        customLeft: left,\r\n        customTop: top\r\n      })\r\n    })\r\n  }\r\n\r\n  //  \r\n  resetLayout() {\r\n    walk(\r\n      this.root,\r\n      null,\r\n      node => {\r\n        node.customLeft = undefined\r\n        node.customTop = undefined\r\n        this.mindMap.execCommand('SET_NODE_DATA', node, {\r\n          customLeft: undefined,\r\n          customTop: undefined\r\n        })\r\n        this.mindMap.render()\r\n      },\r\n      null,\r\n      true,\r\n      0,\r\n      0\r\n    )\r\n  }\r\n\r\n  //  \r\n  setNodeShape(node, shape) {\r\n    if (!shape || !shapeList.includes(shape)) {\r\n      return\r\n    }\r\n    let nodeList = [node] || this.activeNodeList\r\n    nodeList.forEach(item => {\r\n      this.setNodeStyle(item, 'shape', shape)\r\n    })\r\n  }\r\n\r\n  // \r\n  goTargetNode(node, callback = () => {}) {\r\n    let uid = typeof node === 'string' ? node : node.getData('uid')\r\n    if (!uid) return\r\n    this.expandToNodeUid(uid, () => {\r\n      let targetNode = this.findNodeByUid(uid)\r\n      if (targetNode) {\r\n        targetNode.active()\r\n        this.moveNodeToCenter(targetNode)\r\n        callback(targetNode)\r\n      }\r\n    })\r\n  }\r\n\r\n  //  \r\n  setNodeData(node, data) {\r\n    Object.keys(data).forEach(key => {\r\n      node.nodeData.data[key] = data[key]\r\n    })\r\n  }\r\n\r\n  //  \r\n  setNodeDataRender(node, data, notRender = false) {\r\n    this.mindMap.execCommand('SET_NODE_DATA', node, data)\r\n    if (isNodeNotNeedRenderData(data)) {\r\n      this.mindMap.emit('node_tree_render_end')\r\n      return\r\n    }\r\n    this.reRenderNodeCheckChange(node, notRender)\r\n  }\r\n\r\n  // \r\n  reRenderNodeCheckChange(node, notRender) {\r\n    let changed = node.reRender()\r\n    if (changed) {\r\n      if (!notRender) this.mindMap.render()\r\n    } else {\r\n      this.mindMap.emit('node_tree_render_end')\r\n    }\r\n  }\r\n\r\n  // \r\n  // resetScale100%undefinedresetScaleOnMoveNodeToCenterresetScaleOnMoveNodeToCenterresetScale\r\n  moveNodeToCenter(node, resetScale) {\r\n    let { resetScaleOnMoveNodeToCenter } = this.mindMap.opt\r\n    if (resetScale !== undefined) {\r\n      resetScaleOnMoveNodeToCenter = resetScale\r\n    }\r\n    let { transform, state } = this.mindMap.view.getTransformData()\r\n    let { left, top, width, height } = node\r\n    if (!resetScaleOnMoveNodeToCenter) {\r\n      left *= transform.scaleX\r\n      top *= transform.scaleY\r\n      width *= transform.scaleX\r\n      height *= transform.scaleY\r\n    }\r\n    let halfWidth = this.mindMap.width / 2\r\n    let halfHeight = this.mindMap.height / 2\r\n    let nodeCenterX = left + width / 2\r\n    let nodeCenterY = top + height / 2\r\n    let targetX = halfWidth - state.x\r\n    let targetY = halfHeight - state.y\r\n    let offsetX = targetX - nodeCenterX\r\n    let offsetY = targetY - nodeCenterY\r\n    this.mindMap.view.translateX(offsetX)\r\n    this.mindMap.view.translateY(offsetY)\r\n    if (resetScaleOnMoveNodeToCenter) {\r\n      this.mindMap.view.setScale(1)\r\n    }\r\n  }\r\n\r\n  // \r\n  setRootNodeCenter() {\r\n    this.moveNodeToCenter(this.root)\r\n  }\r\n\r\n  // uid\r\n  expandToNodeUid(uid, callback = () => {}) {\r\n    if (!this.renderTree) {\r\n      callback()\r\n      return\r\n    }\r\n    let parentsList = []\r\n    let isGeneralization = false\r\n    const cache = {}\r\n    bfsWalk(this.renderTree, (node, parent) => {\r\n      if (node.data.uid === uid) {\r\n        parentsList = parent ? [...cache[parent.data.uid], parent] : []\r\n        return 'stop'\r\n      }\r\n      const generalizationList = formatGetNodeGeneralization(node.data)\r\n      generalizationList.forEach(item => {\r\n        if (item.uid === uid) {\r\n          parentsList = parent ? [...cache[parent.data.uid], parent, node] : []\r\n          isGeneralization = true\r\n        }\r\n      })\r\n      if (isGeneralization) {\r\n        return 'stop'\r\n      }\r\n      cache[node.data.uid] = parent ? [...cache[parent.data.uid], parent] : []\r\n    })\r\n    let needRender = false\r\n    parentsList.forEach(node => {\r\n      if (!node.data.expand) {\r\n        needRender = true\r\n        node.data.expand = true\r\n      }\r\n    })\r\n    // \r\n    if (isGeneralization) {\r\n      const lastNode = parentsList[parentsList.length - 1]\r\n      if (lastNode) {\r\n        walk(lastNode, null, node => {\r\n          if (!node.data.expand) {\r\n            needRender = true\r\n            node.data.expand = true\r\n          }\r\n        })\r\n      }\r\n    }\r\n    if (needRender) {\r\n      this.mindMap.render(callback)\r\n    } else {\r\n      callback()\r\n    }\r\n  }\r\n\r\n  // uid\r\n  findNodeByUid(uid) {\r\n    if (!this.root) return\r\n    let res = null\r\n    walk(this.root, null, node => {\r\n      if (node.getData('uid') === uid) {\r\n        res = node\r\n        return true\r\n      }\r\n      // \r\n      let isGeneralization = false\r\n      ;(node._generalizationList || []).forEach(item => {\r\n        if (item.generalizationNode.getData('uid') === uid) {\r\n          res = item.generalizationNode\r\n          isGeneralization = true\r\n        }\r\n      })\r\n      if (isGeneralization) {\r\n        return true\r\n      }\r\n    })\r\n    return res\r\n  }\r\n\r\n  // \r\n  highlightNode(node, range, style) {\r\n    // \r\n    if (this.isRendering) return\r\n    style = {\r\n      stroke: 'rgb(94, 200, 248)',\r\n      fill: 'transparent',\r\n      ...(style || {})\r\n    }\r\n    // \r\n    if (!this.highlightBoxNode) {\r\n      this.highlightBoxNode = new Polygon()\r\n        .stroke({\r\n          color: style.stroke || 'transparent'\r\n        })\r\n        .fill({\r\n          color: style.fill || 'transparent'\r\n        })\r\n    } else if (this.highlightBoxNodeStyle) {\r\n      // \r\n      if (\r\n        this.highlightBoxNodeStyle.stroke !== style.stroke ||\r\n        this.highlightBoxNodeStyle.fill !== style.fill\r\n      ) {\r\n        this.highlightBoxNode\r\n          .stroke({\r\n            color: style.stroke || 'transparent'\r\n          })\r\n          .fill({\r\n            color: style.fill || 'transparent'\r\n          })\r\n      }\r\n    }\r\n    this.highlightBoxNodeStyle = { ...style }\r\n    let minx = Infinity,\r\n      miny = Infinity,\r\n      maxx = -Infinity,\r\n      maxy = -Infinity\r\n    if (range) {\r\n      const children = node.children.slice(range[0], range[1] + 1)\r\n      children.forEach(child => {\r\n        if (child.left < minx) {\r\n          minx = child.left\r\n        }\r\n        if (child.top < miny) {\r\n          miny = child.top\r\n        }\r\n        const right = child.left + child.width\r\n        const bottom = child.top + child.height\r\n        if (right > maxx) {\r\n          maxx = right\r\n        }\r\n        if (bottom > maxy) {\r\n          maxy = bottom\r\n        }\r\n      })\r\n    } else {\r\n      minx = node.left\r\n      miny = node.top\r\n      maxx = node.left + node.width\r\n      maxy = node.top + node.height\r\n    }\r\n    this.highlightBoxNode.plot([\r\n      [minx, miny],\r\n      [maxx, miny],\r\n      [maxx, maxy],\r\n      [minx, maxy]\r\n    ])\r\n    this.mindMap.otherDraw.add(this.highlightBoxNode)\r\n  }\r\n\r\n  // \r\n  closeHighlightNode() {\r\n    if (!this.highlightBoxNode) return\r\n    this.highlightBoxNode.remove()\r\n  }\r\n\r\n  // \r\n  hasRichTextPlugin() {\r\n    return !!this.mindMap.richText\r\n  }\r\n}\r\n\r\nexport default Render\r\n","import defaultTheme from './default'\r\n\r\nexport default {\r\n  default: defaultTheme\r\n}\r\n","const map = {\r\n  Backspace: 8,\r\n  Tab: 9,\r\n  Enter: 13,\r\n\r\n  Shift: 16,\r\n  Control: 17,\r\n  Alt: 18,\r\n  CapsLock: 20,\r\n\r\n  Esc: 27,\r\n\r\n  Spacebar: 32,\r\n\r\n  PageUp: 33,\r\n  PageDown: 34,\r\n  End: 35,\r\n  Home: 36,\r\n\r\n  Insert: 45,\r\n\r\n  Left: 37,\r\n  Up: 38,\r\n  Right: 39,\r\n  Down: 40,\r\n\r\n  Del: 46,\r\n\r\n  NumLock: 144,\r\n\r\n  Cmd: 91,\r\n  CmdFF: 224,\r\n  F1: 112,\r\n  F2: 113,\r\n  F3: 114,\r\n  F4: 115,\r\n  F5: 116,\r\n  F6: 117,\r\n  F7: 118,\r\n  F8: 119,\r\n  F9: 120,\r\n  F10: 121,\r\n  F11: 122,\r\n  F12: 123,\r\n\r\n  '`': 192,\r\n  '=': 187,\r\n  '-': 189,\r\n\r\n  '/': 191,\r\n  '.': 190\r\n}\r\n\r\n// \r\nfor (let i = 0; i <= 9; i++) {\r\n  map[i] = i + 48\r\n}\r\n\r\n// \r\n'abcdefghijklmnopqrstuvwxyz'.split('').forEach((n, index) => {\r\n  map[n] = index + 65\r\n})\r\n\r\nexport const keyMap = map\r\n\r\nexport const isKey = (e, key) => {\r\n  let code = typeof e === 'object' ? e.keyCode : e\r\n  return map[key] === code\r\n}\r\n","import { keyMap } from './keyMap'\r\n\r\n//  \r\nexport default class KeyCommand {\r\n  //  \r\n  constructor(opt) {\r\n    this.opt = opt\r\n    this.mindMap = opt.mindMap\r\n    this.shortcutMap = {\r\n      //Enter: [fn]\r\n    }\r\n    this.shortcutMapCache = {}\r\n    this.isPause = false\r\n    this.isInSvg = false\r\n    this.isStopCheckInSvg = false\r\n    this.defaultEnableCheck = this.defaultEnableCheck.bind(this)\r\n    this.bindEvent()\r\n  }\r\n\r\n  // \r\n  extendKeyMap(key, code) {\r\n    keyMap[key] = code\r\n  }\r\n\r\n  // \r\n  removeKeyMap(key) {\r\n    if (typeof keyMap[key] !== 'undefined') {\r\n      delete keyMap[key]\r\n    }\r\n  }\r\n\r\n  //  \r\n  pause() {\r\n    this.isPause = true\r\n  }\r\n\r\n  //  \r\n  recovery() {\r\n    this.isPause = false\r\n  }\r\n\r\n  //  \r\n  save() {\r\n    // \r\n    if (Object.keys(this.shortcutMapCache).length > 0) {\r\n      return\r\n    }\r\n    this.shortcutMapCache = this.shortcutMap\r\n    this.shortcutMap = {}\r\n  }\r\n\r\n  //  \r\n  restore() {\r\n    // \r\n    if (Object.keys(this.shortcutMapCache).length <= 0) {\r\n      return\r\n    }\r\n    this.shortcutMap = this.shortcutMapCache\r\n    this.shortcutMapCache = {}\r\n  }\r\n\r\n  // enableShortcutOnlyWhenMouseInSvg\r\n  // \r\n  // \r\n  stopCheckInSvg() {\r\n    const { enableShortcutOnlyWhenMouseInSvg } = this.mindMap.opt\r\n    if (!enableShortcutOnlyWhenMouseInSvg) return\r\n    this.isStopCheckInSvg = true\r\n  }\r\n\r\n  // \r\n  recoveryCheckInSvg() {\r\n    const { enableShortcutOnlyWhenMouseInSvg } = this.mindMap.opt\r\n    if (!enableShortcutOnlyWhenMouseInSvg) return\r\n    this.isStopCheckInSvg = true\r\n  }\r\n\r\n  //  \r\n  bindEvent() {\r\n    this.onKeydown = this.onKeydown.bind(this)\r\n    // \r\n    this.mindMap.on('svg_mouseenter', () => {\r\n      this.isInSvg = true\r\n    })\r\n    this.mindMap.on('svg_mouseleave', () => {\r\n      this.isInSvg = false\r\n    })\r\n    window.addEventListener('keydown', this.onKeydown)\r\n    this.mindMap.on('beforeDestroy', () => {\r\n      this.unBindEvent()\r\n    })\r\n  }\r\n\r\n  // \r\n  unBindEvent() {\r\n    window.removeEventListener('keydown', this.onKeydown)\r\n  }\r\n\r\n  // \r\n  defaultEnableCheck(e) {\r\n    const target = e.target\r\n    if (target === document.body) return true\r\n    for (let i = 0; i < this.mindMap.editNodeClassList.length; i++) {\r\n      const cur = this.mindMap.editNodeClassList[i]\r\n      if (target.classList.contains(cur)) {\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  // \r\n  onKeydown(e) {\r\n    const {\r\n      enableShortcutOnlyWhenMouseInSvg,\r\n      beforeShortcutRun,\r\n      customCheckEnableShortcut\r\n    } = this.mindMap.opt\r\n    const checkFn =\r\n      typeof customCheckEnableShortcut === 'function'\r\n        ? customCheckEnableShortcut\r\n        : this.defaultEnableCheck\r\n    if (!checkFn(e)) return\r\n    if (\r\n      this.isPause ||\r\n      (enableShortcutOnlyWhenMouseInSvg &&\r\n        !this.isStopCheckInSvg &&\r\n        !this.isInSvg)\r\n    ) {\r\n      return\r\n    }\r\n    Object.keys(this.shortcutMap).forEach(key => {\r\n      if (this.checkKey(e, key)) {\r\n        // paste\r\n        if (!this.checkKey(e, 'Control+v')) {\r\n          e.stopPropagation()\r\n          e.preventDefault()\r\n        }\r\n        if (typeof beforeShortcutRun === 'function') {\r\n          const isStop = beforeShortcutRun(key, [\r\n            ...this.mindMap.renderer.activeNodeList\r\n          ])\r\n          if (isStop) return\r\n        }\r\n        this.shortcutMap[key].forEach(fn => {\r\n          fn()\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  //  \r\n  checkKey(e, key) {\r\n    let o = this.getOriginEventCodeArr(e)\r\n    let k = this.getKeyCodeArr(key)\r\n    if (o.length !== k.length) {\r\n      return false\r\n    }\r\n    for (let i = 0; i < o.length; i++) {\r\n      let index = k.findIndex(item => {\r\n        return item === o[i]\r\n      })\r\n      if (index === -1) {\r\n        return false\r\n      } else {\r\n        k.splice(index, 1)\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  //  \r\n  getOriginEventCodeArr(e) {\r\n    let arr = []\r\n    if (e.ctrlKey || e.metaKey) {\r\n      arr.push(keyMap['Control'])\r\n    }\r\n    if (e.altKey) {\r\n      arr.push(keyMap['Alt'])\r\n    }\r\n    if (e.shiftKey) {\r\n      arr.push(keyMap['Shift'])\r\n    }\r\n    if (!arr.includes(e.keyCode)) {\r\n      arr.push(e.keyCode)\r\n    }\r\n    return arr\r\n  }\r\n\r\n  // \r\n  hasCombinationKey(e) {\r\n    return e.ctrlKey || e.metaKey || e.altKey || e.shiftKey\r\n  }\r\n\r\n  //  \r\n  getKeyCodeArr(key) {\r\n    let keyArr = key.split(/\\s*\\+\\s*/)\r\n    let arr = []\r\n    keyArr.forEach(item => {\r\n      arr.push(keyMap[item])\r\n    })\r\n    return arr\r\n  }\r\n\r\n  //  \r\n  /**\r\n   * Enter\r\n   * Tab | Insert\r\n   * Shift + a\r\n   */\r\n  addShortcut(key, fn) {\r\n    key.split(/\\s*\\|\\s*/).forEach(item => {\r\n      if (this.shortcutMap[item]) {\r\n        this.shortcutMap[item].push(fn)\r\n      } else {\r\n        this.shortcutMap[item] = [fn]\r\n      }\r\n    })\r\n  }\r\n\r\n  //  \r\n  removeShortcut(key, fn) {\r\n    key.split(/\\s*\\|\\s*/).forEach(item => {\r\n      if (this.shortcutMap[item]) {\r\n        if (fn) {\r\n          let index = this.shortcutMap[item].findIndex(f => {\r\n            return f === fn\r\n          })\r\n          if (index !== -1) {\r\n            this.shortcutMap[item].splice(index, 1)\r\n          }\r\n        } else {\r\n          this.shortcutMap[item] = []\r\n          delete this.shortcutMap[item]\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  //  \r\n  getShortcutFn(key) {\r\n    let res = []\r\n    key.split(/\\s*\\|\\s*/).forEach(item => {\r\n      res = this.shortcutMap[item] || []\r\n    })\r\n    return res\r\n  }\r\n}\r\n","import {\r\n  copyRenderTree,\r\n  simpleDeepClone,\r\n  throttle,\r\n  isSameObject,\r\n  transformTreeDataToObject\r\n} from '../../utils'\r\nimport { ERROR_TYPES } from '../../constants/constant'\r\nimport pkg from '../../../package.json'\r\n\r\n//  \r\nclass Command {\r\n  //  \r\n  constructor(opt = {}) {\r\n    this.opt = opt\r\n    this.mindMap = opt.mindMap\r\n    this.commands = {}\r\n    this.history = [] // \r\n    this.activeHistoryIndex = 0\r\n    // \r\n    this.registerShortcutKeys()\r\n    this.originAddHistory = this.addHistory.bind(this)\r\n    this.addHistory = throttle(\r\n      this.addHistory,\r\n      this.mindMap.opt.addHistoryTime,\r\n      this\r\n    )\r\n    // \r\n    this.isPause = false\r\n  }\r\n\r\n  // \r\n  pause() {\r\n    this.isPause = true\r\n  }\r\n\r\n  // \r\n  recovery() {\r\n    this.isPause = false\r\n  }\r\n\r\n  //  \r\n  clearHistory() {\r\n    this.history = []\r\n    this.activeHistoryIndex = 0\r\n    this.mindMap.emit('back_forward', 0, 0)\r\n  }\r\n\r\n  //  \r\n  registerShortcutKeys() {\r\n    this.mindMap.keyCommand.addShortcut('Control+z', () => {\r\n      this.mindMap.execCommand('BACK')\r\n    })\r\n    this.mindMap.keyCommand.addShortcut('Control+y', () => {\r\n      this.mindMap.execCommand('FORWARD')\r\n    })\r\n  }\r\n\r\n  //  \r\n  exec(name, ...args) {\r\n    if (this.commands[name]) {\r\n      this.commands[name].forEach(fn => {\r\n        fn(...args)\r\n      })\r\n      this.mindMap.emit('afterExecCommand', name, ...args)\r\n      if (\r\n        ['BACK', 'FORWARD', 'SET_NODE_ACTIVE', 'CLEAR_ACTIVE_NODE'].includes(\r\n          name\r\n        )\r\n      ) {\r\n        return\r\n      }\r\n      this.addHistory()\r\n    }\r\n  }\r\n\r\n  //  \r\n  add(name, fn) {\r\n    if (this.commands[name]) {\r\n      this.commands[name].push(fn)\r\n    } else {\r\n      this.commands[name] = [fn]\r\n    }\r\n  }\r\n\r\n  //  \r\n  remove(name, fn) {\r\n    if (!this.commands[name]) {\r\n      return\r\n    }\r\n    if (!fn) {\r\n      this.commands[name] = []\r\n      delete this.commands[name]\r\n    } else {\r\n      let index = this.commands[name].find(item => {\r\n        return item === fn\r\n      })\r\n      if (index !== -1) {\r\n        this.commands[name].splice(index, 1)\r\n      }\r\n    }\r\n  }\r\n\r\n  //  \r\n  addHistory() {\r\n    if (this.mindMap.opt.readonly || this.isPause) {\r\n      return\r\n    }\r\n    this.mindMap.emit('beforeAddHistory')\r\n    const lastDataStr =\r\n      this.history.length > 0 ? this.history[this.activeHistoryIndex] : null\r\n    const data = this.getCopyData()\r\n    const dataStr = JSON.stringify(data)\r\n    // \r\n    if (lastDataStr && lastDataStr === dataStr) {\r\n      return\r\n    }\r\n    this.emitDataUpdatesEvent(lastDataStr, dataStr)\r\n    // \r\n    this.history = this.history.slice(0, this.activeHistoryIndex + 1)\r\n    this.history.push(dataStr)\r\n    // \r\n    if (this.history.length > this.mindMap.opt.maxHistoryCount) {\r\n      this.history.shift()\r\n    }\r\n    this.activeHistoryIndex = this.history.length - 1\r\n    this.mindMap.emit('data_change', data)\r\n    this.mindMap.emit(\r\n      'back_forward',\r\n      this.activeHistoryIndex,\r\n      this.history.length\r\n    )\r\n  }\r\n\r\n  //  \r\n  back(step = 1) {\r\n    if (this.mindMap.opt.readonly) {\r\n      return\r\n    }\r\n    if (this.activeHistoryIndex - step >= 0) {\r\n      const lastDataStr = this.history[this.activeHistoryIndex]\r\n      this.activeHistoryIndex -= step\r\n      this.mindMap.emit(\r\n        'back_forward',\r\n        this.activeHistoryIndex,\r\n        this.history.length\r\n      )\r\n      const dataStr = this.history[this.activeHistoryIndex]\r\n      const data = JSON.parse(dataStr)\r\n      this.emitDataUpdatesEvent(lastDataStr, dataStr)\r\n      return data\r\n    }\r\n  }\r\n\r\n  //  \r\n  forward(step = 1) {\r\n    if (this.mindMap.opt.readonly) {\r\n      return\r\n    }\r\n    let len = this.history.length\r\n    if (this.activeHistoryIndex + step <= len - 1) {\r\n      const lastDataStr = this.history[this.activeHistoryIndex]\r\n      this.activeHistoryIndex += step\r\n      this.mindMap.emit(\r\n        'back_forward',\r\n        this.activeHistoryIndex,\r\n        this.history.length\r\n      )\r\n      const dataStr = this.history[this.activeHistoryIndex]\r\n      const data = JSON.parse(dataStr)\r\n      this.emitDataUpdatesEvent(lastDataStr, dataStr)\r\n      return data\r\n    }\r\n  }\r\n\r\n  //  \r\n  getCopyData() {\r\n    if (!this.mindMap.renderer.renderTree) return null\r\n    const res = copyRenderTree({}, this.mindMap.renderer.renderTree, true)\r\n    res.smmVersion = pkg.version\r\n    return res\r\n  }\r\n\r\n  // uid\r\n  removeDataUid(data) {\r\n    data = simpleDeepClone(data)\r\n    let walk = root => {\r\n      delete root.data.uid\r\n      if (root.children && root.children.length > 0) {\r\n        root.children.forEach(item => {\r\n          walk(item)\r\n        })\r\n      }\r\n    }\r\n    walk(data)\r\n    return data\r\n  }\r\n\r\n  // \r\n  emitDataUpdatesEvent(lastDataStr, dataStr) {\r\n    try {\r\n      // data_change_detail\r\n      const eventName = 'data_change_detail'\r\n      const count = this.mindMap.event.listenerCount(eventName)\r\n      if (count > 0 && lastDataStr && dataStr) {\r\n        const lastData = JSON.parse(lastDataStr)\r\n        const data = JSON.parse(dataStr)\r\n        const lastDataObj = simpleDeepClone(transformTreeDataToObject(lastData))\r\n        const dataObj = simpleDeepClone(transformTreeDataToObject(data))\r\n        const res = []\r\n        const walkReplace = (root, obj) => {\r\n          if (root.children && root.children.length > 0) {\r\n            root.children.forEach((childUid, index) => {\r\n              root.children[index] =\r\n                typeof childUid === 'string'\r\n                  ? obj[childUid]\r\n                  : obj[childUid.data.uid]\r\n              walkReplace(root.children[index], obj)\r\n            })\r\n          }\r\n          return root\r\n        }\r\n        // \r\n        Object.keys(dataObj).forEach(uid => {\r\n          // \r\n          if (!lastDataObj[uid]) {\r\n            res.push({\r\n              action: 'create',\r\n              data: walkReplace(dataObj[uid], dataObj)\r\n            })\r\n          } else if (!isSameObject(lastDataObj[uid], dataObj[uid])) {\r\n            res.push({\r\n              action: 'update',\r\n              oldData: walkReplace(lastDataObj[uid], lastDataObj),\r\n              data: walkReplace(dataObj[uid], dataObj)\r\n            })\r\n          }\r\n        })\r\n        // \r\n        Object.keys(lastDataObj).forEach(uid => {\r\n          if (!dataObj[uid]) {\r\n            res.push({\r\n              action: 'delete',\r\n              data: walkReplace(lastDataObj[uid], lastDataObj)\r\n            })\r\n          }\r\n        })\r\n        this.mindMap.emit(eventName, res)\r\n      }\r\n    } catch (error) {\r\n      this.mindMap.opt.errorHandler(\r\n        ERROR_TYPES.DATA_CHANGE_DETAIL_EVENT_ERROR,\r\n        error\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nexport default Command\r\n","import { nextTick } from '.'\r\n\r\n//  \r\nclass BatchExecution {\r\n  //  \r\n  constructor() {\r\n    this.has = {}\r\n    this.queue = []\r\n    this.nextTick = nextTick(this.flush, this)\r\n  }\r\n\r\n  //  \r\n  push(name, fn) {\r\n    if (this.has[name]) {\r\n      this.replaceTask(name, fn)\r\n      return\r\n    }\r\n    this.has[name] = true\r\n    this.queue.push({\r\n      name,\r\n      fn\r\n    })\r\n    this.nextTick()\r\n  }\r\n\r\n  // \r\n  replaceTask(name, fn) {\r\n    const index = this.queue.findIndex(item => {\r\n      return item.name === name\r\n    })\r\n    if (index !== -1) {\r\n      this.queue[index] = {\r\n        name,\r\n        fn\r\n      }\r\n    }\r\n  }\r\n\r\n  //   \r\n  flush() {\r\n    let fns = this.queue.slice(0)\r\n    this.queue = []\r\n    fns.forEach(({ name, fn }) => {\r\n      this.has[name] = false\r\n      fn()\r\n    })\r\n  }\r\n}\r\n\r\nexport default BatchExecution\r\n","import { CONSTANTS } from './constant'\r\n\r\n// \r\nexport const defaultOpt = {\r\n  // \r\n  // DOM\r\n  el: null,\r\n  // \r\n  data: null,\r\n  // mindMap.view.getTransformData()\r\n  viewData: null,\r\n  // \r\n  readonly: false,\r\n  // \r\n  layout: CONSTANTS.LAYOUT.LOGICAL_STRUCTURE,\r\n  // \r\n  fishboneDeg: 45,\r\n  // \r\n  theme: 'default', // default\r\n  // \r\n  themeConfig: {},\r\n  // \r\n  scaleRatio: 0.2,\r\n  // \r\n  translateRatio: 1,\r\n  // 0view.narrowCtrl+-view.setScale\r\n  minZoomRatio: 20,\r\n  // -10view.enlarge\r\n  maxZoomRatio: 400,\r\n  // wheel\r\n  // e.deltaY10issue\r\n  // etruefalse\r\n  customCheckIsTouchPad: null,\r\n  // \r\n  mouseScaleCenterUseMousePosition: true,\r\n  // \r\n  maxTag: 5,\r\n  // \r\n  expandBtnSize: 20,\r\n  // \r\n  imgTextMargin: 5,\r\n  // \r\n  textContentMargin: 2,\r\n  // \r\n  customNoteContentShow: null,\r\n  /*\r\n          {\r\n              show(){},\r\n              hide(){}\r\n          }\r\n      */\r\n  // \r\n  textAutoWrapWidth: 500,\r\n  // \r\n  // \r\n  customHandleMousewheel: null,\r\n  // customHandleMousewheel\r\n  mousewheelAction: CONSTANTS.MOUSE_WHEEL_ACTION.MOVE, // zoommove\r\n  // mousewheelActionmovepx\r\n  mousewheelMoveStep: 100,\r\n  // mousewheelActionzoomCtrltrue\r\n  mousewheelZoomActionReverse: true,\r\n  // \r\n  defaultInsertSecondLevelNodeText: '',\r\n  // \r\n  defaultInsertBelowSecondLevelNodeText: '',\r\n  // \r\n  expandBtnStyle: {\r\n    color: '#808080',\r\n    fill: '#fff',\r\n    fontSize: 13,\r\n    strokeColor: '#333333'\r\n  },\r\n  // \r\n  expandBtnIcon: {\r\n    open: '', // svg\r\n    close: ''\r\n  },\r\n  // \r\n  expandBtnNumHandler: null,\r\n  // \r\n  isShowExpandNum: true,\r\n  // \r\n  enableShortcutOnlyWhenMouseInSvg: true,\r\n  // enableShortcutOnlyWhenMouseInSvg\r\n  // etruefalsetruebody\r\n  customCheckEnableShortcut: null,\r\n  // \r\n  initRootNodePosition: null,\r\n  // z-index\r\n  nodeTextEditZIndex: 3000,\r\n  // z-index\r\n  nodeNoteTooltipZIndex: 3000,\r\n  // \r\n  isEndNodeTextEditOnClickOuter: true,\r\n  // \r\n  maxHistoryCount: 500,\r\n  // \r\n  alwaysShowExpandBtn: false,\r\n  // alwaysShowExpandBtn\r\n  notShowExpandBtn: false,\r\n  // \r\n  iconList: [\r\n    // {\r\n    //   name: '',// \r\n    //   type: '',// \r\n    //   list: [// \r\n    //     {\r\n    //       name: '',// \r\n    //       icon:''// svg\r\n    //     }\r\n    //   ]\r\n    // }\r\n  ],\r\n  // \r\n  maxNodeCacheCount: 1000,\r\n  // \r\n  fitPadding: 50,\r\n  // ctrl\r\n  enableCtrlKeyNodeSelection: true,\r\n  // \r\n  useLeftKeySelectionRightKeyDrag: false,\r\n  // truePromise\r\n  beforeTextEdit: null,\r\n  // \r\n  isUseCustomNodeContent: false,\r\n  // \r\n  customCreateNodeContent: null,\r\n  // document.body\r\n  customInnerElsAppendTo: null,\r\n  // \r\n  // keydown\r\n  enableAutoEnterTextEditWhenKeydown: false,\r\n  // enableAutoEnterTextEditWhenKeydown\r\n  autoEmptyTextWhenKeydownEnterEdit: false,\r\n  // ctrl+vsimple-mind-mapprocessonzhixi\r\n  /*\r\n    1.\r\n\r\n    2.\r\n      {\r\n        // simple-mind-map\r\n        simpleMindMap: true,\r\n        // simple-mind-map\r\n        data: {\r\n          data: {\r\n            text: ''\r\n          },\r\n          children: []\r\n        }\r\n      }\r\n  */\r\n  // promise\r\n  customHandleClipboardText: null,\r\n  // api\r\n  disableMouseWheelZoom: false,\r\n  // \r\n  errorHandler: (code, error) => {\r\n    console.error(code, error)\r\n  },\r\n  // \r\n  enableDblclickBackToRootNode: false,\r\n  // hover\r\n  hoverRectColor: 'rgb(94, 200, 248)',\r\n  // hover\r\n  hoverRectPadding: 2,\r\n  // \r\n  selectTextOnEnterEditText: false,\r\n  // \r\n  deleteNodeActive: true,\r\n  // fit view\r\n  fit: false,\r\n  // \r\n  // {pass: 'green, unpass: 'red'}\r\n  tagsColorMap: {},\r\n  // \r\n  cooperateStyle: {\r\n    avatarSize: 22, // \r\n    fontSize: 12 // \r\n  },\r\n  // \r\n  onlyOneEnableActiveNodeOnCooperate: false,\r\n  // \r\n  defaultGeneralizationText: '',\r\n  // \r\n  // promiseresolvereject\r\n  handleIsSplitByWrapOnPasteCreateNewNode: null,\r\n  // ms\r\n  addHistoryTime: 100,\r\n  // \r\n  isDisableDrag: false,\r\n  // \r\n  /*\r\n    DEFAULT  \r\n    NOT_ACTIVE  : \r\n    ACTIVE_ONLY  : \r\n  */\r\n  createNewNodeBehavior: CONSTANTS.CREATE_NEW_NODE_BEHAVIOR.DEFAULT,\r\n  // \r\n  defaultNodeImage: '',\r\n  // \r\n  // \r\n  isLimitMindMapInCanvas: false,\r\n  // data:urlurl\r\n  // Blob\r\n  /*\r\n    {\r\n      url,    // url\r\n      size: {\r\n        width,  // \r\n        height  //\r\n      }\r\n    }\r\n  */\r\n  handleNodePasteImg: null,\r\n  // \r\n  // \r\n  // svg pathsvg\r\n  customCreateNodePath: null,\r\n  // \r\n  // pointssvg\r\n  customCreateNodePolygon: null,\r\n  // \r\n  // svg pathsvg path\r\n  customTransformNodeLinePath: null,\r\n  // true\r\n  // keyactiveNodeList\r\n  beforeShortcutRun: null,\r\n  // 100%\r\n  // render.moveNodeToCentermoveNodeToCenterresetScaleresetScaleresetScaleOnMoveNodeToCenterresetScale\r\n  resetScaleOnMoveNodeToCenter: false,\r\n  // \r\n  createNodePrefixContent: null,\r\n  // \r\n  createNodePostfixContent: null,\r\n  // \r\n  disabledClipboard: false,\r\n  // \r\n  // linkurlnode\r\n  customHyperlinkJump: null,\r\n  // 1000+1.2.svgpdf3.\r\n  openPerformance: false,\r\n  // \r\n  performanceConfig: {\r\n    time: 250, // ms\r\n    padding: 100, // \r\n    removeNodeWhenOutCanvas: true // \r\n  },\r\n  // \r\n  emptyTextMeasureHeightText: 'abc123',\r\n  // \r\n  openRealtimeRenderOnNodeTextEdit: false,\r\n  // elmousedown\r\n  // true\r\n  mousedownEventPreventDefault: false,\r\n  // \r\n  onlyPasteTextWhenHasImgAndText: true,\r\n  // 1.RichText2.\r\n  enableDragModifyNodeWidth: true,\r\n  // \r\n  minNodeTextModifyWidth: 20,\r\n  // minNodeTextModifyWidth-1\r\n  maxNodeTextModifyWidth: -1,\r\n  // nodeline@svgjspath, { width, color, dasharray }dasharraynoneline\r\n  customHandleLine: null,\r\n  // \r\n  // mindMap.command.addHistory\r\n  addHistoryOnInit: true,\r\n  // \r\n  noteIcon: {\r\n    icon: '', // svgsvgfill\r\n    style: {\r\n      // size: 20,// iconSize\r\n      // color: '',// \r\n    }\r\n  },\r\n  // \r\n  hyperlinkIcon: {\r\n    icon: '', // svgsvgfill\r\n    style: {\r\n      // size: 20,// iconSize\r\n      // color: '',// \r\n    }\r\n  },\r\n  // \r\n  attachmentIcon: {\r\n    icon: '', // svgsvgfill\r\n    style: {\r\n      // size: 20,// iconSize\r\n      // color: '',// \r\n    }\r\n  },\r\n  // \r\n  isShowCreateChildBtnIcon: true,\r\n  // \r\n  quickCreateChildBtnIcon: {\r\n    icon: '', // svgsvgfill\r\n    style: {\r\n      // expandBtnSize\r\n      // color: '',// expandBtnStylecolor\r\n    }\r\n  },\r\n  // \r\n  customQuickCreateChildBtnClick: null,\r\n  // \r\n  // \r\n  /*\r\n    {\r\n      // DOM\r\n      create: (node) => { \r\n        return {\r\n          el, // DOM\r\n          width: 20, // \r\n          height: 20\r\n        }\r\n      },\r\n      // @svgdotjs/svg.jsForeignObject\r\n      handle: ({ content, element, node }) => {\r\n        \r\n      }\r\n    }\r\n  */\r\n  addCustomContentToNode: null,\r\n  // \r\n  enableInheritAncestorLineStyle: true,\r\n\r\n  // Select\r\n  // \r\n  selectTranslateStep: 3,\r\n  // \r\n  selectTranslateLimit: 20,\r\n\r\n  // Drag\r\n  // \r\n  enableFreeDrag: false,\r\n  // \r\n  autoMoveWhenMouseInEdgeOnDrag: true,\r\n  // \r\n  dragMultiNodeRectConfig: {\r\n    width: 40,\r\n    height: 20,\r\n    fill: 'rgb(94, 200, 248)' // \r\n  },\r\n  // \r\n  dragPlaceholderRectFill: 'rgb(94, 200, 248)',\r\n  // \r\n  dragPlaceholderLineConfig: {\r\n    color: 'rgb(94, 200, 248)',\r\n    width: 2\r\n  },\r\n  // \r\n  dragOpacityConfig: {\r\n    cloneNodeOpacity: 0.5, // \r\n    beingDragNodeOpacity: 0.3 // \r\n  },\r\n  // \r\n  // @svgdotjs/svg.js\r\n  handleDragCloneNode: null,\r\n  // {overlapNodeUid,prevNodeUid,nextNodeUid}truenode_dragendPromise\r\n  beforeDragEnd: null,\r\n  // true\r\n  beforeDragStart: null,\r\n\r\n  // Watermark\r\n  // \r\n  watermarkConfig: {\r\n    onlyExport: false, // \r\n    text: '',\r\n    lineSpacing: 100,\r\n    textSpacing: 100,\r\n    angle: 30,\r\n    textStyle: {\r\n      color: '#999',\r\n      opacity: 0.5,\r\n      fontSize: 14\r\n    },\r\n    belowNode: false\r\n  },\r\n\r\n  // Export\r\n  // pngsvgpdf\r\n  exportPaddingX: 10,\r\n  exportPaddingY: 10,\r\n  // svgsvghtml\r\n  // \r\n  resetCss: `\r\n    * {\r\n      margin: 0;\r\n      padding: 0;\r\n      box-sizing: border-box;\r\n    }\r\n  `,\r\n  // canvaswindow.devicePixelRatio\r\n  minExportImgCanvasScale: 2,\r\n  // pngsvgpdf\r\n  // null\r\n  /*\r\n    {\r\n      el,// DOM\r\n      cssText,// css\r\n      height: 50// DOM\r\n    }\r\n  */\r\n  addContentToHeader: null,\r\n  addContentToFooter: null,\r\n  // pngsvgpdfsvgsvgsvg\r\n  // svg@svgdotjs/svg.js\r\n  handleBeingExportSvg: null,\r\n  // pdfcanvassvgcanvascanvas\r\n  maxCanvasSize: 16384,\r\n\r\n  // AssociativeLine\r\n  // \r\n  defaultAssociativeLineText: '',\r\n  // \r\n  // false\r\n  associativeLineIsAlwaysAboveNode: true,\r\n  // \r\n  // fromto\r\n  associativeLineInitPointsPosition: {\r\n    // fromtolefttopbottomright\r\n    from: '', // \r\n    to: '' // \r\n  },\r\n  // \r\n  enableAdjustAssociativeLinePoints: true,\r\n  // truenode\r\n  beforeAssociativeLineConnection: null,\r\n\r\n  // TouchEvent\r\n  // api\r\n  // TouchEvent\r\n  disableTouchZoom: false,\r\n  // \r\n  // -1\r\n  minTouchZoomScale: 20,\r\n  maxTouchZoomScale: -1,\r\n\r\n  // Scrollbar\r\n  // ScrollbarisLimitMindMapInCanvas\r\n  isLimitMindMapInCanvasWhenHasScrollbar: true,\r\n\r\n  // Search\r\n  // \r\n  isOnlySearchCurrentRenderNodes: false,\r\n\r\n  // Cooperate\r\n  // \r\n  // \r\n  /*\r\n    {\r\n      type: createOrUpdatedelete\r\n      data: 1.type=createOrUpdate2.type=delete\r\n    }\r\n  */\r\n  beforeCooperateUpdate: null,\r\n\r\n  // RainbowLines\r\n  // RainbowLines\r\n  rainbowLinesConfig: {\r\n    open: false, // \r\n    colorsList: [] // \r\n    /*\r\n    [\r\n      'rgb(255, 213, 73)',\r\n      'rgb(255, 136, 126)',\r\n      'rgb(107, 225, 141)',\r\n      'rgb(151, 171, 255)',\r\n      'rgb(129, 220, 242)',\r\n      'rgb(255, 163, 125)',\r\n      'rgb(152, 132, 234)'\r\n    ]\r\n    */\r\n  },\r\n\r\n  // Demonstrate\r\n  // \r\n  demonstrateConfig: null,\r\n\r\n  // Formula\r\n  // \r\n  enableEditFormulaInRichTextEdit: true,\r\n  // katexkatexoutputhtmlmindMap.formula.getKatexConfig()\r\n  // node_moduleskatex/dist/fonts/cdn\r\n  // `${katexFontPath}fonts/KaTeX_AMS-Regular.woff2`\r\n  katexFontPath: 'https://unpkg.com/katex@0.16.11/dist/',\r\n  // katexChrome100htmlmathmlmathmlhtml\r\n  getKatexOutputType: null,\r\n\r\n  // RichText\r\n  // \r\n  transformRichTextOnEnterEdit: null,\r\n  // richTextquill\r\n  beforeHideRichTextEdit: null,\r\n\r\n  // OuterFrame\r\n  outerFramePaddingX: 10,\r\n  outerFramePaddingY: 10,\r\n  defaultOuterFrameText: '',\r\n\r\n  // Painter\r\n  // \r\n  onlyPainterNodeCustomStyles: false,\r\n\r\n  // NodeImgAdjust\r\n  // true\r\n  beforeDeleteNodeImg: null,\r\n  // \r\n  imgResizeBtnSize: 25,\r\n  // >=0\r\n  minImgResizeWidth: 50,\r\n  minImgResizeHeight: 50,\r\n  // imgMaxWidthimgMaxHeightfalsemaxImgResizeWidthmaxImgResizeHeight\r\n  maxImgResizeWidthInheritTheme: false,\r\n  // maxImgResizeWidthInheritThemefalseInfinity\r\n  maxImgResizeWidth: Infinity,\r\n  maxImgResizeHeight: Infinity,\r\n  // \r\n  // svghtml\r\n  // minImgResizeWidthminImgResizeHeight\r\n  customDeleteBtnInnerHTML: '',\r\n  customResizeBtnInnerHTML: ''\r\n}\r\n","import View from './src/core/view/View'\r\nimport Event from './src/core/event/Event'\r\nimport Render from './src/core/render/Render'\r\nimport merge from 'deepmerge'\r\nimport theme from './src/theme'\r\nimport Style from './src/core/render/node/Style'\r\nimport KeyCommand from './src/core/command/KeyCommand'\r\nimport Command from './src/core/command/Command'\r\nimport BatchExecution from './src/utils/BatchExecution'\r\nimport {\r\n  layoutValueList,\r\n  CONSTANTS,\r\n  ERROR_TYPES,\r\n  cssContent,\r\n  nodeDataNoStylePropList\r\n} from './src/constants/constant'\r\nimport { SVG, G, Rect } from '@svgdotjs/svg.js'\r\nimport {\r\n  simpleDeepClone,\r\n  getObjectChangedProps,\r\n  isUndef,\r\n  handleGetSvgDataExtraContent,\r\n  getNodeTreeBoundingRect,\r\n  mergeTheme,\r\n  createUidForAppointNodes\r\n} from './src/utils'\r\nimport defaultTheme, {\r\n  checkIsNodeSizeIndependenceConfig\r\n} from './src/theme/default'\r\nimport { defaultOpt } from './src/constants/defaultOptions'\r\n\r\n//  \r\nclass MindMap {\r\n  //  \r\n  /**\r\n   *\r\n   * @param {defaultOpt} opt\r\n   */\r\n  constructor(opt = {}) {\r\n    MindMap.instanceCount++\r\n    // \r\n    this.opt = this.handleOpt(merge(defaultOpt, opt))\r\n    // \r\n    this.opt.data = this.handleData(this.opt.data)\r\n\r\n    // \r\n    this.el = this.opt.el\r\n    if (!this.el) throw new Error('el')\r\n\r\n    // \r\n    this.getElRectInfo()\r\n\r\n    // \r\n    this.initWidth = this.width\r\n    this.initHeight = this.height\r\n\r\n    // css\r\n    this.cssEl = null\r\n    this.cssTextMap = {} // svgsvg\r\n\r\n    // /\r\n    /*\r\n      {\r\n        name: '',// \r\n        // \r\n        createContent: (node) => {\r\n          return {\r\n            node: null,\r\n            width: 0,\r\n            height: 0\r\n          }\r\n        },\r\n        // opt\r\n        createNodeData: () => {},\r\n        // opt\r\n        updateNodeData: () => {},\r\n      }\r\n    */\r\n    this.nodeInnerPrefixList = []\r\n    this.nodeInnerPostfixList = []\r\n\r\n    // body\r\n    // customCheckEnableShortcut\r\n    this.editNodeClassList = []\r\n\r\n    // \r\n    /*\r\n      {\r\n        createShape: (node) => {\r\n          return path\r\n        },\r\n        getPadding: ({ node, width, height, paddingX, paddingY }) => {\r\n          return {\r\n            paddingX: 0,\r\n            paddingY: 0\r\n          }  \r\n        }\r\n      }\r\n    */\r\n    this.extendShapeList = []\r\n\r\n    // \r\n    this.initContainer()\r\n\r\n    // \r\n    this.initTheme()\r\n\r\n    // \r\n    this.initCache()\r\n\r\n    // \r\n    MindMap.pluginList\r\n      .filter(plugin => {\r\n        return plugin.preload\r\n      })\r\n      .forEach(plugin => {\r\n        this.initPlugin(plugin)\r\n      })\r\n\r\n    // \r\n    this.event = new Event({\r\n      mindMap: this\r\n    })\r\n\r\n    // \r\n    this.keyCommand = new KeyCommand({\r\n      mindMap: this\r\n    })\r\n\r\n    // \r\n    this.command = new Command({\r\n      mindMap: this\r\n    })\r\n\r\n    // \r\n    this.renderer = new Render({\r\n      mindMap: this\r\n    })\r\n\r\n    // \r\n    this.view = new View({\r\n      mindMap: this\r\n    })\r\n\r\n    // \r\n    this.batchExecution = new BatchExecution()\r\n\r\n    // \r\n    MindMap.pluginList\r\n      .filter(plugin => {\r\n        return !plugin.preload\r\n      })\r\n      .forEach(plugin => {\r\n        this.initPlugin(plugin)\r\n      })\r\n\r\n    // css\r\n    this.addCss()\r\n\r\n    // \r\n    this.render(this.opt.fit ? () => this.view.fit() : () => {})\r\n\r\n    // \r\n    if (this.opt.addHistoryOnInit && this.opt.data) {\r\n      this.command.addHistory()\r\n    }\r\n  }\r\n\r\n  //  \r\n  handleOpt(opt) {\r\n    // \r\n    if (!layoutValueList.includes(opt.layout)) {\r\n      opt.layout = CONSTANTS.LAYOUT.LOGICAL_STRUCTURE\r\n    }\r\n    // \r\n    opt.theme = opt.theme && theme[opt.theme] ? opt.theme : 'default'\r\n    return opt\r\n  }\r\n\r\n  // \r\n  handleData(data) {\r\n    if (isUndef(data) || Object.keys(data).length <= 0) return null\r\n    data = simpleDeepClone(data || {})\r\n    // \r\n    if (data.data && !data.data.expand) {\r\n      data.data.expand = true\r\n    }\r\n    // uiduid\r\n    createUidForAppointNodes([data], false, null, true)\r\n    return data\r\n  }\r\n\r\n  // \r\n  initContainer() {\r\n    const { associativeLineIsAlwaysAboveNode } = this.opt\r\n    // \r\n    this.el.classList.add('smm-mind-map-container')\r\n    // \r\n    const createAssociativeLineDraw = () => {\r\n      this.associativeLineDraw = this.draw.group()\r\n      this.associativeLineDraw.addClass('smm-associative-line-container')\r\n    }\r\n    // \r\n    this.svg = SVG().addTo(this.el).size(this.width, this.height)\r\n\r\n    // \r\n    this.draw = this.svg.group()\r\n    this.draw.addClass('smm-container')\r\n    // \r\n    this.lineDraw = this.draw.group()\r\n    this.lineDraw.addClass('smm-line-container')\r\n    // \r\n    if (!associativeLineIsAlwaysAboveNode) {\r\n      createAssociativeLineDraw()\r\n    }\r\n    // \r\n    this.nodeDraw = this.draw.group()\r\n    this.nodeDraw.addClass('smm-node-container')\r\n    // \r\n    if (associativeLineIsAlwaysAboveNode) {\r\n      createAssociativeLineDraw()\r\n    }\r\n    // \r\n    this.otherDraw = this.draw.group()\r\n    this.otherDraw.addClass('smm-other-container')\r\n  }\r\n\r\n  // \r\n  clearDraw() {\r\n    this.lineDraw.clear()\r\n    this.associativeLineDraw.clear()\r\n    this.nodeDraw.clear()\r\n    this.otherDraw.clear()\r\n  }\r\n\r\n  // css\r\n  // svgsvg\r\n  appendCss(key, str) {\r\n    this.cssTextMap[key] = str\r\n    this.removeCss()\r\n    this.addCss()\r\n  }\r\n\r\n  // css\r\n  removeAppendCss(key) {\r\n    if (this.cssTextMap[key]) {\r\n      delete this.cssTextMap[key]\r\n      this.removeCss()\r\n      this.addCss()\r\n    }\r\n  }\r\n\r\n  // css\r\n  joinCss() {\r\n    return (\r\n      cssContent +\r\n      Object.keys(this.cssTextMap)\r\n        .map(key => {\r\n          return this.cssTextMap[key]\r\n        })\r\n        .join('\\n')\r\n    )\r\n  }\r\n\r\n  // css\r\n  addCss() {\r\n    this.cssEl = document.createElement('style')\r\n    this.cssEl.type = 'text/css'\r\n    this.cssEl.innerHTML = this.joinCss()\r\n    document.head.appendChild(this.cssEl)\r\n  }\r\n\r\n  // css\r\n  removeCss() {\r\n    if (this.cssEl) document.head.removeChild(this.cssEl)\r\n  }\r\n\r\n  // \r\n  checkEditNodeClassIndex(className) {\r\n    return this.editNodeClassList.findIndex(item => {\r\n      return item === className\r\n    })\r\n  }\r\n\r\n  // \r\n  addEditNodeClass(className) {\r\n    const index = this.checkEditNodeClassIndex(className)\r\n    if (index === -1) {\r\n      this.editNodeClassList.push(className)\r\n    }\r\n  }\r\n\r\n  // \r\n  deleteEditNodeClass(className) {\r\n    const index = this.checkEditNodeClassIndex(className)\r\n    if (index !== -1) {\r\n      this.editNodeClassList.splice(index, 1)\r\n    }\r\n  }\r\n\r\n  //  \r\n  render(callback, source = '') {\r\n    this.initTheme()\r\n    this.renderer.render(callback, source)\r\n  }\r\n\r\n  //  \r\n  reRender(callback, source = '') {\r\n    this.renderer.reRender = true // \r\n    this.renderer.clearCache() // \r\n    this.clearDraw() // \r\n    this.render(callback, source)\r\n  }\r\n\r\n  // \r\n  getElRectInfo() {\r\n    this.elRect = this.el.getBoundingClientRect()\r\n    this.width = this.elRect.width\r\n    this.height = this.elRect.height\r\n    if (this.width <= 0 || this.height <= 0)\r\n      throw new Error('el0')\r\n  }\r\n\r\n  //  \r\n  resize() {\r\n    const oldWidth = this.width\r\n    const oldHeight = this.height\r\n    this.getElRectInfo()\r\n    this.svg.size(this.width, this.height)\r\n    if (oldWidth !== this.width || oldHeight !== this.height) {\r\n      // \r\n      if (this.demonstrate) {\r\n        // \r\n        if (!this.demonstrate.isInDemonstrate) {\r\n          this.render()\r\n        }\r\n      } else {\r\n        this.render()\r\n      }\r\n    }\r\n    this.emit('resize')\r\n  }\r\n\r\n  //  \r\n  on(event, fn) {\r\n    this.event.on(event, fn)\r\n  }\r\n\r\n  //  \r\n  emit(event, ...args) {\r\n    this.event.emit(event, ...args)\r\n  }\r\n\r\n  //  \r\n  off(event, fn) {\r\n    this.event.off(event, fn)\r\n  }\r\n\r\n  // \r\n  initCache() {\r\n    this.commonCaches = {\r\n      measureCustomNodeContentSizeEl: null,\r\n      measureRichtextNodeTextSizeEl: null\r\n    }\r\n  }\r\n\r\n  //  \r\n  initTheme() {\r\n    // \r\n    this.themeConfig = mergeTheme(\r\n      theme[this.opt.theme] || theme.default,\r\n      this.opt.themeConfig\r\n    )\r\n    // \r\n    Style.setBackgroundStyle(this.el, this.themeConfig)\r\n  }\r\n\r\n  //  \r\n  setTheme(theme, notRender = false) {\r\n    this.execCommand('CLEAR_ACTIVE_NODE')\r\n    this.opt.theme = theme\r\n    if (!notRender) {\r\n      this.render(null, CONSTANTS.CHANGE_THEME)\r\n    }\r\n    this.emit('view_theme_change', theme)\r\n  }\r\n\r\n  //  \r\n  getTheme() {\r\n    return this.opt.theme\r\n  }\r\n\r\n  //  \r\n  setThemeConfig(config, notRender = false) {\r\n    // \r\n    const changedConfig = getObjectChangedProps(this.themeConfig, config)\r\n    this.opt.themeConfig = config\r\n    if (!notRender) {\r\n      // \r\n      const res = checkIsNodeSizeIndependenceConfig(changedConfig)\r\n      this.render(null, res ? '' : CONSTANTS.CHANGE_THEME)\r\n    }\r\n  }\r\n\r\n  //  \r\n  getCustomThemeConfig() {\r\n    return this.opt.themeConfig\r\n  }\r\n\r\n  //  \r\n  getThemeConfig(prop) {\r\n    return prop === undefined ? this.themeConfig : this.themeConfig[prop]\r\n  }\r\n\r\n  // \r\n  getConfig(prop) {\r\n    return prop === undefined ? this.opt : this.opt[prop]\r\n  }\r\n\r\n  // \r\n  updateConfig(opt = {}) {\r\n    this.emit('before_update_config', this.opt)\r\n    const lastOpt = {\r\n      ...this.opt\r\n    }\r\n    this.opt = this.handleOpt(merge.all([defaultOpt, this.opt, opt]))\r\n    this.emit('after_update_config', this.opt, lastOpt)\r\n  }\r\n\r\n  //  \r\n  getLayout() {\r\n    return this.opt.layout\r\n  }\r\n\r\n  //  \r\n  setLayout(layout, notRender = false) {\r\n    // \r\n    if (!layoutValueList.includes(layout)) {\r\n      layout = CONSTANTS.LAYOUT.LOGICAL_STRUCTURE\r\n    }\r\n    this.opt.layout = layout\r\n    this.view.reset()\r\n    this.renderer.setLayout()\r\n    if (!notRender) {\r\n      this.render(null, CONSTANTS.CHANGE_LAYOUT)\r\n    }\r\n    this.emit('layout_change', layout)\r\n  }\r\n\r\n  //  \r\n  execCommand(...args) {\r\n    this.command.exec(...args)\r\n  }\r\n\r\n  // \r\n  updateData(data) {\r\n    data = this.handleData(data)\r\n    this.emit('before_update_data', data)\r\n    this.renderer.setData(data)\r\n    this.render()\r\n    this.command.addHistory()\r\n    this.emit('update_data', data)\r\n  }\r\n\r\n  //  \r\n  setData(data) {\r\n    data = this.handleData(data)\r\n    this.emit('before_set_data', data)\r\n    this.opt.data = data\r\n    this.execCommand('CLEAR_ACTIVE_NODE')\r\n    this.command.clearHistory()\r\n    this.command.addHistory()\r\n    this.renderer.setData(data)\r\n    this.reRender()\r\n    this.emit('set_data', data)\r\n  }\r\n\r\n  //  \r\n  setFullData(data) {\r\n    if (data.root) {\r\n      this.setData(data.root)\r\n    }\r\n    if (data.layout) {\r\n      this.setLayout(data.layout)\r\n    }\r\n    if (data.theme) {\r\n      if (data.theme.template) {\r\n        this.setTheme(data.theme.template)\r\n      }\r\n      if (data.theme.config) {\r\n        this.setThemeConfig(data.theme.config)\r\n      }\r\n    }\r\n    if (data.view) {\r\n      this.view.setTransformData(data.view)\r\n    }\r\n  }\r\n\r\n  //  \r\n  getData(withConfig) {\r\n    let nodeData = this.command.getCopyData()\r\n    let data = {}\r\n    if (withConfig) {\r\n      data = {\r\n        layout: this.getLayout(),\r\n        root: nodeData,\r\n        theme: {\r\n          template: this.getTheme(),\r\n          config: this.getCustomThemeConfig()\r\n        },\r\n        view: this.view.getTransformData()\r\n      }\r\n    } else {\r\n      data = nodeData\r\n    }\r\n    return simpleDeepClone(data)\r\n  }\r\n\r\n  //  \r\n  async export(...args) {\r\n    try {\r\n      if (!this.doExport) {\r\n        throw new Error('Export')\r\n      }\r\n      let result = await this.doExport.export(...args)\r\n      return result\r\n    } catch (error) {\r\n      this.opt.errorHandler(ERROR_TYPES.EXPORT_ERROR, error)\r\n    }\r\n  }\r\n\r\n  //  \r\n  toPos(x, y) {\r\n    return {\r\n      x: x - this.elRect.left,\r\n      y: y - this.elRect.top\r\n    }\r\n  }\r\n\r\n  //  \r\n  setMode(mode) {\r\n    if (![CONSTANTS.MODE.READONLY, CONSTANTS.MODE.EDIT].includes(mode)) {\r\n      return\r\n    }\r\n    const isReadonly = mode === CONSTANTS.MODE.READONLY\r\n    if (isReadonly === this.opt.readonly) return\r\n    if (isReadonly) {\r\n      // \r\n      if (this.renderer.textEdit.isShowTextEdit()) {\r\n        this.renderer.textEdit.hideEditTextBox()\r\n        this.command.originAddHistory()\r\n      }\r\n      // \r\n      this.execCommand('CLEAR_ACTIVE_NODE')\r\n    }\r\n    this.opt.readonly = isReadonly\r\n    // \r\n    if (!isReadonly && this.command.history.length <= 0) {\r\n      this.command.originAddHistory()\r\n    }\r\n    this.emit('mode_change', mode)\r\n  }\r\n\r\n  // svg\r\n  getSvgData({\r\n    paddingX = 0,\r\n    paddingY = 0,\r\n    ignoreWatermark = false,\r\n    addContentToHeader,\r\n    addContentToFooter,\r\n    node\r\n  } = {}) {\r\n    const { watermarkConfig, openPerformance } = this.opt\r\n    // \r\n    if (openPerformance) {\r\n      this.renderer.forceLoadNode(node)\r\n    }\r\n    const { cssTextList, header, headerHeight, footer, footerHeight } =\r\n      handleGetSvgDataExtraContent({\r\n        addContentToHeader,\r\n        addContentToFooter\r\n      })\r\n    const svg = this.svg\r\n    const draw = this.draw\r\n    // \r\n    const origWidth = svg.width()\r\n    const origHeight = svg.height()\r\n    const origTransform = draw.transform()\r\n    const elRect = this.elRect\r\n    // \r\n    draw.scale(1 / origTransform.scaleX, 1 / origTransform.scaleY)\r\n    // getBoundingClientRect\r\n    const rect = draw.rbox()\r\n    // \r\n    let clipData = null\r\n    if (node) {\r\n      clipData = getNodeTreeBoundingRect(\r\n        node,\r\n        rect.x,\r\n        rect.y,\r\n        paddingX,\r\n        paddingY\r\n      )\r\n    }\r\n    // \r\n    const fixHeight = 0\r\n    rect.width += paddingX * 2\r\n    rect.height += paddingY * 2 + fixHeight + headerHeight + footerHeight\r\n    draw.translate(paddingX, paddingY)\r\n    // svg\r\n    svg.size(rect.width, rect.height)\r\n    // \r\n    draw.translate(-rect.x + elRect.left, -rect.y + elRect.top)\r\n    // \r\n    let clone = svg.clone()\r\n    // \r\n    const hasWatermark = this.watermark && this.watermark.hasWatermark()\r\n    if (!ignoreWatermark && hasWatermark) {\r\n      this.watermark.isInExport = true\r\n      // \r\n      const { onlyExport } = watermarkConfig\r\n      // \r\n      const needReDrawWatermark =\r\n        rect.width > origWidth || rect.height > origHeight\r\n      // \r\n      if (needReDrawWatermark) {\r\n        this.width = rect.width\r\n        this.height = rect.height\r\n        this.watermark.onResize()\r\n        clone = svg.clone()\r\n        this.width = origWidth\r\n        this.height = origHeight\r\n        this.watermark.onResize()\r\n      } else if (onlyExport) {\r\n        // \r\n        this.watermark.onResize()\r\n        clone = svg.clone()\r\n      }\r\n      // \r\n      if (onlyExport) {\r\n        this.watermark.clear()\r\n      }\r\n      this.watermark.isInExport = false\r\n    }\r\n    // \r\n    [this.joinCss(), ...cssTextList].forEach(s => {\r\n      clone.add(SVG(`<style>${s}</style>`))\r\n    })\r\n    // \r\n    if (header && headerHeight > 0) {\r\n      clone.findOne('.smm-container').translate(0, headerHeight)\r\n      header.width(rect.width)\r\n      header.y(paddingY)\r\n      clone.add(header, 0)\r\n    }\r\n    if (footer && footerHeight > 0) {\r\n      footer.width(rect.width)\r\n      footer.y(rect.height - paddingY - footerHeight)\r\n      clone.add(footer)\r\n    }\r\n    // defsidclonedefsidid\r\n    const defs = svg.find('defs')\r\n    const defs2 = clone.find('defs')\r\n    defs.forEach((def, defIndex) => {\r\n      const def2 = defs2[defIndex]\r\n      if (!def2) return\r\n      const children = def.children()\r\n      const children2 = def2.children()\r\n      for (let i = 0; i < children.length; i++) {\r\n        const child = children[i]\r\n        const child2 = children2[i]\r\n        if (child && child2) {\r\n          child2.attr('id', child.attr('id'))\r\n        }\r\n      }\r\n    })\r\n    // \r\n    svg.size(origWidth, origHeight)\r\n    draw.transform(origTransform)\r\n    return {\r\n      svg: clone, // svgsvgg\r\n      svgHTML: clone.svg(), // svg\r\n      clipData,\r\n      rect: {\r\n        ...rect, // \r\n        ratio: rect.width / rect.height // \r\n      },\r\n      origWidth, // \r\n      origHeight, // \r\n      scaleX: origTransform.scaleX, // \r\n      scaleY: origTransform.scaleY // \r\n    }\r\n  }\r\n\r\n  // \r\n  addShape(shape) {\r\n    if (!shape) return\r\n    const exist = this.extendShapeList.find(item => {\r\n      return item.name === shape.name\r\n    })\r\n    if (exist) return\r\n    this.extendShapeList.push(shape)\r\n  }\r\n\r\n  // \r\n  removeShape(name) {\r\n    const index = this.extendShapeList.findIndex(item => {\r\n      return item.name === name\r\n    })\r\n    if (index !== -1) {\r\n      this.extendShapeList.splice(index, 1)\r\n    }\r\n  }\r\n\r\n  // SVG.js\r\n  getSvgObjects() {\r\n    return {\r\n      SVG,\r\n      G,\r\n      Rect\r\n    }\r\n  }\r\n\r\n  // \r\n  addPlugin(plugin, opt) {\r\n    let index = MindMap.hasPlugin(plugin)\r\n    if (index === -1) {\r\n      MindMap.usePlugin(plugin, opt)\r\n    }\r\n    this.initPlugin(plugin)\r\n  }\r\n\r\n  // \r\n  removePlugin(plugin) {\r\n    let index = MindMap.hasPlugin(plugin)\r\n    if (index !== -1) {\r\n      MindMap.pluginList.splice(index, 1)\r\n      if (this[plugin.instanceName]) {\r\n        if (this[plugin.instanceName].beforePluginRemove) {\r\n          this[plugin.instanceName].beforePluginRemove()\r\n        }\r\n        delete this[plugin.instanceName]\r\n      }\r\n    }\r\n  }\r\n\r\n  // \r\n  initPlugin(plugin) {\r\n    if (this[plugin.instanceName]) return\r\n    this[plugin.instanceName] = new plugin({\r\n      mindMap: this,\r\n      pluginOpt: plugin.pluginOpt\r\n    })\r\n  }\r\n\r\n  // \r\n  destroy() {\r\n    this.emit('beforeDestroy')\r\n    // \r\n    this.renderer.textEdit.hideEditTextBox()\r\n    this.renderer.textEdit.removeTextEditEl()\r\n    // \r\n    ;[...MindMap.pluginList].forEach(plugin => {\r\n      if (\r\n        this[plugin.instanceName] &&\r\n        this[plugin.instanceName].beforePluginDestroy\r\n      ) {\r\n        this[plugin.instanceName].beforePluginDestroy()\r\n      }\r\n      this[plugin.instanceName] = null\r\n    })\r\n    // \r\n    this.event.unbind()\r\n    // \r\n    this.svg.remove()\r\n    // \r\n    Style.removeBackgroundStyle(this.el)\r\n    // \r\n    this.el.classList.remove('smm-mind-map-container')\r\n    this.el.innerHTML = ''\r\n    this.el = null\r\n    this.removeCss()\r\n    MindMap.instanceCount--\r\n  }\r\n}\r\n\r\n// \r\n// \r\n/*\r\n\r\n\r\n{\r\n  data: {\r\n    text: '',\r\n    note: '',\r\n    color: ''\r\n  },\r\n  children: []\r\n}\r\n\r\ncolornodeDataNoStylePropList`_`\r\n*/\r\nlet _extendNodeDataNoStylePropList = []\r\nMindMap.extendNodeDataNoStylePropList = (list = []) => {\r\n  _extendNodeDataNoStylePropList.push(...list)\r\n  nodeDataNoStylePropList.push(...list)\r\n}\r\nMindMap.resetNodeDataNoStylePropList = () => {\r\n  _extendNodeDataNoStylePropList.forEach(item => {\r\n    const index = nodeDataNoStylePropList.findIndex(item2 => {\r\n      return item2 === item\r\n    })\r\n    if (index !== -1) {\r\n      nodeDataNoStylePropList.splice(index, 1)\r\n    }\r\n  })\r\n  _extendNodeDataNoStylePropList = []\r\n}\r\n\r\n// \r\nMindMap.pluginList = []\r\nMindMap.usePlugin = (plugin, opt = {}) => {\r\n  if (MindMap.hasPlugin(plugin) !== -1) return MindMap\r\n  plugin.pluginOpt = opt\r\n  MindMap.pluginList.push(plugin)\r\n  return MindMap\r\n}\r\nMindMap.hasPlugin = plugin => {\r\n  return MindMap.pluginList.findIndex(item => {\r\n    return item === plugin\r\n  })\r\n}\r\nMindMap.instanceCount = 0\r\n\r\n// \r\nMindMap.defineTheme = (name, config = {}) => {\r\n  if (theme[name]) {\r\n    return new Error('')\r\n  }\r\n  theme[name] = mergeTheme(defaultTheme, config)\r\n}\r\n// \r\nMindMap.removeTheme = name => {\r\n  if (theme[name]) {\r\n    theme[name] = null\r\n  }\r\n}\r\n\r\nexport default MindMap\r\n","<template>\n  <div style=\"width: 100%; height: 100%\">\n    <div id=\"mindMapContainer\" style=\"width: 100%; height: 100%\"></div>\n  </div>\n</template>\n\n<script>\nimport MindMap from 'simple-mind-map'\n\nlet DATA = require('./mind-map-demo.json')\n\nexport default {\n  name: 'mindMap',\n  data() {\n    return {\n      dialogVisible: false,\n      currentStep: null,\n      chart: null,\n      selectedNodeId: null,\n    }\n  },\n  mounted() {\n    setTimeout(() => {\n      this.initMindMap()\n    }, 300)\n  },\n  methods: {\n    initMindMap() {\n      const mindMap = new MindMap({\n        el: document.getElementById('mindMapContainer'),\n        data: {\n          data: {\n            text: '',\n          },\n          children: [],\n        },\n        editable: false, // \n      })\n\n      setTimeout(() => {\n        let data = DATA\n        // rootsetFullData\n        if (data.root) {\n          mindMap.setFullData(data)\n        } else {\n          // setData\n          mindMap.setData(data)\n        }\n        // \n        mindMap.view.reset()\n\n        // \n        // mindMap.removePlugin(RichText)\n      }, 300)\n\n      mindMap.on('node_img_dblclick', node => {\n        console.log('')\n        console.log(node)\n      })\n    },\n  },\n}\n</script>\n\n<style>\n#mindMapContainer * {\n  margin: 0;\n  padding: 0;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=02c66d39\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=02c66d39&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {}\n}\n\nfunction cloneIfNecessary(value, optionsArgument) {\n    var clone = optionsArgument && optionsArgument.clone === true;\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n    var destination = target.slice();\n    source.forEach(function(e, i) {\n        if (typeof destination[i] === 'undefined') {\n            destination[i] = cloneIfNecessary(e, optionsArgument);\n        } else if (isMergeableObject(e)) {\n            destination[i] = deepmerge(target[i], e, optionsArgument);\n        } else if (target.indexOf(e) === -1) {\n            destination.push(cloneIfNecessary(e, optionsArgument));\n        }\n    });\n    return destination\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n    var destination = {};\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach(function(key) {\n            destination[key] = cloneIfNecessary(target[key], optionsArgument);\n        });\n    }\n    Object.keys(source).forEach(function(key) {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneIfNecessary(source[key], optionsArgument);\n        } else {\n            destination[key] = deepmerge(target[key], source[key], optionsArgument);\n        }\n    });\n    return destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n    var sourceIsArray = Array.isArray(source);\n    var targetIsArray = Array.isArray(target);\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge };\n    var sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n    if (!sourceAndTargetTypesMatch) {\n        return cloneIfNecessary(source, optionsArgument)\n    } else if (sourceIsArray) {\n        var arrayMerge = options.arrayMerge || defaultArrayMerge;\n        return arrayMerge(target, source, optionsArgument)\n    } else {\n        return mergeObject(target, source, optionsArgument)\n    }\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n    if (!Array.isArray(array) || array.length < 2) {\n        throw new Error('first argument should be an array with at least two elements')\n    }\n\n    // we are sure there are at least 2 values, so it is safe to have no initial value\n    return array.reduce(function(prev, next) {\n        return deepmerge(prev, next, optionsArgument)\n    })\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n"],"names":["render","_vm","this","_self","_c","_m","staticRenderFns","staticStyle","attrs","CONSTANTS","CHANGE_THEME","CHANGE_LAYOUT","MODE","READONLY","EDIT","LAYOUT","LOGICAL_STRUCTURE","LOGICAL_STRUCTURE_LEFT","MIND_MAP","ORGANIZATION_STRUCTURE","CATALOG_ORGANIZATION","TIMELINE","TIMELINE2","FISHBONE","FISHBONE2","RIGHT_FISHBONE","RIGHT_FISHBONE2","VERTICAL_TIMELINE","VERTICAL_TIMELINE2","VERTICAL_TIMELINE3","DIR","UP","LEFT","DOWN","RIGHT","KEY_DIR","SHAPE","RECTANGLE","DIAMOND","PARALLELOGRAM","ROUNDED_RECTANGLE","OCTAGONAL_RECTANGLE","OUTER_TRIANGULAR_RECTANGLE","INNER_TRIANGULAR_RECTANGLE","ELLIPSE","CIRCLE","MOUSE_WHEEL_ACTION","ZOOM","MOVE","INIT_ROOT_NODE_POSITION","TOP","BOTTOM","CENTER","LAYOUT_GROW_DIR","PASTE_TYPE","CLIP_BOARD","CANVAS","SCROLL_BAR_DIR","VERTICAL","HORIZONTAL","CREATE_NEW_NODE_BEHAVIOR","DEFAULT","NOT_ACTIVE","ACTIVE_ONLY","TAG_PLACEMENT","IMG_PLACEMENT","initRootNodePositionMap","layoutValueList","nodeDataNoStylePropList","ERROR_TYPES","READ_CLIPBOARD_ERROR","PARSE_PASTE_DATA_ERROR","CUSTOM_HANDLE_CLIPBOARD_TEXT_ERROR","LOAD_CLIPBOARD_IMAGE_ERROR","BEFORE_TEXT_EDIT_ERROR","EXPORT_ERROR","EXPORT_LOAD_IMAGE_ERROR","DATA_CHANGE_DETAIL_EVENT_ERROR","cssContent","noneRichTextNodeLineHeight","richTextSupportStyleList","View","constructor","opt","mindMap","scale","sx","sy","x","y","firstDrag","setTransformData","viewData","bind","keyCommand","addShortcut","enlarge","narrow","fit","event","on","e","isDisableDrag","mousedownEventPreventDefault","preventDefault","ctrlKey","metaKey","renderer","activeNodeList","length","execCommand","mousemoveOffset","transform","dirs","isTouchPad","customHandleMousewheel","mousewheelAction","mouseScaleCenterUseMousePosition","mousewheelMoveStep","mousewheelZoomActionReverse","disableMouseWheelZoom","translateRatio","clientX","clientY","toPos","cx","undefined","cy","includes","filter","dir","stepX","stepY","Math","abs","wheelDeltaX","wheelDeltaY","mx","my","translateXY","checkNeedMindMapInCanvas","getTransformData","draw","state","Object","keys","forEach","prop","emit","emitEvent","translateX","step","translateXTo","translateY","translateYTo","limitMindMapInCanvas","error","origin","translate","reset","scaleChange","translateChange","scaleRatio","minZoomRatio","max","scaleInCenter","maxZoomRatio","min","width","height","prevScale","ratio","dx","dy","setScale","getRbox","fitPadding","origTransform","rect","rbox","drawWidth","scaleX","drawHeight","scaleY","drawRatio","elWidth","elHeight","elRect","elRatio","newScale","flag","newWidth","newHeight","newRect","left","top","newX","newY","demonstrate","isInDemonstrate","isLimitMindMapInCanvasWhenHasScrollbar","isLimitMindMapInCanvas","scrollbar","right","bottom","getPositionLimit","centerXChange","initWidth","centerYChange","initHeight","centerX","centerY","scaleOffset","drawRect","rootRect","root","group","rootCenterOffset","layout","getRootCenterOffset","x2","y2","type","Event","EventEmitter","super","isLeftMousedown","isRightMousedown","isMiddleMousedown","mousedownPos","mousemovePos","bindFn","onBodyMousedown","onBodyClick","onDrawClick","onMousedown","onMousemove","onMouseup","onNodeMouseup","onMousewheel","onContextmenu","onSvgMousedown","onKeyup","onMouseenter","onMouseleave","document","body","addEventListener","svg","el","window","unbind","removeEventListener","off","which","useLeftKeySelectionRightKeyDrag","stopPropagation","deltaY","push","deltaX","customCheckIsTouchPad","randomUUID","crypto","getRandomValues","rnds8","Uint8Array","rng","Error","byteToHex","i","toString","slice","unsafeStringify","arr","offset","v4","options","buf","native","rnds","random","MersenneTwister","seed","N","M","MATRIX_A","UPPER_MASK","LOWER_MASK","mt","Array","mti","init_genrand","prototype","s","genrand_int32","mag01","kk","methods$1","names","registerMethods","name","m","isArray","_name","addMethodNames","getOwnPropertyNames","assign","getMethodsFor","getMethodNames","Set","_names","map","array","block","il","result","radians","d","PI","camelCase","toLowerCase","replace","g","toUpperCase","unCamelCase","capitalize","charAt","proportionalSize","element","box","bbox","getOrigin","o","ox","originX","oy","originY","condX","condY","html","xmlns","xlink","svgjs","globals","Base","elements","create","ns","createElementNS","makeInstance","isHTML","adopter","querySelector","wrapper","createElement","innerHTML","firstChild","removeChild","nodeOrNew","node","ownerDocument","defaultView","Node","adopt","instance","nodeName","Fragment","className","register","asRoot","getClass","did","eid","assignNewId","children","id","extend","modules","methods","key","wrapWithAttrCheck","fn","args","apply","attr","siblings","parent","position","index","next","prev","forward","p","add","remove","backward","front","back","before","after","insertBefore","insertAfter","numberAndUnit","hex","rgb","reference","transforms","whitespace","isHex","isRgb","isBlank","isNumber","isImage","delimiter","isPathLetter","classes","trim","split","hasClass","indexOf","addClass","join","removeClass","c","toggleClass","css","style","val","ret","arguments","cssText","t","cased","test","show","hide","visible","data","a","v","r","attributes","JSON","parse","stringify","remember","k","memory","forget","_memory","sixDigitHex","substring","componentHex","component","integer","round","bounded","is","object","space","getParameters","b","params","_a","_b","_d","z","h","l","cieSpace","hueToRgb","q","Color","inputs","init","isColor","color","mode","u","sin","pi","grey","cmyk","hsl","isGrey","delta","values","noWhitespace","exec","parseInt","hexParse","components","lab","xyz","lch","sqrt","atan2","dToR","cos","yL","xL","zL","ct","nm","rU","gU","bU","pow","bd","toArray","toHex","_clamped","toRgb","rV","gV","bV","string","r255","g255","b255","rL","gL","bL","xU","yU","zU","format","Point","clone","base","source","transformO","Matrix","isMatrixLike","f","point","screenCTM","inverseO","closeEnough","threshold","formatTransforms","flipBoth","flip","flipX","flipY","skewX","skew","isFinite","skewY","shear","theta","rotate","around","px","positionX","NaN","py","positionY","tx","ty","relative","rx","relativeX","ry","relativeY","fromArray","matrixMultiply","matrix","aroundO","translateO","lmultiplyO","decompose","determinant","ccw","thetaRad","st","lam","equals","other","comp","axis","flipO","scaleO","Element","matrixify","parseFloat","call","inverse","det","na","nb","nc","nd","ne","nf","lmultiply","multiply","multiplyO","rotateO","shearO","lx","skewO","tan","ly","current","transformer","valueOf","ctm","getCTM","isRoot","getScreenCTM","parser","nodes","size","path","parentNode","documentElement","addTo","isNulledBox","domContains","contains","Box","addOffset","pageXOffset","pageYOffset","w","isNulled","merge","xMin","Infinity","xMax","yMin","yMax","pts","getBox","getBBoxFn","retry","getBBox","getRBox","getBoundingClientRect","inside","viewbox","zoom","level","clientWidth","clientHeight","zoomX","zoomY","zoomAmount","Number","MAX_SAFE_INTEGER","List","each","fnOrMethodName","concat","reserved","baseFind","query","querySelectorAll","find","findOne","reduce","obj","listenerId","windowEvents","getEvents","n","getEventHolder","events","getEventTarget","clearEvents","listener","binding","bag","_svgjsListenerId","ev","namespace","dispatch","CustomEvent","detail","cancelable","dispatchEvent","EventTarget","j","defaultPrevented","fire","noop","timeline","duration","ease","delay","fill","stroke","opacity","SVGArray","toSet","SVGNumber","convert","unit","value","divide","number","isNaN","match","minus","plus","times","toJSON","hooks","registerAttrHook","nodeValue","last","curr","removeAttribute","getAttribute","_val","hook","leading","setAttributeNS","setAttribute","rebuild","Dom","removeNamespace","SVGElement","appendChild","childNodes","put","clear","hasChildNodes","lastChild","deep","assignNewIds","writeDataToDom","nodeClone","cloneNode","first","get","has","htmlOrFn","outerHTML","xml","matches","selector","matcher","matchesSelector","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","oMatchesSelector","putIn","removeElement","replaceChild","precision","factor","svgOrFn","outerSVG","words","text","textContent","wrap","xmlOrFn","outerXML","_this","well","fragment","createDocumentFragment","len","firstElementChild","dom","hasAttribute","setData","center","defs","dmove","move","parents","until","isSelector","sugar","prefix","extension","mat","angle","direction","radius","_element","getTotalLength","pointAt","getPointAtLength","font","untransform","str","kv","reverse","toParent","pCtm","toRoot","decomposed","cleanRelative","Container","flatten","ungroup","Defs","Shape","x$3","y$3","cx$1","cy$1","width$2","height$2","Ellipse","circled","ellipse","from","fx","fy","x1","y1","to","Gradient","targets","url","update","gradiented","gradient","Pattern","pattern","patternUnits","Image","load","callback","img","src","image","PointArray","maxX","maxY","minX","minY","points","pop","toLine","MorphArray","x$2","y$2","width$1","height$1","Line","plot","pointed","line","Marker","orient","ref","makeSetterGetter","marker","easing","pos","bezier","steps","stepPosition","jumps","beforeFlag","floor","jumping","Stepper","done","Ease","Controller","stepper","target","dt","recalculate","_duration","overshoot","_overshoot","eps","os","log","zeta","wn","Spring","velocity","acceleration","newPosition","PID","windup","integral","_windup","P","I","D","segmentParameters","L","H","V","C","S","Q","T","A","Z","pathHandlers","p0","mlhvqtcsaz","jl","makeAbsolut","command","segment","segmentComplete","startNewSegment","token","inNumber","finalizeNumber","pathLetter","lastCommand","small","isSmall","inSegment","pointSeen","hasExponent","finalizeSegment","absolute","segments","isArcFlag","isArc","isExponential","lastToken","pathParser","toAbsolute","arrayToString","PathArray","getClassForType","NonMorphable","morphableTypes","ObjectBag","Morphable","_stepper","_from","_to","_type","_context","_morphObj","at","morph","complete","_set","align","toConsumable","TransformBag","defaults","sortByKey","splice","defaultObject","toDelete","objOrArr","entries","Type","sort","shift","num","registerMorphableType","makeMorphable","context","mapper","Path","_array","move$2","size$1","Polygon","polygon","poly","Polyline","polyline","Rect","Queue","_first","_last","item","Animator","nextDraw","frames","timeouts","immediates","timer","performance","Date","frame","run","requestAnimationFrame","_draw","timeout","time","now","immediate","cancelFrame","clearTimeout","cancelImmediate","nextTimeout","lastTimeout","nextFrame","lastFrame","nextImmediate","makeSchedule","runnerInfo","start","runner","end","defaultSource","Timeline","timeSource","_timeSource","_startTime","_speed","_persist","_nextFrame","_paused","_runners","_runnerIds","_lastRunnerId","_time","_lastSourceTime","_lastStepTime","_step","_stepFn","_stepImmediate","active","finish","getEndTimeOfTimeline","pause","getEndTime","lastRunnerInfo","getLastRunnerInfo","lastDuration","lastStartTime","endTimes","getRunnerInfoById","_continue","persist","dtOrForever","play","updateTime","yes","currentSpeed","speed","positive","schedule","when","absoluteStartTime","endTime","unschedule","info","seek","stop","immediateStep","dtSource","dtTime","dtToStart","runnersLeft","finished","_timeline","Runner","_queue","_isDeclarative","_history","enabled","_lastTime","_reseted","transformId","_haveReversed","_reverse","_loopsDone","_swing","_wait","_times","_frameId","sanitise","swing","wait","addTransform","animate","loop","clearTransform","clearTransformsFromQueue","isTransform","during","queue","_prepareRunner","loops","loopDuration","loopsDone","relativeTime","whole","partial","swinging","backwards","uncliped","clipped","swingForward","forwards","progress","initFn","runFn","retargetFn","initialiser","retarget","initialised","running","_lastPosition","justStarted","justFinished","declarative","converged","_initialise","_run","needsIt","_rememberMorpher","method","morpher","caller","positionOrDt","allfinished","_tryRetarget","extra","FakeRunner","mergeWith","getRunnerTransform","mergeTransforms","runners","_transformationRunners","netTransform","RunnerArray","ids","clearBefore","deleteCnt","edit","newRunner","getByID","lastRunner","condition","by","_clearTransformRunnersBefore","currentRunner","_currentTransform","_addRunner","difference","styleAttr","nameOrAttrs","newToAttrs","newKeys","differences","addedFromAttrs","oldFromAttrs","oldToAttrs","newLevel","newPoint","affine","isMatrix","currentAngle","startTransform","setup","rTarget","rCurrent","possibilities","distances","shortest","affineParameters","newTransforms","_queueNumber","_queueNumberDelta","newTo","_queueObject","Svg","version","nested","Symbol","plain","_build","createTextNode","getComputedTextLength","x$1","y$1","move$1","ax","ay","amove","build","symbol","Text","_rebuild","self","blankLineOffset","fontSize","getComputedStyle","getPropertyValue","newLined","firstLine","nodeType","newLine","textable","Tspan","tspan","Circle","circle","ClipPath","unclip","clip","clipper","clipWith","ForeignObject","child","foreignObject","G","containerGeometry","link","unlink","linker","linkTo","Mask","unmask","mask","masker","maskWith","Stop","cssRule","rule","Style","addText","fontFamily","fontface","TextPath","track","pathArray","textPath","importNodes","Use","use","file","SVG","paddingX","paddingY","imgMaxWidth","imgMaxHeight","iconSize","lineWidth","lineColor","lineDasharray","lineFlow","lineFlowDuration","lineFlowForward","lineStyle","rootLineKeepSameInCurve","rootLineStartPositionKeepSameInCurve","lineRadius","showLineMarker","generalizationLineWidth","generalizationLineColor","generalizationLineMargin","generalizationNodeMargin","associativeLineWidth","associativeLineColor","associativeLineActiveWidth","associativeLineActiveColor","associativeLineDasharray","associativeLineTextColor","associativeLineTextFontSize","associativeLineTextLineHeight","associativeLineTextFontFamily","backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","nodeUseLineStyle","shape","fillColor","fontWeight","fontStyle","borderColor","borderWidth","borderDasharray","borderRadius","textDecoration","gradientStyle","startColor","endColor","startDir","endDir","lineMarkerDir","hoverRectColor","hoverRectRadius","textAlign","imgPlacement","tagPlacement","second","marginX","marginY","generalization","nodeSizeIndependenceList","checkIsNodeSizeIndependenceConfig","config","lineStyleProps","walk","beforeCallback","afterCallback","layerIndex","ancestors","_layerIndex","nodeIndex","bfsWalk","stack","isStop","cur","resizeImgSize","maxWidth","maxHeight","nRatio","mRatio","getStrWithBrFromHtml","simpleDeepClone","copyRenderTree","tree","removeActiveState","isActive","generalizationList","formatGetNodeGeneralization","copyNodeTree","removeId","rootData","nodeData","uid","createUid","throttle","ctx","setTimeout","debounce","asyncRun","taskList","degToRad","deg","camelCaseToHyphen","nextTick","pending","timerFunc","handle","MutationObserver","counter","observer","textNode","observe","characterData","checkNodeOuter","offsetX","offsetY","offsetLeft","offsetTop","isOuter","getTextFromHtmlEl","getTextFromHtml","getImageSize","Promise","resolve","onload","onerror","uuidv4","loadImage","imgFile","reject","fr","FileReader","readAsDataURL","async","getType","isUndef","checkIsRichTextEl","checkIsRichText","isWhite","String","isTransparent","getVisibleColorFromTheme","themeConfig","list","removeRichTextStyesEl","removeRichTextStyes","formulaList","placeholder","htmlEscape","els","getObjectChangedProps","oldObject","newObject","res","oldVal","newVal","checkIsNodeStyleDataKey","isNodeNotNeedRenderData","mergerIconList","existingItem","newObj","existingObj","icon","getTopAncestorsFomNodeList","isAncestor","parseAddGeneralizationNodeList","cache","uidToParent","pUid","getIndexInBrothers","rangeList","range","focusInput","selection","getSelection","createRange","selectNodeContents","collapse","removeAllRanges","addRange","selectAllInput","addDataToAppointNodes","appointNodes","alreadyIsRichText","richText","resetRichText","createUidForAppointNodes","createNewId","handleGeneralization","gNode","formatDataToArray","getNodeDataIndex","findIndex","getNodeIndexInNodeList","nodeList","generateColorByContent","hash","charCodeAt","RegExp","isSameObject","keysa","keysb","isSame","itema","itemb","typea","typeb","checkClipboardReadEnable","navigator","clipboard","read","setDataToClipboard","writeText","getDataFromClipboard","items","clipboardItem","types","blob","removeFromParentNodeData","checkNodeListIsEqual","list1","list2","createSmmFormatData","simpleMindMap","checkSmmFormatData","smmData","parsedData","isSmm","handleInputPasteText","rangeCount","deleteFromDocument","clipboardData","getData","textArr","br","getRangeAt","insertNode","collapseToEnd","transformTreeDataToObject","handleGetSvgDataExtraContent","addContentToHeader","addContentToFooter","cssTextList","header","headerHeight","footer","footerHeight","HTMLElement","addXmlns","createForeignObjectNode","getNodeTreeBoundingRect","excludeSelf","excludeGeneralization","_generalizationList","generalizationNode","getOnfullscreEnevt","requestFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","sortNodeList","sortIndex","mergeTheme","dest","arrayMerge","destinationArray","sourceArray","getNodeRichTextStyles","backgroundStyleProps","shapeStyleProps","setBackgroundStyle","cacheStyle","removeBackgroundStyle","_markerPath","_marker","_gradient","defaultConfig","useRoot","isGeneralization","getSelfStyle","addToEffectiveStyles","getStyle","styles","painter","effectiveStyles","nodeDraw","dasharray","domText","fontSizeScale","tagText","tagRect","iconNode","enableMarker","childNode","customHandleLine","showMarker","childNodeStyle","createMarker","lineDraw","generalizationLine","iconBtn","node2","fillNode","fontColor","expandBtnStyle","strokeColor","isShowExpandNum","hasCustomStyle","getCustomStyle","customStyle","hoverNode","onRemove","getShapePadding","getShape","defaultPaddingX","defaultPaddingY","actWidth","actHeight","actOffset","extendShape","getShapeFromExtendList","getPadding","extendShapeList","createShape","createRect","createDiamond","createParallelogram","createRoundedRectangle","createOctagonalRectangle","createOuterTriangularRectangle","createInnerTriangularRectangle","createEllipse","createCircle","getNodeSize","getBorderWidth","createPath","pathStr","customCreateNodePath","createPolygon","customCreateNodePolygon","halfWidth","halfHeight","topX","topY","rightX","rightY","bottomX","bottomY","leftX","leftY","getPaddingVale","shapePadding","shapeList","formatGetGeneralization","checkHasGeneralization","checkHasSelfGeneralization","getGeneralizationNodeIndex","createGeneralizationNode","MindMapNode","inserting","generalizationBelongNode","addNodeToActiveList","_generalizationNodeWidth","_generalizationNodeHeight","updateGeneralization","removeGeneralization","renderGeneralization","forceRender","updateGeneralizationData","childrenLength","getChildrenLength","newList","removeNodeFromActiveList","hideGeneralization","showGeneralization","setGeneralizationOpacity","handleGeneralizationMouseenter","belongNode","generalizationData","highlightNode","handleGeneralizationMouseleave","closeHighlightNode","open","close","imgAdjust","quickCreateChild","createExpandNodeContent","_openExpandNode","expandBtnSize","expandBtnIcon","btnsSvg","_closeExpandNode","_fillExpandNode","sumNode","total","updateExpandBtnNode","expand","_lastExpandBtnType","_expandBtn","expandBtnNumHandler","count","updateExpandBtnPos","renderExpandBtn","cursor","_showExpandBtn","removeExpandBtn","showExpandBtn","alwaysShowExpandBtn","notShowExpandBtn","hideExpandBtn","_isMouseenter","setText","setImage","imgData","setIcon","icons","setHyperlink","title","setNote","note","setAttachment","setTag","tag","setShape","setStyle","setStyles","hyperlink","attachment","nodeIconList","getNodeIconListIcon","extendIconList","iconList","typeData","typeName","measureText","defaultTagStyle","createImgNode","renderTree","imgMap","imgSize","getImgShowSize","SVGImage","defaultNodeImage","imgEl","custom","createIconNode","_data","iconsSvg","createRichTextNode","specifyText","hasCustomWidth","textAutoWrapWidth","emptyTextMeasureHeightText","customTextWidth","recoverText","nodeTextStyleList","nodeRichTextStyles","commonCaches","measureRichtextNodeTextSizeEl","div","lineHeight","classList","elTmp","ceil","foreignObjectStyle","nodeContent","needUpdate","isMultiLine","lines","tmpNode","tmpBbox","createHyperlinkNode","hyperlinkTitle","customHyperlinkJump","hyperlinkIcon","getNodeIconSize","createTagNode","tagData","maxTag","tagsColorMap","textWidth","textHeight","rectWidth","createNoteNode","noteIcon","customNoteContentShow","noteEl","nodeNoteTooltipZIndex","targetNode","customInnerElsAppendTo","innerText","getNoteContentPosition","display","createAttachmentNode","attachmentUrl","attachmentName","attachmentIcon","view","iconSizeAddScale","_noteData","measureCustomNodeContentSize","content","measureCustomNodeContentSizeEl","isUseCustomNodeContent","_customNodeContent","renderExpandBtnPlaceholderRect","_unVisibleRectRegionNode","renderExpandBtnRect","clearExpandBtnPlaceholderRect","updateExpandBtnPlaceholderRect","needRerenderExpandBtnPlaceholderRect","initDragHandle","checkEnableDragModifyNodeWidth","_dragHandleNodes","dragHandleWidth","dragHandleMousedownX","isDragHandleMousedown","dragHandleIndex","dragHandleMousedownCustomTextWidth","dragHandleMousedownBodyCursor","dragHandleMousedownLeft","onDragMousemoveHandle","onDragMouseupHandle","minNodeTextModifyWidth","maxNodeTextModifyWidth","customCreateNodeContent","useCustomContent","_rectInfo","textContentWidth","reRender","ignoreUpdateCustomTextWidth","createDragHandleNode","_textData","updateDragHandle","createUserListNode","cooperate","_userListGroup","createTextAvatar","avatarSize","cooperateStyle","isMore","createImageAvatar","avatar","updateUserListNode","userList","maxShowCount","addUser","userInfo","removeUser","emptyUser","initQuickCreateChildBtn","_quickCreateChildBtn","_showQuickCreateChildBtn","showQuickCreateChildBtn","quickCreateChildBtnIcon","customQuickCreateChildBtnClick","removeQuickCreateChildBtn","hideQuickCreateChildBtn","getImgTextMarin","imgWidth","imgHeight","imgTextMargin","getTagContentSize","maxTagHeight","_tagData","sum","getNodeRect","textContentMargin","tagIsBottom","imgContentWidth","imgContentHeight","textContentHeight","tagContentWidth","tagContentHeight","spaceCount","_imgData","nodeInnerPrefixList","itemData","_prefixData","_iconData","_hyperlinkData","totalTagWidth","_attachmentData","_postfixData","nodeInnerPostfixList","textContentWidthWithoutTag","_width","_height","shapePaddingX","shapePaddingY","shapeInstance","hoverRectPadding","openRealtimeRenderOnNodeTextEdit","addCustomContentToNode","halfBorderWidth","shapeNode","addHoverNode","textContentHeightWithTag","hasTagContent","textContentNested","textContentOffsetX","iconNested","iconLeft","oldX","textEdit","getCurrentEditNode","tagNested","tagLeft","bboxWidth","bboxHeight","_customContentAddToNodeAdd","handleData","nodeDataSnapshot","_left","_top","customLeft","customTop","isDrag","noteContentIsShow","_lines","isMultipleChoice","needLayout","isHide","proto","getPrototypeOf","bindEvent","nodeLayoutMethods","nodeGeneralizationMethods","nodeExpandBtnMethods","nodeExpandBtnPlaceholderRectMethods","nodeCommandWrapsMethods","nodeCreateContentsMethods","nodeCooperateMethods","nodeModifyWidthMethods","isShowCreateChildBtnIcon","quickCreateChildBtnMethods","getSize","resetWhenDelete","createNodeData","recreateTypes","createNodePrefixContent","createNodePostfixContent","typeList","createTypes","createContent","postfix","changed","bindGroupEvent","onlyOneEnableActiveNodeOnCooperate","readonly","enableCtrlKeyNodeSelection","emitNodeActiveEvent","select","hasSelectRange","clearActiveNodeList","deactivate","updateNodeActiveClass","getNodePosInClient","drawTransform","checkIsInClient","padding","nx","ny","sizeChange","updateNodeByActive","renderLine","openPerformance","performanceConfig","removeNodeWhenOutCanvas","removeSelf","renderChild","removeLine","destroy","setOpacity","hideChildren","showChildren","startDrag","endDrag","childrenLen","nodeIsRemoveAllLines","styleLine","hasCustomPosition","ancestorHasCustomPosition","ancestorHasGeneralization","addChildren","enableInheritAncestorLineStyle","getName","getRainbowLineColor","rainbowLines","getNodeColor","isParent","isBrother","getParentSelfStyle","getSelfInhertStyle","getPureData","getAncestorNodes","unshift","getRect","getRectInSvg","highlight","closeHighlight","fakeClone","newNode","createSvgTextNode","getSvgObjects","enableDragModifyNodeWidth","Lru","pool","Map","isExist","delete","set","lru","maxNodeCacheCount","rootNodeCenterOffset","doLayout","cacheNode","nodeCache","checkIsNeedResizeSources","checkHasRenderSource","checkIsLayerTypeChange","oldIndex","newIndex","checkIsLayoutChangeRerenderExpandBtnPlaceholderRect","checkIsNodeDataChange","lastData","curData","checkNodeFixChange","nodeInnerPrefixData","nodeInnerPostfixData","isNodeInnerPrefixChange","updateNodeData","isChange","isNodeInnerPostfixChange","createNode","_node","isLayerTypeChange","isNodeInnerFixChange","isResizeSource","isNodeDataChange","checkGetGeneralizationChange","lastNodeCache","newUid","findActiveNodeIndex","oldData","newData","formatPosition","nodeSize","formatInitRootNodePosition","setNodeCenter","initRootNodePosition","tmpNode2","updateChildren","updateChildrenPro","props","getNodeAreaWidth","withGeneralization","widthArr","totalGeneralizationNodeWidth","quadraticCurvePath","cubicBezierPath","cx1","cy1","cx2","cy2","computeNewPoint","createFoldLine","radiusPath","isOneLine","toFixed","cStart","cEnd","getMarginX","getMarginY","getNodeWidthWithGeneralization","getNodeHeightWithGeneralization","getNodeBoundaries","_right","_bottom","generalizationWidth","generalizationHeight","getChildrenBoundaries","startIndex","endIndex","getNodeGeneralizationRenderBoundaries","getNodeActChildrenLength","setLineStyle","transformPath","customTransformNodeLinePath","LogicalStructure","isUseLeft","task","computedBaseValue","computedTopValue","adjustTopValue","childrenAreaHeight","generalizationNodeHeight","childrenAreaHeight2","totalTop","updateBrothers","addHeight","childrenList","_index","_offset","renderLineCurve","renderLineDirect","renderLineStraight","s1","nodeUseLineStyleOffset","nodeUseLineStylePath","btn","_x","_y","MindMap","leftChildrenAreaHeight","rightChildrenAreaHeight","leftLen","rightLen","leftChildrenAreaHeight2","rightChildrenAreaHeight2","baseTop","leftTotalTop","rightTotalTop","leftDifference","rightDifference","leftAddHeight","rightAddHeight","_s","isLeft","CatalogOrganization","computedLeftTopValue","adjustLeftTopValue","childrenAreaWidth","totalLeft","areaWidth","updateBrothersLeft","totalHeight","updateBrothersTop","childrenWidth","addWidth","minx","maxx","line1","lin2","maxy","_isLeft","_isXCenter","OrganizationStructure","computedLeftValue","adjustLeftValue","generalizationNodeWidth","childrenAreaWidth2","getNodeAreaHeight","totalAddWidth","prevBother","miny","VerticalTimeline","nodeRight","nodeYCenter","itemLeft","itemYCenter","nodeLeft","itemRight","lineLength","fishboneDeg","startLeft","childIndent","adjustLeftTopValueBefore","adjustLeftTopValueAfter","nodeTotalHeight","indent","totalHeight2","hasChildren","Fishbone","fishTail","headRatio","tailRatio","paddingXRatio","fishHeadPathStr","fishTailPathStr","beforeChange","isFishbone2","onCheckUpdateFishTail","unBindEvent","addShape","addFishTail","updateFishTailPosition","exist","tailHeight","tailWidth","styleFishTail","hasShapeProp","removeFishTail","topOffset","checkIsTop","heightOffsetRatio","topTotalLeft","bottomTotalLeft","utils","nodeLineX","nodeHalfTop","lineEndX","removeShape","SMM_NODE_EDIT_WRAP","TextEdit","currentNode","textEditNode","showTextEdit","cacheEditingText","hasBodyMousedown","textNodePaddingX","textNodePaddingY","isNeedUpdateTextEditNode","addEditNodeClass","onScale","onKeydown","isInserting","hideEditTextBox","isEndNodeTextEditOnClickOuter","enableAutoEnterTextEditWhenKeydown","lastOpt","onOpenRealtimeRenderOnNodeTextEditConfigUpdate","isShowTextEdit","updateTextEditNode","checkIsAutoEnterTextEditKey","isFromKeyDown","keyCode","hasCombinationKey","registerTmpShortcut","setIsShowTextEdit","stopCheckInSvg","recoveryCheckInSvg","isFromScale","currentEditNode","beforeTextEdit","isShow","errorHandler","showEditText","showEditTextBox","background","getBackground","boxShadow","getEditText","nodeTextEditZIndex","selectTextOnEnterEditText","autoEmptyTextWhenKeydownEnterEdit","emitTextChangeEvent","textLines","zIndex","minWidth","minHeight","bgColor","removeTextEditEl","hideEditText","layouts","Render","isRendering","hasWaitRendering","renderSourceList","renderCallbackList","emitNodeActiveEventTimer","renderTimer","beingCopyData","highlightBoxNode","highlightBoxNodeStyle","lastActiveNodeList","setLayout","registerCommands","registerShortcutKeys","clearActiveNodeListOnDrawClick","enableDblclickBackToRootNode","setRootNodeCenter","onViewDataChange","onNodeTextEditChange","forceLoadNode","selectAll","insertMultiNode","insertChildNode","insertMultiChildNode","insertParentNode","upNode","downNode","moveUpOneLevel","moveNodeTo","removeNode","removeCurrentNode","pasteNode","cutNode","setNodeStyle","setNodeStyles","setNodeActive","clearActiveNode","setNodeExpand","expandAllNode","unexpandAllNode","expandToLevel","setNodeData","setNodeText","setNodeImage","setNodeIcon","setNodeHyperlink","setNodeNote","setNodeAttachment","setNodeTag","insertFormula","addGeneralization","setNodeCustomPosition","resetLayout","setNodeShape","goTargetNode","removeCustomStyles","removeAllNodeCustomStyles","toggleActiveExpand","startTextEdit","endTextEdit","copy","cut","paste","eventType","isTrueClick","save","restore","clearCache","addRenderParams","onRenderEnd","_render","resetUnExpandNodeStyle","notEmitBeforeNodeActiveEvent","activeMultiNode","cancelActiveMultiNode","backForward","getNewNodeBehavior","openEdit","handleMultiNodes","createNewNodeBehavior","focusNewNode","appointData","appointChildren","defaultInsertSecondLevelNodeText","defaultInsertBelowSecondLevelNodeText","isRichText","hasRichTextPlugin","isOneLayer","newNodeData","newNodeList","childList","appointNode","insertIndex","grandpa","parentIndex","_handleRemoveCustomStyles","hasCustomStyles","reRenderNodeCheckChange","_hasCustomStyles","copyNode","disabledClipboard","copyData","handlePaste","originalEvent","getAsFile","handleIsSplitByWrapOnPasteCreateNewNode","handleNodePasteImg","onlyPasteTextWhenHasImgAndText","useDefault","customHandleClipboardText","checkRes","then","catch","insertTo","nodeParent","nodeBorthers","existParent","existBorthers","existIndex","needActiveNode","isAppointNodes","getNextActiveNode","deleteNodeGeneralization","deleteList","deleteNodeActive","broList","toNode","setNodeDataRender","hasLineStyleProps","_walk","enableExpand","isSetRootNodeCenter","enableUnExpand","toggleNodeExpand","imageTitle","imageSize","formula","insertFormulaToNode","needRender","defaultGeneralizationText","item2","expandToNodeUid","findNodeByUid","moveNodeToCenter","notRender","resetScale","resetScaleOnMoveNodeToCenter","nodeCenterX","nodeCenterY","targetX","targetY","parentsList","lastNode","otherDraw","default","defaultTheme","Backspace","Tab","Enter","Shift","Control","Alt","CapsLock","Esc","Spacebar","PageUp","PageDown","End","Home","Insert","Left","Up","Right","Down","Del","NumLock","Cmd","CmdFF","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","keyMap","KeyCommand","shortcutMap","shortcutMapCache","isPause","isInSvg","isStopCheckInSvg","defaultEnableCheck","extendKeyMap","code","removeKeyMap","recovery","enableShortcutOnlyWhenMouseInSvg","editNodeClassList","beforeShortcutRun","customCheckEnableShortcut","checkFn","checkKey","getOriginEventCodeArr","getKeyCodeArr","altKey","shiftKey","keyArr","removeShortcut","getShortcutFn","Command","commands","history","activeHistoryIndex","originAddHistory","addHistory","addHistoryTime","clearHistory","lastDataStr","getCopyData","dataStr","emitDataUpdatesEvent","maxHistoryCount","smmVersion","pkg","removeDataUid","eventName","listenerCount","lastDataObj","dataObj","walkReplace","childUid","action","BatchExecution","flush","replaceTask","fns","defaultOpt","theme","console","addHistoryOnInit","selectTranslateStep","selectTranslateLimit","enableFreeDrag","autoMoveWhenMouseInEdgeOnDrag","dragMultiNodeRectConfig","dragPlaceholderRectFill","dragPlaceholderLineConfig","dragOpacityConfig","cloneNodeOpacity","beingDragNodeOpacity","handleDragCloneNode","beforeDragEnd","beforeDragStart","watermarkConfig","onlyExport","lineSpacing","textSpacing","textStyle","belowNode","exportPaddingX","exportPaddingY","resetCss","minExportImgCanvasScale","handleBeingExportSvg","maxCanvasSize","defaultAssociativeLineText","associativeLineIsAlwaysAboveNode","associativeLineInitPointsPosition","enableAdjustAssociativeLinePoints","beforeAssociativeLineConnection","disableTouchZoom","minTouchZoomScale","maxTouchZoomScale","isOnlySearchCurrentRenderNodes","beforeCooperateUpdate","rainbowLinesConfig","colorsList","demonstrateConfig","enableEditFormulaInRichTextEdit","katexFontPath","getKatexOutputType","transformRichTextOnEnterEdit","beforeHideRichTextEdit","outerFramePaddingX","outerFramePaddingY","defaultOuterFrameText","onlyPainterNodeCustomStyles","beforeDeleteNodeImg","imgResizeBtnSize","minImgResizeWidth","minImgResizeHeight","maxImgResizeWidthInheritTheme","maxImgResizeWidth","maxImgResizeHeight","customDeleteBtnInnerHTML","customResizeBtnInnerHTML","instanceCount","handleOpt","getElRectInfo","cssEl","cssTextMap","initContainer","initTheme","initCache","pluginList","plugin","preload","initPlugin","batchExecution","addCss","createAssociativeLineDraw","associativeLineDraw","clearDraw","appendCss","removeCss","removeAppendCss","joinCss","head","checkEditNodeClassIndex","deleteEditNodeClass","resize","oldWidth","oldHeight","setTheme","getTheme","setThemeConfig","changedConfig","getCustomThemeConfig","getThemeConfig","getConfig","updateConfig","getLayout","updateData","setFullData","template","withConfig","export","doExport","setMode","isReadonly","getSvgData","ignoreWatermark","origWidth","origHeight","clipData","fixHeight","hasWatermark","watermark","isInExport","needReDrawWatermark","onResize","defs2","def","defIndex","def2","children2","child2","svgHTML","addPlugin","hasPlugin","usePlugin","removePlugin","instanceName","beforePluginRemove","pluginOpt","beforePluginDestroy","_extendNodeDataNoStylePropList","extendNodeDataNoStylePropList","resetNodeDataNoStylePropList","defineTheme","removeTheme","DATA","require","dialogVisible","currentStep","chart","selectedNodeId","mounted","initMindMap","getElementById","editable","hasOwnProperty","Events","EE","once","addListener","emitter","TypeError","evt","_events","_eventsCount","clearEvent","__proto__","eventNames","getOwnPropertySymbols","listeners","handlers","ee","a1","a2","a3","a4","a5","removeListener","removeAllListeners","prefixed","module","exports","isMergeableObject","isNonNullObject","isSpecial","stringValue","isReactElement","canUseSymbol","for","REACT_ELEMENT_TYPE","$$typeof","emptyTarget","cloneIfNecessary","optionsArgument","deepmerge","defaultArrayMerge","destination","mergeObject","sourceIsArray","targetIsArray","sourceAndTargetTypesMatch","all","deepmerge_1"],"sourceRoot":""}